<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Examples</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --border: #e0e0e0;
      --accent: #2b6cb0;
      --bg: #f8fafc;
      --text: #1f2937;
    }

    * { box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: white;
      line-height: 1.6;
      margin: 0;
      padding: 2rem 1rem;
    }

    main {
      max-width: 800px;
      margin: 0 auto;
    }

    h1 {
      margin: 0 0 1rem;
      font-size: 1.75rem;
    }

    p.lead {
      margin: 0 0 1.25rem;
      color: #374151;
    }

    .example {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .example h2 {
      margin: 0 0 0.75rem;
      font-size: 1.125rem;
    }

    /* Shared styling for controlled content container */
    .details {
      border-left: 3px solid var(--accent);
      padding: 0.75rem 0.75rem 0.75rem 1rem;
      border-radius: 6px;
      background: #ffffff;
      box-shadow: 0 0 0 2px rgba(43, 108, 176, 0.06) inset;
      margin-top: 0.5rem;
    }

    /* Native <details> widget styling */
    details.details {
      padding: 0;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: #fff;
      box-shadow: none;
    }

    details.details > summary {
      cursor: pointer;
      padding: 0.75rem 1rem;
      font-weight: 600;
      list-style: none;
      user-select: none;
      position: relative;
    }

    details.details > summary::marker { display: none; }
    details.details > summary::after {
      content: "▸";
      position: absolute;
      right: 1rem;
      transition: transform 160ms ease;
    }

    details.details[open] > summary::after {
      transform: rotate(90deg);
    }

    details.details > .content {
      padding: 0.5rem 1rem 1rem;
    }

    /* Custom toggle button */
    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #fff;
      color: #111827;
      font-weight: 600;
      cursor: pointer;
      transition: box-shadow 160ms ease, transform 80ms ease;
    }

    .toggle:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px rgba(43, 108, 176, 0.35);
    }

    .toggle:active {
      transform: translateY(0.5px);
    }

    .toggle .chevron {
      font-size: 0.95em;
      transition: transform 160ms ease;
    }

    .toggle[aria-expanded="true"] .chevron {
      transform: rotate(90deg);
    }

    /* Smooth expand/collapse (optional) */
    .animated {
      overflow: hidden;
      transition: grid-template-rows 200ms ease, opacity 200ms ease;
      display: grid;
      grid-template-rows: 0fr;
      opacity: 0;
    }
    .animated > .inner {
      min-height: 0;
    }
    .animated[aria-hidden="false"] {
      grid-template-rows: 1fr;
      opacity: 1;
    }

    /* Small utility text */
    .hint {
      font-size: 0.875rem;
      color: #6b7280;
      margin-top: 0.5rem;
    }

    footer {
      margin-top: 2rem;
      font-size: 0.875rem;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <main>
    <h1>Expand/Collapse Widgets</h1>
    <p class="lead">Examples showing native and custom expand/collapse interactions. Each widget is wrapped in an element with the "example" class, and the controlled content container has a "details" class.</p>

    <div class="example">
      <h2>Native Details Element</h2>
      <details class="details">
        <summary>Project Overview</summary>
        <div class="content">
          <p>This section uses the built-in HTML details/summary pattern. It provides accessible expand/collapse behavior without custom JavaScript.</p>
          <ul>
            <li>Toggle by clicking or pressing Enter/Space on the summary.</li>
            <li>Preserves state across page reloads in some browsers (if open).</li>
            <li>Keyboard and screen-reader friendly by default.</li>
          </ul>
        </div>
      </details>
      <p class="hint">The container for the controlled content is the <details> element itself, and it has the "details" class.</p>
    </div>

    <div class="example">
      <h2>Button-Controlled Panel</h2>
      <button id="btn-1" class="toggle" aria-expanded="false" aria-controls="panel-1">
        <span class="chevron">▸</span>
        Show more details
      </button>
      <div id="panel-1" class="details animated" role="region" aria-labelledby="btn-1" aria-hidden="true">
        <div class="inner">
          <p>This panel is controlled by a button using ARIA attributes for accessibility.</p>
          <ol>
            <li>The button toggles <code>aria-expanded</code> to reflect state.</li>
            <li>The panel toggles <code>aria-hidden</code> and smoothly animates open/closed.</li>
            <li>The panel is labeled by the button via <code>aria-labelledby</code>.</li>
          </ol>
        </div>
      </div>
      <p class="hint">The content container has the "details" class and is hidden/shown via JavaScript.</p>
    </div>

    <div class="example">
      <h2>Multiple Sections</h2>
      <p class="hint">Each section below is its own widget with a "details" content container.</p>

      <button id="btn-a" class="toggle" aria-expanded="false" aria-controls="panel-a">
        <span class="chevron">▸</span>
        Frequently Asked Questions
      </button>
      <div id="panel-a" class="details animated" role="region" aria-labelledby="btn-a" aria-hidden="true">
        <div class="inner">
          <p>Answers to common questions:</p>
          <ul>
            <li>How do I reset my password?</li>
            <li>Where can I find documentation?</li>
            <li>How do I contact support?</li>
          </ul>
        </div>
      </div>

      <button id="btn-b" class="toggle" aria-expanded="false" aria-controls="panel-b" style="margin-top:0.5rem">
        <span class="chevron">▸</span>
        Release Notes
      </button>
      <div id="panel-b" class="details animated" role="region" aria-labelledby="btn-b" aria-hidden="true">
        <div class="inner">
          <p>Latest updates:</p>
          <ul>
            <li>Performance improvements and bug fixes.</li>
            <li>New keyboard shortcuts.</li>
            <li>Accessibility enhancements.</li>
          </ul>
        </div>
      </div>
    </div>

    <footer>
      Tip: You can style the "details" containers differently across themes while keeping the interaction accessible.
    </footer>
  </main>

  <script>
    // Toggle handler for .toggle buttons controlling .details panels
    document.addEventListener('click', function (e) {
      const btn = e.target.closest('button.toggle');
      if (!btn) return;

      const panelId = btn.getAttribute('aria-controls');
      const panel = document.getElementById(panelId);
      if (!panel) return;

      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));

      // For animated panels, use aria-hidden to control state
      panel.setAttribute('aria-hidden', String(expanded));
    });

    // Optional: open details with hash matching id on load
    (function () {
      const id = location.hash.slice(1);
      if (!id) return;
      const target = document.getElementById(id);
      if (!target) return;

      // If it's a native <details>, open it
      if (target.tagName.toLowerCase() === 'details') {
        target.setAttribute('open', '');
        return;
      }

      // If it's a custom panel, expand and sync the controller
      const controller = document.querySelector('[aria-controls="' + id + '"]');
      if (controller && controller.classList.contains('toggle')) {
        controller.setAttribute('aria-expanded', 'true');
        target.setAttribute('aria-hidden', 'false');
      }
    })();
  </script>
</body>
</html>