<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widgets Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #ffffff;
      --fg: #1f2937;
      --muted: #64748b;
      --border: #e5e7eb;
      --accent: #2563eb;
      --focus: #93c5fd;
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.5;
    }
    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 24px;
    }
    h1 {
      font-size: 1.75rem;
      margin: 0 0 16px;
    }
    p.lead {
      color: var(--muted);
      margin: 0 0 24px;
    }

    .example {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin: 20px 0;
      background: #fafafa;
    }
    .example h2 {
      font-size: 1.1rem;
      margin: 0 0 10px;
    }

    /* Native <details> styling */
    details.details {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 8px 12px;
    }
    details.details + details.details {
      margin-top: 10px;
    }
    details.details summary {
      cursor: pointer;
      list-style: none;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      outline: none;
    }
    details.details summary::-webkit-details-marker {
      display: none;
    }
    details.details summary:focus-visible {
      outline: 3px solid var(--focus);
      border-radius: 6px;
    }
    .chevron {
      display: inline-block;
      width: 14px;
      height: 14px;
      border-right: 2px solid var(--muted);
      border-bottom: 2px solid var(--muted);
      transform: rotate(-45deg);
      transition: transform 160ms ease;
      margin-left: 2px;
    }
    details.details[open] .chevron {
      transform: rotate(45deg);
    }
    details.details .content {
      margin-top: 10px;
      color: #374151;
    }

    /* Custom disclosure (button + div.details) */
    .disclosure {
      display: block;
    }
    .disclosure .toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 12px;
      cursor: pointer;
      font-weight: 600;
      color: var(--fg);
    }
    .disclosure .toggle:hover {
      background: #f8fafc;
    }
    .disclosure .toggle:focus-visible {
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }
    .disclosure .toggle .chevron {
      transition: transform 160ms ease;
    }
    .disclosure .toggle[aria-expanded="true"] .chevron {
      transform: rotate(45deg);
    }
    .details {
      margin-top: 10px;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: #fff;
      padding: 12px;
      color: #374151;
    }
    .details[hidden] {
      display: none;
    }

    code {
      background: #f1f5f9;
      border-radius: 6px;
      padding: 2px 6px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95em;
    }

    footer {
      color: var(--muted);
      font-size: 0.95rem;
      margin-top: 28px;
    }
  </style>
</head>
<body>
  <main>
    <h1>Expand/Collapse Widgets</h1>
    <p class="lead">Two approaches: a native Details/Summary element and an accessible custom disclosure using a button.</p>

    <div class="example">
      <h2>Native Details/Summary</h2>
      <details class="details">
        <summary><span class="chevron" aria-hidden="true"></span>Shipping &amp; Returns</summary>
        <div class="content">
          <p>Orders ship within 2â€“3 business days. Returns accepted within 30 days of delivery for unused items in original packaging.</p>
          <ul>
            <li>Free standard shipping for orders over $50</li>
            <li>Prepaid return labels for domestic orders</li>
            <li>Contact support for international returns</li>
          </ul>
        </div>
      </details>

      <details class="details">
        <summary><span class="chevron" aria-hidden="true"></span>Warranty</summary>
        <div class="content">
          <p>All electronics include a 2-year limited warranty covering manufacturing defects.</p>
          <p>Keep your receipt and register your product to streamline support.</p>
        </div>
      </details>
    </div>

    <div class="example">
      <h2>Accessible Custom Disclosure</h2>
      <div class="disclosure">
        <button class="toggle" aria-expanded="false" aria-controls="faq-1" id="btn-faq-1">
          <span class="chevron" aria-hidden="true"></span>
          What is your refund policy?
        </button>
        <div id="faq-1" class="details" role="region" aria-labelledby="btn-faq-1" hidden>
          <p>We offer a 30-day, no-questions-asked refund on physical goods. Digital goods may be refundable pending license deactivation.</p>
          <p>To start a return:</p>
          <ol>
            <li>Visit <a href="#">orders</a> and select the item.</li>
            <li>Choose <strong>Request a refund</strong>.</li>
            <li>Print the prepaid label and drop off at a carrier.</li>
          </ol>
        </div>
      </div>

      <div class="disclosure" style="margin-top: 12px;">
        <button class="toggle" aria-expanded="false" aria-controls="faq-2" id="btn-faq-2">
          <span class="chevron" aria-hidden="true"></span>
          Do you ship internationally?
        </button>
        <div id="faq-2" class="details" role="region" aria-labelledby="btn-faq-2" hidden>
          <p>Yes, we ship to over 40 countries. Duties and taxes may be calculated at checkout or upon delivery depending on destination.</p>
          <p>For faster delivery, choose an express option.</p>
        </div>
      </div>
    </div>

    <footer>
      Tip: All controlled content is wrapped in a container with the "details" class; each widget is wrapped in a div with the "example" class.
    </footer>
  </main>

  <script>
    (function () {
      // Toggle custom disclosures
      document.querySelectorAll('.disclosure .toggle').forEach(function (btn) {
        var contentId = btn.getAttribute('aria-controls');
        var content = document.getElementById(contentId);

        if (!content) return;

        btn.addEventListener('click', function () {
          var expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!expanded));
          content.hidden = expanded;

          if (!expanded) {
            // Move focus to first focusable element inside, if any
            var focusable = content.querySelector('a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])');
            if (focusable) {
              // Defer to ensure visibility is updated
              setTimeout(function () { focusable.focus(); }, 0);
            }
          }
        });

        // Allow Escape to collapse when focus is inside the region
        content.addEventListener('keydown', function (e) {
          if (e.key === 'Escape') {
            btn.setAttribute('aria-expanded', 'false');
            content.hidden = true;
            btn.focus();
          }
        });
      });

      // Optional: if URL has hash matching a disclosure region, open it
      var hash = window.location.hash.slice(1);
      if (hash) {
        var region = document.getElementById(hash);
        var btn = region ? document.querySelector('[aria-controls="' + hash + '"]') : null;
        if (region && btn) {
          btn.setAttribute('aria-expanded', 'true');
          region.hidden = false;
        }
      }
    }());
  </script>
</body>
</html>