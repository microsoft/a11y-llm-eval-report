<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Examples</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --border: #d0d7de;
      --text: #24292f;
      --muted: #57606a;
      --bg: #ffffff;
      --accent: #0969da;
      --example-bg: #f6f8fa;
      --focus: #2f81f7;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    main {
      max-width: 900px;
      margin: 2rem auto;
      padding: 0 1rem;
    }
    h1 {
      font-size: 1.75rem;
      margin: 0 0 1rem;
    }
    p.lead {
      color: var(--muted);
      margin-top: 0.25rem;
    }
    .example {
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--example-bg);
      padding: 1rem;
      margin: 1rem 0;
    }
    .example h2 {
      font-size: 1.25rem;
      margin: 0 0 0.75rem;
    }

    /* Native <details> styling */
    details.details {
      border: 1px solid var(--border);
      border-radius: 6px;
      background: #fff;
      overflow: hidden;
    }
    details.details > summary {
      list-style: none;
      cursor: pointer;
      padding: 0.75rem 1rem;
      user-select: none;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    details.details > summary::-webkit-details-marker {
      display: none;
    }
    details.details > summary::before {
      content: "▸";
      display: inline-block;
      color: var(--muted);
      transition: transform 0.2s ease;
    }
    details.details[open] > summary::before {
      transform: rotate(90deg);
      color: var(--accent);
    }
    details.details .content {
      padding: 1rem;
      border-top: 1px solid var(--border);
    }

    /* Custom disclosure button */
    .toggle,
    .accordion-toggle {
      appearance: none;
      border: 1px solid var(--border);
      background: #fff;
      padding: 0.5rem 0.75rem 0.5rem 2rem;
      border-radius: 6px;
      font: inherit;
      font-weight: 600;
      color: var(--text);
      cursor: pointer;
      position: relative;
    }
    .toggle::before,
    .accordion-toggle::before {
      content: "▸";
      position: absolute;
      left: 0.5rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      transition: transform 0.2s ease, color 0.2s ease;
    }
    .toggle[aria-expanded="true"]::before,
    .accordion-toggle[aria-expanded="true"]::before {
      transform: translateY(-50%) rotate(90deg);
      color: var(--accent);
    }
    .toggle:focus-visible,
    .accordion-toggle:focus-visible,
    summary:focus-visible {
      outline: 3px solid rgba(47, 129, 247, 0.35);
      outline-offset: 2px;
      border-color: var(--focus);
    }

    /* Controlled content container */
    .details {
      margin-top: 0.75rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: #fff;
      padding: 1rem;
    }
    .details[hidden] {
      display: none !important;
    }
    .muted {
      color: var(--muted);
    }

    /* Accordion layout */
    .accordion {
      display: grid;
      gap: 0.5rem;
    }
    .accordion .item {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.5rem;
    }
    .accordion-toggle {
      width: 100%;
      text-align: left;
      background: #fff;
    }

    /* Small helpers */
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      font-size: 0.95em;
      background: #eef2f7;
      padding: 0.1rem 0.3rem;
      border-radius: 4px;
    }
    ul {
      padding-left: 1.25rem;
    }
  </style>
</head>
<body>
  <main>
    <h1>Expand/Collapse Widgets</h1>
    <p class="lead">Examples of native and custom disclosures. Each widget is wrapped in an <code>example</code> container, and controlled content uses the <code>details</code> class.</p>

    <div class="example">
      <h2>Native <details> element</h2>
      <details class="details">
        <summary>Project overview</summary>
        <div class="content">
          <p>This section uses the built-in HTML <code>&lt;details&gt;</code> element with a <code>details</code> class. It's accessible by default and requires no JavaScript for basic toggling.</p>
          <ul>
            <li>Click the summary to toggle visibility.</li>
            <li>Use the arrow key or Enter/Space to toggle via keyboard.</li>
            <li>Screen readers announce state changes properly.</li>
          </ul>
          <p class="muted">Hint: The caret rotates when expanded.</p>
        </div>
      </details>
    </div>

    <div class="example">
      <h2>Custom disclosure button</h2>
      <button
        type="button"
        class="toggle"
        aria-expanded="false"
        aria-controls="custom-panel"
        data-collapsed-label="Show details"
        data-expanded-label="Hide details"
      >Show details</button>
      <div id="custom-panel" class="details" hidden>
        <p>This panel is controlled by a button with <code>aria-controls</code> and <code>aria-expanded</code>. The container for the controlled content has a <code>details</code> class.</p>
        <ul>
          <li>Accessible labels update with state.</li>
          <li>JavaScript toggles the <code>hidden</code> attribute.</li>
          <li>Focus stays on the button for predictable interaction.</li>
        </ul>
      </div>
    </div>

    <div class="example">
      <h2>Accordion (only one open at a time)</h2>
      <div class="accordion" role="group" aria-label="Frequently Asked Questions">
        <div class="item">
          <button
            type="button"
            class="accordion-toggle"
            id="acc-button-1"
            aria-controls="acc-panel-1"
            aria-expanded="false"
          >What is an accordion?</button>
          <div
            id="acc-panel-1"
            class="details"
            role="region"
            aria-labelledby="acc-button-1"
            hidden
          >
            <p>An accordion is a vertically stacked list of sections where users can expand one section to reveal content while collapsing others. Each controlled content container here has the <code>details</code> class.</p>
          </div>
        </div>

        <div class="item">
          <button
            type="button"
            class="accordion-toggle"
            id="acc-button-2"
            aria-controls="acc-panel-2"
            aria-expanded="false"
          >Why use an accordion?</button>
          <div
            id="acc-panel-2"
            class="details"
            role="region"
            aria-labelledby="acc-button-2"
            hidden
          >
            <ul>
              <li>Reduces page clutter.</li>
              <li>Improves scannability.</li>
              <li>Organizes related content.</li>
            </ul>
          </div>
        </div>

        <div class="item">
          <button
            type="button"
            class="accordion-toggle"
            id="acc-button-3"
            aria-controls="acc-panel-3"
            aria-expanded="false"
          >Accessibility considerations</button>
          <div
            id="acc-panel-3"
            class="details"
            role="region"
            aria-labelledby="acc-button-3"
            hidden
          >
            <p>Use buttons with <code>aria-expanded</code> and <code>aria-controls</code>, ensure the controlled content is focusable if needed, and manage keyboard interactions consistently. The <code>details</code> class identifies the controlled regions.</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Custom disclosure button
    document.querySelectorAll('.toggle').forEach(btn => {
      const targetId = btn.getAttribute('aria-controls');
      const panel = document.getElementById(targetId);
      const collapsedLabel = btn.dataset.collapsedLabel || 'Show details';
      const expandedLabel = btn.dataset.expandedLabel || 'Hide details';

      const setState = (expanded) => {
        btn.setAttribute('aria-expanded', String(expanded));
        btn.textContent = expanded ? expandedLabel : collapsedLabel;
        panel.hidden = !expanded;
      };

      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        setState(!expanded);
      });

      // Initialize
      setState(false);
    });

    // Accordion behavior: only one expanded at a time
    document.querySelectorAll('.accordion').forEach(acc => {
      const buttons = acc.querySelectorAll('.accordion-toggle');

      const collapseAll = () => {
        buttons.forEach(b => {
          const panel = document.getElementById(b.getAttribute('aria-controls'));
          b.setAttribute('aria-expanded', 'false');
          if (panel) panel.hidden = true;
        });
      };

      buttons.forEach(button => {
        const panel = document.getElementById(button.getAttribute('aria-controls'));
        button.addEventListener('click', () => {
          const isExpanded = button.getAttribute('aria-expanded') === 'true';
          collapseAll();
          button.setAttribute('aria-expanded', String(!isExpanded));
          if (panel) panel.hidden = isExpanded;
          if (panel && !isExpanded) panel.hidden = false;
        });

        // Optional: close on Escape when focus is inside the panel
        if (panel) {
          panel.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
              button.setAttribute('aria-expanded', 'false');
              panel.hidden = true;
              button.focus();
            }
          });
        }
      });
    });
  </script>
</body>
</html>