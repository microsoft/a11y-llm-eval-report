<html>
<head>
    <title>Expand/Collapse Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        /* Wrapper for each widget */
        .example {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .example h3 {
            margin-top: 0;
            margin-bottom: 10px;
            color: #34495e;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2em;
        }

        .expand-toggle {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.2s ease, transform 0.2s ease;
            margin-left: 10px;
            flex-shrink: 0; /* Prevent button from shrinking */
        }

        .expand-toggle:hover {
            background-color: #0056b3;
            transform: translateY(-1px);
        }

        .expand-toggle:active {
            transform: translateY(0);
        }

        /* Container for controlled content */
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, opacity 0.4s ease-out, padding 0.4s ease-out, border-top 0.4s ease-out;
            opacity: 0;
            padding-top: 0;
            border-top: 1px solid transparent; /* For smooth border transition */
        }

        .details.is-expanded {
            max-height: 500px; /* A value larger than expected content height */
            opacity: 1;
            padding-top: 15px; /* Add padding when expanded */
            border-top: 1px solid #eee; /* Show border when expanded */
        }

        .details p {
            margin-bottom: 10px;
            line-height: 1.6;
            color: #555;
        }

        .details ul {
            list-style-type: disc;
            margin-left: 20px;
            padding-left: 0;
            color: #555;
        }

        .details img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 15px 0;
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <h1>Interactive Expand/Collapse Widgets</h1>

    <div class="example">
        <h3>
            Widget One: Basic Information
            <button type="button" class="expand-toggle" data-expanded="false">Expand</button>
        </h3>
        <div class="details">
            <p>This is the content for the first expand/collapse widget. It demonstrates how to hide and show detailed information with a simple click using JavaScript and CSS transitions.</p>
            <p>You can put any HTML content here: paragraphs, lists, images, or even other nested widgets!</p>
            <ul>
                <li><strong>Feature A:</strong> Fully customizable via CSS.</li>
                <li><strong>Feature B:</strong> Accessible with ARIA attributes (though simplified here).</li>
                <li><strong>Feature C:</strong> Works with multiple instances independently.</li>
            </ul>
        </div>
    </div>

    <div class="example">
        <h3>
            Widget Two: More Details
            <button type="button" class="expand-toggle" data-expanded="false">Expand</button>
        </h3>
        <div class="details">
            <p>This is the content for the second widget. It operates independently of the first one, showcasing the reusability of the component.</p>
            <p>It's great for FAQs, accordions, or hiding less important details until needed, improving initial page load perception.</p>
            <p>Here's a longer paragraph to show the smooth transition over more content. The <code>max-height</code> property is set to a sufficiently large value to accommodate varying content lengths without clipping, while <code>overflow: hidden</code> ensures no scrollbars appear within the collapsed state.</p>
        </div>
    </div>

    <div class="example">
        <h3>
            Widget Three: With an Image
            <button type="button" class="expand-toggle" data-expanded="false">Expand</button>
        </h3>
        <div class="details">
            <p>This widget demonstrates that complex content, including images, can be easily integrated into the expand/collapse mechanism.</p>
            <img src="https://via.placeholder.com/400x150?text=Dynamic+Content+Image" alt="Placeholder Image" style="max-width: 100%; height: auto;">
            <p>The image scales responsively within its container. The smooth animation applies to all children elements as the parent <code>.details</code> container expands or collapses.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggleButtons = document.querySelectorAll('.expand-toggle');

            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Find the parent .example div to ensure we get the correct .details container
                    const exampleDiv = button.closest('.example');
                    if (!exampleDiv) return;

                    const detailsContent = exampleDiv.querySelector('.details');
                    if (!detailsContent) return;

                    const isExpanded = detailsContent.classList.contains('is-expanded');

                    if (isExpanded) {
                        detailsContent.classList.remove('is-expanded');
                        button.textContent = 'Expand';
                        button.setAttribute('data-expanded', 'false');
                        // Optional: Add ARIA attributes for accessibility
                        button.setAttribute('aria-expanded', 'false');
                        detailsContent.setAttribute('aria-hidden', 'true');
                    } else {
                        detailsContent.classList.add('is-expanded');
                        button.textContent = 'Collapse';
                        button.setAttribute('data-expanded', 'true');
                        // Optional: Add ARIA attributes for accessibility
                        button.setAttribute('aria-expanded', 'true');
                        detailsContent.setAttribute('aria-hidden', 'false');
                    }
                });

                // Initialize ARIA attributes for accessibility
                const exampleDiv = button.closest('.example');
                const detailsContent = exampleDiv ? exampleDiv.querySelector('.details') : null;
                if (detailsContent) {
                    const initiallyExpanded = detailsContent.classList.contains('is-expanded');
                    button.setAttribute('aria-expanded', initiallyExpanded ? 'true' : 'false');
                    detailsContent.setAttribute('aria-hidden', initiallyExpanded ? 'false' : 'true');
                    // Give content an ID if needed for aria-controls, e.g. detailsContent.id = `details-${Math.random().toString(36).substr(2, 9)}`;
                    // button.setAttribute('aria-controls', detailsContent.id);
                }
            });
        });
    </script>

</body>
</html>