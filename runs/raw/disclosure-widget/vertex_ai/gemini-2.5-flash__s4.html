<html>
<head>
    <title>Expand/Collapse Widget</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        .example {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .toggle-button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 10px;
            transition: background-color 0.2s ease;
        }

        .toggle-button:hover {
            background-color: #0056b3;
        }

        .toggle-button:focus {
            outline: 2px solid #0056b3;
            outline-offset: 2px;
        }

        .details {
            border-top: 1px solid #eee;
            padding-top: 15px;
            margin-top: 10px;
            display: none; /* Hidden by default */
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
        }

        .details.expanded {
            display: block; /* Shown when expanded */
            max-height: 500px; /* A value larger than the max possible height */
            opacity: 1;
        }

        .details p {
            margin: 0 0 10px 0;
            line-height: 1.6;
        }

        .details ul {
            margin: 0;
            padding-left: 20px;
        }

        h2 {
            color: #333;
            margin-top: 0;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

    <h1>Expand/Collapse Widgets</h1>

    <div class="example">
        <h2>First Example Widget</h2>
        <button class="toggle-button" aria-controls="content1">Expand Content</button>
        <div id="content1" class="details" aria-hidden="true">
            <p>This is the content for the first expand/collapse widget. It can contain any type of HTML elements, such as paragraphs, lists, images, or even other interactive components.</p>
            <p>You can click the button above to toggle its visibility.</p>
        </div>
    </div>

    <div class="example">
        <h2>Second Example Widget (Initially Expanded)</h2>
        <button class="toggle-button" aria-controls="content2">Collapse Details</button>
        <div id="content2" class="details expanded" aria-hidden="false">
            <p>This widget starts in an expanded state. The content is visible immediately when the page loads.</p>
            <ul>
                <li>Item one</li>
                <li>Item two</li>
                <li>Item three</li>
            </ul>
            <p>Click the button to hide these details.</p>
        </div>
    </div>

    <div class="example">
        <h2>Another Widget</h2>
        <button class="toggle-button" aria-controls="content3">Show More Info</button>
        <div id="content3" class="details" aria-hidden="true">
            <p>Here's some additional information that might not be needed all the time.</p>
            <p>It's useful for FAQs, supplementary notes, or hidden configurations.</p>
            <p>Enjoy the expand/collapse functionality!</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggleButtons = document.querySelectorAll('.toggle-button');

            toggleButtons.forEach(button => {
                const detailsId = button.getAttribute('aria-controls');
                const detailsDiv = document.getElementById(detailsId);

                if (detailsDiv) {
                    // Set initial ARIA attributes and button text based on current state
                    const isInitiallyExpanded = detailsDiv.classList.contains('expanded');
                    button.setAttribute('aria-expanded', isInitiallyExpanded ? 'true' : 'false');
                    detailsDiv.setAttribute('aria-hidden', isInitiallyExpanded ? 'false' : 'true');
                    button.textContent = isInitiallyExpanded ? 'Collapse ' + button.textContent.replace('Expand ', '').replace('Show ', '') : 'Expand ' + button.textContent.replace('Collapse ', '').replace('Show ', '');
                    // Adjust initial button text to reflect current state accurately
                    if (!isInitiallyExpanded && button.textContent.startsWith('Collapse')) {
                        button.textContent = button.textContent.replace('Collapse', 'Expand');
                    } else if (isInitiallyExpanded && button.textContent.startsWith('Expand')) {
                        button.textContent = button.textContent.replace('Expand', 'Collapse');
                    }
                     // Ensure the button text matches the action it will perform
                    if (isInitiallyExpanded) {
                        button.textContent = button.textContent.replace('Show More Info', 'Hide Info').replace('Expand Content', 'Collapse Content');
                    } else {
                         button.textContent = button.textContent.replace('Hide Info', 'Show More Info').replace('Collapse Content', 'Expand Content');
                    }

                    button.addEventListener('click', () => {
                        detailsDiv.classList.toggle('expanded');
                        const isExpanded = detailsDiv.classList.contains('expanded');
                        button.setAttribute('aria-expanded', isExpanded ? 'true' : 'false');
                        detailsDiv.setAttribute('aria-hidden', isExpanded ? 'false' : 'true');

                        // Update button text
                        if (isExpanded) {
                            button.textContent = button.textContent.replace('Expand', 'Collapse').replace('Show', 'Hide');
                        } else {
                            button.textContent = button.textContent.replace('Collapse', 'Expand').replace('Hide', 'Show');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>