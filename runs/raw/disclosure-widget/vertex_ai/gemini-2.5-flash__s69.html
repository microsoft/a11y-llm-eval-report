<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        .example {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden; /* Ensures content transitions correctly */
        }

        .header {
            padding: 15px;
            background-color: #e9e9e9;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .toggle {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.2s ease;
        }

        .toggle:hover {
            background-color: #0056b3;
        }

        .toggle::after {
            content: " \25BC"; /* Down arrow */
            margin-left: 8px;
            transition: transform 0.2s ease;
            display: inline-block;
        }

        .example.is-expanded .toggle::after {
            content: " \25B2"; /* Up arrow */
            transform: rotate(180deg);
        }

        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            padding: 0 15px; /* Initial padding of 0 */
        }

        .example.is-expanded .details {
            max-height: 500px; /* A height larger than the content can be */
            padding: 15px; /* Padding when expanded */
        }

        .details p {
            margin-top: 0;
            margin-bottom: 0;
        }
    </style>
</head>
<body>

    <h1>Expand/Collapse Widgets</h1>

    <div class="example">
        <div class="header">
            <h2>Widget Title One</h2>
            <button class="toggle" aria-expanded="false" aria-controls="content1">
                Show Details
            </button>
        </div>
        <div id="content1" class="details">
            <p>This is the content for Widget One. It demonstrates how an element can expand and collapse
                to reveal or hide additional information. You can put any HTML content in here,
                like text, images, or even other interactive elements.</p>
            <p>The transition is handled by CSS using `max-height` for a smooth animation effect.
                The JavaScript toggles a class on the parent `div.example` to control its state.</p>
        </div>
    </div>

    <div class="example">
        <div class="header">
            <h2>Widget Title Two - Another Section</h2>
            <button class="toggle" aria-expanded="false" aria-controls="content2">
                Learn More
            </button>
        </div>
        <div id="content2" class="details">
            <p>Here's some more information for Widget Two. This could be a FAQ answer, a product description,
                or a detailed explanation of a feature. The expand/collapse pattern is useful for
                organizing large amounts of content into digestible chunks.</p>
            <ul>
                <li>Item 1</li>
                <li>Item 2</li>
                <li>Item 3</li>
            </ul>
            <p>Each widget is independent and can be expanded or collapsed without affecting others.</p>
        </div>
    </div>

    <div class="example">
        <div class="header">
            <h2>Widget Title Three - Final Example</h2>
            <button class="toggle" aria-expanded="false" aria-controls="content3">
                Toggle Info
            </button>
        </div>
        <div id="content3" class="details">
            <p>This is the final example content. It shows that the structure is reusable.
                The JavaScript targets all elements with the `toggle` class and applies the
                necessary functionality.</p>
            <p>Accessibility attributes like `aria-expanded` and `aria-controls` are also
                updated to improve the user experience for assistive technologies.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggleButtons = document.querySelectorAll('.toggle');

            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const exampleContainer = button.closest('.example');
                    const detailsContent = exampleContainer.querySelector('.details');
                    const isExpanded = exampleContainer.classList.contains('is-expanded');

                    if (isExpanded) {
                        exampleContainer.classList.remove('is-expanded');
                        button.setAttribute('aria-expanded', 'false');
                        button.textContent = button.textContent.replace(' \u25B2', '').trim(); // Remove up arrow
                        button.textContent = button.textContent + ' \u25BC'; // Add down arrow
                    } else {
                        exampleContainer.classList.add('is-expanded');
                        button.setAttribute('aria-expanded', 'true');
                        button.textContent = button.textContent.replace(' \u25BC', '').trim(); // Remove down arrow
                        button.textContent = button.textContent + ' \u25B2'; // Add up arrow
                    }
                });
            });

            // Initialize button text to include down arrow for collapsed state
            toggleButtons.forEach(button => {
                if (button.getAttribute('aria-expanded') === 'false') {
                    button.textContent = button.textContent + ' \u25BC';
                }
            });
        });
    </script>

</body>
</html>