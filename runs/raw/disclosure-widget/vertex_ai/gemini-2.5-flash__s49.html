<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f4f4f4;
            color: #333;
            margin: 20px;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }

        .example {
            margin-bottom: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden; /* Ensures border-radius applies nicely */
        }

        .toggle-button {
            background-color: #f0f0f0;
            border: none; /* No default button border */
            padding: 12px 15px;
            cursor: pointer;
            width: 100%;
            text-align: left;
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
            position: relative;
            display: block; /* Ensure full width and vertical stacking */
            box-sizing: border-box; /* Include padding in width calculation */
            margin: 0; /* Remove default margins for headings if used as toggle */
            border-bottom: 1px solid #ddd; /* Separator for collapsed state */
            user-select: none; /* Prevent text selection on button */
        }

        .toggle-button:hover {
            background-color: #e9e9e9;
        }

        .toggle-button.is-active {
            background-color: #e0e0e0;
            border-bottom: none; /* No bottom border when active/expanded */
        }

        /* Optional: Add a caret/arrow icon */
        .toggle-button::after {
            content: '▼'; /* Down arrow */
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.3s ease;
        }

        .toggle-button.is-active::after {
            content: '▲'; /* Up arrow */
            transform: translateY(-50%) rotate(0deg); /* Keep it up, or rotate(180deg) for flip effect */
        }

        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
            padding: 0 15px; /* Initial vertical padding is zero */
            box-sizing: border-box;
            background-color: #fcfcfc;
            border-top: 1px solid #eee; /* Light separator */
        }

        .details.is-expanded {
            /* max-height will be set by JS dynamically */
            /* opacity will be set by JS dynamically */
            /* padding will be set by JS dynamically */
        }

        /* Adjust internal element margins for consistent padding when expanded */
        .details p, .details ul, .details ol, .details div {
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .details p:first-child,
        .details ul:first-child,
        .details ol:first-child,
        .details div:first-child {
            margin-top: 0; /* Remove top margin for first child */
        }

        .details p:last-child,
        .details ul:last-child,
        .details ol:last-child,
        .details div:last-child {
            margin-bottom: 0; /* Remove bottom margin for last child */
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <div class="example">
        <button class="toggle-button">Section 1: About the Widget</button>
        <div class="details">
            <p>This is the content for section 1. It will expand and collapse when you click the button above.</p>
            <p>You can place any HTML content inside this <code>.details</code> div, including text, images, lists, and other interactive elements.</p>
            <ul>
                <li>Point 1: Responsive design.</li>
                <li>Point 2: Accessible with keyboard navigation.</li>
                <li>Point 3: Smooth CSS transitions.</li>
            </ul>
        </div>
    </div>

    <div class="example">
        <h2 class="toggle-button">Section 2: More Information</h2>
        <div class="details">
            <p>This example uses an <code>h2</code> tag as the toggle button, demonstrating flexibility in markup.</p>
            <p>The content here provides more context and details about the application or feature being described.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        </div>
    </div>

    <div class="example">
        <button class="toggle-button">Section 3: Contact Details</button>
        <div class="details">
            <p>For support, please contact us at:</p>
            <address>
                Email: <a href="mailto:info@example.com">info@example.com</a><br>
                Phone: (123) 456-7890<br>
                Address: 123 Widget Lane, Tech City, TX 78701
            </address>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggleButtons = document.querySelectorAll('.toggle-button');

            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Find the details div which is the sibling following the button.
                    // This assumes the structure: <button> <div class="details">
                    let detailsDiv = button.nextElementSibling;

                    // Fallback if structure is different (e.g., if .details is not an immediate sibling)
                    // if (!detailsDiv || !detailsDiv.classList.contains('details')) {
                    //     const exampleDiv = button.closest('.example');
                    //     detailsDiv = exampleDiv ? exampleDiv.querySelector('.details') : null;
                    // }

                    if (detailsDiv && detailsDiv.classList.contains('details')) {
                        const isExpanded = detailsDiv.style.maxHeight !== '0px' && detailsDiv.style.maxHeight !== '';

                        button.classList.toggle('is-active', !isExpanded);

                        if (isExpanded) {
                            detailsDiv.style.maxHeight = '0px';
                            detailsDiv.style.paddingTop = '0px';
                            detailsDiv.style.paddingBottom = '0px';
                            detailsDiv.style.opacity = '0';
                        } else {
                            // To expand, set max-height to its scrollHeight (actual height including padding)
                            // We need to temporarily set max-height to 'none' or a very large value
                            // to correctly calculate scrollHeight if it was previously 0.
                            // However, scrollHeight correctly calculates even with max-height: 0.
                            detailsDiv.style.maxHeight = detailsDiv.scrollHeight + 'px';
                            detailsDiv.style.paddingTop = '15px'; // Matches CSS .details padding
                            detailsDiv.style.paddingBottom = '15px'; // Matches CSS .details padding
                            detailsDiv.style.opacity = '1';

                            // Optional: Once expanded, remove max-height to allow content to grow dynamically
                            // This can cause a flicker on collapse if not handled carefully,
                            // so it's often better to keep the calculated max-height for a smooth collapse.
                            // setTimeout(() => {
                            //     if (detailsDiv.classList.contains('is-expanded')) {
                            //         detailsDiv.style.maxHeight = 'none';
                            //     }
                            // }, 300); // Match transition duration
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>