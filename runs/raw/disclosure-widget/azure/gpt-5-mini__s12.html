<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root{
      --bg:#f6f8fa;
      --card:#fff;
      --accent:#0366d6;
      --muted:#6a737d;
      --radius:8px;
      --shadow: 0 2px 6px rgba(33,33,33,0.08);
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:linear-gradient(180deg,var(--bg),#eef2f6 60%);
      color:#0b1220;
      padding:32px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    h1{margin:0 0 18px;font-size:20px}
    p.lead{margin:0 0 18px;color:var(--muted)}

    .container{
      max-width:820px;
      margin:0 auto;
    }

    /* Example wrapper */
    .example{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:18px;
      margin:18px 0;
      border:1px solid rgba(11,18,32,0.04);
    }
    .example h2{margin:0 0 8px;font-size:15px}
    .example p{margin:.25rem 0 12px;color:var(--muted);font-size:13px}

    /* Shared details (controlled content) styles */
    .details{
      overflow:hidden;
      transition: max-height 260ms cubic-bezier(.2,.9,.2,1), padding 260ms ease, opacity 220ms ease;
      max-height:0;
      padding:0 12px;
      opacity:0;
      border-radius:6px;
      background:linear-gradient(180deg, rgba(3,102,214,0.03), rgba(3,102,214,0.01));
      margin-top:8px;
      border:1px solid rgba(3,102,214,0.06);
    }
    .details.open{
      padding:12px;
      max-height:600px; /* large enough to show content */
      opacity:1;
    }

    /* native details summary override (visual only) */
    details{
      background:transparent;
      padding:0;
    }
    details > summary{
      list-style:none;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:8px 12px;
      border-radius:8px;
      border:1px solid rgba(11,18,32,0.04);
      background:#fff;
      font-weight:600;
    }
    details > summary::-webkit-details-marker{display:none}
    .chev{
      width:18px;height:18px;display:inline-block;transition:transform 200ms ease;
      transform-origin:center;
      color:var(--accent);
    }
    details[open] .chev{transform:rotate(180deg)}

    /* Button style for custom widgets */
    .toggle{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      background:#fff;
      color:var(--accent);
      border:1px solid rgba(3,102,214,0.12);
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
    }
    .toggle:focus{
      outline:3px solid rgba(3,102,214,0.12);
      box-shadow:0 0 0 4px rgba(3,102,214,0.06);
    }
    .toggle .chev{transform:rotate(0deg);transition:transform 200ms ease}
    .toggle[aria-expanded="true"] .chev{transform:rotate(180deg)}

    /* Accordion styles */
    .accordion-item{
      border-top:1px dashed rgba(11,18,32,0.03);
      padding:12px 0;
    }
    .accordion-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
    }
    .accordion-btn{
      background:transparent;
      border:0;
      padding:6px 0;
      font-weight:600;
      color:#0b1220;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .accordion-btn:focus{outline:3px solid rgba(3,102,214,0.08); border-radius:6px}
    .accordion .details{margin-top:8px;border:none;background:transparent;padding:0}

    /* small content styles */
    .small{
      font-size:14px;
      color:#222;
      line-height:1.45;
    }
    code{background:#f4f6f8;padding:2px 6px;border-radius:4px;font-family:monospace;font-size:13px}
    footer{margin-top:18px;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <h1>Expand / Collapse Widget Examples</h1>
    <p class="lead">Three progressively enhanced examples. Each widget is wrapped in a div.example. The container for controlled content uses the class "details".</p>

    <!-- Example 1: native details element (enhanced content container) -->
    <div class="example" aria-label="Native details example">
      <h2>Native &lt;details&gt; (semantic)</h2>
      <p>Uses the native details/summary element. The visible content container has class="details". Works without JavaScript.</p>

      <details>
        <summary aria-controls="native-1">
          Quick summary — native details
          <span class="chev" aria-hidden="true">▾</span>
        </summary>
        <div id="native-1" class="details open" role="region" aria-labelledby="native-1-label">
          <div class="small" id="native-1-label">
            This content is inside a native &lt;details&gt; element. We still apply the <code>details</code> class to the controlled content so it matches the other examples. Native details manage open/close state automatically and are keyboard accessible by default.
          </div>
        </div>
      </details>
    </div>

    <!-- Example 2: custom button + controlled div -->
    <div class="example" aria-label="Custom button toggle example">
      <h2>Custom toggle (button + controlled div)</h2>
      <p>An accessible pattern using a button with <code>aria-expanded</code> and <code>aria-controls</code>. The content container has class="details".</p>

      <button id="toggle-1" class="toggle" aria-expanded="false" aria-controls="custom-1">
        <span>Show more details</span>
        <span class="chev" aria-hidden="true">▾</span>
      </button>

      <div id="custom-1" class="details" role="region" aria-hidden="true">
        <div class="small">
          This content is controlled by the button above. JavaScript toggles the <code>open</code> class on the element with class <code>details</code>, and updates <code>aria-expanded</code> on the button as well as <code>aria-hidden</code> on this region.
        </div>
      </div>
    </div>

    <!-- Example 3: simple accordion (only one open) -->
    <div class="example" aria-label="Accordion example">
      <h2>Accordion (one open at a time)</h2>
      <p>Multiple items where opening one closes the others. Each controlled content element uses class="details". Buttons use <code>aria-expanded</code> and <code>aria-controls</code>.</p>

      <div class="accordion" id="accordion-1" role="presentation">
        <div class="accordion-item">
          <div class="accordion-header">
            <button class="accordion-btn" id="acc-btn-1" aria-expanded="false" aria-controls="acc-1">
              Section A
            </button>
            <span class="chev" aria-hidden="true">▾</span>
          </div>
          <div id="acc-1" class="details" role="region" aria-hidden="true">
            <div class="small">
              Content for section A. When you open this, other sections in the accordion will close automatically.
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">
            <button class="accordion-btn" id="acc-btn-2" aria-expanded="false" aria-controls="acc-2">
              Section B
            </button>
            <span class="chev" aria-hidden="true">▾</span>
          </div>
          <div id="acc-2" class="details" role="region" aria-hidden="true">
            <div class="small">
              Content for section B. Try opening multiple sections — the script keeps only one expanded.
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">
            <button class="accordion-btn" id="acc-btn-3" aria-expanded="false" aria-controls="acc-3">
              Section C
            </button>
            <span class="chev" aria-hidden="true">▾</span>
          </div>
          <div id="acc-3" class="details" role="region" aria-hidden="true">
            <div class="small">
              Content for section C.
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      Tip: Buttons use <code>aria-expanded</code> and target the content by <code>aria-controls</code>. Content regions carry the class <code>details</code>.
    </footer>
  </div>

  <script>
    // Custom toggle (Example 2)
    (function(){
      var btn = document.getElementById('toggle-1');
      var region = document.getElementById('custom-1');

      function open(){
        region.classList.add('open');
        btn.setAttribute('aria-expanded','true');
        region.setAttribute('aria-hidden','false');
        btn.querySelector('span').textContent = 'Hide details';
      }
      function close(){
        region.classList.remove('open');
        btn.setAttribute('aria-expanded','false');
        region.setAttribute('aria-hidden','true');
        btn.querySelector('span').textContent = 'Show more details';
      }

      // Initialize closed (in case CSS/HTML left it open)
      close();

      btn.addEventListener('click', function(){
        var expanded = btn.getAttribute('aria-expanded') === 'true';
        if(expanded) close(); else open();
      });
    })();

    // Simple accordion (Example 3)
    (function(){
      var accordion = document.getElementById('accordion-1');
      if(!accordion) return;
      var buttons = Array.prototype.slice.call(accordion.querySelectorAll('.accordion-btn'));

      function closeItem(btn){
        var id = btn.getAttribute('aria-controls');
        var region = document.getElementById(id);
        btn.setAttribute('aria-expanded','false');
        region.classList.remove('open');
        region.setAttribute('aria-hidden','true');
      }
      function openItem(btn){
        var id = btn.getAttribute('aria-controls');
        var region = document.getElementById(id);
        btn.setAttribute('aria-expanded','true');
        region.classList.add('open');
        region.setAttribute('aria-hidden','false');
      }

      buttons.forEach(function(btn){
        // initialize closed
        closeItem(btn);

        btn.addEventListener('click', function(){
          var expanded = btn.getAttribute('aria-expanded') === 'true';
          // close all
          buttons.forEach(function(b){ closeItem(b); });
          // toggle this one
          if(!expanded) openItem(btn);
        });

        // keyboard support: Up/Down navigation (optional friendly behavior)
        btn.addEventListener('keydown', function(e){
          var idx = buttons.indexOf(btn);
          if(e.key === 'ArrowDown'){
            e.preventDefault();
            var next = buttons[(idx+1) % buttons.length];
            next.focus();
          } else if(e.key === 'ArrowUp'){
            e.preventDefault();
            var prev = buttons[(idx-1 + buttons.length) % buttons.length];
            prev.focus();
          }
        });
      });
    })();

    // Enhance native details: ensure inner .details mirrors open attribute for animation consistency
    (function(){
      var nativeDetails = document.querySelectorAll('details');
      nativeDetails.forEach(function(det){
        var inner = det.querySelector('.details');
        if(!inner) return;
        function sync(){
          if(det.open){
            inner.classList.add('open');
            inner.setAttribute('aria-hidden','false');
          } else {
            inner.classList.remove('open');
            inner.setAttribute('aria-hidden','true');
          }
        }
        // initial
        sync();
        det.addEventListener('toggle', sync);
      });
    })();
  </script>
</body>
</html>