<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand/Collapse Widgets</title>
  <style>
    :root {
      --bg: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --primary: #2563eb;
      --border: #e5e7eb;
      --accent: #f3f4f6;
    }

    html, body {
      background: var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      margin: 0;
      padding: 0;
      line-height: 1.6;
    }

    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 0 16px;
    }

    h1 {
      margin: 0 0 20px;
      font-size: 1.75rem;
    }

    p.lead {
      color: var(--muted);
      margin: 0 0 24px;
    }

    .example {
      border: 1px solid var(--border);
      background: var(--bg);
      border-radius: 12px;
      padding: 16px;
      margin: 16px 0 24px;
      box-shadow: 0 1px 0 rgba(0,0,0,0.02);
    }

    .example h2 {
      font-size: 1.125rem;
      margin: 0 0 12px;
    }

    /* Shared content container styling */
    .details {
      background: var(--accent);
      border-radius: 10px;
      padding: 12px;
      margin-top: 10px;
      border: 1px solid var(--border);
    }

    .details[hidden] {
      display: none;
    }

    /* Native <details> styling */
    details.details {
      padding: 0;
      border: 1px solid var(--border);
      background: var(--bg);
    }

    details.details > summary {
      cursor: pointer;
      user-select: none;
      list-style: none;
      padding: 12px 14px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    details.details > summary::marker {
      display: none;
    }

    details.details > summary .chevron {
      width: 12px;
      height: 12px;
      border-right: 2px solid var(--muted);
      border-bottom: 2px solid var(--muted);
      transform: rotate(-45deg);
      transition: transform 160ms ease;
      margin-right: 4px;
    }

    details.details[open] > summary .chevron {
      transform: rotate(45deg);
    }

    details.details > .details {
      margin: 0;
      border: none;
      border-top: 1px solid var(--border);
      border-radius: 0 0 12px 12px;
    }

    /* Button-controlled disclosure */
    .disclosure-btn {
      appearance: none;
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 10px;
      font: inherit;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: border-color 120ms ease, box-shadow 120ms ease;
    }

    .disclosure-btn:hover {
      border-color: #d1d5db;
    }

    .disclosure-btn:focus-visible {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(37,99,235,0.2);
    }

    .icon {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-right: 2px solid var(--muted);
      border-bottom: 2px solid var(--muted);
      transform: rotate(-45deg);
      transition: transform 160ms ease;
    }

    .disclosure-btn[aria-expanded="true"] .icon {
      transform: rotate(45deg);
    }

    /* Accordion example */
    .accordion-item {
      margin-top: 6px;
    }

    .accordion-item .disclosure-btn {
      width: 100%;
      justify-content: space-between;
    }

    .accordion-item .title {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }

    .small {
      font-size: 0.95rem;
      color: var(--muted);
      margin: 8px 0 0;
    }

    code {
      background: #f9fafb;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0 5px;
    }
  </style>
</head>
<body>
  <main class="container" aria-label="Expand/Collapse Widget Examples">
    <h1>Expand/Collapse Widgets</h1>
    <p class="lead">Three common patterns for disclosure: native details, a button-controlled region, and a simple accordion. Each example is wrapped with a div that has an <code>example</code> class, and the container for controlled content has a <code>details</code> class.</p>

    <div class="example" aria-label="Native HTML details example">
      <h2>Example 1: Native HTML details</h2>
      <details class="details">
        <summary>
          <span class="chevron" aria-hidden="true"></span>
          More about this component
        </summary>
        <div class="details" role="group" aria-label="Native details content">
          <p>The native <code>&lt;details&gt;</code> element provides built-in expand/collapse functionality with keyboard and mouse support.</p>
          <ul>
            <li>Click or press Space/Enter on the summary to toggle.</li>
            <li>It exposes the <code>open</code> property and attribute.</li>
            <li>You can fully style the summary and the content area.</li>
          </ul>
        </div>
      </details>
    </div>

    <div class="example" aria-label="Button-controlled disclosure example">
      <h2>Example 2: Button-controlled disclosure</h2>
      <button type="button"
              class="disclosure-btn"
              aria-expanded="false"
              aria-controls="panel-1"
              data-target="panel-1">
        <span class="icon" aria-hidden="true"></span>
        Show more details
      </button>
      <div id="panel-1"
           class="details"
           role="region"
           aria-labelledby="panel-1-label"
           hidden
           tabindex="-1">
        <p id="panel-1-label" class="small">Press the button again to collapse.</p>
        <p>This pattern uses a button with <code>aria-expanded</code> and <code>aria-controls</code> to toggle a region. The region is hidden using the <code>hidden</code> attribute.</p>
        <p>Itâ€™s easy to reuse and style across different parts of an application.</p>
      </div>
    </div>

    <div class="example" aria-label="Accordion example">
      <h2>Example 3: Simple accordion</h2>

      <div class="accordion-item">
        <button type="button"
                class="disclosure-btn"
                aria-expanded="false"
                aria-controls="acc-panel-1"
                data-target="acc-panel-1">
          <span class="title"><span class="icon" aria-hidden="true"></span> Section One</span>
        </button>
        <div id="acc-panel-1"
             class="details"
             role="region"
             aria-labelledby="acc-panel-1-label"
             hidden
             tabindex="-1">
          <p id="acc-panel-1-label" class="small">Section One content</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent feugiat sem in sapien facilisis, in vehicula libero ultrices.</p>
        </div>
      </div>

      <div class="accordion-item">
        <button type="button"
                class="disclosure-btn"
                aria-expanded="false"
                aria-controls="acc-panel-2"
                data-target="acc-panel-2">
          <span class="title"><span class="icon" aria-hidden="true"></span> Section Two</span>
        </button>
        <div id="acc-panel-2"
             class="details"
             role="region"
             aria-labelledby="acc-panel-2-label"
             hidden
             tabindex="-1">
          <p id="acc-panel-2-label" class="small">Section Two content</p>
          <p>Integer dignissim, risus vitae pulvinar cursus, neque massa gravida orci, ut bibendum tortor mi ut tortor.</p>
        </div>
      </div>

      <div class="accordion-item">
        <button type="button"
                class="disclosure-btn"
                aria-expanded="false"
                aria-controls="acc-panel-3"
                data-target="acc-panel-3">
          <span class="title"><span class="icon" aria-hidden="true"></span> Section Three</span>
        </button>
        <div id="acc-panel-3"
             class="details"
             role="region"
             aria-labelledby="acc-panel-3-label"
             hidden
             tabindex="-1">
          <p id="acc-panel-3-label" class="small">Section Three content</p>
          <p>Aliquam erat volutpat. Curabitur a dolor sed sem congue sollicitudin. In hac habitasse platea dictumst.</p>
        </div>
      </div>
    </div>
  </main>

  <script>
    (function () {
      const onDisclosureClick = (event) => {
        const btn = event.target.closest('[data-target]');
        if (!btn) return;

        const id = btn.getAttribute('data-target');
        const panel = id ? document.getElementById(id) : null;
        if (!panel) return;

        const isExpanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!isExpanded));
        panel.hidden = isExpanded;

        if (!isExpanded) {
          // Focus the panel for screen readers and keyboard users
          panel.focus({ preventScroll: true });
        }
      };

      document.addEventListener('click', onDisclosureClick);
    })();
  </script>
</body>
</html>