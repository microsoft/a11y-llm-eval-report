<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root{
      --accent:#0b6cff;
      --bg:#f8f9fb;
      --card:#ffffff;
      --muted:#6b7280;
      --radius:8px;
    }
    html,body{height:100%}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      margin:24px;
      background:linear-gradient(180deg,#eef3ff 0%,#fbfdff 100%);
      color:#0f1724;
    }

    h1{
      margin:0 0 18px 0;
      font-size:20px;
      letter-spacing:-0.2px;
    }
    .intro{
      margin-bottom:18px;
      color:var(--muted);
      font-size:14px;
    }

    .example{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow:0 1px 2px rgba(12,15,24,0.04), 0 6px 20px rgba(17,24,39,0.06);
      padding:14px;
      margin-bottom:14px;
      max-width:720px;
    }

    .toggle{
      display:flex;
      align-items:center;
      gap:12px;
      width:100%;
      background:transparent;
      border:1px solid transparent;
      padding:10px 12px;
      border-radius:8px;
      cursor:pointer;
      text-align:left;
      font-size:15px;
      color:inherit;
    }
    .toggle:focus{
      outline:2px solid rgba(11,108,255,0.18);
      outline-offset:2px;
      border-color:rgba(11,108,255,0.12);
    }
    .toggle .label{
      flex:1;
      display:flex;
      flex-direction:column;
      align-items:flex-start;
    }
    .toggle .title{
      font-weight:600;
      font-size:15px;
    }
    .toggle .subtitle{
      font-size:13px;
      color:var(--muted);
      margin-top:2px;
    }
    .chev{
      width:28px;
      height:28px;
      display:inline-grid;
      place-items:center;
      border-radius:6px;
      background:linear-gradient(180deg, rgba(11,108,255,0.06), rgba(11,108,255,0.03));
      color:var(--accent);
      transition:transform .22s ease;
      flex-shrink:0;
    }
    .chev svg{display:block}

    /* Controlled content area */
    .details{
      overflow:hidden;
      max-height:0;
      transition:max-height .28s cubic-bezier(.2,.9,.2,1);
      will-change:max-height;
      padding:0 12px;
      margin-top:8px;
    }

    .panel-inner{
      padding:12px 0 14px 0;
      border-top:1px dashed rgba(15,23,36,0.06);
      color:#111827;
      font-size:14px;
      line-height:1.45;
    }

    /* rotate when expanded (we toggle a class on the button for visual nicety) */
    .toggle[aria-expanded="true"] .chev{
      transform:rotate(90deg);
    }

    /* small code style inside content */
    .note{
      background:#f1f5f9;
      padding:8px 10px;
      border-radius:6px;
      font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,monospace;
      font-size:13px;
      color:#0f1724;
    }

    /* Responsive */
    @media (max-width:480px){
      body{margin:14px}
      .example{padding:10px}
      .toggle{padding:8px}
    }
  </style>

  <script>
    // Mark JS availability early (so CSS or other scripts can rely on it)
    document.documentElement.classList.add('js');
  </script>
</head>
<body>
  <h1>Expand / Collapse Widgets</h1>
  <div class="intro">Examples of accessible expand/collapse widgets. Each widget is wrapped in a div.example and the controlled content container has the class "details".</div>

  <div class="example">
    <button id="btn-1" class="toggle" aria-expanded="false" aria-controls="details-1" type="button">
      <span class="label">
        <span class="title">More about our product</span>
        <span class="subtitle">Click to reveal additional information</span>
      </span>
      <span class="chev" aria-hidden="true">
        <svg width="12" height="12" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 5L13 10L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
    </button>

    <div id="details-1" class="details" role="region" aria-labelledby="btn-1" aria-hidden="true">
      <div class="panel-inner">
        <p>Our product is designed to be fast, reliable, and easy to integrate. It supports modern browsers and provides a straightforward API for developers.</p>
        <p class="note">Tip: Use the API key from your dashboard to authenticate requests.</p>
      </div>
    </div>
  </div>

  <div class="example">
    <button id="btn-2" class="toggle" aria-expanded="false" aria-controls="details-2" type="button">
      <span class="label">
        <span class="title">Frequently asked questions</span>
        <span class="subtitle">Common questions and quick answers</span>
      </span>
      <span class="chev" aria-hidden="true">
        <svg width="12" height="12" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7 5L13 10L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
    </button>

    <div id="details-2" class="details" role="region" aria-labelledby="btn-2" aria-hidden="true">
      <div class="panel-inner">
        <p><strong>Q:</strong> How long does it take to set up?<br>
        <strong>A:</strong> Most integrations take less than 15 minutes using our quickstart guides.</p>

        <p><strong>Q:</strong> Is there a free tier?<br>
        <strong>A:</strong> Yes â€” a free tier is available for testing and small projects.</p>
      </div>
    </div>
  </div>

  <script>
    (function(){
      // Utility functions to expand/collapse with smooth animation
      function collapse(panel){
        // ensure panel is visible to measure start height
        panel.style.display = panel.style.display || getComputedStyle(panel).display;
        if (panel.style.display === 'none') {
          // nothing to do
          return;
        }
        var startHeight = panel.scrollHeight;
        // set explicit start max-height
        panel.style.maxHeight = startHeight + 'px';
        // force a repaint so the transition will run
        panel.getBoundingClientRect();
        // then set to 0 to trigger collapsing
        requestAnimationFrame(function(){
          panel.style.maxHeight = '0px';
        });
        // After transition, hide the element to remove it from tab order and layout
        panel.addEventListener('transitionend', function onEnd(ev){
          if (ev.propertyName !== 'max-height') return;
          panel.style.display = 'none';
          panel.style.maxHeight = '';
          panel.removeEventListener('transitionend', onEnd);
        }, {once:true});
      }

      function expand(panel){
        // make sure it's visible so we can measure
        panel.style.display = 'block';
        // start from zero
        panel.style.maxHeight = '0px';
        // need a tick to let the display change take effect
        requestAnimationFrame(function(){
          var target = panel.scrollHeight;
          panel.style.maxHeight = target + 'px';
        });
        // after transition, remove the max-height so content can grow/shrink naturally
        panel.addEventListener('transitionend', function onEnd(ev){
          if (ev.propertyName !== 'max-height') return;
          panel.style.maxHeight = 'none';
          panel.removeEventListener('transitionend', onEnd);
        }, {once:true});
      }

      // Initialize: find all toggles that control .details
      var toggles = Array.prototype.slice.call(document.querySelectorAll('.toggle[aria-controls]'));

      toggles.forEach(function(btn){
        var panel = document.getElementById(btn.getAttribute('aria-controls'));
        if (!panel) return;

        // Start collapsed (if you prefer expanded by default, change these)
        btn.setAttribute('aria-expanded','false');
        panel.setAttribute('aria-hidden','true');
        // hide panel so it's not shown before JS performs its setup
        panel.style.display = 'none';
        panel.style.maxHeight = '0px';

        btn.addEventListener('click', function(){
          var expanded = btn.getAttribute('aria-expanded') === 'true';
          if (expanded){
            // collapse
            btn.setAttribute('aria-expanded','false');
            panel.setAttribute('aria-hidden','true');
            collapse(panel);
          } else {
            // expand
            btn.setAttribute('aria-expanded','true');
            panel.setAttribute('aria-hidden','false');
            expand(panel);
          }
        });

        // Allow keyboard users to toggle with Space/Enter naturally (button does that by default).
        // Also support toggling via space on focused element if it were not a button (not needed here).
      });

      // Optional: close any open panels when the Escape key is pressed
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape' || e.key === 'Esc'){
          toggles.forEach(function(btn){
            if (btn.getAttribute('aria-expanded') === 'true'){
              var panel = document.getElementById(btn.getAttribute('aria-controls'));
              btn.setAttribute('aria-expanded','false');
              panel.setAttribute('aria-hidden','true');
              collapse(panel);
              // move focus back to the button for discoverability
              btn.focus();
            }
          });
        }
      });
    })();
  </script>
</body>
</html>