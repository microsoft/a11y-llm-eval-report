<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widgets Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #f7f7f9;
      --card: #ffffff;
      --text: #222;
      --muted: #555;
      --border: #ddd;
      --accent: #0a84ff;
    }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 2rem;
      background: var(--bg);
      color: var(--text);
    }
    h1 { font-size: 1.8rem; margin: 0 0 1rem; }
    .lead { color: var(--muted); margin-bottom: 2rem; }
    .example {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1rem;
      margin: 0 0 1rem 0;
      box-shadow: 0 1px 2px rgba(0,0,0,0.06);
    }
    .example h2 {
      margin: 0 0 0.5rem;
      font-size: 1.2rem;
    }

    /* Shared controls */
    .toggle-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid #cfcfd3;
      background: #f0f0f4;
      color: var(--text);
      border-radius: 8px;
      padding: 0.45rem 0.8rem;
      cursor: pointer;
      transition: border-color 0.2s ease, background 0.2s ease;
    }
    .toggle-button:hover { border-color: #b9b9bd; background: #e9e9ee; }
    .toggle-button:focus-visible { outline: 3px solid rgba(10,132,255,0.35); outline-offset: 2px; }

    .chev {
      display: inline-block;
      width: 1em;
      height: 1em;
      line-height: 1em;
      transform-origin: center;
      transition: transform 0.2s ease;
      user-select: none;
    }

    /* Native details element */
    details.details {
      padding: 0.25rem 0;
    }
    details.details > summary {
      cursor: pointer;
      list-style: none;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border-radius: 8px;
      padding: 0.35rem 0.2rem;
    }
    details.details > summary::-webkit-details-marker { display: none; }
    details.details[open] .chev { transform: rotate(90deg); }
    details.details .content {
      margin-top: 0.5rem;
    }

    /* Custom hidden content container */
    .details.panel {
      margin-top: 0.5rem;
    }
    .details[hidden] { display: none !important; }
    .toggle-button[aria-expanded="true"] .chev { transform: rotate(90deg); }

    /* Accordion layout */
    .accordion {
      display: grid;
      gap: 0.5rem;
    }
    .accordion-item {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 0.5rem;
      background: #fafafa;
    }
    .accordion-item .toggle-button {
      background: #fff;
      border-color: var(--border);
      width: 100%;
      justify-content: flex-start;
    }

    /* Pretty content */
    .content p, .panel p { margin: 0.5rem 0; }
    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      background: #f2f2f5;
      border: 1px solid #e2e2e6;
      border-radius: 6px;
      padding: 0.1rem 0.3rem;
    }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widgets</h1>
  <p class="lead">Examples of native and custom expand/collapse interactions. Each widget is wrapped in an element with the example class, and the container for controlled content has a details class.</p>

  <div class="example" id="ex1">
    <h2>Native details/summary</h2>
    <details class="details">
      <summary>
        <span class="chev" aria-hidden="true">▶</span>
        <span>More information</span>
      </summary>
      <div class="content">
        <p>This uses the HTML <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> elements.</p>
        <p>It supports keyboard and mouse out-of-the-box and can be styled to fit your UI.</p>
        <p>Because the container is the <code>details</code> element itself, it has the <code>details</code> class.</p>
      </div>
    </details>
  </div>

  <div class="example" id="ex2">
    <h2>Custom button toggle</h2>
    <button class="toggle-button" type="button" aria-expanded="false" aria-controls="panel-2" id="btn-2">
      <span class="chev" aria-hidden="true">▶</span>
      <span>Show details</span>
    </button>
    <div class="details panel" id="panel-2" role="region" aria-labelledby="btn-2" hidden>
      <p>This panel is controlled by a custom button using JavaScript.</p>
      <p>The container for the controlled content has a <code>details</code> class and is initially hidden.</p>
      <p>Click the button again to collapse.</p>
    </div>
  </div>

  <div class="example" id="ex3">
    <h2>Accordion (single-open)</h2>
    <div class="accordion" role="region" aria-label="FAQ">
      <div class="accordion-item">
        <button class="toggle-button" type="button" aria-expanded="false" aria-controls="acc-panel-1" id="acc-btn-1">
          <span class="chev" aria-hidden="true">▶</span>
          <span>What is an accordion?</span>
        </button>
        <div class="details panel" id="acc-panel-1" role="region" aria-labelledby="acc-btn-1" hidden>
          <p>An accordion lets users expand one section at a time to reveal content while keeping other sections collapsed.</p>
        </div>
      </div>
      <div class="accordion-item">
        <button class="toggle-button" type="button" aria-expanded="false" aria-controls="acc-panel-2" id="acc-btn-2">
          <span class="chev" aria-hidden="true">▶</span>
          <span>Why use it?</span>
        </button>
        <div class="details panel" id="acc-panel-2" role="region" aria-labelledby="acc-btn-2" hidden>
          <p>It saves space and helps focus by showing only one chunk of information at a time.</p>
        </div>
      </div>
      <div class="accordion-item">
        <button class="toggle-button" type="button" aria-expanded="false" aria-controls="acc-panel-3" id="acc-btn-3">
          <span class="chev" aria-hidden="true">▶</span>
          <span>Can multiple be open?</span>
        </button>
        <div class="details panel" id="acc-panel-3" role="region" aria-labelledby="acc-btn-3" hidden>
          <p>This example allows only one panel to be open at a time, but you can configure it to allow multiple panels if desired.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Custom single toggle (Example 2)
    (function () {
      const btn = document.getElementById('btn-2');
      const panel = document.getElementById('panel-2');
      if (!btn || !panel) return;
      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!expanded));
        btn.querySelector('span:nth-child(2)').textContent = expanded ? 'Show details' : 'Hide details';
        panel.hidden = expanded;
      });
      // Optional: allow Space/Enter to toggle if some environments lack default behavior on button
      btn.addEventListener('keydown', (e) => {
        if (e.key === ' ' || e.key === 'Enter') {
          e.preventDefault();
          btn.click();
        }
      });
    })();

    // Accordion (Example 3)
    (function () {
      const container = document.querySelector('#ex3 .accordion');
      if (!container) return;
      const items = Array.from(container.querySelectorAll('.accordion-item'));
      items.forEach(item => {
        const btn = item.querySelector('.toggle-button');
        const panel = item.querySelector('.details');
        if (!btn || !panel) return;

        btn.addEventListener('click', () => {
          const isExpanded = btn.getAttribute('aria-expanded') === 'true';
          // Close all other items
          items.forEach(other => {
            const ob = other.querySelector('.toggle-button');
            const op = other.querySelector('.details');
            if (ob && op && ob !== btn) {
              ob.setAttribute('aria-expanded', 'false');
              ob.querySelector('span:nth-child(2)').textContent = 'Show details';
              op.hidden = true;
            }
          });
          // Toggle this item
          btn.setAttribute('aria-expanded', String(!isExpanded));
          btn.querySelector('span:nth-child(2)').textContent = isExpanded ? 'Show details' : 'Hide details';
          panel.hidden = isExpanded;
        });

        btn.addEventListener('keydown', (e) => {
          if (e.key === ' ' || e.key === 'Enter') {
            e.preventDefault();
            btn.click();
          }
        });
      });
    })();
  </script>
</body>
</html>