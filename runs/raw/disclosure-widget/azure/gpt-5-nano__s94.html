<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widget Demo</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --card: #fff;
      --border: #e0e0e0;
      --text: #1f2937;
      --muted: #6b7280;
      --primary: #2563eb;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; color: var(--text); background: var(--bg); }
    .container { max-width: 760px; margin: 40px auto; padding: 0 16px; }
    h1 { margin: 0 0 8px; font-size: 2rem; }
    p.lead { margin: 0 0 20px; color: var(--muted); }
    .example { background: var(--card); border: 1px solid var(--border); border-radius: 8px; padding: 14px; margin-bottom: 14px; box-shadow: 0 1px 2px rgba(0,0,0,.04); }
    .trigger {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 10px 14px; font-size: 1rem; border: 1px solid #ccc;
      border-radius: 6px; background: #f7f7f7; cursor: pointer;
    }
    .trigger:focus { outline: 2px solid #4c9be0; outline-offset: 2px; }
    .trigger[aria-expanded="true"] { background: #eef5ff; border-color: #4c9be0; }

    .details { padding: 10px 0 0; color: #374151; }
    .panel { padding: 8px 12px; background: #f9fafb; border: 1px solid #e5e7eb; border-radius: 6px; }
    .meta { font-size: .85rem; color: #6b7280; margin-top: 6px; }

    @media (min-width: 640px) {
      .layout { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Expand/Collapse Widget Demo</h1>
    <p class="lead">This page demonstrates accessible expand/collapse widgets. Each widget is wrapped in a container with the class "example". The content region that is shown/hidden uses a container with the class "details".</p>

    <!-- Widget 1: default collapsed -->
    <div class="example" aria-label="Widget 1 example">
      <button id="toggle1" class="trigger" aria-expanded="false" aria-controls="content1">
        Expand details
      </button>
      <div id="content1" class="details" hidden role="region" aria-labelledby="toggle1">
        <div class="panel">
          <strong>About this widget</strong>
          <p>This content is revealed when the button above is activated. It demonstrates a simple expand/collapse interaction.</p>
        </div>
        <div class="meta">Status: collapsed by default</div>
      </div>
    </div>

    <!-- Widget 2: default expanded -->
    <div class="example" aria-label="Widget 2 example">
      <button id="toggle2" class="trigger" aria-expanded="true" aria-controls="content2">
        Collapse details
      </button>
      <div id="content2" class="details" role="region" aria-labelledby="toggle2">
        <div class="panel">
          <strong>Details are visible</strong>
          <p>This widget starts expanded. Click the button to collapse the content.</p>
        </div>
        <div class="meta">Status: expanded by default</div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      function setupToggle(button, content) {
        // Initialize state based on aria-expanded
        var isExpanded = button.getAttribute('aria-expanded') === 'true';
        content.hidden = !isExpanded;

        button.addEventListener('click', function() {
          var current = button.getAttribute('aria-expanded') === 'true';
          button.setAttribute('aria-expanded', String(!current));
          content.hidden = current;
        });

        // Optional: handle Enter/Space on button for accessibility
        button.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ' || e.code === 'Space') {
            e.preventDefault();
            button.click();
          }
        });
      }

      var btn1 = document.getElementById('toggle1');
      var cont1 = document.getElementById('content1');
      setupToggle(btn1, cont1);

      var btn2 = document.getElementById('toggle2');
      var cont2 = document.getElementById('content2');
      // Ensure initial ARIA state matches initial visibility
      var initExpanded2 = btn2.getAttribute('aria-expanded') === 'true';
      cont2.hidden = !initExpanded2;
      btn2.addEventListener('click', function() {
        var expanded = btn2.getAttribute('aria-expanded') === 'true';
        btn2.setAttribute('aria-expanded', String(!expanded));
        cont2.hidden = expanded;
      });
    })();
  </script>
</body>
</html>