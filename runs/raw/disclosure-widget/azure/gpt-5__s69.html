<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widgets Demo</title>
  <style>
    :root {
      --border: #d0d7de;
      --bg: #f6f8fa;
      --text: #24292f;
      --accent: #0969da;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: #fff;
      line-height: 1.5;
    }

    header {
      padding: 2rem 1rem;
      border-bottom: 1px solid var(--border);
      background: var(--bg);
    }

    header h1 {
      margin: 0 0 0.5rem 0;
      font-size: 1.5rem;
    }

    header p {
      margin: 0;
      color: #57606a;
    }

    main {
      padding: 1rem;
      max-width: 800px;
      margin: 0 auto;
    }

    .example {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      margin: 1rem 0;
      background: #fff;
    }

    .example h2 {
      margin-top: 0;
      font-size: 1.1rem;
    }

    /* Native <details> styling */
    details.details {
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.5rem 0.75rem;
      background: #fff;
    }

    details.details summary {
      cursor: pointer;
      list-style: none;
      font-weight: 600;
      color: var(--accent);
      outline: none;
    }

    details.details summary::-webkit-details-marker {
      display: none;
    }

    details.details summary::before {
      content: "▶";
      display: inline-block;
      margin-right: 0.5rem;
      transition: transform 0.2s ease;
    }

    details.details[open] summary::before {
      content: "▼";
    }

    details.details .content {
      margin-top: 0.5rem;
      color: #4b5563;
    }

    /* Custom toggle button */
    .toggle-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--accent);
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
    }

    .toggle-button:focus-visible {
      outline: 3px solid rgba(9,105,218,0.3);
      outline-offset: 2px;
    }

    .toggle-icon {
      width: 1em;
      height: 1em;
      display: inline-block;
    }

    /* Controlled content container */
    .details {
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.75rem;
      margin-top: 0.75rem;
      background: #fff;
    }

    .details[hidden] {
      display: none !important;
    }

    /* Checkbox-driven toggle */
    .example input[type="checkbox"] {
      margin-right: 0.5rem;
      transform: translateY(2px);
    }

    .example label.toggle-label {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      color: var(--accent);
      font-weight: 600;
    }

    /* Show/hide via CSS based on checkbox state */
    .example .checkbox-toggle + label + .details {
      display: none;
    }
    .example .checkbox-toggle:checked + label + .details {
      display: block;
    }

    /* Content styles */
    .details p {
      margin: 0.5rem 0;
      color: #4b5563;
    }
    .details ul {
      margin: 0.5rem 0 0.5rem 1.25rem;
    }
    .details code {
      background: #f3f4f6;
      padding: 0.1rem 0.3rem;
      border-radius: 4px;
    }

    /* Helper */
    .note {
      font-size: 0.9rem;
      color: #57606a;
    }
  </style>
</head>
<body>
  <header>
    <h1>Expand/Collapse Widgets</h1>
    <p>Examples of native and custom expandable sections. Each widget is wrapped in a div with an "example" class, and the controlled content container uses the "details" class.</p>
  </header>

  <main>
    <div class="example">
      <h2>Widget 1: Native HTML details/summary</h2>
      <details class="details">
        <summary>More about this product</summary>
        <div class="content">
          <p>This section uses the semantic <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> elements. It is accessible by default and works without JavaScript.</p>
          <ul>
            <li>Keyboard and screen reader friendly.</li>
            <li>Minimal code required.</li>
            <li>Customizable with CSS.</li>
          </ul>
          <p class="note">Tip: You can style the summary indicator to provide visual feedback.</p>
        </div>
      </details>
    </div>

    <div class="example">
      <h2>Widget 2: Button-controlled panel</h2>
      <button class="toggle-button" type="button" aria-expanded="false" aria-controls="profile-panel" data-target="#profile-panel">
        <span class="toggle-icon" aria-hidden="true">▶</span>
        Show user profile
      </button>
      <div class="details" id="profile-panel" hidden>
        <p><strong>Alex Johnson</strong></p>
        <p>Front-end engineer who loves building accessible UI components.</p>
        <ul>
          <li>Location: Remote</li>
          <li>Skills: HTML, CSS, JavaScript, Accessibility</li>
          <li>Interests: Design systems, performance, progressive enhancement</li>
        </ul>
      </div>
      <p class="note">This widget uses a button to toggle a content panel with the "details" class.</p>
    </div>

    <div class="example">
      <h2>Widget 3: Checkbox-driven toggle (CSS only)</h2>
      <input id="faq-toggle" class="checkbox-toggle" type="checkbox" />
      <label class="toggle-label" for="faq-toggle" role="button" aria-controls="faq-panel" aria-expanded="false">
        <span aria-hidden="true">▶</span>
        FAQ
      </label>
      <div class="details" id="faq-panel">
        <p><strong>What is this?</strong> A simple CSS-driven expand/collapse using a checkbox.</p>
        <p><strong>Why use it?</strong> It works without JavaScript and demonstrates basic progressive enhancement.</p>
        <p><strong>Can I style it?</strong> Yes, the label can look like a button, and the content container has the "details" class for consistent styling.</p>
      </div>
      <p class="note">The label toggles the checkbox, which shows or hides the adjacent content block.</p>
    </div>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Button-controlled panels
      const buttons = document.querySelectorAll('.toggle-button[data-target]');
      buttons.forEach((btn) => {
        const targetSelector = btn.getAttribute('data-target');
        const target = document.querySelector(targetSelector);

        if (!target) return;

        const icon = btn.querySelector('.toggle-icon');

        function sync() {
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          if (icon) icon.textContent = expanded ? '▼' : '▶';
        }

        btn.addEventListener('click', () => {
          const isHidden = target.hasAttribute('hidden');
          if (isHidden) {
            target.removeAttribute('hidden');
            btn.setAttribute('aria-expanded', 'true');
          } else {
            target.setAttribute('hidden', '');
            btn.setAttribute('aria-expanded', 'false');
          }
          sync();
        });

        // Initialize icon
        sync();
      });

      // Checkbox-driven panels: sync aria-expanded on label
      const checkboxToggles = document.querySelectorAll('.checkbox-toggle');
      checkboxToggles.forEach((chk) => {
        const label = document.querySelector('label[for="' + chk.id + '"]');
        const content = document.getElementById(label ? label.getAttribute('aria-controls') : '');

        function update() {
          if (label) label.setAttribute('aria-expanded', chk.checked ? 'true' : 'false');
          // No need to toggle [hidden]; CSS handles show/hide
          // Update label icon
          const icon = label && label.querySelector('span[aria-hidden="true"]');
          if (icon) icon.textContent = chk.checked ? '▼' : '▶';
        }

        update();
        chk.addEventListener('change', update);
      });
    });
  </script>
</body>
</html>