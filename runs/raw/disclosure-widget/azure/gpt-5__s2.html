<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widgets</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    :root {
      --bg: #0f1320;
      --panel: #151a2b;
      --accent: #6aa9ff;
      --text: #e6ecff;
      --muted: #9fb1d0;
      --border: #27304a;
      --focus: #a6d1ff;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      background: radial-gradient(1200px 600px at 10% 0%, #131a2b 0%, #0f1320 70%, #0c1020 100%);
      color: var(--text);
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    header {
      padding: 2rem 1rem 0.5rem;
      text-align: center;
    }

    header h1 {
      margin: 0 0 0.25rem 0;
      font-size: 1.8rem;
    }

    header p {
      margin: 0 auto;
      max-width: 60ch;
      color: var(--muted);
      font-size: 0.95rem;
    }

    main {
      padding: 1rem;
      max-width: 900px;
      margin: 0 auto 3rem;
    }

    .example {
      background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem auto;
      box-shadow: 0 12px 30px rgba(8, 12, 28, 0.4);
    }

    .example h2 {
      margin: 0 0 0.75rem;
      font-size: 1.2rem;
      color: var(--accent);
    }

    /* Native details element styles */
    details.details {
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--panel);
      overflow: hidden;
    }

    details.details summary {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      cursor: pointer;
      list-style: none;
      color: var(--text);
      user-select: none;
    }

    details.details summary::-webkit-details-marker { display: none; }

    details.details summary::before {
      content: "";
      width: 12px;
      height: 12px;
      border: 2px solid var(--accent);
      border-left-color: transparent;
      border-top-color: transparent;
      transform: rotate(45deg);
      transition: transform 160ms ease;
    }

    details.details[open] summary::before {
      transform: rotate(225deg);
    }

    details.details .content {
      padding: 0.75rem 1rem 1rem;
      border-top: 1px solid var(--border);
      color: var(--muted);
    }

    /* Custom disclosure button styles */
    .disclosure {
      display: grid;
      gap: 0.75rem;
    }

    .toggle,
    .accordion-toggle {
      appearance: none;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, #1a2137, #141b2f);
      color: var(--text);
      border-radius: 10px;
      padding: 0.6rem 0.9rem;
      font-weight: 600;
      letter-spacing: 0.2px;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      transition: box-shadow 150ms ease, border-color 150ms ease, transform 60ms ease;
    }

    .toggle:hover,
    .accordion-toggle:hover {
      border-color: #324066;
      box-shadow: 0 8px 24px rgba(10, 18, 42, 0.5), inset 0 1px 0 rgba(255,255,255,0.06);
    }

    .toggle:active,
    .accordion-toggle:active {
      transform: translateY(1px);
    }

    .toggle:focus-visible,
    .accordion-toggle:focus-visible {
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }

    .toggle .chev,
    .accordion-toggle .chev {
      width: 10px;
      height: 10px;
      border: 2px solid var(--accent);
      border-left-color: transparent;
      border-top-color: transparent;
      transform: rotate(45deg);
      transition: transform 160ms ease;
      flex-shrink: 0;
    }

    .toggle[aria-expanded="true"] .chev,
    .accordion-toggle[aria-expanded="true"] .chev {
      transform: rotate(225deg);
    }

    .details {
      border: 1px solid var(--border);
      background: var(--panel);
      border-radius: 10px;
      padding: 0.75rem 1rem;
      color: var(--muted);
    }

    .details p { margin: 0.5rem 0; }

    /* Accordion layout */
    .accordion {
      display: grid;
      gap: 0.5rem;
    }

    .accordion h3 {
      margin: 0;
      font-size: 1rem;
      font-weight: 600;
      color: var(--accent);
    }

    .accordion .accordion-panel {
      margin-top: 0.25rem;
    }

    /* Small helper text */
    .hint {
      font-size: 0.85rem;
      color: var(--muted);
      margin-top: 0.25rem;
    }

    /* Utility region labels */
    .region-label {
      display: inline-block;
      font-size: 0.75rem;
      color: #b8c7e4;
      margin-bottom: 0.25rem;
      opacity: 0.8;
    }
  </style>
</head>
<body>
  <header>
    <h1>Expand/Collapse Widgets</h1>
    <p>Examples include a native details element, a custom disclosure button, and a simple accordion. Each widget is wrapped with an element using the "example" class, and each controlled content container uses the "details" class.</p>
  </header>

  <main>
    <div class="example">
      <h2>Native Details Element</h2>
      <details class="details">
        <summary>Overview: What is an expand/collapse?</summary>
        <div class="content">
          <p>An expand/collapse widget reveals supplemental content on demand. The native details element provides builtâ€‘in accessibility, keyboard support, and progressive enhancement.</p>
          <p>Use summary as the control, and details as the collapsible container.</p>
        </div>
      </details>
      <div class="hint">This uses the HTML details/summary element with a container class of "details".</div>
    </div>

    <div class="example">
      <h2>Custom Disclosure Button</h2>
      <div class="disclosure">
        <button class="toggle" aria-expanded="false" aria-controls="info-1" id="toggle-1">
          <span class="chev" aria-hidden="true"></span>
          Toggle additional information
        </button>

        <div class="details" id="info-1" role="region" aria-labelledby="toggle-1" hidden>
          <span class="region-label">Region: Additional information</span>
          <p>This disclosure uses a button that toggles the visibility of a content region. The button announces its state via aria-expanded and references the controlled region via aria-controls.</p>
          <p>The region is hidden and shown by toggling the hidden attribute.</p>
        </div>
      </div>
      <div class="hint">A button controls a "details" container via aria-controls.</div>
    </div>

    <div class="example">
      <h2>Accordion (One Panel Open)</h2>
      <div class="accordion" id="accordion">
        <h3>
          <button class="accordion-toggle" aria-expanded="false" aria-controls="acc-1" id="accbtn-1">
            <span class="chev" aria-hidden="true"></span>
            Introduction
          </button>
        </h3>
        <div class="details accordion-panel" id="acc-1" role="region" aria-labelledby="accbtn-1" hidden>
          <span class="region-label">Region: Introduction</span>
          <p>An accordion is a set of panels where activating a header reveals content while optionally collapsing others.</p>
        </div>

        <h3>
          <button class="accordion-toggle" aria-expanded="false" aria-controls="acc-2" id="accbtn-2">
            <span class="chev" aria-hidden="true"></span>
            Usage Guidelines
          </button>
        </h3>
        <div class="details accordion-panel" id="acc-2" role="region" aria-labelledby="accbtn-2" hidden>
          <span class="region-label">Region: Usage</span>
          <p>Use accordions to reduce page clutter and organize dense sections. Keep titles short, descriptive, and scannable.</p>
        </div>

        <h3>
          <button class="accordion-toggle" aria-expanded="false" aria-controls="acc-3" id="accbtn-3">
            <span class="chev" aria-hidden="true"></span>
            Accessibility Notes
          </button>
        </h3>
        <div class="details accordion-panel" id="acc-3" role="region" aria-labelledby="accbtn-3" hidden>
          <span class="region-label">Region: Accessibility</span>
          <p>Provide clear focus styles, ensure buttons are real buttons (not divs), and update aria-expanded to reflect current state.</p>
        </div>
      </div>
      <div class="hint">Buttons toggle "details" panels. Only one panel is open at a time.</div>
    </div>
  </main>

  <script>
    // Custom Disclosure Button
    document.querySelectorAll('.toggle').forEach(function(btn) {
      btn.addEventListener('click', function() {
        var controlsId = btn.getAttribute('aria-controls');
        var region = document.getElementById(controlsId);
        if (!region) return;

        var expanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', expanded ? 'false' : 'true');
        region.hidden = expanded;
      });
    });

    // Accordion: ensure only one panel open
    (function() {
      var accordion = document.getElementById('accordion');
      if (!accordion) return;

      function getPanel(button) {
        var id = button.getAttribute('aria-controls');
        return id ? document.getElementById(id) : null;
      }

      function closeAll() {
        accordion.querySelectorAll('.accordion-toggle').forEach(function(b) {
          b.setAttribute('aria-expanded', 'false');
          var panel = getPanel(b);
          if (panel) panel.hidden = true;
        });
      }

      accordion.addEventListener('click', function(e) {
        var btn = e.target.closest('.accordion-toggle');
        if (!btn) return;

        var isExpanded = btn.getAttribute('aria-expanded') === 'true';
        if (isExpanded) {
          btn.setAttribute('aria-expanded', 'false');
          var panel = getPanel(btn);
          if (panel) panel.hidden = true;
          return;
        }

        closeAll();
        btn.setAttribute('aria-expanded', 'true');
        var targetPanel = getPanel(btn);
        if (targetPanel) targetPanel.hidden = false;
      });

      // Optional keyboard arrow navigation between headers
      accordion.addEventListener('keydown', function(e) {
        var btns = Array.from(accordion.querySelectorAll('.accordion-toggle'));
        var currentIndex = btns.indexOf(document.activeElement);
        if (currentIndex === -1) return;

        if (e.key === 'ArrowDown') {
          e.preventDefault();
          var next = btns[currentIndex + 1] || btns[0];
          next.focus();
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          var prev = btns[currentIndex - 1] || btns[btns.length - 1];
          prev.focus();
        } else if (e.key === 'Home') {
          e.preventDefault();
          btns[0].focus();
        } else if (e.key === 'End') {
          e.preventDefault();
          btns[btns.length - 1].focus();
        }
      });
    })();
  </script>
</body>
</html>