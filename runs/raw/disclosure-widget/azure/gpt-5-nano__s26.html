<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widget Demo</title>
  <style>
    :root {
      --bg: #f9f9f9;
      --card: #ffffff;
      --border: #e5e5e5;
      --accent: #1e88e5;
    }
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f0f2f5;
      color: #1f2937;
      padding: 2rem;
      line-height: 1.5;
    }
    h1 {
      font-size: 1.6rem;
      margin-bottom: 1rem;
    }
    .example {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 1px 2px rgba(0,0,0,.04);
    }
    .example h3 {
      margin: 0;
      font-size: 1.05rem;
    }
    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 0.5em;
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }
    .toggle:focus {
      outline: 2px solid #0b5bd3;
      outline-offset: 2px;
    }
    .icon {
      display: inline-block;
      transition: transform .2s ease;
    }
    .details {
      padding: 0.75rem 1rem;
      border-radius: 6px;
      margin-top: 0.5rem;
      background: #fff;
      border: 1px solid var(--border);
    }
    .details[hidden] {
      display: none;
    }
    /* Rotate icon when expanded (aria attribute can also drive this) */
    button[aria-expanded="true"] .icon {
      transform: rotate(90deg);
    }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widget Demo</h1>

  <div class="example" aria-label="Expandable panel example 1">
    <button class="toggle" aria-expanded="false" aria-controls="panel1">
      <span class="icon" aria-hidden="true">▸</span>
      Topic A Overview
    </button>
    <div id="panel1" class="details" hidden>
      <p>This panel expands to reveal details about Topic A. It uses a controlled content container with a details class.</p>
    </div>
  </div>

  <div class="example" aria-label="Expandable panel example 2">
    <button class="toggle" aria-expanded="false" aria-controls="panel2">
      <span class="icon" aria-hidden="true">▸</span>
      Frequently Asked Question
    </button>
    <div id="panel2" class="details" hidden>
      <p>Q: What is this widget? A: It's a simple expand/collapse widget that shows or hides content on demand.</p>
    </div>
  </div>

  <div class="example" aria-label="Expandable panel example 3">
    <button class="toggle" aria-expanded="false" aria-controls="panel3">
      <span class="icon" aria-hidden="true">▸</span>
      Accessibility Tips
    </button>
    <div id="panel3" class="details" hidden>
      <p>Tips include using semantic controls, ARIA attributes, and clear focus states to improve accessibility.</p>
    </div>
  </div>

  <script>
    (function() {
      // Initialize all expandable widgets inside .example
      document.querySelectorAll('.example').forEach(function(ex) {
        var btn = ex.querySelector('.toggle');
        var panelId = btn.getAttribute('aria-controls');
        var panel = document.getElementById(panelId);

        // Ensure initial state is collapsed
        panel.hidden = true;
        btn.setAttribute('aria-expanded', 'false');
        // Keep icon in sync visually
        btn.querySelector('.icon').style.transform = 'rotate(0deg)';

        btn.addEventListener('click', function() {
          var currentlyExpanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!currentlyExpanded));
          panel.hidden = currentlyExpanded; // show if not expanded, hide if expanded

          // Update icon rotation (inline style ensures immediate visual feedback)
          btn.querySelector('.icon').style.transform = currentlyExpanded ? 'rotate(0deg)' : 'rotate(90deg)';
        });

        // Optional: support Enter/Space key on the button for accessibility
        btn.addEventListener('keydown', function(e) {
          if (e.key === 'Enter' || e.key === ' ' || e.key === 'Spacebar') {
            e.preventDefault();
            btn.click();
          }
        });
      });
    })();
  </script>
</body>
</html>