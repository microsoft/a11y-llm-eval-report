<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widget Demo</title>
  <style>
    :root {
      --border: #cccccc;
      --bg: #ffffff;
      --panel: #f7f7f7;
      --hover: #e8f0ff;
    }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f7f7f7;
      color: #333;
      padding: 2rem;
    }

    h1 {
      font-size: 1.6rem;
      margin-bottom: 1rem;
    }

    /* Each widget is wrapped in an example container */
    .example {
      border: 1px solid var(--border);
      border-radius: 8px;
      background: var(--bg);
      overflow: hidden;
      margin-bottom: 1.25rem;
      box-shadow: 0 1px 2px rgba(0,0,0,.05);
    }

    /* Custom expand/collapse widget header (acts as the control) */
    .toggle {
      width: 100%;
      text-align: left;
      padding: 1rem;
      font-size: 1rem;
      background: #f6f6f6;
      border: 0;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      transition: background .2s ease;
    }
    .toggle:hover,
    .toggle:focus {
      background: #eef4ff;
      outline: none;
    }
    .toggle[aria-expanded="true"] {
      background: var(--panel);
    }

    /* Container for controlled content in custom widgets */
    .details {
      padding: 1rem;
      background: #fff;
    }

    /* Hidden by default for custom widgets */
    .hidden {
      display: none;
    }

    /* Native details/summary widget styling (wrapped in an example) */
    details {
      border-top: 1px solid var(--border);
      background: #fff;
    }
    summary {
      padding: 1rem;
      cursor: pointer;
      list-style: none;
      border: 0;
      background: #f6f6f6;
    }
    summary:hover {
      background: #eef4ff;
    }

    /* Optional content inside native details */
    .details-inner {
      padding: 1rem;
      background: #fff;
    }
  </style>
</head>
<body>

  <h1>Expand/Collapse Widget Demo</h1>

  <!-- Custom widget 1 -->
  <div class="example">
    <div class="widget" aria-label="Custom expand/collapse example 1">
      <button class="toggle" aria-expanded="false" aria-controls="content1">
        Show details about Topic A
      </button>
      <div id="content1" class="details hidden" role="region" aria-label="Details for Topic A">
        <p>This is the controlled content for Topic A. It demonstrates how content can be expanded or collapsed with a custom widget.</p>
        <ul>
          <li>Point A1</li>
          <li>Point A2</li>
          <li>Point A3</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Custom widget 2 -->
  <div class="example">
    <div class="widget" aria-label="Custom expand/collapse example 2">
      <button class="toggle" aria-expanded="false" aria-controls="content2">
        Reveal more about Topic B
      </button>
      <div id="content2" class="details hidden" role="region" aria-label="Details for Topic B">
        <p>Topic B expands to reveal more information. This content area uses the container with the class "details".</p>
        <ul>
          <li>Aspect B1</li>
          <li>Aspect B2</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Native details/summary widget inside an example wrapper -->
  <div class="example">
    <details>
      <summary>Topic C (native expand/collapse)</summary>
      <div class="details-inner" aria-label="Details for Topic C">
        <p>This is a native details/summary widget. The content panel is a div with class "details-inner" to illustrate the container for controlled content.</p>
        <p>It expands and collapses using the native browser behavior.</p>
      </div>
    </details>
  </div>

  <script>
    // Enhance custom widgets with ARIA and toggle behavior
    document.querySelectorAll('.example .toggle').forEach(function(btn){
      btn.addEventListener('click', function() {
        var contentId = btn.getAttribute('aria-controls');
        var content = document.getElementById(contentId);
        var isExpanded = btn.getAttribute('aria-expanded') === 'true';
        btn.setAttribute('aria-expanded', String(!isExpanded));
        if (!isExpanded) {
          content.classList.remove('hidden');
        } else {
          content.classList.add('hidden');
        }
      });

      btn.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });
    });
  </script>

</body>
</html>