<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root {
      color-scheme: light dark;
      --bg: #ffffff;
      --fg: #1a1a1a;
      --muted: #666;
      --border: #dcdcdc;
      --accent: #3b82f6;
      --example-bg: #f8f9fa;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f0f11;
        --fg: #e9e9e9;
        --muted: #a2a2a2;
        --border: #2a2a2e;
        --accent: #60a5fa;
        --example-bg: #141416;
      }
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.5;
      background: var(--bg);
      color: var(--fg);
    }
    main {
      max-width: 960px;
      margin: 0 auto;
      padding: 24px;
    }
    h1 {
      font-size: 1.8rem;
      margin: 0 0 12px;
    }
    p.lead {
      margin: 0 0 24px;
      color: var(--muted);
    }

    .example {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin: 16px 0;
      background: var(--example-bg);
    }

    /* Shared styles for the controlled content container */
    .details {
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--bg);
      margin-top: 10px;
      padding: 12px;
    }

    /* Example 1: Native <details> styling */
    details.details {
      padding: 0; /* The details element itself will hold content; inner spacing via summary and content block */
    }
    details.details > summary {
      cursor: pointer;
      list-style: none;
      padding: 12px 14px;
      font-weight: 600;
      user-select: none;
      outline: none;
    }
    details.details > summary:focus-visible {
      box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 35%, transparent);
      border-radius: 8px;
    }
    details.details > summary::before {
      content: "▸";
      display: inline-block;
      margin-right: 8px;
      transform-origin: center;
      transition: transform 150ms ease;
      color: var(--muted);
    }
    details.details[open] > summary::before {
      transform: rotate(90deg);
    }
    details.details > .content {
      border-top: 1px solid var(--border);
      padding: 12px 14px;
    }

    /* Example 2/3: Button-driven panels */
    .controls {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    button.toggle {
      appearance: none;
      color: var(--fg);
      background: var(--bg);
      border: 1px solid var(--border);
      padding: 10px 12px;
      border-radius: 8px;
      font-size: 0.95rem;
      line-height: 1.2;
      cursor: pointer;
    }
    button.toggle:hover {
      border-color: color-mix(in oklab, var(--accent) 60%, var(--border));
    }
    button.toggle:focus-visible {
      outline: none;
      box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 35%, transparent);
    }
    button.toggle .chev {
      margin-right: 6px;
      transition: transform 150ms ease;
      display: inline-block;
    }
    button.toggle[aria-expanded="true"] .chev {
      transform: rotate(90deg);
    }

    /* Hidden panels are not displayed */
    [hidden] { display: none !important; }

    /* Accordion spacing */
    .accordion-item {
      margin-top: 8px;
    }
    .accordion-item .details {
      margin-top: 6px;
    }

    /* Subtle transition for people who don't prefer reduced motion */
    @media (prefers-reduced-motion: no-preference) {
      .details {
        transition: transform 120ms ease, box-shadow 120ms ease;
      }
      .details:focus-within {
        box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 30%, transparent);
      }
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      font-size: 0.95em;
      background: color-mix(in oklab, var(--bg) 75%, var(--example-bg));
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid var(--border);
    }
  </style>
</head>
<body>
  <main>
    <h1>Expand/Collapse Widget Examples</h1>
    <p class="lead">Three styles of expand/collapse widgets. Each widget is wrapped in a container with the class <code>example</code>, and every controlled content container uses the class <code>details</code>.</p>

    <div class="example" aria-labelledby="ex1-title">
      <h2 id="ex1-title">Example 1 — Native Details/Summary</h2>
      <details class="details">
        <summary>What is an expand/collapse widget?</summary>
        <div class="content">
          <p>An expand/collapse widget lets users reveal additional information on demand. The native <code>&lt;details&gt;</code> element provides this behavior without extra JavaScript and is accessible by default.</p>
          <ul>
            <li>Click or press Enter/Space on the summary to toggle.</li>
            <li>The content below is the controlled section inside the <code>details</code> container.</li>
          </ul>
        </div>
      </details>
    </div>

    <div class="example" aria-labelledby="ex2-title">
      <h2 id="ex2-title">Example 2 — Button Controlled Panel</h2>
      <div class="controls">
        <button class="toggle" type="button"
                id="profile-toggle"
                data-expand-toggle
                aria-expanded="false"
                aria-controls="profile-panel">
          <span class="chev">▸</span>
          Show Profile Details
        </button>
      </div>
      <div class="details" id="profile-panel" role="region" aria-labelledby="profile-toggle" hidden>
        <p><strong>Profile details</strong></p>
        <p>This block is controlled by the button above. It uses <code>hidden</code> to collapse and the button's <code>aria-expanded</code> to reflect state.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque gravida aliquam nulla, vitae fermentum purus lobortis non.</p>
      </div>
    </div>

    <div class="example" aria-labelledby="ex3-title" data-accordion>
      <h2 id="ex3-title">Example 3 — Accordion (Single-Open)</h2>

      <div class="accordion-item">
        <button class="toggle" type="button"
                id="acc-btn-1"
                data-expand-toggle
                aria-expanded="false"
                aria-controls="acc-panel-1">
          <span class="chev">▸</span>
          Section One
        </button>
        <div class="details" id="acc-panel-1" role="region" aria-labelledby="acc-btn-1" hidden>
          <p>Content for section one. Only one section is open at a time within this accordion.</p>
          <p>Vivamus fringilla metus at arcu tristique, a venenatis arcu consectetur. Integer non arcu eu sem sodales bibendum.</p>
        </div>
      </div>

      <div class="accordion-item">
        <button class="toggle" type="button"
                id="acc-btn-2"
                data-expand-toggle
                aria-expanded="false"
                aria-controls="acc-panel-2">
          <span class="chev">▸</span>
          Section Two
        </button>
        <div class="details" id="acc-panel-2" role="region" aria-labelledby="acc-btn-2" hidden>
          <p>Content for section two. Opening this will close other sections in the same widget.</p>
          <ul>
            <li>Uses <code>aria-controls</code> and <code>aria-expanded</code></li>
            <li>Panel container has the <code>details</code> class</li>
          </ul>
        </div>
      </div>

      <div class="accordion-item">
        <button class="toggle" type="button"
                id="acc-btn-3"
                data-expand-toggle
                aria-expanded="false"
                aria-controls="acc-panel-3">
          <span class="chev">▸</span>
          Section Three
        </button>
        <div class="details" id="acc-panel-3" role="region" aria-labelledby="acc-btn-3" hidden>
          <p>Content for section three. This demonstrates a slightly longer block to show the layout.</p>
          <p>Curabitur tincidunt, metus at molestie consectetur, sem neque cursus nulla, nec mollis sapien urna ut odio. Cras a lectus sapien.</p>
        </div>
      </div>
    </div>
  </main>

  <script>
    (function () {
      function togglePanel(btn) {
        const targetId = btn.getAttribute('aria-controls');
        if (!targetId) return;
        const panel = document.getElementById(targetId);
        if (!panel) return;

        const isExpanded = btn.getAttribute('aria-expanded') === 'true';
        const willExpand = !isExpanded;

        btn.setAttribute('aria-expanded', String(willExpand));
        panel.hidden = !willExpand;

        // If inside an accordion, collapse siblings when expanding
        const accordion = btn.closest('[data-accordion]');
        if (accordion && willExpand) {
          accordion.querySelectorAll('[data-expand-toggle]').forEach(otherBtn => {
            if (otherBtn === btn) return;
            const otherId = otherBtn.getAttribute('aria-controls');
            const otherPanel = otherId ? document.getElementById(otherId) : null;
            otherBtn.setAttribute('aria-expanded', 'false');
            if (otherPanel) otherPanel.hidden = true;
          });
        }
      }

      document.addEventListener('click', function (e) {
        const btn = e.target.closest('[data-expand-toggle]');
        if (!btn) return;
        togglePanel(btn);
      });

      // Optional: allow Enter/Space to toggle when focusing non-button toggle controls (if any)
      document.addEventListener('keydown', function (e) {
        const btn = e.target.closest('[data-expand-toggle]');
        if (!btn) return;
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          togglePanel(btn);
        }
      });
    }());
  </script>
</body>
</html>