<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Examples</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #f9fafb;
      --fg: #111827;
      --muted: #6b7280;
      --primary: #2563eb;
      --border: #e5e7eb;
      --accent: #dbeafe;
      --radius: 8px;
    }

    html, body {
      background: var(--bg);
      color: var(--fg);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      margin: 0;
      padding: 0;
    }

    body {
      padding: 24px;
    }

    h1, h2 {
      margin: 0 0 12px;
      font-weight: 700;
    }

    p {
      margin: 0 0 12px;
    }

    .examples {
      display: grid;
      gap: 16px;
    }

    .example {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    }

    .example > header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 12px;
    }

    .example > header h2 {
      font-size: 1rem;
      margin: 0;
    }

    .toolbar {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    button {
      appearance: none;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--fg);
      padding: 8px 12px;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
    }
    button:hover {
      border-color: #cbd5e1;
      background: #f8fafc;
    }
    button[aria-expanded="true"] {
      background: var(--accent);
      border-color: #bfdbfe;
    }
    button.primary {
      background: var(--primary);
      border-color: var(--primary);
      color: #fff;
    }
    button.primary:hover {
      filter: brightness(1.1);
    }

    /* Container for controlled content */
    .details {
      border: 1px dashed #e2e8f0;
      border-radius: 6px;
      padding: 12px;
      background: #f8fafc;
      margin-top: 8px;
    }

    /* Native details styling */
    details.details {
      padding: 0;
      border: 1px solid var(--border);
      background: #fff;
    }
    details.details[open] {
      border-color: #cbd5e1;
      background: #fefefe;
    }
    details.details > summary {
      list-style: none;
      cursor: pointer;
      padding: 12px;
      font-weight: 600;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    details.details > summary::-webkit-details-marker {
      display: none;
    }
    details.details > summary::before {
      content: "▸";
      display: inline-block;
      transform: rotate(0deg);
      transition: transform 150ms ease;
      color: var(--muted);
    }
    details.details[open] > summary::before {
      transform: rotate(90deg);
      color: var(--primary);
    }
    details.details > .panel {
      border-top: 1px solid var(--border);
      padding: 12px;
      background: #f8fafc;
    }

    .section {
      margin-top: 8px;
    }
    .section h3 {
      margin: 0 0 6px;
      font-size: 0.95rem;
    }
    .muted {
      color: var(--muted);
      font-size: 0.92rem;
    }

    /* Accordion styling */
    .accordion-item {
      border: 1px solid var(--border);
      border-radius: 6px;
      background: #fff;
      margin-top: 8px;
      overflow: hidden;
    }
    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding: 10px 12px;
      cursor: pointer;
      font-weight: 600;
      background: #fff;
    }
    .accordion-header button {
      margin-left: auto;
    }
    .accordion-header .chevron {
      color: var(--muted);
      transition: transform 150ms ease;
    }
    .accordion-header[aria-expanded="true"] .chevron {
      transform: rotate(90deg);
      color: var(--primary);
    }
    .accordion-content.details {
      border-top: 1px solid var(--border);
      background: #f8fafc;
    }

    code, pre {
      font-family: ui-monospace, Menlo, Consolas, "SF Mono", "Roboto Mono", "Ubuntu Mono", monospace;
      background: #f1f5f9;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      padding: 4px 6px;
    }
    ul {
      padding-left: 1.25rem;
    }

    /* Utility */
    .sr-only {
      position: absolute !important;
      width: 1px !important;
      height: 1px !important;
      padding: 0 !important;
      margin: -1px !important;
      overflow: hidden !important;
      clip: rect(0,0,0,0) !important;
      white-space: nowrap !important;
      border: 0 !important;
    }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widget Demonstration</h1>
  <p class="muted">Examples below show native and custom expand/collapse patterns. Each widget is wrapped in a container with the "example" class, and the controlled content carries the "details" class.</p>

  <section class="examples">
    <div class="example" id="ex-native">
      <header>
        <h2>Native HTML details/summary</h2>
        <div class="toolbar">
          <span class="muted">Built-in toggle behavior</span>
        </div>
      </header>

      <details class="details" aria-label="Native details widget">
        <summary>
          Project Overview
        </summary>
        <div class="panel">
          <p>This section uses the native details/summary element for automatic expand/collapse behavior and accessibility.</p>
          <ul>
            <li>No JavaScript required</li>
            <li>Keyboard-accessible by default</li>
            <li>Easily stylable</li>
          </ul>

          <div class="section">
            <h3>Nested details</h3>
            <details class="details">
              <summary>Milestones</summary>
              <div class="panel">
                <ul>
                  <li>Phase 1: Research</li>
                  <li>Phase 2: Design</li>
                  <li>Phase 3: Implementation</li>
                  <li>Phase 4: Testing</li>
                </ul>
              </div>
            </details>
          </div>
        </div>
      </details>
    </div>

    <div class="example" id="ex-custom">
      <header>
        <h2>Custom button-controlled panel</h2>
        <div class="toolbar">
          <button class="primary" data-toggle aria-controls="custom-panel-1" aria-expanded="false">Toggle Details</button>
        </div>
      </header>

      <div id="custom-panel-1" class="details" role="region" aria-labelledby="custom-title-1" hidden>
        <h3 id="custom-title-1">Release Notes</h3>
        <p>Version 2.4 introduces performance improvements and minor bug fixes.</p>
        <ul>
          <li>Improved caching strategy</li>
          <li>Reduced bundle size</li>
          <li>Accessibility bug fixes</li>
        </ul>
        <p class="muted">Use the button above to toggle visibility. The button’s aria-expanded attribute updates accordingly.</p>
      </div>
    </div>

    <div class="example" id="ex-accordion">
      <header>
        <h2>Accordion (only one open at a time)</h2>
        <div class="toolbar">
          <span class="muted">Controlled via ARIA and JS</span>
        </div>
      </header>

      <div class="accordion">
        <div class="accordion-item">
          <div class="accordion-header">
            <span><span class="chevron">▸</span> Account Settings</span>
            <button data-toggle aria-controls="acc-panel-1" data-accordion="group-1" aria-expanded="false">Expand</button>
          </div>
          <div id="acc-panel-1" class="accordion-content details" role="region" aria-labelledby="acc-title-1" hidden>
            <h3 id="acc-title-1">Profile</h3>
            <p>Update your profile picture, bio, and personal information.</p>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">
            <span><span class="chevron">▸</span> Privacy</span>
            <button data-toggle aria-controls="acc-panel-2" data-accordion="group-1" aria-expanded="false">Expand</button>
          </div>
          <div id="acc-panel-2" class="accordion-content details" role="region" aria-labelledby="acc-title-2" hidden>
            <h3 id="acc-title-2">Permissions</h3>
            <p>Manage app permissions, data sharing, and visibility.</p>
          </div>
        </div>

        <div class="accordion-item">
          <div class="accordion-header">
            <span><span class="chevron">▸</span> Notifications</span>
            <button data-toggle aria-controls="acc-panel-3" data-accordion="group-1" aria-expanded="false">Expand</button>
          </div>
          <div id="acc-panel-3" class="accordion-content details" role="region" aria-labelledby="acc-title-3" hidden>
            <h3 id="acc-title-3">Preferences</h3>
            <p>Select delivery channels and frequencies for alerts.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="example" id="ex-bulk">
      <header>
        <h2>Bulk expand/collapse</h2>
        <div class="toolbar">
          <button data-action="expand-all">Expand All</button>
          <button data-action="collapse-all">Collapse All</button>
        </div>
      </header>

      <div class="section">
        <h3 id="bulk-title-1">Overview</h3>
        <button data-toggle aria-controls="bulk-panel-1" aria-expanded="false">Toggle Overview</button>
        <div id="bulk-panel-1" class="details" role="region" aria-labelledby="bulk-title-1" hidden>
          <p>General context for bulk operations across multiple panels.</p>
        </div>
      </div>

      <div class="section">
        <h3 id="bulk-title-2">Details</h3>
        <button data-toggle aria-controls="bulk-panel-2" aria-expanded="false">Toggle Details</button>
        <div id="bulk-panel-2" class="details" role="region" aria-labelledby="bulk-title-2" hidden>
          <ul>
            <li>Item A</li>
            <li>Item B</li>
            <li>Item C</li>
          </ul>
        </div>
      </div>

      <div class="section">
        <h3 id="bulk-title-3">Summary</h3>
        <button data-toggle aria-controls="bulk-panel-3" aria-expanded="false">Toggle Summary</button>
        <div id="bulk-panel-3" class="details" role="region" aria-labelledby="bulk-title-3" hidden>
          <p class="muted">Quick recap of the main points covered.</p>
        </div>
      </div>
    </div>
  </section>

  <script>
    // Handle generic toggles and accordions
    document.addEventListener('click', function (e) {
      const btn = e.target.closest('[data-toggle]');
      if (!btn) return;

      const controls = btn.getAttribute('aria-controls');
      if (!controls) return;
      const panel = document.getElementById(controls);
      if (!panel) return;

      const expanded = btn.getAttribute('aria-expanded') === 'true';
      const group = btn.dataset.accordion;

      if (group) {
        const buttons = document.querySelectorAll('[data-accordion="' + group + '"]');
        buttons.forEach(b => {
          const id = b.getAttribute('aria-controls');
          const p = document.getElementById(id);
          if (!p) return;
          if (id !== controls) {
            b.setAttribute('aria-expanded', 'false');
            p.hidden = true;
            const header = b.closest('.accordion-item')?.querySelector('.accordion-header');
            if (header) header.setAttribute('aria-expanded', 'false');
          }
        });
      }

      btn.setAttribute('aria-expanded', String(!expanded));
      panel.hidden = expanded;

      // Update accordion header chevron state
      const header = btn.closest('.accordion-item')?.querySelector('.accordion-header');
      if (header) header.setAttribute('aria-expanded', String(!expanded));
    });

    // Bulk expand/collapse within each example container
    document.addEventListener('click', function (e) {
      const actionBtn = e.target.closest('[data-action]');
      if (!actionBtn) return;

      const action = actionBtn.dataset.action;
      const example = actionBtn.closest('.example');
      if (!example) return;

      const toggles = example.querySelectorAll('[data-toggle][aria-controls]');
      const panels = Array.from(toggles).map(b => document.getElementById(b.getAttribute('aria-controls'))).filter(Boolean);

      if (action === 'expand-all') {
        panels.forEach((panel, i) => {
          const btn = toggles[i];
          panel.hidden = false;
          btn.setAttribute('aria-expanded', 'true');
          const header = btn.closest('.accordion-item')?.querySelector('.accordion-header');
          if (header) header.setAttribute('aria-expanded', 'true');
        });
      } else if (action === 'collapse-all') {
        panels.forEach((panel, i) => {
          const btn = toggles[i];
          panel.hidden = true;
          btn.setAttribute('aria-expanded', 'false');
          const header = btn.closest('.accordion-item')?.querySelector('.accordion-header');
          if (header) header.setAttribute('aria-expanded', 'false');
        });
      }
    });
  </script>
</body>
</html>