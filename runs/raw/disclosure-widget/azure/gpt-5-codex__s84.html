<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Expand / Collapse Widget Demo</title>
<style>
:root {
  color-scheme: light dark;
  --page-bg: #f4f7fb;
  --card-bg: #ffffff;
  --text-color: #1d2433;
  --muted-text: #5a657a;
  --accent: #3f6df2;
  --accent-dark: #1e3ca0;
  --border-color: rgba(35, 50, 80, 0.08);
  --shadow: 0 18px 28px -24px rgba(31, 41, 55, 0.55);
  --icon-bg: rgba(63, 109, 242, 0.14);
  --icon-bg-active: rgba(63, 109, 242, 0.26);
  --toggle-hover: rgba(63, 109, 242, 0.08);
  --details-bg: #f9fbff;
  --details-border: rgba(63, 109, 242, 0.18);
}
@media (prefers-color-scheme: dark) {
  :root {
    --page-bg: #0f172a;
    --card-bg: #111c36;
    --text-color: #f1f5ff;
    --muted-text: rgba(198, 210, 225, 0.8);
    --accent: #84b9ff;
    --accent-dark: #d0e4ff;
    --border-color: rgba(148, 163, 184, 0.16);
    --shadow: 0 18px 28px -24px rgba(15, 23, 42, 0.9);
    --icon-bg: rgba(96, 165, 250, 0.28);
    --icon-bg-active: rgba(96, 165, 250, 0.45);
    --toggle-hover: rgba(96, 165, 250, 0.16);
    --details-bg: rgba(15, 23, 42, 0.65);
    --details-border: rgba(148, 163, 184, 0.28);
  }
}
*,
*::before,
*::after {
  box-sizing: border-box;
}
body {
  margin: 0;
  min-height: 100vh;
  background: var(--page-bg);
  color: var(--text-color);
  font-family: "Inter", "Segoe UI", -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.6;
  text-rendering: optimizeLegibility;
}
main.page {
  max-width: 900px;
  margin: 0 auto;
  padding: 3rem 1.5rem 4rem;
}
h1 {
  font-size: clamp(2rem, 3vw + 1rem, 2.8rem);
  margin: 0 0 0.75rem;
}
p.lead {
  margin: 0 0 2.5rem;
  max-width: 680px;
  color: var(--muted-text);
  font-size: 1.05rem;
}
.example {
  background: var(--card-bg);
  border: 1px solid var(--border-color);
  border-radius: 18px;
  box-shadow: var(--shadow);
  overflow: hidden;
  transition: border-color 0.3s ease, transform 0.3s ease;
}
.example + .example {
  margin-top: 1.75rem;
}
.example:hover {
  border-color: rgba(63, 109, 242, 0.22);
  transform: translateY(-2px);
}
.toggle {
  width: 100%;
  border: none;
  background: transparent;
  padding: 1.1rem 1.4rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1.25rem;
  flex-wrap: wrap;
  cursor: pointer;
  color: inherit;
  font-size: 1rem;
  font-weight: 500;
  transition: background-color 0.25s ease;
}
.toggle:hover {
  background: var(--toggle-hover);
}
.toggle:focus-visible {
  outline: 3px solid var(--accent);
  outline-offset: 3px;
}
.toggle__left {
  display: flex;
  align-items: center;
  gap: 0.95rem;
  flex: 1 1 360px;
  min-width: 0;
}
.icon {
  width: 1.85rem;
  height: 1.85rem;
  border-radius: 999px;
  background: var(--icon-bg);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--accent);
  font-size: 1.05rem;
  transition: transform 0.35s ease, background-color 0.35s ease;
}
.icon::before {
  content: "›";
  transform: translateX(1px);
}
.toggle[aria-expanded="true"] .icon {
  transform: rotate(90deg);
  background: var(--icon-bg-active);
}
.toggle__text {
  display: flex;
  flex-direction: column;
  gap: 0.18rem;
  min-width: 0;
}
.toggle__title {
  font-weight: 600;
  font-size: 1.02rem;
}
.toggle__subtitle {
  font-size: 0.9rem;
  color: var(--muted-text);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}
.label {
  margin-left: auto;
  font-size: 0.88rem;
  font-weight: 600;
  color: var(--accent);
  white-space: nowrap;
  transition: color 0.25s ease;
}
.toggle[aria-expanded="true"] .label {
  color: var(--accent-dark);
}
.details {
  background: var(--details-bg);
  border-top: 1px solid transparent;
  overflow: hidden;
  max-height: 0;
  transition: max-height 0.4s ease;
}
.details.open {
  border-top-color: var(--details-border);
}
.details__body {
  padding: 1.15rem 1.6rem 1.4rem;
}
.details__body p {
  margin: 0 0 1rem;
}
.details__body p:last-child {
  margin-bottom: 0;
}
.details__body ul {
  margin: 0 0 1rem 1.1rem;
  padding: 0;
}
.details__body li {
  margin-bottom: 0.45rem;
}
.details__body li:last-child {
  margin-bottom: 0;
}
.details__body dl {
  margin: 0;
}
.details__body dt {
  font-weight: 600;
  margin-top: 1rem;
}
.details__body dt:first-of-type {
  margin-top: 0;
}
.details__body dd {
  margin: 0.35rem 0 0;
  color: var(--muted-text);
}
.details__body dd:last-of-type {
  margin-bottom: 0;
}
.details__body pre {
  margin: 1rem 0 0;
  background: rgba(15, 23, 42, 0.08);
  color: inherit;
  border-radius: 12px;
  padding: 0.9rem 1rem;
  overflow-x: auto;
  font-size: 0.9rem;
  line-height: 1.45;
}
@media (prefers-color-scheme: dark) {
  .details__body pre {
    background: rgba(148, 163, 184, 0.16);
  }
}
@media (max-width: 640px) {
  .toggle {
    padding: 1rem 1.15rem;
    gap: 0.85rem;
  }
  .toggle__left {
    flex: 1 1 100%;
  }
  .toggle__subtitle {
    white-space: normal;
  }
  .label {
    width: 100%;
    margin-left: 0;
  }
}
@media (prefers-reduced-motion: reduce) {
  .toggle,
  .icon,
  .details {
    transition-duration: 0ms !important;
    transition-delay: 0ms !important;
  }
}
</style>
</head>
<body>
<main class="page">
  <h1>Expand/Collapse Widget Examples</h1>
  <p class="lead">Each widget below uses a shared pattern: a toggle button with descriptive text, a rotating indicator, and a smooth transition that reveals the controlled content container.</p>

  <div class="example">
    <button type="button" class="toggle" aria-expanded="false" aria-controls="details-overview" data-expanded-text="Hide introduction" data-collapsed-text="Show introduction">
      <span class="toggle__left">
        <span class="icon" aria-hidden="true"></span>
        <span class="toggle__text">
          <span class="toggle__title">Widget introduction</span>
          <span class="toggle__subtitle">Understand how the component announces and reveals content.</span>
        </span>
      </span>
      <span class="label">Show introduction</span>
    </button>
    <div class="details" id="details-overview">
      <div class="details__body">
        <p>This expand/collapse widget connects a single control to a single content region. The button advertises its target via <code>aria-controls</code> while the current state is published through <code>aria-expanded</code>.</p>
        <ul>
          <li>Pair the toggle and content using matching IDs.</li>
          <li>Announce state changes with clear labels such as “Show” and “Hide”.</li>
          <li>Keep animation durations short so the interface remains responsive.</li>
        </ul>
        <p>Because the content region uses a dedicated <code>div.details</code> container, it can be styled with consistent padding, borders, and background treatments across the layout.</p>
      </div>
    </div>
  </div>

  <div class="example">
    <button type="button" class="toggle" aria-expanded="false" aria-controls="details-faq" data-expanded-text="Hide FAQ answers" data-collapsed-text="Read FAQ answers">
      <span class="toggle__left">
        <span class="icon" aria-hidden="true"></span>
        <span class="toggle__text">
          <span class="toggle__title">Common questions</span>
          <span class="toggle__subtitle">Short answers that appear on demand keep the interface calm.</span>
        </span>
      </span>
      <span class="label">Read FAQ answers</span>
    </button>
    <div class="details" id="details-faq">
      <div class="details__body">
        <dl>
          <dt>Is the animation optional?</dt>
          <dd>Yes. Users who prefer reduced motion receive an immediate show/hide change without transitions.</dd>
          <dt>Can multiple widgets operate independently?</dt>
          <dd>Each widget is self-contained. The script wires up every <code>.example</code> block individually so you can mix and match them on a page.</dd>
          <dt>What about keyboard support?</dt>
          <dd>The toggle is a native button element, so keyboard users tab to it and press Space or Enter to activate the control.</dd>
        </dl>
      </div>
    </div>
  </div>

  <div class="example">
    <button type="button" class="toggle" aria-expanded="false" aria-controls="details-checklist" data-expanded-text="Hide checklist" data-collapsed-text="Show checklist">
      <span class="toggle__left">
        <span class="icon" aria-hidden="true"></span>
        <span class="toggle__text">
          <span class="toggle__title">Implementation checklist</span>
          <span class="toggle__subtitle">Confirm each item once the widget is wired up.</span>
        </span>
      </span>
      <span class="label">Show checklist</span>
    </button>
    <div class="details" id="details-checklist">
      <div class="details__body">
        <ol>
          <li>Markup the toggle button and controlled <code>div.details</code> region.</li>
          <li>Assign a unique ID to the content and reference it via <code>aria-controls</code>.</li>
          <li>Update <code>aria-expanded</code> plus any visible labels whenever the state changes.</li>
          <li>Provide reduced-motion behavior so the reveal is instantaneous when preferred.</li>
        </ol>
        <pre><code>// Example customization hook
toggle.addEventListener("expand", () =&gt; {
  analytics.track("widget_opened", { id: content.id });
});</code></pre>
      </div>
    </div>
  </div>
</main>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const mediaQuery = typeof window.matchMedia === 'function'
    ? window.matchMedia('(prefers-reduced-motion: reduce)')
    : null;

  const isReducedMotion = () => (mediaQuery ? mediaQuery.matches : false);

  const addMotionChangeListener = (handler) => {
    if (!mediaQuery) {
      return;
    }
    if (typeof mediaQuery.addEventListener === 'function') {
      mediaQuery.addEventListener('change', handler);
    } else if (typeof mediaQuery.addListener === 'function') {
      mediaQuery.addListener(handler);
    }
  };

  document.querySelectorAll('.example').forEach((widget, index) => {
    const button = widget.querySelector('.toggle');
    const content = widget.querySelector('.details');
    if (!button || !content) {
      return;
    }

    const labelNode = button.querySelector('.label');
    const expandedLabel = button.getAttribute('data-expanded-text') || 'Collapse';
    const collapsedLabel = button.getAttribute('data-collapsed-text') || 'Expand';

    if (!content.id) {
      content.id = `details-${index + 1}`;
    }

    button.setAttribute('aria-controls', content.id);
    button.setAttribute('aria-expanded', 'false');
    if (labelNode) {
      labelNode.textContent = collapsedLabel;
    }
    content.style.maxHeight = '0px';

    if (isReducedMotion()) {
      content.style.transition = 'none';
    }

    content.addEventListener('transitionend', (event) => {
      if (event.propertyName !== 'max-height') {
        return;
      }
      content.classList.remove('animating');
      if (content.classList.contains('closing')) {
        content.classList.remove('closing');
        content.classList.remove('open');
        content.style.maxHeight = '0px';
      } else if (content.classList.contains('open')) {
        content.style.maxHeight = 'none';
      }
    });

    const collapseInstantly = () => {
      content.classList.remove('animating', 'closing', 'open');
      content.style.maxHeight = '0px';
      button.setAttribute('aria-expanded', 'false');
      if (labelNode) {
        labelNode.textContent = collapsedLabel;
      }
    };

    const expandInstantly = () => {
      content.classList.remove('animating', 'closing');
      content.classList.add('open');
      content.style.maxHeight = 'none';
      button.setAttribute('aria-expanded', 'true');
      if (labelNode) {
        labelNode.textContent = expandedLabel;
      }
    };

    button.addEventListener('click', () => {
      const expanded = button.getAttribute('aria-expanded') === 'true';

      if (!isReducedMotion() && content.classList.contains('animating')) {
        return;
      }

      if (isReducedMotion()) {
        if (expanded) {
          collapseInstantly();
        } else {
          expandInstantly();
        }
        return;
      }

      content.classList.add('animating');

      if (expanded) {
        content.classList.add('closing');
        const currentHeight = content.scrollHeight;
        content.style.maxHeight = `${currentHeight}px`;
        requestAnimationFrame(() => {
          content.style.maxHeight = '0px';
          button.setAttribute('aria-expanded', 'false');
          if (labelNode) {
            labelNode.textContent = collapsedLabel;
          }
        });
      } else {
        content.classList.add('open');
        content.style.maxHeight = '0px';
        requestAnimationFrame(() => {
          const targetHeight = content.scrollHeight;
          content.style.maxHeight = `${targetHeight}px`;
          button.setAttribute('aria-expanded', 'true');
          if (labelNode) {
            labelNode.textContent = expandedLabel;
          }
        });
      }
    });

    const handleMotionChange = () => {
      if (isReducedMotion()) {
        content.style.transition = 'none';
        if (button.getAttribute('aria-expanded') === 'true') {
          expandInstantly();
        } else {
          collapseInstantly();
        }
      } else {
        content.style.transition = '';
        if (button.getAttribute('aria-expanded') === 'true') {
          content.classList.add('open');
          content.classList.remove('closing', 'animating');
          content.style.maxHeight = 'none';
        } else {
          content.classList.remove('open', 'closing', 'animating');
          content.style.maxHeight = '0px';
        }
      }
    };

    addMotionChangeListener(handleMotionChange);
  });
});
</script>
</body>
</html>