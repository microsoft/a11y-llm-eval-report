<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widget Demo</title>
  <style>
    :root {
      --bg: #f5f6f7;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #3b82f6;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color: var(--text);
      background: var(--bg);
      padding: 2rem;
    }

    h1 {
      margin: 0 0 1rem;
      font-size: 1.6rem;
    }

    .example {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem;
      margin: 1rem 0;
      box-shadow: 0 2px 6px rgba(0,0,0,.04);
    }

    /* Native details widget styling (optional visual tweak) */
    details > summary {
      font-weight: 600;
      cursor: default;
      padding: .25rem 0;
    }

    details > p {
      margin: .25rem 0;
    }

    /* Custom widget styles */
    .trigger {
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      padding: .6rem 1rem;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      display: inline-block;
    }
    .trigger[aria-expanded="true"] {
      background: #e6f0ff;
      border-color: #a9c7ff;
    }

    /* Container for controlled content (must have class "details") */
    .details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.25s ease, padding 0.25s ease;
      padding: 0;
    }

    .details p {
      margin: 0.25rem 0;
    }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widget Demo</h1>

  <!-- Native details/summary widget wrapped in an example container -->
  <div class="example">
    <details>
      <summary>Native details/summary widget</summary>
      <p>This is a native HTML expand/collapse widget using the details element. It works without JavaScript.</p>
      <p>Open and close to see how it behaves.</p>
    </details>
  </div>

  <!-- Custom widget wrapped in an example container -->
  <div class="example">
    <button class="trigger" aria-expanded="false" aria-controls="custom1-details" id="custom1-trigger">
      What is your refund policy?
    </button>

    <!-- Container for controlled content with class "details" -->
    <div class="details" id="custom1-details" aria-labelledby="custom1-trigger" role="region" style="max-height:0; padding:0 0;">
      <p>We offer refunds within 30 days of purchase. To request a refund, contact customer support with your order number.</p>
      <p>Refunds are issued to the original payment method within 5â€“7 business days after approval.</p>
    </div>
  </div>

  <script>
    (function () {
      var trigger = document.getElementById('custom1-trigger');
      var panel = document.getElementById('custom1-details');
      var isOpen = false;

      function expandPanel() {
        // Prepare and expand
        panel.style.display = 'block';
        panel.style.maxHeight = panel.scrollHeight + 'px';
        panel.style.padding = '0.5rem 0';
        trigger.setAttribute('aria-expanded', 'true');
        isOpen = true;
      }

      function collapsePanel() {
        // Collapse with animation from current height to 0
        panel.style.maxHeight = panel.scrollHeight + 'px'; // ensure starting height is current
        panel.style.padding = '0.5rem 0';
        requestAnimationFrame(function () {
          panel.style.maxHeight = '0';
          panel.style.padding = '0';
        });
        trigger.setAttribute('aria-expanded', 'false');
        isOpen = false;
      }

      trigger.addEventListener('click', function () {
        if (!isOpen) {
          expandPanel();
        } else {
          collapsePanel();
        }
      });

      // Initialize panel state
      panel.style.display = 'block';
      panel.style.maxHeight = '0';
      panel.style.overflow = 'hidden';
      panel.style.transition = 'max-height 0.25s ease, padding 0.25s ease';
    })();
  </script>
</body>
</html>