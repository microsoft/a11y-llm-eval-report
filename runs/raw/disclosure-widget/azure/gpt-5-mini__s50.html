<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand / Collapse Widget Examples</title>
  <style>
    :root{
      --accent:#0366d6;
      --bg:#f8fafc;
      --panel:#ffffff;
      --muted:#6b7280;
      --radius:8px;
      --duration:260ms;
    }

    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin: 24px;
      background: linear-gradient(180deg,#f7fbff 0%, #f8fafc 100%);
      color:#0f172a;
    }

    h1{
      margin: 0 0 18px 0;
      font-size: 20px;
    }

    .example{
      max-width: 740px;
      margin: 18px 0;
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: 0 6px 18px rgba(2,6,23,0.06);
      padding: 12px;
      border: 1px solid rgba(2,6,23,0.04);
    }

    /* summary button styling */
    .summary {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: 12px 14px;
      background: transparent;
      border: none;
      text-align: left;
      cursor: pointer;
      font-size: 16px;
      line-height: 1.2;
      color: #06102b;
      border-radius: 8px;
    }

    .summary:focus{
      outline: 3px solid rgba(3,102,214,0.12);
      outline-offset: 2px;
    }

    .summary .label{
      display:flex;
      gap:10px;
      align-items:center;
    }

    .summary .title {
      font-weight: 600;
    }

    .summary .subtitle {
      color: var(--muted);
      font-size: 13px;
    }

    /* chevron */
    .chev {
      width: 28px;
      height: 28px;
      display: inline-grid;
      place-items: center;
      border-radius: 6px;
      transition: transform var(--duration) ease;
      color: var(--accent);
      font-weight: 700;
    }

    .summary[aria-expanded="true"] .chev{
      transform: rotate(180deg);
    }

    .details {
      overflow: hidden;
      height: 0;
      transition: height var(--duration) ease;
      padding: 0 14px;
      box-sizing: border-box;
    }

    /* inner content visuals */
    .details .content {
      padding: 12px 0 16px 0;
      border-top: 1px dashed rgba(2,6,23,0.06);
      color: #0b1220;
    }

    .details p {
      margin: 0 0 10px 0;
      color: #101827;
    }

    .details ul {
      margin: 8px 0 0 18px;
      color:#101827;
    }

    /* respects user reduced motion preference */
    @media (prefers-reduced-motion: reduce){
      .details { transition: none; }
      .chev { transition: none; }
    }

    /* small helper styles */
    .note {
      font-size: 13px;
      color: var(--muted);
      margin-top:8px;
    }
  </style>
</head>
<body>
  <h1>Expand / Collapse Widget Examples</h1>

  <div class="example">
    <button class="summary" aria-expanded="false" aria-controls="details-1" id="summary-1" type="button">
      <span class="label">
        <span class="title">Shipping details</span>
        <span class="subtitle">Estimated delivery & costs</span>
      </span>
      <span class="chev" aria-hidden="true">▾</span>
    </button>
    <div class="details" id="details-1" role="region" aria-labelledby="summary-1" aria-hidden="true">
      <div class="content">
        <p><strong>Standard shipping</strong> — 3–5 business days. Free over $50.</p>
        <p><strong>Express shipping</strong> — 1–2 business days. $12.95.</p>
        <ul>
          <li>Orders placed before 2pm ship same day.</li>
          <li>International rates calculated at checkout.</li>
        </ul>
      </div>
    </div>
  </div>

  <div class="example">
    <button class="summary" aria-expanded="false" aria-controls="details-2" id="summary-2" type="button">
      <span class="label">
        <span class="title">Account security</span>
        <span class="subtitle">Two-factor authentication & recent devices</span>
      </span>
      <span class="chev" aria-hidden="true">▾</span>
    </button>
    <div class="details" id="details-2" role="region" aria-labelledby="summary-2" aria-hidden="true">
      <div class="content">
        <p>Keep your account safe by enabling two-factor authentication (2FA). When enabled, you'll be required to provide a code from your authenticator app after entering your password.</p>
        <p>Recent devices:</p>
        <ul>
          <li>Chrome on macOS — San Francisco (Today)</li>
          <li>Safari on iPhone — Los Angeles (Yesterday)</li>
          <li>Edge on Windows — Seattle (3 days ago)</li>
        </ul>
        <p class="note">Tip: Revoke unknown devices to sign them out automatically.</p>
      </div>
    </div>
  </div>

  <div class="example">
    <button class="summary" aria-expanded="true" aria-controls="details-3" id="summary-3" type="button">
      <span class="label">
        <span class="title">Keyboard shortcuts</span>
        <span class="subtitle">Quick actions for power users</span>
      </span>
      <span class="chev" aria-hidden="true">▾</span>
    </button>
    <div class="details" id="details-3" role="region" aria-labelledby="summary-3" aria-hidden="false">
      <div class="content">
        <p>Use these shortcuts to move faster through the app:</p>
        <ul>
          <li><strong>G then D</strong> — Go to dashboard</li>
          <li><strong>?</strong> — Open shortcuts help</li>
          <li><strong>Ctrl/Cmd + K</strong> — Quick search</li>
        </ul>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      function setCollapsedState(button, content, collapsed){
        button.setAttribute('aria-expanded', collapsed ? 'false' : 'true');
        content.setAttribute('aria-hidden', collapsed ? 'true' : 'false');
      }

      function animateOpen(content){
        if (prefersReducedMotion){
          content.style.height = 'auto';
          return;
        }
        // from 0 to scrollHeight
        content.style.height = content.scrollHeight + 'px';
        function onEnd(){
          // remove fixed height so it can adjust naturally
          content.style.height = 'auto';
          content.removeEventListener('transitionend', onEnd);
        }
        content.addEventListener('transitionend', onEnd);
      }

      function animateClose(content){
        if (prefersReducedMotion){
          content.style.height = '0px';
          return;
        }
        // set fixed height, then animate to 0
        const startHeight = content.scrollHeight;
        content.style.height = startHeight + 'px';
        // ensure the style is applied before changing to 0
        requestAnimationFrame(()=> {
          content.style.height = '0px';
        });
      }

      function initExample(example){
        const btn = example.querySelector('.summary');
        const content = example.querySelector('.details');

        // initialize IDs and attributes if missing
        if (!btn.id) btn.id = `summary-${Math.random().toString(36).slice(2,9)}`;
        if (!content.id) content.id = `details-${Math.random().toString(36).slice(2,9)}`;
        btn.setAttribute('aria-controls', content.id);
        content.setAttribute('role', content.getAttribute('role') || 'region');
        content.setAttribute('aria-labelledby', btn.id);

        // initial visual state
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        if (expanded){
          // expanded: make sure height is auto so it's visible
          content.style.height = 'auto';
          content.classList.add('open');
        } else {
          content.style.height = '0px';
          content.classList.remove('open');
        }
        // click toggles
        btn.addEventListener('click', () => {
          const isExpanded = btn.getAttribute('aria-expanded') === 'true';
          if (isExpanded){
            // close
            setCollapsedState(btn, content, true);
            animateClose(content);
            content.classList.remove('open');
          } else {
            // open
            setCollapsedState(btn, content, false);
            // if content height is 0 but might have been auto, ensure layout
            // temporarily set height to current scrollHeight to animate from that baseline
            // call animateOpen which will set to scrollHeight then remove fixed height
            animateOpen(content);
            content.classList.add('open');
          }
        });

        // if user navigates with keyboard (Enter/Space handled by button), nothing extra required
        // allow double-clicking the content area to toggle as an additional affordance
        content.addEventListener('dblclick', () => btn.click());
      }

      document.addEventListener('DOMContentLoaded', ()=>{
        document.querySelectorAll('.example').forEach(initExample);
      });
    })();
  </script>
</body>
</html>