<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #38bdf8;
      --border: #1f2937;
      --focus: #93c5fd;
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: linear-gradient(180deg, #0b1022, #0f172a 40%, #0b1022);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    .wrap {
      max-width: 840px;
      margin: 0 auto;
      padding: 32px 16px 64px;
    }

    h1 {
      margin: 0 0 12px;
      font-size: 1.75rem;
      font-weight: 700;
      letter-spacing: 0.2px;
    }
    .lead {
      margin: 0 0 24px;
      color: var(--muted);
      font-size: 0.98rem;
    }

    .example {
      background: rgba(17, 24, 39, 0.66);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 16px;
      margin: 16px 0;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.02);
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .toggle {
      appearance: none;
      background: #0b1224;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px 12px;
      font-size: 0.95rem;
      line-height: 1.2;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: border-color 140ms ease, background-color 140ms ease, transform 80ms ease;
    }
    .toggle:hover {
      border-color: #334155;
      background: #0e1830;
    }
    .toggle:active {
      transform: translateY(1px);
    }
    .toggle:focus-visible {
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }
    .toggle .label {
      pointer-events: none;
    }
    .chev {
      width: 1em;
      height: 1em;
      display: inline-block;
      transform-origin: center;
      transition: transform 160ms ease;
      font-size: 1rem;
    }
    .toggle[aria-expanded="true"] .chev {
      transform: rotate(90deg);
    }

    .details {
      margin-top: 12px;
      padding: 14px 16px;
      border-left: 3px solid var(--accent);
      border-radius: 10px;
      background: rgba(2, 6, 23, 0.55);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
    }

    .details[hidden] {
      display: none;
    }

    .details h3 {
      margin-top: 0;
      margin-bottom: 8px;
      font-size: 1.05rem;
    }

    .meta {
      display: flex;
      gap: 8px;
      align-items: center;
      color: var(--muted);
      font-size: 0.9rem;
    }
    .badge {
      background: rgba(56, 189, 248, 0.15);
      border: 1px solid rgba(56, 189, 248, 0.35);
      color: #7dd3fc;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
    }

    .content p { margin: 0 0 10px; }
    .content ul {
      margin: 0.4rem 0 0.6rem 1.1rem;
    }

    .footer-actions {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .subtle {
      background: transparent;
      color: var(--muted);
      border: 1px dashed #334155;
    }
    .subtle:hover {
      color: var(--text);
      border-color: #475569;
    }

    .note {
      margin-top: 14px;
      color: var(--muted);
      font-size: 0.9rem;
    }

    /* Demo spacing helpers */
    .spacer { height: 4px; }

    @media (max-width: 560px) {
      .toggle { width: 100%; justify-content: center; }
      .meta { flex-wrap: wrap; }
    }
  </style>
</head>
<body>
  <main class="wrap" aria-label="Expand/Collapse Widget Examples">
    <h1>Expand/Collapse Widgets</h1>
    <p class="lead">Click a toggle to expand or collapse its content. Each widget is wrapped in a div with the "example" class, and the controlled content uses the "details" class.</p>

    <div class="example">
      <div class="header">
        <button id="btn-basic" class="toggle" type="button" aria-expanded="false" aria-controls="details-basic" data-controls="details-basic">
          <span class="chev" aria-hidden="true">▶</span>
          <span class="label">Product Specifications</span>
        </button>
        <div class="meta">
          <span class="badge">Basic</span>
          <span>Click to view the specs</span>
        </div>
      </div>
      <div id="details-basic" class="details" role="region" aria-labelledby="btn-basic" hidden>
        <div class="content">
          <h3>Specifications</h3>
          <p>This section includes the core technical specifications of the product.</p>
          <ul>
            <li>Dimensions: 120 × 75 × 8 mm</li>
            <li>Weight: 150 g</li>
            <li>Battery: 4000 mAh</li>
            <li>Connectivity: Wi‑Fi 6E, Bluetooth 5.3, USB‑C</li>
          </ul>
        </div>
        <div class="footer-actions">
          <button class="toggle subtle" type="button" aria-expanded="false" aria-controls="details-basic-extra" data-controls="details-basic-extra">
            <span class="chev" aria-hidden="true">▶</span>
            <span class="label">More details</span>
          </button>
        </div>
        <div id="details-basic-extra" class="details" role="region" aria-labelledby="btn-basic" hidden>
          <div class="content">
            <p>Extended details include environmental ratings and regulatory certifications.</p>
            <ul>
              <li>IP Rating: IP68</li>
              <li>Certifications: CE, FCC, RoHS</li>
            </ul>
          </div>
        </div>
        <p class="note">Tip: You can nest details. Both containers use the "details" class.</p>
      </div>
    </div>

    <div class="example">
      <div class="header">
        <button id="btn-default-open" class="toggle" type="button" aria-expanded="true" aria-controls="details-default-open" data-controls="details-default-open">
          <span class="chev" aria-hidden="true">▶</span>
          <span class="label">Getting Started Guide</span>
        </button>
        <div class="meta">
          <span class="badge">Open by default</span>
          <span>Helpful for onboarding</span>
        </div>
      </div>
      <div id="details-default-open" class="details" role="region" aria-labelledby="btn-default-open">
        <div class="content">
          <h3>Welcome</h3>
          <p>Follow these steps to get set up quickly.</p>
          <ol>
            <li>Unbox the device and ensure all accessories are present.</li>
            <li>Charge the device to at least 50% before first use.</li>
            <li>Install the companion app and sign in.</li>
            <li>Run the initial setup wizard.</li>
          </ol>
        </div>
        <div class="footer-actions">
          <button class="toggle subtle" type="button" aria-expanded="false" aria-controls="details-tips" data-controls="details-tips">
            <span class="chev" aria-hidden="true">▶</span>
            <span class="label">Pro tips</span>
          </button>
          <button class="toggle subtle" type="button" aria-expanded="false" aria-controls="details-faq" data-controls="details-faq">
            <span class="chev" aria-hidden="true">▶</span>
            <span class="label">FAQ</span>
          </button>
        </div>
        <div id="details-tips" class="details" role="region" aria-labelledby="btn-default-open" hidden>
          <div class="content">
            <ul>
              <li>Enable automatic updates to receive the latest features.</li>
              <li>Use the widget scheduler to batch tasks overnight.</li>
              <li>Turn on two-factor authentication for added security.</li>
            </ul>
          </div>
        </div>
        <div id="details-faq" class="details" role="region" aria-labelledby="btn-default-open" hidden>
          <div class="content">
            <p><strong>Q:</strong> Does the device support offline mode?</p>
            <p><strong>A:</strong> Yes, most features are available offline. Sync resumes when online.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="example">
      <div class="header">
        <button id="btn-accordion-1" class="toggle" type="button" aria-expanded="false" aria-controls="details-acc-1" data-controls="details-acc-1">
          <span class="chev" aria-hidden="true">▶</span>
          <span class="label">Section A: Overview</span>
        </button>
        <button id="btn-accordion-2" class="toggle" type="button" aria-expanded="false" aria-controls="details-acc-2" data-controls="details-acc-2">
          <span class="chev" aria-hidden="true">▶</span>
          <span class="label">Section B: Advanced</span>
        </button>
      </div>
      <div id="details-acc-1" class="details" role="region" aria-labelledby="btn-accordion-1" hidden>
        <div class="content">
          <p>Overview content goes here. You can set this up to behave like an accordion by closing other sections when one opens.</p>
        </div>
      </div>
      <div id="details-acc-2" class="details" role="region" aria-labelledby="btn-accordion-2" hidden>
        <div class="content">
          <p>Advanced content goes here. This section shares the same "details" class as the others.</p>
        </div>
      </div>
      <div class="footer-actions">
        <button class="toggle subtle" type="button" id="expand-all" data-set="expand">
          <span class="chev" aria-hidden="true">▶</span>
          <span class="label">Expand all</span>
        </button>
        <button class="toggle subtle" type="button" id="collapse-all" data-set="collapse">
          <span class="chev" aria-hidden="true">▶</span>
          <span class="label">Collapse all</span>
        </button>
      </div>
    </div>
  </main>

  <script>
    (function () {
      function syncAria(btn, panel) {
        btn.setAttribute('aria-expanded', panel.hasAttribute('hidden') ? 'false' : 'true');
      }

      function toggle(btn, panel, { allowMultiple = true, groupSelector = null } = {}) {
        const isOpen = btn.getAttribute('aria-expanded') === 'true';
        if (isOpen) {
          panel.setAttribute('hidden', '');
          btn.setAttribute('aria-expanded', 'false');
        } else {
          panel.removeAttribute('hidden');
          btn.setAttribute('aria-expanded', 'true');
          if (!allowMultiple && groupSelector) {
            const groupButtons = document.querySelectorAll(groupSelector);
            groupButtons.forEach(b => {
              if (b === btn) return;
              const other = document.getElementById(b.dataset.controls);
              if (other && !other.hasAttribute('hidden')) {
                other.setAttribute('hidden', '');
                b.setAttribute('aria-expanded', 'false');
              }
            });
          }
        }
      }

      document.querySelectorAll('[data-controls]').forEach(btn => {
        const panel = document.getElementById(btn.dataset.controls);
        if (!panel) return;

        // Initial sync based on DOM state
        syncAria(btn, panel);

        btn.addEventListener('click', () => {
          const isAccordion = btn.id.startsWith('btn-accordion');
          toggle(btn, panel, {
            allowMultiple: !isAccordion,
            groupSelector: isAccordion ? '[id^="btn-accordion"]' : null
          });
        });

        // Optional: collapse with Escape when focus is inside panel
        panel.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            panel.setAttribute('hidden', '');
            btn.setAttribute('aria-expanded', 'false');
            btn.focus();
          }
        });
      });

      // Expand/Collapse all demo controls
      const expandAll = document.getElementById('expand-all');
      const collapseAll = document.getElementById('collapse-all');

      function setAll(expand) {
        const buttons = document.querySelectorAll('[data-controls]');
        buttons.forEach(btn => {
          const panel = document.getElementById(btn.dataset.controls);
          if (!panel) return;
          if (expand) {
            panel.removeAttribute('hidden');
            btn.setAttribute('aria-expanded', 'true');
          } else {
            panel.setAttribute('hidden', '');
            btn.setAttribute('aria-expanded', 'false');
          }
        });
      }

      if (expandAll) expandAll.addEventListener('click', () => setAll(true));
      if (collapseAll) collapseAll.addEventListener('click', () => setAll(false));
    })();
  </script>
</body>
</html>