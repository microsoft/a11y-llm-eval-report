<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand / Collapse Widget Examples</title>
  <style>
    :root{
      --gap: 12px;
      --radius: 8px;
      --bg: #ffffff;
      --muted: #6b7280;
      --accent: #2563eb;
      --surface: #f8fafc;
      --shadow: 0 1px 2px rgba(15,23,42,0.04);
    }

    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin: 32px;
      background: linear-gradient(180deg,#fbfdff 0%, #f3f7fb 100%);
      color: #0f172a;
    }

    h1{
      margin: 0 0 18px 0;
      font-size: 20px;
      font-weight: 600;
    }

    .example{
      background: var(--bg);
      border-radius: var(--radius);
      padding: 14px;
      box-shadow: var(--shadow);
      margin-bottom: 18px;
      max-width: 720px;
      border: 1px solid rgba(15,23,42,0.04);
    }

    /* Header row: label + control */
    .summary {
      display: flex;
      align-items: center;
      gap: var(--gap);
      width: 100%;
    }

    .summary .title {
      font-weight: 600;
      font-size: 15px;
      color: #0f172a;
      flex: 1 1 auto;
    }
    .summary .sub {
      font-size: 13px;
      color: var(--muted);
    }

    /* Button styling */
    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: transparent;
      border: 1px solid rgba(15,23,42,0.06);
      padding: 8px 10px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      color: var(--accent);
      transition: background 160ms ease, box-shadow 160ms ease, transform 120ms ease;
    }
    .toggle:focus {
      outline: 3px solid rgba(37,99,235,0.15);
      outline-offset: 2px;
    }
    .toggle:hover { background: rgba(37,99,235,0.04); }

    .chevron {
      width: 14px;
      height: 14px;
      display: inline-block;
      transition: transform 220ms cubic-bezier(.2,.9,.2,1);
      transform-origin: center;
    }
    .chevron svg { display: block; width: 100%; height: 100%; }

    /* Controlled content: must have class "details" per requirements */
    .details {
      margin-top: 12px;
      overflow: hidden;
      max-height: 0;
      transition: max-height 320ms cubic-bezier(.2,.9,.2,1), opacity 200ms ease, padding 200ms ease;
      opacity: 0;
      padding: 0 6px;
    }

    /* When open, the wrapper gets .open and content expands */
    .example.open .details {
      max-height: 1000px; /* large enough for most content */
      opacity: 1;
      padding: 8px 6px 0 6px;
    }

    .example.open .chevron {
      transform: rotate(180deg);
    }

    .details .content {
      background: var(--surface);
      padding: 12px;
      border-radius: 8px;
      border: 1px solid rgba(15,23,42,0.03);
      color: #0f172a;
      font-size: 14px;
      line-height: 1.45;
    }

    /* Small note on hidden content for screen readers when closed */
    .details[aria-hidden="true"] { visibility: visible; } /* keep visible for animation; aria-hidden controls SR */

    /* Visual demonstration only */
    .meta {
      margin-top: 8px;
      font-size: 12px;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <h1>Expand / Collapse Widget Demo</h1>

  <!-- Example 1 -->
  <div class="example" id="ex-1">
    <div class="summary">
      <div>
        <div class="title">Product details</div>
        <div class="sub">Quick description and specifications</div>
      </div>

      <button class="toggle"
              aria-expanded="false"
              aria-controls="details-1"
              id="toggle-1"
              type="button">
        <span>Show details</span>
        <span class="chevron" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </span>
      </button>
    </div>

    <div class="details" id="details-1" role="region" aria-labelledby="toggle-1" aria-hidden="true">
      <div class="content">
        <p>
          This compact product includes a powerful motor, durable casing, and a two-year warranty.
          It's designed for everyday use with a low-noise operation and energy-efficient performance.
        </p>
        <ul>
          <li>Motor: 1200 RPM</li>
          <li>Weight: 1.2 kg</li>
          <li>Warranty: 2 years</li>
        </ul>
      </div>
    </div>

    <div class="meta">Click the button to expand/collapse the details section. The content container has the class "details".</div>
  </div>

  <!-- Example 2 -->
  <div class="example" id="ex-2">
    <div class="summary">
      <div>
        <div class="title">Release notes</div>
        <div class="sub">What's new in the latest version</div>
      </div>

      <button class="toggle"
              aria-expanded="false"
              aria-controls="details-2"
              id="toggle-2"
              type="button">
        <span>Read release notes</span>
        <span class="chevron" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </span>
      </button>
    </div>

    <div class="details" id="details-2" role="region" aria-labelledby="toggle-2" aria-hidden="true">
      <div class="content">
        <p><strong>Version 2.4.0</strong> â€” Released 2025-10-01</p>
        <ol>
          <li>Improved performance when loading large datasets.</li>
          <li>Fixed an issue that caused intermittent network timeouts.</li>
          <li>Added accessibility improvements for screen reader users.</li>
        </ol>
        <p>For a full changelog visit the project documentation.</p>
      </div>
    </div>

    <div class="meta">This second example uses the same pattern. Buttons have aria-controls pointing to the element with class "details".</div>
  </div>

  <script>
    (function () {
      // Initialize all toggle buttons inside .example wrappers
      var examples = document.querySelectorAll('.example');

      examples.forEach(function (example) {
        var button = example.querySelector('button[aria-controls]');
        if (!button) return;

        var controlledId = button.getAttribute('aria-controls');
        var content = document.getElementById(controlledId);

        // If the controlled element isn't present, skip
        if (!content) return;

        // Ensure initial ARIA state is consistent
        button.setAttribute('aria-expanded', 'false');
        content.setAttribute('aria-hidden', 'true');

        // Toggle function
        function setOpen(isOpen) {
          if (isOpen) {
            example.classList.add('open');
            button.setAttribute('aria-expanded', 'true');
            content.setAttribute('aria-hidden', 'false');
            // Update button label if present
            var label = button.querySelector('span');
            if (label) label.textContent = label.textContent.replace(/^Show|^Read/, function (m) {
              return m; // keep as-is; optional to change
            });
          } else {
            example.classList.remove('open');
            button.setAttribute('aria-expanded', 'false');
            content.setAttribute('aria-hidden', 'true');
          }
        }

        // Click toggles
        button.addEventListener('click', function () {
          var expanded = button.getAttribute('aria-expanded') === 'true';
          setOpen(!expanded);
        });

        // Close when pressing Escape while focus is inside the example
        example.addEventListener('keydown', function (ev) {
          if (ev.key === 'Escape') {
            setOpen(false);
            button.focus();
          }
        });

        // Allow opening if the user navigates to the button via keyboard and presses Enter/Space:
        // Native button elements already handle Space/Enter. Nothing extra needed.
      });
    })();
  </script>
</body>
</html>