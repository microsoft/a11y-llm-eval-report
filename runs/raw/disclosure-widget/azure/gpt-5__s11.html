<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Expand/Collapse Widgets</title>
<style>
  :root {
    color-scheme: light dark;
  }

  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    line-height: 1.5;
    margin: 0;
    padding: 2rem;
    background: #f7f7f9;
    color: #222;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background: #111215;
      color: #eaeaf0;
    }
    .example {
      background: #181a20;
      border-color: #2a2d36;
      box-shadow: none;
    }
    details.details {
      background: #181a20;
      border-color: #2a2d36;
    }
    details.details[open] {
      background: #1e2128;
    }
    .disclosure button {
      background: #1e2128;
      color: #eaeaf0;
      border-color: #2a2d36;
    }
    .disclosure button[aria-expanded="true"] {
      background: #172a3a;
      border-color: #325b87;
    }
    .status {
      color: #b8b9c0;
    }
    kbd {
      background: #242833;
      color: #eaeaf0;
      border-color: #2a2d36;
    }
    a { color: #72a7ff; }
  }

  h1 {
    font-size: 1.6rem;
    margin-top: 0;
  }

  .example {
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04);
  }

  .example h2 {
    font-size: 1.2rem;
    margin: 0 0 .5rem;
  }

  .details { /* marker class for containers that hold controlled content */ }

  details.details {
    border: 1px solid #e2e2e2;
    border-radius: 6px;
    padding: .5rem .75rem;
    background: #fafafa;
  }

  details.details[open] {
    background: #fff;
  }

  details.details > summary {
    cursor: pointer;
    list-style: none;
    font-weight: 600;
    outline: none;
    user-select: none;
  }

  details.details > summary::marker {
    display: none;
  }

  summary {
    display: flex;
    align-items: center;
    gap: .5rem;
  }

  .chevron {
    width: 1em;
    height: 1em;
    transition: transform .2s ease;
  }

  details.details[open] .chevron {
    transform: rotate(90deg);
  }

  .disclosure {
    display: flex;
    gap: .5rem;
    align-items: center;
  }

  .disclosure button {
    appearance: none;
    border: 1px solid #ccc;
    background: #fff;
    padding: .4rem .6rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
  }

  .disclosure button:hover {
    filter: brightness(0.98);
  }

  .disclosure button:focus-visible {
    outline: 2px solid #99c2ff;
    outline-offset: 2px;
  }

  .disclosure button[aria-expanded="true"] {
    background: #eef6ff;
    border-color: #a2c8ff;
  }

  .disclosure .status {
    font-size: .85rem;
    color: #555;
  }

  .content.details {
    overflow: hidden;
    max-height: 0;
    opacity: 0;
    transition: max-height .25s ease, opacity .2s ease, padding-top .25s ease;
    padding-top: 0;
  }

  .content.details.expanded {
    opacity: 1;
    padding-top: .5rem;
  }

  .accordion .item {
    border: 1px solid #e2e2e2;
    border-radius: 6px;
    margin-bottom: .5rem;
    background: #fafafa;
  }

  .accordion details.details > summary {
    padding: .5rem .75rem;
  }

  .accordion details.details > div {
    padding: .5rem .75rem;
    border-top: 1px solid #eee;
  }

  kbd {
    background: #eee;
    border-radius: 3px;
    padding: 0 .25rem;
    border: 1px solid #ddd;
  }

  a {
    color: #0366d6;
    text-decoration: none;
  }
</style>
</head>
<body>
<h1>Expand/Collapse Widgets</h1>
<p>This page demonstrates expand/collapse widgets using native details and a custom disclosure pattern.</p>

<div class="example" id="ex-1">
  <h2>Native details element</h2>
  <details class="details">
    <summary>
      <svg class="chevron" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M5 3l6 5-6 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      What is an expand/collapse widget?
    </summary>
    <div>
      <p>An expand/collapse widget lets you reveal additional content on demand. The native HTML details element provides a built-in disclosure with keyboard and assistive technology support.</p>
      <ul>
        <li>Click or press <kbd>Enter</kbd>/<kbd>Space</kbd> on the summary to toggle.</li>
        <li>Use the <kbd>Arrow</kbd> keys to navigate anchor links inside.</li>
      </ul>
    </div>
  </details>
</div>

<div class="example" id="ex-2">
  <h2>Button-controlled disclosure (custom)</h2>
  <div class="disclosure">
    <button type="button" aria-expanded="false" aria-controls="custom-content">Show details</button>
    <span class="status" id="status-text">Collapsed</span>
  </div>
  <div id="custom-content" class="content details" role="region" aria-labelledby="custom-label">
    <p id="custom-label" style="position:absolute;left:-9999px;top:auto;">Additional information</p>
    <p>This panel is controlled by the button above using ARIA attributes. It demonstrates a custom expand/collapse that can be animated.</p>
    <p>It uses CSS to animate between states and updates <code>aria-expanded</code> for accessibility.</p>
  </div>
</div>

<div class="example" id="ex-3">
  <h2>Accordion (only one open at a time)</h2>
  <div class="accordion">
    <details class="details item" id="acc-1">
      <summary>
        <svg class="chevron" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M5 3l6 5-6 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        First section
      </summary>
      <div>
        <p>Content for the first section. Opening this will close others.</p>
      </div>
    </details>
    <details class="details item" id="acc-2">
      <summary>
        <svg class="chevron" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M5 3l6 5-6 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Second section
      </summary>
      <div>
        <p>Content for the second section.</p>
      </div>
    </details>
    <details class="details item" id="acc-3">
      <summary>
        <svg class="chevron" viewBox="0 0 16 16" fill="none" aria-hidden="true"><path d="M5 3l6 5-6 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        Third section
      </summary>
      <div>
        <p>Content for the third section.</p>
      </div>
    </details>
  </div>
</div>

<script>
(function() {
  // Custom disclosure control
  const button = document.querySelector('#ex-2 button[aria-controls="custom-content"]');
  const content = document.getElementById('custom-content');
  const status = document.getElementById('status-text');

  function setExpanded(expanded) {
    button.setAttribute('aria-expanded', String(expanded));
    content.classList.toggle('expanded', expanded);
    status.textContent = expanded ? 'Expanded' : 'Collapsed';
    if (expanded) {
      content.style.maxHeight = content.scrollHeight + 'px';
    } else {
      content.style.maxHeight = '0px';
    }
    button.textContent = expanded ? 'Hide details' : 'Show details';
  }

  button.addEventListener('click', function() {
    const expanded = button.getAttribute('aria-expanded') === 'true';
    setExpanded(!expanded);
  });

  content.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
      setExpanded(false);
      button.focus();
    }
  });

  // Initialize collapsed state
  setExpanded(false);

  // Accordion: ensure only one details open at a time
  const accordion = document.querySelector('#ex-3 .accordion');
  const items = accordion.querySelectorAll('details.details');

  items.forEach(function(d, i) {
    d.addEventListener('toggle', function() {
      if (d.open) {
        items.forEach(function(other) {
          if (other !== d && other.open) {
            other.open = false;
          }
        });
      }
    });

    const summary = d.querySelector('summary');
    summary.addEventListener('keydown', function(e) {
      const index = i;
      if (e.key === 'ArrowDown') {
        e.preventDefault();
        const next = items[index + 1] || items[0];
        next.querySelector('summary').focus();
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        const prev = items[index - 1] || items[items.length - 1];
        prev.querySelector('summary').focus();
      }
    });
  });

  // Focus outline for summaries
  document.querySelectorAll('summary').forEach(function(s) {
    s.addEventListener('focus', function() {
      s.style.outline = '2px solid #99c2ff';
      s.style.borderRadius = '4px';
    });
    s.addEventListener('blur', function() {
      s.style.outline = 'none';
    });
  });
})();
</script>
</body>
</html>