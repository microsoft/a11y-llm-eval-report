<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand/Collapse Widget Example</title>
  <style>
    :root{
      --bg:#f7fafc;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#2563eb;
      --radius:8px;
      --shadow: 0 4px 12px rgba(16,24,40,0.06);
    }

    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,var(--bg),#ffffff);
      margin: 32px;
      color: #0f172a;
      line-height:1.4;
    }

    h1{
      margin: 0 0 18px 0;
      font-size: 20px;
    }

    .example{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
      margin: 12px 0;
      max-width: 720px;
    }

    .toggle{
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border: 1px solid rgba(2,6,23,0.06);
      border-radius: 8px;
      background: linear-gradient(180deg, #fff, #fbfdff);
      color: var(--accent);
      font-weight: 600;
      cursor: pointer;
      user-select: none;
      transition: box-shadow .15s ease, transform .06s ease;
      outline: none;
    }

    .toggle:focus{
      box-shadow: 0 0 0 4px rgba(37,99,235,0.12);
    }

    .toggle:active{
      transform: translateY(1px);
    }

    /* Caret icon */
    .toggle .caret{
      display:inline-block;
      width: 12px;
      height: 12px;
      border-right: 2px solid currentColor;
      border-bottom: 2px solid currentColor;
      transform: rotate(-45deg);
      transition: transform .18s ease;
      margin-left: 2px;
      color: currentColor;
    }

    .toggle[aria-expanded="true"] .caret{
      transform: rotate(45deg);
    }

    /* details container */
    .details{
      margin-top: 12px;
      padding: 12px;
      border-radius: 8px;
      background: linear-gradient(180deg,#fafbff,#fbfdff);
      border: 1px dashed rgba(37,99,235,0.08);
      color: #0f172a;
    }

    /* When details is hidden (we also set [data-hidden]) */
    .details[data-hidden="true"]{
      display: none;
    }

    /* Sample content styles */
    .details p{
      margin: 0 0 10px 0;
      color: #0b1220;
    }

    .meta{
      font-size: 13px;
      color: var(--muted);
    }

    /* Small helper: keyboard hint */
    .hint{
      display:inline-block;
      margin-left: 12px;
      font-size: 13px;
      color: var(--muted);
    }
  </style>
</head>
<body>
  <h1>Expandable / Collapsible Widget</h1>

  <div class="example">
    <button class="toggle"
            id="expander-1"
            aria-controls="details-1"
            aria-expanded="false"
            type="button">
      More information
      <span class="caret" aria-hidden="true"></span>
    </button>
    <span class="hint">Press Enter or Space to toggle</span>

    <div id="details-1"
         class="details"
         role="region"
         aria-labelledby="expander-1"
         data-hidden="true">
      <p><strong>What this does:</strong> Clicking the button toggles this content. The button keeps proper ARIA attributes (aria-expanded) and the content is marked as a region for assistive technologies.</p>
      <p class="meta">Example uses a button to control the visibility of the element with the class "details". The wrapper has the class "example".</p>
    </div>
  </div>

  <script>
    (function(){
      // Attach behavior to all examples with a button that controls a details container.
      document.querySelectorAll('.example').forEach(function(example){
        var button = example.querySelector('.toggle');
        if(!button) return;

        var ctrlId = button.getAttribute('aria-controls');
        if(!ctrlId) return;

        var details = document.getElementById(ctrlId);
        if(!details) return;

        // Ensure initial state reflects the attributes (data-hidden => collapsed)
        var collapsed = details.hasAttribute('data-hidden') ? details.getAttribute('data-hidden') === 'true' : true;

        function update(){
          button.setAttribute('aria-expanded', (!collapsed).toString());
          details.setAttribute('data-hidden', collapsed.toString());
          // For assistive tech: when hidden, we don't want it to be focusable or announced.
          if(collapsed){
            details.setAttribute('aria-hidden','true');
          } else {
            details.setAttribute('aria-hidden','false');
          }
        }

        // Initialize
        update();

        // Toggle on click
        button.addEventListener('click', function(){
          collapsed = !collapsed;
          update();
          // Optionally move focus into content when expanding
          if(!collapsed){
            // If there are focusable elements inside, focus the first one.
            var focusable = details.querySelectorAll('a, button, input, textarea, select, [tabindex]:not([tabindex="-1"])');
            if(focusable.length){
              focusable[0].focus();
            } else {
              // Keep focus on the toggle button by default.
            }
          }
        });

        // Support keyboard: Enter and Space are handled by the button element by default.
        // But we ensure Space doesn't scroll the page in older browsers when using non-button elements.
      });
    })();
  </script>
</body>
</html>