<html class="no-js" lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand / Collapse Widget Examples</title>
  <style>
    :root{
      --bg:#f7f9fc;
      --card:#fff;
      --accent:#0b6cff;
      --muted:#6b7280;
      --ring: 0 0 0 4px rgba(11,108,255,0.08);
      --radius:10px;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      color-scheme: light;
    }

    html,body{
      height:100%;
      margin:0;
      background:linear-gradient(180deg,var(--bg),#eef3fb);
      font-size:16px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      max-width:900px;
      margin:40px auto;
      padding:24px;
    }

    header{
      display:flex;
      align-items:baseline;
      gap:12px;
      margin-bottom:18px;
    }
    h1{
      margin:0;
      font-size:1.25rem;
      letter-spacing:-0.01em;
    }
    p.lead{
      margin:0;
      color:var(--muted);
      font-size:0.95rem;
    }

    .example{
      background:var(--card);
      border-radius:var(--radius);
      padding:14px;
      box-shadow:0 6px 20px rgba(11,35,70,0.06);
      margin:18px 0;
      border:1px solid rgba(13,44,102,0.04);
    }

    /* Expander button */
    .expander{
      display:flex;
      align-items:center;
      gap:12px;
      width:100%;
      background:transparent;
      border:0;
      padding:10px 12px;
      text-align:left;
      cursor:pointer;
      border-radius:8px;
      transition:background-color .12s ease;
      font-size:1rem;
      color: #07203b;
    }
    .expander:hover{ background:rgba(11,108,255,0.06); }
    .expander:focus{
      outline: none;
      box-shadow: var(--ring);
      background:rgba(11,108,255,0.04);
    }

    .title{
      flex:1;
      display:flex;
      flex-direction:column;
    }
    .title .main{
      font-weight:600;
      line-height:1.1;
    }
    .title .sub{
      font-size:0.88rem;
      color:var(--muted);
      margin-top:2px;
    }

    .chev{
      display:inline-grid;
      place-items:center;
      width:34px;
      height:34px;
      border-radius:6px;
      transition:transform .22s ease, background .12s;
      color:var(--accent);
      font-size:14px;
    }
    .expander[aria-expanded="true"] .chev{
      transform:rotate(90deg);
      background:rgba(11,108,255,0.06);
    }

    /* The controlled content container must have class "details" */
    .details{
      overflow:hidden;
      will-change: height, opacity;
      transition: height .26s cubic-bezier(.2,.9,.2,1), opacity .18s ease;
      opacity:1;
      margin-top:8px;
      padding:0 8px 12px 8px;
    }

    /* hidden state uses height:0 and reduced opacity */
    .details[hidden]{
      height:0 !important;
      opacity:0;
      padding-bottom:0;
      padding-top:0;
      margin-top:0;
    }

    .details .content{
      padding:12px;
      background:linear-gradient(180deg, rgba(11,108,255,0.02), transparent);
      border-radius:8px;
      border:1px solid rgba(11,108,255,0.04);
      color:#07304a;
      line-height:1.45;
      font-size:0.97rem;
    }

    /* small utilities */
    .muted{ color:var(--muted); font-size:0.9rem; }
    .small{ font-size:0.9rem; color:var(--muted); }

    /* Accessibility / prefers-reduced-motion */
    @media (prefers-reduced-motion: reduce){
      .details{ transition:none !important; }
      .chev{ transition:none !important; }
    }

    /* When JS is not available, show details by default (progressive enhancement) */
    .no-js .details{ display:block !important; height:auto !important; opacity:1 !important; padding:12px 8px 12px 8px; margin-top:8px !important; }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Expand / Collapse Widgets</h1>
        <p class="lead">Accessible examples using a button and a controlled content container (class="details").</p>
      </div>
    </header>

    <!-- Example 1: Simple expand/collapse (starts closed) -->
    <div class="example">
      <button class="expander" id="exp-1" aria-expanded="false" aria-controls="det-1" type="button">
        <div class="title">
          <span class="main">Product overview</span>
          <span class="sub">Quick summary and highlights</span>
        </div>
        <span class="chev" aria-hidden="true">▸</span>
      </button>

      <div id="det-1" class="details" role="region" aria-labelledby="exp-1" hidden>
        <div class="content">
          <p>Our product helps teams ship faster by providing a clear, shared view of work. Expand for a short list of highlights:</p>
          <ul>
            <li>Realtime collaboration and notifications.</li>
            <li>Pluggable integrations with your favorite tools.</li>
            <li>Lightweight workflows and powerful reporting.</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Example 2: Start opened (data-open="true") -->
    <div class="example">
      <button class="expander" id="exp-2" aria-expanded="true" aria-controls="det-2" data-open="true" type="button">
        <div class="title">
          <span class="main">Getting started</span>
          <span class="sub">Steps to get up and running</span>
        </div>
        <span class="chev" aria-hidden="true">▸</span>
      </button>

      <div id="det-2" class="details" role="region" aria-labelledby="exp-2">
        <div class="content">
          <ol>
            <li>Create a project and invite teammates.</li>
            <li>Connect your repositories and enable CI/CD.</li>
            <li>Configure notifications and workflows.</li>
          </ol>
          <p class="small">Tip: You can toggle this section with keyboard (space / enter) because the control is a native button.</p>
        </div>
      </div>
    </div>

    <!-- Example 3: Simple accordion behavior (only one open at a time) -->
    <div class="example" aria-label="FAQ accordion" data-accordion>
      <button class="expander" id="acc-1" aria-expanded="false" aria-controls="det-acc-1" type="button">
        <div class="title">
          <span class="main">What is the refund policy?</span>
          <span class="sub">Short answer</span>
        </div>
        <span class="chev" aria-hidden="true">▸</span>
      </button>
      <div id="det-acc-1" class="details" role="region" aria-labelledby="acc-1" hidden>
        <div class="content">
          We offer a 30-day money-back guarantee on all subscriptions. Contact support to start a return.
        </div>
      </div>

      <button class="expander" id="acc-2" aria-expanded="false" aria-controls="det-acc-2" type="button">
        <div class="title">
          <span class="main">Do you offer enterprise plans?</span>
          <span class="sub">Team and scale</span>
        </div>
        <span class="chev" aria-hidden="true">▸</span>
      </button>
      <div id="det-acc-2" class="details" role="region" aria-labelledby="acc-2" hidden>
        <div class="content">
          Yes — enterprise plans include SSO, advanced auditing, and dedicated support. Request a demo to learn more.
        </div>
      </div>

      <button class="expander" id="acc-3" aria-expanded="false" aria-controls="det-acc-3" type="button">
        <div class="title">
          <span class="main">How do I contact support?</span>
          <span class="sub">Options</span>
        </div>
        <span class="chev" aria-hidden="true">▸</span>
      </button>
      <div id="det-acc-3" class="details" role="region" aria-labelledby="acc-3" hidden>
        <div class="content">
          Support is available via chat (in-app) and email. For urgent issues, use Priority Support on enterprise plans.
        </div>
      </div>
    </div>

    <p class="small muted" style="margin-top:14px">All examples use a button to control a container with class="details". The buttons update aria-expanded and the content regions use role="region" and aria-labelledby for accessibility.</p>
  </div>

  <script>
    (function(){
      // Remove the no-js class for progressive enhancement
      document.documentElement.classList.remove('no-js');

      // Utility: animate open/close by manipulating height
      function openDetails(content){
        // If already open and not hidden, do nothing
        if (!content.hasAttribute('hidden') && content.style.height === '') return;

        // Ensure visible for measurement
        content.removeAttribute('hidden');
        const startHeight = 0;
        const endHeight = content.scrollHeight;

        content.style.height = startHeight + 'px';
        // Force a reflow so the transition will run
        content.getBoundingClientRect();

        // Transition to the measured height
        content.style.height = endHeight + 'px';

        // After transition, clear explicit height so it can size naturally
        const cleanup = function onEnd(e){
          if (e && e.target !== content) return;
          content.style.height = '';
          content.removeEventListener('transitionend', cleanup);
        };
        content.addEventListener('transitionend', cleanup);
      }

      function closeDetails(content){
        if (content.hasAttribute('hidden')) return;
        const startHeight = content.scrollHeight;
        content.style.height = startHeight + 'px';
        // Force reflow
        content.getBoundingClientRect();

        // Animate to 0
        content.style.height = '0px';

        const onEnd = function(e){
          if (e && e.target !== content) return;
          content.setAttribute('hidden','');
          content.style.height = '';
          content.removeEventListener('transitionend', onEnd);
        };
        content.addEventListener('transitionend', onEnd);
      }

      // Toggle handler
      function toggle(button, content, opts){
        opts = opts || {};
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        if (isExpanded){
          button.setAttribute('aria-expanded', 'false');
          closeDetails(content);
        } else {
          button.setAttribute('aria-expanded', 'true');
          openDetails(content);
        }
      }

      // Setup expanders
      const expanders = Array.from(document.querySelectorAll('.expander'));
      expanders.forEach(button => {
        const controls = button.getAttribute('aria-controls');
        if (!controls) return;
        const content = document.getElementById(controls);
        if (!content) return;

        // If element has data-open attribute or button's aria-expanded="true", start open
        const startOpen = button.hasAttribute('data-open') || button.getAttribute('aria-expanded') === 'true';

        // Ensure initial hidden state if not startOpen
        if (!startOpen){
          content.setAttribute('hidden','');
          button.setAttribute('aria-expanded','false');
        } else {
          // Make sure aria reflects open state
          button.setAttribute('aria-expanded','true');
          content.removeAttribute('hidden');
        }

        // Click toggles
        button.addEventListener('click', function(e){
          // For accordion groups, close siblings
          const container = button.closest('[data-accordion]');
          if (container){
            // Close other expanders in the same container
            const others = Array.from(container.querySelectorAll('.expander')).filter(b => b !== button);
            others.forEach(ob => {
              const oc = document.getElementById(ob.getAttribute('aria-controls'));
              if (ob.getAttribute('aria-expanded') === 'true'){
                ob.setAttribute('aria-expanded','false');
                closeDetails(oc);
              }
            });
          }
          toggle(button, content);
        });

        // Allow keyboard toggle on Enter/Space is default for button elements
      });

      // Optional: support reduced-motion by disabling height-animation if requested
      const mediaQuery = window.matchMedia('(prefers-reduced-motion: reduce)');
      if (mediaQuery.matches){
        // Remove inline height transitions by making them instant
        document.querySelectorAll('.details').forEach(d => {
          d.style.transition = 'none';
        });
      }
    })();
  </script>
</body>
</html>