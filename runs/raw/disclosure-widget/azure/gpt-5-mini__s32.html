<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root{
      --accent:#0b79d0;
      --bg:#f7fbff;
      --muted:#666;
      --radius:8px;
    }
    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      line-height:1.5;
      margin:24px;
      background:linear-gradient(180deg,#ffffff 0%,var(--bg) 100%);
      color:#111;
    }

    h1{font-size:1.4rem;margin:0 0 16px}
    .examples{display:grid;gap:18px;max-width:880px}
    .example{
      background:#fff;
      border:1px solid rgba(16,24,40,0.06);
      padding:14px;
      border-radius:var(--radius);
      box-shadow:0 1px 2px rgba(16,24,40,0.03);
    }
    .example h2{
      margin:0 0 10px;
      font-size:1.05rem;
      color:var(--muted);
      font-weight:600;
    }

    .controls{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:10px;
      flex-wrap:wrap;
    }

    button.toggle{
      appearance:none;
      border:1px solid rgba(11,121,208,0.15);
      background:linear-gradient(180deg,rgba(11,121,208,0.06),rgba(11,121,208,0.02));
      color:var(--accent);
      padding:8px 12px;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:8px;
      transition:box-shadow .15s, transform .06s;
    }
    button.toggle:active{ transform:translateY(1px); }
    button.toggle:focus{ outline:3px solid rgba(11,121,208,0.12); outline-offset:3px; }

    /* visuals for the chevron */
    .chev{
      width:14px;
      height:14px;
      display:inline-block;
      transform-origin:center;
      transition:transform .22s ease;
      filter:drop-shadow(0 1px 0 rgba(255,255,255,0.25));
    }
    .chev svg{display:block;width:100%;height:100%;}
    button.toggle[aria-expanded="true"] .chev{ transform:rotate(180deg); }

    /* details container (controlled content) */
    .details{
      overflow:hidden;
      max-height:0;
      opacity:0;
      transition: max-height .32s cubic-bezier(.2,.9,.2,1), opacity .18s ease;
      border-top:1px dashed rgba(16,24,40,0.06);
      margin-top:10px;
      padding-top:10px;
    }
    .details.open{
      opacity:1;
    }

    /* content inside details */
    .details p{margin:0 0 10px}
    .meta{font-size:.9rem;color:var(--muted)}

    /* small responsive tweak */
    @media (max-width:520px){
      .controls{flex-direction:column;align-items:flex-start}
    }
  </style>
</head>
<body>
  <main>
    <h1>Expand / Collapse Widget Examples</h1>
    <div class="examples">

      <div class="example" id="ex-1">
        <h2>Basic Expand / Collapse</h2>
        <div class="controls">
          <button
            id="toggle-1"
            class="toggle"
            aria-expanded="false"
            aria-controls="details-1"
            data-show-text="Show details"
            data-hide-text="Hide details"
          >
            <span class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </span>
            <span class="label">Show details</span>
          </button>
          <span class="meta">Click the button to reveal additional content.</span>
        </div>

        <div id="details-1" class="details" role="region" aria-hidden="true" aria-labelledby="toggle-1" hidden>
          <p>
            This is an example of an accessible expand/collapse widget. The button above controls this content region.
            The button uses aria-expanded to indicate state and aria-controls to point to this container.
          </p>
          <p class="meta">The container uses the class "details" as requested.</p>
        </div>
      </div>

      <div class="example" id="ex-2">
        <h2>Multiple Sections (Independent)</h2>
        <div class="controls">
          <button
            id="toggle-2a"
            class="toggle"
            aria-expanded="false"
            aria-controls="details-2a"
            data-show-text="More about A"
            data-hide-text="Less about A"
          >
            <span class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </span>
            <span class="label">More about A</span>
          </button>

          <button
            id="toggle-2b"
            class="toggle"
            aria-expanded="false"
            aria-controls="details-2b"
            data-show-text="More about B"
            data-hide-text="Less about B"
          >
            <span class="chev" aria-hidden="true">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </span>
            <span class="label">More about B</span>
          </button>

        </div>

        <div id="details-2a" class="details" role="region" aria-hidden="true" aria-labelledby="toggle-2a" hidden>
          <p>
            Section A contains details relevant to the first subject. Multiple, independent expand/collapse widgets can coexist
            on the same page without interfering with each other.
          </p>
        </div>

        <div id="details-2b" class="details" role="region" aria-hidden="true" aria-labelledby="toggle-2b" hidden>
          <p>
            Section B contains different content. Each button controls its own region via its aria-controls attribute.
          </p>
        </div>
      </div>

    </div>
  </main>

  <script>
    (function(){
      // Initialize all widgets inside .example
      const examples = document.querySelectorAll('.example');

      examples.forEach(example => {
        const toggles = example.querySelectorAll('button.toggle');

        toggles.forEach(button => {
          const detailsId = button.getAttribute('aria-controls');
          const details = document.getElementById(detailsId);
          const labelEl = button.querySelector('.label');
          const showText = button.getAttribute('data-show-text') || 'Show';
          const hideText = button.getAttribute('data-hide-text') || 'Hide';

          // Ensure initial label matches aria-expanded
          const expanded = button.getAttribute('aria-expanded') === 'true';
          labelEl.textContent = expanded ? hideText : showText;

          // Helper to open
          function openDetails(){
            if(!details) return;
            // reveal for screen readers before animation
            details.hidden = false;
            details.setAttribute('aria-hidden', 'false');
            // compute height for transition
            const height = details.scrollHeight;
            details.style.maxHeight = height + 'px';
            details.classList.add('open');
            button.setAttribute('aria-expanded', 'true');
            labelEl.textContent = hideText;
          }

          // Helper to close
          function closeDetails(){
            if(!details) return;
            // set maxHeight to current to enable transition to 0
            details.style.maxHeight = details.scrollHeight + 'px';
            // allow the browser to pick up the starting height
            requestAnimationFrame(() => {
              details.style.maxHeight = '0px';
            });
            details.classList.remove('open');
            button.setAttribute('aria-expanded', 'false');
            labelEl.textContent = showText;
            details.setAttribute('aria-hidden', 'true');
            // after transition, hide from layout
            const onTransitionEnd = (e) => {
              if(e.target !== details) return;
              details.hidden = true;
              details.style.maxHeight = '';
              details.removeEventListener('transitionend', onTransitionEnd);
            };
            details.addEventListener('transitionend', onTransitionEnd);
          }

          // Toggle handler
          function toggleHandler(e){
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            if(isExpanded){
              closeDetails();
            } else {
              openDetails();
            }
          }

          // Click
          button.addEventListener('click', toggleHandler);

          // Support keyboard activation is built-in for button (Space/Enter),
          // but we can handle Escape to close when focused within the details region.
          if(details){
            details.addEventListener('keydown', (ev) => {
              if(ev.key === 'Escape'){
                // close the details and move focus back to the button
                closeDetails();
                button.focus();
              }
            });
          }

          // If there's a user preference to reduce motion, disable the height animation
          const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
          if(prefersReduced && details){
            details.style.transition = 'none';
          }
        });
      });
    })();
  </script>
</body>
</html>