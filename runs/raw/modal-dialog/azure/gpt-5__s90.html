<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Modal Dialog Example</title>
<style>
  :root {
    --overlay: rgba(0, 0, 0, 0.5);
    --radius: 12px;
    --shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    --primary: #2563eb;
  }
  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, sans-serif;
    margin: 0;
    padding: 40px;
    line-height: 1.5;
    background: #f7f7f8;
    color: #111;
  }
  body.modal-open {
    overflow: hidden;
  }
  h1 {
    margin: 0 0 12px;
    font-weight: 700;
    font-size: 2rem;
  }
  p {
    margin: 0 0 20px;
  }
  button {
    cursor: pointer;
  }
  .trigger {
    padding: 10px 16px;
    border-radius: 8px;
    border: 1px solid #222;
    background: #111;
    color: #fff;
    font-weight: 600;
  }
  .trigger:focus-visible {
    outline: 3px solid #93c5fd;
    outline-offset: 2px;
  }

  .modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
  }
  .modal.is-open {
    display: flex;
  }
  .modal::before {
    content: "";
    position: absolute;
    inset: 0;
    background: var(--overlay);
    opacity: 0;
    transition: opacity 200ms ease;
    pointer-events: none;
  }
  .modal.is-open::before {
    opacity: 1;
    pointer-events: auto;
  }

  .modal-dialog {
    position: relative;
    z-index: 1;
    background: #fff;
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    width: min(90vw, 600px);
    max-height: 80vh;
    overflow: auto;
    transform: translateY(20px) scale(0.98);
    opacity: 0;
    transition: transform 200ms ease, opacity 200ms ease;
  }
  .modal.is-open .modal-dialog {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-bottom: 1px solid #eee;
  }
  .modal-title {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 700;
  }
  .modal-close {
    background: transparent;
    border: none;
    font-size: 1rem;
    padding: 8px 12px;
    border-radius: 8px;
  }
  .modal-close:hover {
    background: #f2f2f2;
  }
  .modal-close:focus-visible {
    outline: 3px solid #93c5fd;
    outline-offset: 2px;
  }

  .modal-body {
    padding: 16px 20px;
  }
  .modal-actions {
    display: flex;
    gap: 12px;
    padding: 16px 20px;
    border-top: 1px solid #eee;
  }
  .btn {
    padding: 10px 16px;
    border-radius: 8px;
    border: 1px solid #ddd;
    background: #f7f7f8;
    color: #111;
  }
  .btn-primary {
    border-color: var(--primary);
    background: var(--primary);
    color: #fff;
  }

  label {
    display: block;
    margin-top: 12px;
  }
  input, textarea, select {
    margin-top: 6px;
    padding: 10px 12px;
    border-radius: 8px;
    border: 1px solid #ddd;
    width: 100%;
    box-sizing: border-box;
  }
</style>
</head>
<body>
  <h1>Modal Dialog Component Demo</h1>
  <p>This example shows a modal dialog that opens via a button with the class "trigger".</p>
  <button class="trigger" aria-haspopup="dialog" aria-controls="example-modal">Open Modal</button>

  <div id="example-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-description">
    <div class="modal-dialog" tabindex="-1">
      <div class="modal-header">
        <h2 id="modal-title" class="modal-title">Sample Modal</h2>
        <button class="modal-close" type="button" aria-label="Close">âœ•</button>
      </div>
      <div class="modal-body" id="modal-description">
        <p>This is a modal dialog. It is closed by default. Use the button to open it. Press Escape, click outside, or use the close button to dismiss.</p>
        <label>
          Example input
          <input type="text" placeholder="Type here">
        </label>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn modal-close">Cancel</button>
        <button type="button" class="btn btn-primary">Confirm</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const modal = document.getElementById('example-modal');
      const dialog = modal.querySelector('.modal-dialog');
      const triggers = document.querySelectorAll('.trigger[aria-controls="example-modal"], .trigger');
      const closeButtons = modal.querySelectorAll('.modal-close');
      let lastFocus = null;

      function openModal() {
        if (modal.classList.contains('is-open')) return;
        lastFocus = document.activeElement;
        modal.classList.add('is-open');
        document.body.classList.add('modal-open');
        requestAnimationFrame(() => {
          dialog.focus();
        });
        document.addEventListener('keydown', onKeyDown);
        document.addEventListener('click', onDocumentClick, true);
      }

      function closeModal() {
        if (!modal.classList.contains('is-open')) return;
        modal.classList.remove('is-open');
        document.body.classList.remove('modal-open');
        document.removeEventListener('keydown', onKeyDown);
        document.removeEventListener('click', onDocumentClick, true);
        if (lastFocus && typeof lastFocus.focus === 'function') {
          lastFocus.focus();
        }
      }

      function onKeyDown(e) {
        if (e.key === 'Escape') {
          e.preventDefault();
          closeModal();
        }
        if (e.key === 'Tab') {
          const focusables = getFocusableElements(dialog);
          if (focusables.length === 0) return;
          const first = focusables[0];
          const last = focusables[focusables.length - 1];
          const currentIndex = focusables.indexOf(document.activeElement);
          if (e.shiftKey && (document.activeElement === first || currentIndex === -1)) {
            e.preventDefault();
            last.focus();
          } else if (!e.shiftKey && (document.activeElement === last)) {
            e.preventDefault();
            first.focus();
          }
        }
      }

      function onDocumentClick(e) {
        if (!dialog.contains(e.target) && modal.contains(e.target)) {
          closeModal();
        }
      }

      function getFocusableElements(container) {
        const selectors = [
          'a[href]',
          'area[href]',
          'input:not([disabled]):not([type="hidden"])',
          'select:not([disabled])',
          'textarea:not([disabled])',
          'button:not([disabled])',
          'iframe',
          'object',
          'embed',
          '[contenteditable]',
          '[tabindex]:not([tabindex="-1"])'
        ];
        return Array.from(container.querySelectorAll(selectors.join(',')))
          .filter(el => (el.offsetParent !== null) || el === container);
      }

      triggers.forEach(btn => {
        btn.addEventListener('click', function(e){
          e.preventDefault();
          openModal();
        });
      });
      closeButtons.forEach(btn => btn.addEventListener('click', closeModal));
    })();
  </script>
</body>
</html>