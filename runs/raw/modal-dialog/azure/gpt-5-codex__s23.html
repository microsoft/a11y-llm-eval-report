<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modal Dialog Example</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      color-scheme: light dark;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
      padding: 2rem;
    }
    .trigger {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 999px;
      background: #2563eb;
      color: #fff;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .trigger:focus-visible {
      outline: 2px solid #111827;
      outline-offset: 2px;
    }
    .trigger:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 20px rgba(37, 99, 235, 0.25);
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(15,23,42,0.5);
      backdrop-filter: blur(2px);
      z-index: 1000;
      padding: 1.5rem;
    }
    .modal-overlay.is-visible {
      display: flex;
    }

    .modal {
      background: #fff;
      color: #111827;
      border-radius: 16px;
      width: min(500px, 100%);
      box-shadow: 0 25px 50px -12px rgba(15, 23, 42, 0.45);
      transform: translateY(20px);
      opacity: 0;
      transition: transform 0.25s ease, opacity 0.25s ease;
    }
    .modal.is-visible {
      transform: translateY(0);
      opacity: 1;
    }

    .modal__header {
      padding: 1.25rem 1.5rem 1rem;
      border-bottom: 1px solid rgba(148,163,184,0.4);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .modal__title {
      margin: 0;
      font-size: 1.25rem;
      font-weight: 600;
    }
    .modal__close {
      background: transparent;
      border: none;
      font-size: 1.5rem;
      line-height: 1;
      cursor: pointer;
      color: inherit;
      padding: 0.25rem;
      border-radius: 8px;
    }
    .modal__close:focus-visible {
      outline: 2px solid #2563eb;
      outline-offset: 2px;
    }
    .modal__body {
      padding: 1rem 1.5rem 1.5rem;
      line-height: 1.6;
    }
    .modal__actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      padding-top: 1rem;
    }
    .modal__actions button {
      padding: 0.6rem 1.2rem;
      border-radius: 10px;
      border: none;
      font-size: 0.95rem;
      cursor: pointer;
    }
    .modal__actions .primary {
      background: #2563eb;
      color: #fff;
    }
    .modal__actions .secondary {
      background: #e2e8f0;
      color: #0f172a;
    }
    .modal__actions button:focus-visible {
      outline: 2px solid #2563eb;
      outline-offset: 2px;
    }

    @media (max-width: 600px) {
      .modal {
        border-radius: 12px;
      }
      .modal__header, .modal__body {
        padding-inline: 1.25rem;
      }
    }
  </style>
</head>
<body>
  <button class="trigger" type="button">Open Modal</button>

  <div class="modal-overlay" data-modal-overlay>
    <section
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modal-title"
      aria-describedby="modal-description"
      aria-hidden="true"
    >
      <header class="modal__header">
        <h2 id="modal-title" class="modal__title">Sample Modal Dialog</h2>
        <button class="modal__close" type="button" aria-label="Close dialog" data-close>&times;</button>
      </header>
      <div class="modal__body">
        <p id="modal-description">
          This modal provides a concise example of how to implement a dialog component that opens and closes
          using a dedicated trigger button. Keyboard users can navigate and close it with the Escape key.
        </p>
        <div class="modal__actions">
          <button class="secondary" type="button" data-close>Cancel</button>
          <button class="primary" type="button">Confirm</button>
        </div>
      </div>
    </section>
  </div>

  <script>
    (function () {
      const trigger = document.querySelector('.trigger');
      const overlay = document.querySelector('[data-modal-overlay]');
      const modal = overlay.querySelector('.modal');
      const closeButtons = modal.querySelectorAll('[data-close]');
      let lastFocusedElement = null;

      const focusableSelectors = [
        'a[href]',
        'area[href]',
        'button:not([disabled])',
        'input:not([disabled]):not([type="hidden"])',
        'select:not([disabled])',
        'textarea:not([disabled])',
        'details summary',
        '[tabindex]:not([tabindex="-1"])'
      ].join(',');

      function getFocusableElements() {
        return Array.from(modal.querySelectorAll(focusableSelectors))
          .filter(el => el.offsetParent !== null);
      }

      function openModal() {
        if (modal.classList.contains('is-visible')) return;
        lastFocusedElement = document.activeElement instanceof HTMLElement ? document.activeElement : null;

        overlay.classList.add('is-visible');
        modal.classList.add('is-visible');
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';

        const focusable = getFocusableElements();
        if (focusable.length) {
          focusable[0].focus();
        } else {
          modal.focus();
        }

        document.addEventListener('keydown', handleKeydown);
        overlay.addEventListener('click', handleOverlayClick);
      }

      function closeModal() {
        if (!modal.classList.contains('is-visible')) return;

        overlay.classList.remove('is-visible');
        modal.classList.remove('is-visible');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';

        document.removeEventListener('keydown', handleKeydown);
        overlay.removeEventListener('click', handleOverlayClick);

        if (lastFocusedElement) {
          lastFocusedElement.focus();
        }
      }

      function handleKeydown(event) {
        if (event.key === 'Escape') {
          event.preventDefault();
          closeModal();
          return;
        }

        if (event.key === 'Tab') {
          const focusable = getFocusableElements();
          if (!focusable.length) {
            event.preventDefault();
            return;
          }

          const { activeElement } = document;
          const currentIndex = focusable.indexOf(activeElement);
          let nextIndex = currentIndex;

          if (event.shiftKey) {
            nextIndex = currentIndex <= 0 ? focusable.length - 1 : currentIndex - 1;
          } else {
            nextIndex = currentIndex === focusable.length - 1 ? 0 : currentIndex + 1;
          }

          if (nextIndex !== currentIndex) {
            event.preventDefault();
            focusable[nextIndex].focus();
          }
        }
      }

      function handleOverlayClick(event) {
        if (event.target === overlay) {
          closeModal();
        }
      }

      trigger.addEventListener('click', openModal);
      closeButtons.forEach(button => button.addEventListener('click', closeModal));
    })();
  </script>
</body>
</html>