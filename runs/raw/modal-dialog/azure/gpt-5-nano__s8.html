<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root {
      --overlay: rgba(0, 0, 0, 0.6);
      --dialog: #fff;
      --radius: 8px;
      --shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
    }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 2rem;
      background: #f5f5f7;
      color: #333;
    }

    /* Trigger button styling (has class "trigger") */
    .trigger {
      display: inline-block;
      padding: 0.75rem 1.25rem;
      background: #1e6feb;
      color: #fff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      transition: transform .1s ease;
    }
    .trigger:active { transform: translateY(1px); }

    /* Modal container (hidden by default) */
    .modal {
      position: fixed;
      inset: 0;
      display: none; /* closed by default */
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal.open { display: flex; }

    .modal__overlay {
      position: absolute;
      inset: 0;
      background: var(--overlay);
      backdrop-filter: blur(1px);
    }

    .modal__content {
      position: relative;
      background: var(--dialog);
      width: min(92vw, 560px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 1.25rem;
      z-index: 1;
      transform: translateY(-10px);
      animation: slideIn .2s ease-out;
    }
    @keyframes slideIn {
      from { transform: translateY(-6px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .modal__header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #eee;
      padding-bottom: 0.5rem;
      margin-bottom: 0.5rem;
    }
    .modal__title {
      margin: 0;
      font-size: 1.25rem;
    }
    .modal__close {
      background: transparent;
      border: none;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
    }

    .modal__body {
      font-size: 1rem;
      color: #333;
    }

    /* Focus ring for accessibility */
    :focus-visible {
      outline: 3px solid #4a90e2;
      outline-offset: 2px;
    }

    /* Demo page content */
    .section {
      max-width: 800px;
      margin: 2rem auto;
      padding: 2rem;
      background: #fff;
      border-radius: 10px;
      border: 1px solid #e0e0e0;
    }
  </style>
</head>
<body>
  <div class="section">
    <h1>Modal Dialog Component Example</h1>
    <p>This page demonstrates a modal dialog. The button below opens the modal. The modal is closed by default.</p>
    <button class="trigger" data-modal-target="exampleModal" aria-haspopup="dialog" aria-expanded="false">
      Open modal
    </button>
  </div>

  <!-- Modal -->
  <div class="modal" id="exampleModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal__overlay" data-close-on-overlay="true"></div>

    <div class="modal__content" tabindex="-1" aria-label="Example modal content">
      <header class="modal__header">
        <h2 class="modal__title" id="modalTitle">Example Modal</h2>
        <button class="modal__close" aria-label="Close modal" data-close>Ã—</button>
      </header>
      <section class="modal__body">
        <p>This is a simple modal dialog component. It can be opened by clicking the button above. You can close it by clicking the overlay, pressing the Escape key, or clicking the close button.</p>
        <p>It demonstrates a dedicated container with accessible attributes and proper focus handling.</p>
      </section>
      <footer style="margin-top: 1rem; display: flex; justify-content: flex-end;">
        <button class="trigger" data-modal-target="exampleModal" aria-label="Close modal" data-close-on-action>Got it</button>
      </footer>
    </div>
  </div>

  <script>
    // Simple modal controller
    (function() {
      const modals = document.querySelectorAll('.modal');

      function openModal(modal) {
        if (!modal) return;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');

        // Focus the first focusable element inside the modal
        const focusable = modal.querySelectorAll(
          'button, a[href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        if (focusable.length) {
          focusable[0].focus();
        } else {
          modal.focus();
        }

        // Track currently open modal for Escape handling
        document.addEventListener('keydown', onKeyDown);
      }

      function closeModal(modal) {
        if (!modal) return;
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');

        // Reset any trigger controls' aria-expanded state
        const triggers = document.querySelectorAll('[data-modal-target="' + modal.id + '"]');
        triggers.forEach(t => t.setAttribute('aria-expanded', 'false'));

        // Return focus to triggering element if available
        const openTriggers = document.querySelectorAll('[data-modal-target="' + modal.id + '"]');
        if (openTriggers.length) {
          openTriggers[0].focus();
        }

        document.removeEventListener('keydown', onKeyDown);
      }

      function onKeyDown(e) {
        if (e.key === 'Escape' || e.key === 'Esc') {
          const open = document.querySelector('.modal.open');
          if (open) closeModal(open);
        }
      }

      // Attach open handlers to all elements with class "trigger" and data-modal-target
      const triggers = document.querySelectorAll('.trigger[data-modal-target]');
      triggers.forEach(el => {
        el.addEventListener('click', function() {
          const targetId = this.getAttribute('data-modal-target');
          const modal = document.getElementById(targetId);
          // Mark trigger as expanded for accessibility
          this.setAttribute('aria-expanded', 'true');
          openModal(modal);
        });
      });

      // Close handlers: overlay click or close button
      modals.forEach(modal => {
        // overlay
        const overlay = modal.querySelector('[data-close-on-overlay="true"]');
        if (overlay) {
          overlay.addEventListener('click', () => closeModal(modal));
        }
        // close button inside modal
        const closeBtn = modal.querySelector('[data-close]');
        if (closeBtn) {
          closeBtn.addEventListener('click', () => closeModal(modal));
        }

        // action buttons inside modal that should close
        const actionButtons = modal.querySelectorAll('[data-close-on-action]');
        actionButtons.forEach(btn => {
          btn.addEventListener('click', () => closeModal(modal));
        });

        // Ensure modal is hidden by default for accessibility
        modal.setAttribute('aria-hidden', 'true');
      });
    })();
  </script>
</body>
</html>