<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modal Dialog Example</title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: system-ui, sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: radial-gradient(circle at top, #f0f4ff, #d5d9e2);
    }

    .trigger {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 0.75rem;
      border: none;
      background: #3a5af9;
      color: #fff;
      box-shadow: 0 10px 30px -12px rgba(58, 90, 249, 0.6);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .trigger:hover {
      transform: translateY(-2px);
      box-shadow: 0 18px 40px -15px rgba(58, 90, 249, 0.55);
    }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.45);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      z-index: 1000;
    }

    .modal-backdrop.active {
      display: flex;
      animation: fadeIn 0.2s ease-out;
    }

    .modal {
      width: min(420px, 100%);
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(22px);
      border-radius: 1.25rem;
      padding: 2rem;
      box-shadow: 0 30px 60px -25px rgba(15, 23, 42, 0.45);
      position: relative;
      opacity: 0;
      transform: translateY(24px) scale(0.98);
      transition: opacity 0.25s ease, transform 0.25s ease;
    }

    .modal.active {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .modal h2 {
      margin-top: 0;
      margin-bottom: 1rem;
      font-size: 1.6rem;
    }

    .modal p {
      margin: 0 0 1.8rem;
      line-height: 1.6;
      color: rgba(15, 23, 42, 0.75);
    }

    .modal button.close {
      position: absolute;
      top: 12px;
      right: 12px;
      border: none;
      background: transparent;
      font-size: 1.35rem;
      cursor: pointer;
      color: rgba(15, 23, 42, 0.55);
      transition: color 0.2s ease;
    }

    .modal button.close:hover {
      color: rgba(15, 23, 42, 0.8);
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
  </style>
</head>
<body>
  <button class="trigger" type="button" aria-haspopup="dialog" aria-expanded="false">
    Open Details
  </button>

  <div class="modal-backdrop" role="presentation" hidden>
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <button class="close" type="button" aria-label="Close dialog">&times;</button>
      <h2 id="modal-title">Team Update</h2>
      <p>
        This modal showcases an accessible dialog component. It stays hidden until you activate
        the trigger button and can be dismissed through the close button, by pressing Escape,
        or clicking outside the modal content.
      </p>
      <button type="button" class="trigger secondary">
        View Roadmap
      </button>
    </div>
  </div>

  <script>
    const triggerButtons = document.querySelectorAll('.trigger');
    const backdrop = document.querySelector('.modal-backdrop');
    const modal = document.querySelector('.modal');
    const closeBtn = document.querySelector('.modal button.close');
    const focusableSelectors = [
      'a[href]',
      'button:not([disabled])',
      'textarea:not([disabled])',
      'input[type="text"]:not([disabled])',
      'input[type="radio"]:not([disabled])',
      'input[type="checkbox"]:not([disabled])',
      'select:not([disabled])',
      '[tabindex]:not([tabindex="-1"])'
    ];
    let lastFocusedElement = null;

    function openModal(trigger) {
      lastFocusedElement = trigger;
      backdrop.hidden = false;
      requestAnimationFrame(() => {
        backdrop.classList.add('active');
        modal.classList.add('active');
        trigger.setAttribute('aria-expanded', 'true');
        const focusable = modal.querySelectorAll(focusableSelectors);
        if (focusable.length) {
          focusable[0].focus();
        }
      });
      document.addEventListener('keydown', handleKeydown);
      backdrop.addEventListener('click', handleBackdrop);
    }

    function closeModal() {
      backdrop.classList.remove('active');
      modal.classList.remove('active');
      triggerButtons.forEach(btn => btn.setAttribute('aria-expanded', 'false'));
      document.removeEventListener('keydown', handleKeydown);
      backdrop.removeEventListener('click', handleBackdrop);
      setTimeout(() => {
        backdrop.hidden = true;
        if (lastFocusedElement) {
          lastFocusedElement.focus();
        }
      }, 200);
    }

    function handleKeydown(event) {
      if (event.key === 'Escape') {
        closeModal();
      }
      if (event.key === 'Tab') {
        trapFocus(event);
      }
    }

    function handleBackdrop(event) {
      if (!modal.contains(event.target)) {
        closeModal();
      }
    }

    function trapFocus(event) {
      const focusable = Array.from(modal.querySelectorAll(focusableSelectors));
      if (!focusable.length) return;
      const { activeElement } = document;
      const currentIndex = focusable.indexOf(activeElement);
      if (event.shiftKey && currentIndex === 0) {
        event.preventDefault();
        focusable[focusable.length - 1].focus();
      } else if (!event.shiftKey && currentIndex === focusable.length - 1) {
        event.preventDefault();
        focusable[0].focus();
      }
    }

    triggerButtons.forEach(button => {
      button.addEventListener('click', () => openModal(button));
    });

    closeBtn.addEventListener('click', closeModal);
  </script>
</body>
</html>