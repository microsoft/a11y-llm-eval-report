<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Modal Dialog Example</title>
  <style>
    :root {
      --overlay: rgba(0, 0, 0, 0.5);
      --bg: #fff;
      --radius: 12px;
      --shadow: 0 20px 40px rgba(0,0,0,.15);
    }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f5f7fa;
      color: #333;
      min-height: 100vh;
      line-height: 1.5;
    }

    h1 {
      margin-top: 0;
    }

    /* Trigger button (must have class "trigger") */
    button.trigger {
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background: #007bff;
      color: #fff;
      cursor: pointer;
    }
    button.trigger:focus {
      outline: 2px solid #0056b3;
      outline-offset: 2px;
    }

    /* Modal overlay container (hidden by default) */
    .modal {
      position: fixed;
      inset: 0;
      display: none; /* closed by default */
      align-items: center;
      justify-content: center;
      background: var(--overlay);
      z-index: 1000;
    }
    .modal.open {
      display: flex;
    }

    /* Dialog panel */
    .modal__dialog {
      width: min(92vw, 520px);
      background: #fff;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      outline: none;
    }

    .modal__header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      border-bottom: 1px solid #e5e5e5;
      background: #f9f9f9;
    }
    .modal__title {
      margin: 0;
      font-size: 1.1rem;
    }
    .modal__close {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      border: none;
      background: transparent;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
    }
    .modal__close:hover {
      background: rgba(0,0,0,.05);
    }

    .modal__body {
      padding: 1rem;
      color: #333;
    }

    .modal__footer {
      padding: 1rem;
      border-top: 1px solid #eee;
      text-align: right;
      background: #f7f7f7;
    }
    .btn {
      padding: .5rem 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #fff;
      cursor: pointer;
    }
    .btn.primary {
      background: #007bff;
      color: #fff;
      border-color: #007bff;
    }
    .btn + .btn {
      margin-left: .5rem;
    }

    @media (prefers-reduced-motion: reduce) {
      .modal__dialog { transition: none; }
    }
  </style>
</head>
<body>
  <h1>Modal Dialog Example</h1>
  <p>This modal is closed by default. Click the button below to open it. The button to open the modal has a trigger class.</p>

  <button class="trigger" type="button" aria-label="Open modal">Open Modal</button>

  <!-- Modal -->
  <div class="modal" id="myModal" aria-hidden="true" role="dialog" aria-labelledby="modalTitle" aria-modal="true">
    <div class="modal__dialog" role="document" tabindex="-1">
      <header class="modal__header">
        <h2 class="modal__title" id="modalTitle">Example Modal</h2>
        <button class="modal__close" aria-label="Close modal" type="button" data-close>Ã—</button>
      </header>
      <section class="modal__body">
        <p>This modal is closed by default. It can be opened by clicking the button with the trigger class. You can close it by pressing Escape, clicking outside the dialog, or clicking the close button.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum in arcu ac velit efficitur bibendum.</p>
      </section>
      <footer class="modal__footer">
        <button class="btn" data-close>Cancel</button>
        <button class="btn primary" type="button" id="confirmBtn">Save changes</button>
      </footer>
    </div>
  </div>

  <script>
    (function() {
      const modal = document.getElementById('myModal');
      const openBtn = document.querySelector('.trigger');
      const closeButtons = modal.querySelectorAll('[data-close]');
      const dialog = modal.querySelector('.modal__dialog');

      function focusFirstInsideModal() {
        const focusables = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusables.length) {
          focusables[0].focus();
        } else {
          dialog.focus();
        }
      }

      function openModal() {
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
        focusFirstInsideModal();
        document.body.style.overflow = 'hidden'; // lock scroll
      }

      function closeModal() {
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = ''; // restore scroll
        if (openBtn) openBtn.focus();
      }

      // Open via trigger with class "trigger"
      if (openBtn) {
        openBtn.addEventListener('click', openModal);
      }

      // Close via close controls
      closeButtons.forEach(btn => btn.addEventListener('click', closeModal));

      // Close when clicking outside the dialog (on overlay)
      modal.addEventListener('mousedown', (e) => {
        if (e.target === modal) {
          closeModal();
        }
      });

      // Escape to close
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('open')) {
          closeModal();
        }
      });
    })();
  </script>
</body>
</html>