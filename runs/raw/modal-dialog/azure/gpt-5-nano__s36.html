<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Modal Dialog Example</title>
  <style>
    :root { --modal-bg: #fff; --overlay: rgba(0,0,0,.5); --radius: 8px; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif; margin: 0; padding: 2rem; line-height: 1.5; }
    /* Trigger button */
    .trigger { padding: .6rem 1rem; font-size: 1rem; border: 1px solid #ccc; background: #f5f5f5; border-radius: 6px; cursor: pointer; }
    .trigger:hover { background: #eee; }

    /* Modal styles */
    .modal { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; z-index: 1000; }
    .modal.is-open { display: flex; }

    .modal__overlay { position: absolute; inset: 0; background: var(--overlay); }

    .modal__content { position: relative; background: var(--modal-bg); border-radius: var(--radius); padding: 1rem; width: min(90vw, 520px); box-shadow: 0 20px 60px rgba(0,0,0,.25); z-index: 1; max-height: 80vh; overflow: auto; }

    .modal__header { display: flex; justify-content: space-between; align-items: center; padding-bottom: .5rem; border-bottom: 1px solid #eee; }
    .modal__title { margin: 0; font-size: 1.25rem; }

    .modal__close { background: transparent; border: none; font-size: 1.25rem; line-height: 1; cursor: pointer; padding: .25rem; border-radius: 4px; }
    .modal__close:hover { background: #f0f0f0; }

    .modal__body { padding: .75rem 0; color: #333; }

    .modal__footer { display: flex; justify-content: flex-end; padding-top: .5rem; border-top: 1px solid #eee; }

    .btn { padding: .5rem 0.75rem; border-radius: 6px; border: 1px solid #ccc; background: #f5f5f5; cursor: pointer; }
    .btn.primary { background: #007bff; color: white; border-color: #007bff; }
    .btn:focus { outline: 2px solid #005fcc; outline-offset: 2px; }

    /* Prevent background scroll when modal open (optional) */
    body.modal-open { overflow: hidden; }
  </style>
</head>
<body>
  <h1>Modal Dialog Component Example</h1>
  <p>This is a simple modal dialog. It is closed by default. Click the button below to open it.</p>
  <button class="trigger" data-modal="exampleModal">Open Modal</button>

  <!-- Modal -->
  <div class="modal" id="exampleModal" role="dialog" aria-labelledby="modalTitle" aria-modal="true" aria-hidden="true">
    <div class="modal__overlay" aria-hidden="true"></div>

    <div class="modal__content">
      <header class="modal__header">
        <h2 class="modal__title" id="modalTitle">Example Modal</h2>
        <button class="modal__close" aria-label="Close modal">&times;</button>
      </header>
      <section class="modal__body">
        <p>This modal is hidden by default. It can be closed by pressing the Escape key, clicking the close button, or clicking the overlay outside the dialog.</p>
        <p>You can put any content here, including forms, images, or messages.</p>
      </section>
      <footer class="modal__footer">
        <button class="btn" data-dismiss="modal" aria-label="Close">Close</button>
        <button class="btn primary" style="margin-left:.5rem" data-dismiss="modal" aria-label="Agree">Okay</button>
      </footer>
    </div>
  </div>

  <script>
    (function(){
      const triggers = document.querySelectorAll('.trigger');
      const body = document.body;

      triggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
          const modalId = trigger.getAttribute('data-modal');
          const modal = document.getElementById(modalId);
          if (modal) openModal(modal);
        });
      });

      function openModal(modal) {
        if (!modal) return;
        modal.classList.add('is-open');
        modal.setAttribute('aria-hidden', 'false');
        body.classList.add('modal-open');

        // focus first focusable element in modal
        const focusable = modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusable) focusable.focus();

        // Setup overlay click to close
        const overlay = modal.querySelector('.modal__overlay');
        const onOverlayClick = () => closeModal(modal);
        overlay.addEventListener('click', onOverlayClick);
        // Save reference so we can remove later
        modal._overlayClickHandler = onOverlayClick;

        // Setup close buttons inside modal
        const dismissButtons = modal.querySelectorAll('[data-dismiss="modal"], .modal__close');
        dismissButtons.forEach(btn => {
          btn.addEventListener('click', () => closeModal(modal));
        });

        // Escape key handling
        modal._onKeyDown = function(e) {
          if (e.key === 'Escape' || e.key === 'Esc') {
            closeModal(modal);
          }
        };
        document.addEventListener('keydown', modal._onKeyDown);
      }

      function closeModal(modal) {
        if (!modal) return;
        modal.classList.remove('is-open');
        modal.setAttribute('aria-hidden', 'true');
        body.classList.remove('modal-open');

        // Clean up event listeners
        if (modal._overlayClickHandler) {
          const overlay = modal.querySelector('.modal__overlay');
          overlay.removeEventListener('click', modal._overlayClickHandler);
          modal._overlayClickHandler = null;
        }
        if (modal._onKeyDown) {
          document.removeEventListener('keydown', modal._onKeyDown);
          modal._onKeyDown = null;
        }

        // Optional: return focus to trigger
        const lastTrigger = document.querySelector('.trigger[data-modal="' + modal.id + '"]');
        if (lastTrigger && typeof lastTrigger.focus === 'function') lastTrigger.focus();
      }

    })();
  </script>
</body>
</html>