<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modal Dialog Example</title>
  <style>
    :root {
      font-family: Arial, Helvetica, sans-serif;
      color: #222;
      background-color: #f5f5f5;
    }

    body {
      margin: 0;
      padding: 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .trigger {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      background: #3b82f6;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .trigger:hover,
    .trigger:focus-visible {
      background: #2563eb;
      outline: none;
    }

    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(15, 23, 42, 0.65);
      padding: 1.5rem;
      z-index: 1000;
    }

    .modal.open {
      display: flex;
    }

    .modal__dialog {
      position: relative;
      width: min(32rem, 100%);
      background: #fff;
      border-radius: 12px;
      padding: 2rem 2.5rem 2.25rem;
      box-shadow: 0 20px 45px -15px rgba(15, 23, 42, 0.4);
    }

    .modal__title {
      margin: 0 0 0.75rem;
      font-size: 1.5rem;
      font-weight: 600;
      color: #111827;
    }

    .modal__text {
      margin: 0 0 1.5rem;
      line-height: 1.6;
      color: #4b5563;
    }

    .modal__actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
    }

    .modal__button {
      padding: 0.65rem 1.3rem;
      font-size: 0.95rem;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s ease, color 0.2s ease;
    }

    .modal__button--secondary {
      background: #e5e7eb;
      color: #1f2937;
    }

    .modal__button--secondary:hover,
    .modal__button--secondary:focus-visible {
      background: #d1d5db;
      outline: none;
    }

    .modal__button--primary {
      background: #3b82f6;
      color: #fff;
    }

    .modal__button--primary:hover,
    .modal__button--primary:focus-visible {
      background: #2563eb;
      outline: none;
    }

    .modal__close {
      position: absolute;
      top: 0.85rem;
      right: 0.85rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      line-height: 1;
      color: #6b7280;
      cursor: pointer;
      padding: 0.25rem;
      border-radius: 6px;
    }

    .modal__close:hover,
    .modal__close:focus-visible {
      color: #111827;
      background: rgba(229, 231, 235, 0.7);
      outline: none;
    }
  </style>
</head>
<body>
  <button class="trigger" type="button">Open Modal Dialog</button>

  <div class="modal" role="presentation" aria-hidden="true">
    <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-description">
      <button class="modal__close" type="button" aria-label="Close dialog">&times;</button>
      <h2 id="modal-title" class="modal__title">Need a little more time?</h2>
      <p id="modal-description" class="modal__text">
        This modal dialog demonstrates a simple pattern for presenting content in a layer above the page. You can close it using
        the buttons below or by pressing the Escape key.
      </p>
      <div class="modal__actions">
        <button class="modal__button modal__button--secondary" type="button" data-close>Cancel</button>
        <button class="modal__button modal__button--primary" type="button">Confirm</button>
      </div>
    </div>
  </div>

  <script>
    const openTrigger = document.querySelector('.trigger');
    const modal = document.querySelector('.modal');
    const closeButtons = modal.querySelectorAll('[data-close], .modal__close');
    const dialog = modal.querySelector('.modal__dialog');
    const focusableSelectors = [
      'a[href]',
      'button:not([disabled])',
      'textarea:not([disabled])',
      'input[type="text"]:not([disabled])',
      'input[type="radio"]:not([disabled])',
      'input[type="checkbox"]:not([disabled])',
      'select:not([disabled])',
      '[tabindex]:not([tabindex="-1"])'
    ];
    let lastFocusedElement = null;

    function openModal() {
      lastFocusedElement = document.activeElement;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
      const focusableElements = dialog.querySelectorAll(focusableSelectors.join(','));
      if (focusableElements.length > 0) {
        focusableElements[0].focus();
      }
      document.addEventListener('keydown', handleKeydown);
    }

    function closeModal() {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
      document.removeEventListener('keydown', handleKeydown);
      if (lastFocusedElement) {
        lastFocusedElement.focus();
      }
    }

    function handleKeydown(event) {
      if (event.key === 'Escape') {
        event.preventDefault();
        closeModal();
      } else if (event.key === 'Tab') {
        trapFocus(event);
      }
    }

    function trapFocus(event) {
      const focusableElements = dialog.querySelectorAll(focusableSelectors.join(','));
      if (focusableElements.length === 0) return;

      const firstElement = focusableElements[0];
      const lastElement = focusableElements[focusableElements.length - 1];

      if (event.shiftKey && document.activeElement === firstElement) {
        event.preventDefault();
        lastElement.focus();
      } else if (!event.shiftKey && document.activeElement === lastElement) {
        event.preventDefault();
        firstElement.focus();
      }
    }

    openTrigger.addEventListener('click', openModal);

    closeButtons.forEach((button) => {
      button.addEventListener('click', closeModal);
    });

    modal.addEventListener('click', (event) => {
      if (event.target === modal) {
        closeModal();
      }
    });
  </script>
</body>
</html>