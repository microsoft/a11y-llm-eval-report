<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Component Demo</title>
  <style>
    :root {
      --overlay: rgba(0, 0, 0, 0.5);
      --bg: #ffffff;
      --radius: 8px;
    }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f5f7fb;
      color: #1a1a1a;
    }
    h1 { margin-top: 0; }

    /* Trigger button with required class */
    .trigger {
      padding: 0.65rem 1rem;
      border-radius: 6px;
      border: 1px solid #444;
      background: #fff;
      cursor: pointer;
      font-size: 1rem;
    }
    .trigger:hover { background: #f0f0f0; }

    /* Modal overlay (hidden by default) */
    .modal-overlay {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: var(--overlay);
      padding: 1rem;
      z-index: 999;
    }
    .modal-overlay.open {
      display: flex;
    }

    /* Modal container */
    .modal {
      background: var(--bg);
      width: 100%;
      max-width: 600px;
      border-radius: var(--radius);
      box-shadow: 0 10px 25px rgba(0,0,0,.25);
      overflow: hidden;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      border-bottom: 1px solid #eee;
    }
    .modal-title {
      margin: 0;
      font-size: 1.25rem;
    }
    .modal-close {
      background: transparent;
      border: none;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
    }

    .modal-body {
      padding: 1rem;
    }

    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: .5rem;
      padding: 1rem;
      border-top: 1px solid #eee;
    }

    .btn {
      padding: .5rem .9rem;
      border-radius: 6px;
      border: 1px solid #bbb;
      background: #fff;
      cursor: pointer;
    }
    .btn.primary {
      background: #2563eb;
      color: #fff;
      border: 1px solid #2563eb;
    }
  </style>
</head>
<body>
  <h1>Modal Dialog Component Demo</h1>
  <p>This demonstrates a modal dialog that is closed by default. The button that opens it uses the trigger class.</p>

  <button class="trigger" data-target="#exampleModal">Open Modal</button>

  <!-- Modal Overlay (hidden by default) -->
  <div id="exampleModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <section class="modal" role="document" aria-labelledby="modalTitle">
      <header class="modal-header">
        <h2 id="modalTitle" class="modal-title">Example Modal</h2>
        <button class="modal-close" aria-label="Close modal" title="Close">âœ•</button>
      </header>
      <div class="modal-body">
        <p>This is an example modal dialog. It is closed by default and can be opened by clicking the button above. You can close it by pressing the Escape key, clicking outside the dialog, or clicking the close button.</p>
      </div>
      <div class="modal-actions">
        <button class="btn" id="cancelBtn" type="button">Cancel</button>
        <button class="btn primary" id="saveBtn" type="button" onclick="alert('Saved!')">Save</button>
      </div>
    </section>
  </div>

  <script>
    (function() {
      var triggers = document.querySelectorAll('.trigger');
      var lastFocused = null;

      function openModal(targetSelector) {
        var overlay = document.querySelector(targetSelector);
        if (!overlay) return;
        lastFocused = document.activeElement;
        overlay.classList.add('open');
        overlay.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        // Focus the first focusable element inside the modal
        var focusable = overlay.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusable) focusable.focus();
        // Trap focus inside the modal
        document.addEventListener('keydown', trapFocus);
      }

      function closeModal() {
        var overlay = document.querySelector('.modal-overlay.open');
        if (!overlay) return;
        overlay.classList.remove('open');
        overlay.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        document.removeEventListener('keydown', trapFocus);
        if (lastFocused) lastFocused.focus();
      }

      function trapFocus(e) {
        if (e.key !== 'Tab') return;
        var overlay = document.querySelector('.modal-overlay.open');
        if (!overlay) return;
        var focusables = overlay.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusables.length === 0) { e.preventDefault(); return; }
        var first = focusables[0];
        var last = focusables[focusables.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === first) {
            last.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === last) {
            first.focus();
            e.preventDefault();
          }
        }
      }

      // Bind open triggers
      triggers.forEach(function(btn){
        btn.addEventListener('click', function() {
          var target = btn.getAttribute('data-target');
          if (target) openModal(target);
        });
      });

      // Close via modal close button
      document.addEventListener('click', function(e){
        if (e.target.closest('.modal-close')) {
          closeModal();
        }
      });

      // Close via Cancel button
      document.addEventListener('click', function(e){
        if (e.target.closest('#cancelBtn')) {
          closeModal();
        }
      });

      // Close when clicking the overlay background
      document.addEventListener('click', function(e){
        var overlay = document.querySelector('.modal-overlay.open');
        if (!overlay) return;
        if (e.target === overlay) {
          closeModal();
        }
      });

      // Close on Escape
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape') {
          var overlay = document.querySelector('.modal-overlay.open');
          if (overlay) closeModal();
        }
      });
    })();
  </script>
</body>
</html>