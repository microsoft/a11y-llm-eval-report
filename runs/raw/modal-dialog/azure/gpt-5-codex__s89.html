<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modal Dialog Example</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root {
      color-scheme: light dark;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: #f2f2f2;
      color: #222;
    }

    button {
      font-size: 1rem;
      padding: 0.7em 1.5em;
      border: none;
      border-radius: 0.5em;
      cursor: pointer;
      background-color: #3366ff;
      color: #fff;
      transition: background-color 0.2s ease, transform 0.2s ease;
    }

    button:hover,
    button:focus {
      background-color: #254bcc;
      outline: none;
      transform: translateY(-1px);
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 15, 35, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      opacity: 0;
      visibility: hidden;
      transition: opacity 150ms ease, visibility 150ms ease;
      z-index: 1000;
    }

    .modal-overlay.open {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: #fff;
      color: #111;
      border-radius: 1rem;
      box-shadow: 0 1.5rem 3rem rgba(0, 0, 0, 0.15);
      max-width: 480px;
      width: 100%;
      transform: translateY(24px) scale(0.98);
      transition: transform 200ms ease;
    }

    .modal-overlay.open .modal {
      transform: translateY(0) scale(1);
    }

    .modal-header {
      padding: 1.5rem 1.75rem 1rem;
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    .modal-title {
      margin: 0;
      font-size: 1.5rem;
      line-height: 1.3;
    }

    .modal-body {
      padding: 1.5rem 1.75rem;
      font-size: 1rem;
      line-height: 1.6;
      color: #444;
    }

    .modal-footer {
      padding: 1rem 1.75rem 1.5rem;
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
      border-top: 1px solid rgba(0, 0, 0, 0.08);
    }

    .modal-footer button {
      background-color: #e0e4ff;
      color: #2745ff;
    }

    .modal-footer button:hover,
    .modal-footer button:focus {
      background-color: #c5cbff;
    }

    .close-button {
      background-color: transparent;
      color: #666;
      padding: 0.5em 1em;
      border-radius: 0.4em;
    }

    .close-button:hover,
    .close-button:focus {
      background-color: rgba(0, 0, 0, 0.05);
      color: #333;
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        transition: none !important;
      }
    }
  </style>
</head>
<body>
  <button class="trigger" aria-haspopup="dialog" aria-controls="modal-overlay">Open Modal</button>

  <div class="modal-overlay" id="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-description">
      <header class="modal-header">
        <h2 class="modal-title" id="modal-title">Modal Dialog</h2>
      </header>
      <section class="modal-body" id="modal-description">
        <p>This is an example modal dialog component. It starts hidden and can be opened by interacting with the trigger button. Use the close buttons, the Escape key, or click outside the dialog to dismiss it.</p>
      </section>
      <footer class="modal-footer">
        <button type="button" class="close-button" data-close>Cancel</button>
        <button type="button" data-close>Confirm</button>
      </footer>
    </div>
  </div>

  <script>
    const triggerButton = document.querySelector('.trigger');
    const overlay = document.getElementById('modal-overlay');
    const modal = overlay.querySelector('.modal');
    const closeButtons = overlay.querySelectorAll('[data-close]');
    let lastFocusedElement = null;

    function openModal() {
      lastFocusedElement = document.activeElement;
      overlay.classList.add('open');
      overlay.setAttribute('aria-hidden', 'false');
      const firstFocusable = modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      (firstFocusable || modal).focus();
      document.addEventListener('keydown', handleKeydown);
    }

    function closeModal() {
      overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden', 'true');
      document.removeEventListener('keydown', handleKeydown);
      if (lastFocusedElement) {
        lastFocusedElement.focus();
      }
    }

    function handleKeydown(event) {
      if (event.key === 'Escape') {
        closeModal();
      }

      if (event.key === 'Tab') {
        trapFocus(event);
      }
    }

    function trapFocus(event) {
      const focusable = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      const focusArray = Array.prototype.slice.call(focusable);
      if (focusArray.length === 0) return;

      const first = focusArray[0];
      const last = focusArray[focusArray.length - 1];

      if (event.shiftKey && document.activeElement === first) {
        event.preventDefault();
        last.focus();
      } else if (!event.shiftKey && document.activeElement === last) {
        event.preventDefault();
        first.focus();
      }
    }

    triggerButton.addEventListener('click', () => {
      if (!overlay.classList.contains('open')) {
        openModal();
      }
    });

    overlay.addEventListener('click', (event) => {
      if (event.target === overlay) {
        closeModal();
      }
    });

    closeButtons.forEach(button => {
      button.addEventListener('click', closeModal);
    });
  </script>
</body>
</html>