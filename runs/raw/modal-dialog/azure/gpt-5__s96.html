<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    * { box-sizing: border-box; }
    :root {
      --backdrop: rgba(0, 0, 0, 0.6);
      --surface: #ffffff;
      --text: #1a1a1a;
      --accent: #2563eb;
      --border: #e5e7eb;
    }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: var(--text);
      margin: 0;
      padding: 2rem;
      background: #f7f7f9;
    }
    h1 {
      margin: 0 0 1rem;
      font-size: 1.5rem;
    }
    p {
      margin: 0 0 1rem;
      line-height: 1.6;
      color: #333;
    }

    .trigger {
      appearance: none;
      border: none;
      background: var(--accent);
      color: #fff;
      padding: 0.75rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(37, 99, 235, 0.3);
    }
    .trigger:focus-visible {
      outline: 2px solid #93c5fd;
      outline-offset: 2px;
    }
    .trigger:hover {
      filter: brightness(1.05);
    }

    /* Modal backdrop */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: var(--backdrop);
      display: grid;
      place-items: center;
      padding: 2rem;
      z-index: 9999;
    }
    [hidden] {
      display: none !important;
    }

    /* Modal panel */
    .modal {
      background: var(--surface);
      color: var(--text);
      width: min(640px, 100%);
      max-height: min(80vh, 100%);
      overflow: auto;
      border-radius: 0.75rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);
      position: relative;
      padding: 1rem 1rem 1.25rem;
      border: 1px solid var(--border);
      animation: pop 160ms ease-out;
    }
    @keyframes pop {
      from { transform: translateY(8px) scale(0.98); opacity: 0; }
      to   { transform: translateY(0) scale(1); opacity: 1; }
    }

    .modal header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.25rem 2.5rem 0.75rem 0.25rem;
      border-bottom: 1px solid var(--border);
    }
    .modal h2 {
      margin: 0;
      font-size: 1.2rem;
    }
    .modal .close {
      position: absolute;
      right: 0.5rem;
      top: 0.5rem;
      background: transparent;
      border: none;
      font-size: 1.5rem;
      line-height: 1;
      padding: 0.25rem;
      cursor: pointer;
      border-radius: 0.375rem;
      color: #555;
    }
    .modal .close:hover {
      background: #f3f4f6;
    }
    .modal .close:focus-visible {
      outline: 2px solid #93c5fd;
      outline-offset: 2px;
    }

    .modal .content {
      padding: 1rem 0.25rem 0;
      display: grid;
      gap: 0.75rem;
    }
    .modal footer {
      padding: 1rem 0.25rem 0;
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    .modal .btn {
      appearance: none;
      border: 1px solid var(--border);
      background: #f8fafc;
      color: #111827;
      padding: 0.5rem 0.75rem;
      border-radius: 0.5rem;
      cursor: pointer;
    }
    .modal .btn.primary {
      background: var(--accent);
      border-color: #1d4ed8;
      color: #fff;
      box-shadow: 0 2px 8px rgba(29, 78, 216, 0.25);
    }
    .modal .btn:focus-visible {
      outline: 2px solid #93c5fd;
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <h1>Modal Dialog Demo</h1>
  <p>This is a simple example of a modal dialog component. Click the button below to open the modal.</p>
  <button class="trigger" type="button">Open Modal</button>

  <div class="modal-backdrop" id="backdrop" hidden>
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc">
      <button class="close" type="button" aria-label="Close modal">Ã—</button>
      <header>
        <h2 id="modal-title">Example Modal</h2>
      </header>

      <div class="content" id="modal-desc">
        <p>This modal is closed by default and can be opened with the button that has the "trigger" class. You can close it by pressing Escape, clicking outside, or using the close button.</p>
        <label>
          Your name
          <input type="text" placeholder="Type here" aria-label="Your name" />
        </label>
      </div>

      <footer>
        <button class="btn primary" type="button">Confirm</button>
        <button class="btn" type="button">Secondary Action</button>
      </footer>
    </div>
  </div>

  <script>
    (function () {
      const trigger = document.querySelector('.trigger');
      const backdrop = document.getElementById('backdrop');
      const modal = backdrop.querySelector('.modal');
      const closeBtn = modal.querySelector('.close');
      let previouslyFocused = null;

      function focusables() {
        return modal.querySelectorAll(
          'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])'
        );
      }

      function openModal() {
        previouslyFocused = document.activeElement;
        backdrop.removeAttribute('hidden');
        document.body.style.overflow = 'hidden';
        const list = focusables();
        if (list.length) {
          list[0].focus();
        } else {
          // Fallback focus to the modal itself
          modal.setAttribute('tabindex', '-1');
          modal.focus();
        }
        document.addEventListener('keydown', handleKeydown);
      }

      function closeModal() {
        backdrop.setAttribute('hidden', '');
        document.body.style.overflow = '';
        document.removeEventListener('keydown', handleKeydown);
        if (previouslyFocused && typeof previouslyFocused.focus === 'function') {
          previouslyFocused.focus();
        }
      }

      function handleKeydown(e) {
        if (e.key === 'Escape') {
          e.preventDefault();
          closeModal();
          return;
        }
        if (e.key === 'Tab') {
          const list = Array.from(focusables());
          if (!list.length) return;

          const first = list[0];
          const last = list[list.length - 1];
          const active = document.activeElement;

          if (e.shiftKey) {
            if (active === first || !modal.contains(active)) {
              last.focus();
              e.preventDefault();
            }
          } else {
            if (active === last || !modal.contains(active)) {
              first.focus();
              e.preventDefault();
            }
          }
        }
      }

      trigger.addEventListener('click', openModal);
      closeBtn.addEventListener('click', closeModal);

      backdrop.addEventListener('click', (e) => {
        if (e.target === backdrop) {
          closeModal();
        }
      });
    })();
  </script>
</body>
</html>