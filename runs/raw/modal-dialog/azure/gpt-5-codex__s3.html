<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Modal Dialog Example</title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: system-ui, sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: #f3f4f6;
    }

    button {
      cursor: pointer;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-size: 1rem;
      background: #2563eb;
      color: white;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.2);
    }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      display: none;
      place-items: center;
      background: rgba(17, 24, 39, 0.65);
      padding: 1.5rem;
      z-index: 1000;
      backdrop-filter: blur(2px);
    }

    .modal-backdrop.open {
      display: grid;
    }

    .modal {
      background: white;
      border-radius: 1rem;
      max-width: 24rem;
      width: 100%;
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.25);
      overflow: hidden;
      animation: pop 0.25s ease;
      color: #111827;
    }

    @keyframes pop {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.96);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .modal header {
      padding: 1.25rem 1.5rem 1rem;
      border-bottom: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal header h2 {
      margin: 0;
      font-size: 1.25rem;
    }

    .modal header button {
      background: transparent;
      border: none;
      color: #6b7280;
      padding: 0.25rem;
      font-size: 1.25rem;
      line-height: 1;
      border-radius: 0.375rem;
    }

    .modal header button:hover {
      background: #f3f4f6;
      color: #111827;
      box-shadow: none;
      transform: none;
    }

    .modal section {
      padding: 1.5rem;
      line-height: 1.5;
      color: #4b5563;
    }

    .modal footer {
      padding: 1rem 1.5rem 1.5rem;
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      background: #f9fafb;
      border-top: 1px solid #e5e7eb;
    }

    .modal footer button.secondary {
      background: white;
      color: #1f2937;
      border: 1px solid #d1d5db;
    }

    .modal footer button.secondary:hover {
      box-shadow: none;
      transform: none;
      border-color: #9ca3af;
    }
  </style>
</head>
<body>
  <button class="trigger" type="button" aria-haspopup="dialog" aria-controls="example-modal">
    Open Modal
  </button>

  <div class="modal-backdrop" role="presentation" aria-hidden="true">
    <div class="modal" role="dialog" id="example-modal" aria-modal="true" aria-labelledby="modal-title">
      <header>
        <h2 id="modal-title">Example Modal</h2>
        <button type="button" class="close" aria-label="Close modal">&times;</button>
      </header>
      <section>
        <p>
          This is a simple modal dialog component. It opens when you click the trigger button and closes
          when you click outside the modal, press the close button, or press the Escape key.
        </p>
      </section>
      <footer>
        <button type="button" class="secondary close">Cancel</button>
        <button type="button">Confirm</button>
      </footer>
    </div>
  </div>

  <script>
    const triggerBtn = document.querySelector('.trigger');
    const backdrop = document.querySelector('.modal-backdrop');
    const modal = document.getElementById('example-modal');
    const closeButtons = Array.from(document.querySelectorAll('.close'));

    const focusableSelectors = [
      'a[href]',
      'area[href]',
      'button:not([disabled])',
      'input:not([disabled]):not([type="hidden"])',
      'select:not([disabled])',
      'textarea:not([disabled])',
      '[tabindex]:not([tabindex="-1"])'
    ];

    let lastFocusedElement = null;

    function openModal() {
      lastFocusedElement = document.activeElement;
      backdrop.classList.add('open');
      backdrop.setAttribute('aria-hidden', 'false');

      const focusableElements = modal.querySelectorAll(focusableSelectors.join(','));
      if (focusableElements.length) {
        focusableElements[0].focus();
      }
    }

    function closeModal() {
      backdrop.classList.remove('open');
      backdrop.setAttribute('aria-hidden', 'true');
      if (lastFocusedElement) {
        lastFocusedElement.focus();
      }
    }

    triggerBtn.addEventListener('click', openModal);

    closeButtons.forEach(btn => btn.addEventListener('click', closeModal));

    backdrop.addEventListener('click', event => {
      if (event.target === backdrop) {
        closeModal();
      }
    });

    document.addEventListener('keydown', event => {
      if (event.key === 'Escape' && backdrop.classList.contains('open')) {
        closeModal();
      }

      if (event.key === 'Tab' && backdrop.classList.contains('open')) {
        const focusableElements = Array.from(modal.querySelectorAll(focusableSelectors.join(','))).filter(el => el.offsetParent !== null);
        if (!focusableElements.length) {
          event.preventDefault();
          return;
        }
        const first = focusableElements[0];
        const last = focusableElements[focusableElements.length - 1];

        if (event.shiftKey && document.activeElement === first) {
          event.preventDefault();
          last.focus();
        } else if (!event.shiftKey && document.activeElement === last) {
          event.preventDefault();
          first.focus();
        }
      }
    });
  </script>
</body>
</html>