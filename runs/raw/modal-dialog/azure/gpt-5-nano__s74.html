<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root { --overlay: rgba(0, 0, 0, 0.5); }
    html, body { height: 100%; }
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      background: #f5f5f7;
      color: #222;
    }

    header {
      padding: 2rem;
      text-align: center;
    }

    main {
      padding: 1rem 1.25rem 4rem;
      max-width: 900px;
      margin: 0 auto;
    }

    .trigger {
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #fff;
      cursor: pointer;
    }
    .trigger:hover { background: #f0f0f0; }

    /* Modal styles */
    .modal {
      display: none;           /* closed by default */
      position: fixed;
      inset: 0;
      z-index: 1000;
    }
    .modal.is-open { display: block; }

    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: var(--overlay);
      z-index: 1000;
    }

    .modal-content {
      position: fixed;
      left: 50%;
      top: 18vh;
      transform: translateX(-50%);
      width: min(90vw, 520px);
      background: #fff;
      border-radius: 8px;
      padding: 1.25rem;
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
      z-index: 1001;
    }

    .modal-content header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
    }

    .modal-content h2 { margin: 0; font-size: 1.25rem; }

    .modal-content p { margin: 0.75rem 0; }

    /* Focus ring for accessibility */
    :focus-visible { outline: 3px solid #4b90ff; outline-offset: 2px; }

    @media (max-width: 480px) {
      .modal-content { width: calc(100vw - 2rem); left: 50%; transform: translateX(-50%); top: 15vh; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Modal Dialog Demo</h1>
    <p>This is a simple modal component. It is closed by default. Use the button below to open it.</p>
    <button class="trigger" data-modal="#myModal">Open modal</button>
  </header>

  <main>
    <p>Click the Open modal button to see the dialog. It can be closed by clicking outside, pressing Escape, or using the close button inside the dialog.</p>
  </main>

  <!-- The modal component (closed by default) -->
  <div id="myModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-backdrop" data-close></div>

    <div class="modal-content" role="document" tabindex="-1">
      <header>
        <h2 id="modalTitle" style="margin:0;">Modal Title</h2>
        <button aria-label="Close modal" data-close style="padding:6px 10px; border-radius:6px; border:1px solid #ccc; background:#fff; cursor:pointer;">Close</button>
      </header>

      <p>This is an example of a modal dialog component. It is accessible and can be dismissed by clicking outside the dialog, pressing the Escape key, or using the close button.</p>
      <p>You can put any content inside the modal content area.</p>

      <div style="text-align:right; margin-top: 0.5rem;">
        <button data-close style="padding:8px 12px; border-radius:6px; border:1px solid #ccc; background:#f8f8f8; cursor:pointer;">I got this</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      // Open modal when a trigger is clicked
      document.addEventListener('click', function(e){
        const trigger = e.target.closest('.trigger');
        if (!trigger) return;
        const modalSelector = trigger.getAttribute('data-modal');
        const modal = document.querySelector(modalSelector);
        if (modal) openModal(modal);
      });

      // Close when clicking on elements with data-close or on backdrop
      document.addEventListener('click', function(e){
        const closer = e.target.closest('[data-close]');
        if (!closer) return;
        const modal = closer.closest('.modal');
        if (modal) closeModal(modal);
        // If the trigger inside modal (not used here) also has data-close, it will close
      });

      // Escape closes
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape' || e.key === 'Esc') {
          const open = document.querySelector('.modal.is-open');
          if (open) closeModal(open);
        }
      });

      function openModal(modal){
        if (!modal || modal.classList.contains('is-open')) return;
        modal.classList.add('is-open');
        modal.setAttribute('aria-hidden', 'false');
        // Focus trap setup
        const focusables = modal.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');
        modal._lastFocused = document.activeElement;
        if (focusables.length) {
          focusables[0].focus();
        } else {
          modal.querySelector('.modal-content').focus();
        }
        // Prevent background scroll
        document.body.style.overflow = 'hidden';
      }

      function closeModal(modal){
        if (!modal) return;
        modal.classList.remove('is-open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        if (modal._lastFocused) modal._lastFocused.focus();
      }

      // Simple focus trap while a modal is open
      document.addEventListener('keydown', function(e){
        const open = document.querySelector('.modal.is-open');
        if (!open) return;

        if (e.key === 'Tab') {
          const focusables = open.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])');
          if (!focusables.length) return;
          const first = focusables[0];
          const last = focusables[focusables.length - 1];
          if (e.shiftKey) {
            if (document.activeElement === first) {
              last.focus();
              e.preventDefault();
            }
          } else {
            if (document.activeElement === last) {
              first.focus();
              e.preventDefault();
            }
          }
        } else if (e.key === 'Escape' || e.key === 'Esc') {
          closeModal(open);
          e.preventDefault();
        }
      });
    })();
  </script>
</body>
</html>