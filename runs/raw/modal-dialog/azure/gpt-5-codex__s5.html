<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modal Dialog Example</title>
<style>
  :root {
    color-scheme: light dark;
    font-family: system-ui, sans-serif;
  }

  body {
    margin: 0;
    padding: 2rem;
    background: #f5f5f5;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  button {
    font: inherit;
    cursor: pointer;
    border-radius: 6px;
    border: 1px solid transparent;
    padding: 0.6rem 1.2rem;
    background: #0069ff;
    color: white;
    transition: background 0.2s ease-in-out, transform 0.2s;
  }

  button:hover {
    background: #0052cc;
  }

  button:active {
    transform: scale(0.98);
  }

  .modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    background: rgba(15, 15, 15, 0.55);
    backdrop-filter: blur(3px);
    z-index: 1000;
  }

  .modal[aria-hidden="false"] {
    display: flex;
  }

  .modal__dialog {
    background: #ffffff;
    border-radius: 12px;
    max-width: 480px;
    width: 100%;
    box-shadow: 0 20px 45px rgba(0, 0, 0, 0.18);
    overflow: hidden;
    transform: translateY(20px);
    animation: modal-in 0.35s ease forwards;
  }

  @keyframes modal-in {
    to {
      transform: translateY(0);
    }
  }

  .modal__header,
  .modal__footer {
    padding: 1rem 1.5rem;
    background: #f0f4ff;
  }

  .modal__title {
    margin: 0;
    font-size: 1.3rem;
    color: #003399;
  }

  .modal__body {
    padding: 1.5rem;
    color: #333;
    line-height: 1.5;
  }

  .modal__close {
    appearance: none;
    background: transparent;
    border: none;
    color: #003399;
    font-size: 1.5rem;
    line-height: 1;
    padding: 0.25rem;
    margin: -0.25rem;
    cursor: pointer;
  }

  .modal__close:hover {
    color: #000;
  }

  .modal__footer button {
    background: #003399;
  }
</style>
</head>
<body>
<button class="trigger" aria-haspopup="dialog" aria-controls="example-modal">Open Modal Dialog</button>

<div class="modal" id="example-modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modal__dialog">
    <div class="modal__header">
      <h2 class="modal__title" id="modal-title">Welcome!</h2>
      <button class="modal__close" type="button" aria-label="Close dialog" data-dismiss>&times;</button>
    </div>
    <div class="modal__body" id="modal-description">
      <p>
        This is a simple modal dialog component. It starts hidden and can be
        toggled open with the button outside. Click the close button, press
        Escape, or click the overlay to dismiss it.
      </p>
    </div>
    <div class="modal__footer">
      <button type="button" data-dismiss>Close</button>
    </div>
  </div>
</div>

<script>
  const modal = document.getElementById('example-modal');
  const trigger = document.querySelector('.trigger');
  const dismissButtons = modal.querySelectorAll('[data-dismiss]');
  let lastFocusedElement = null;

  const focusableSelectors = [
    'a[href]',
    'button:not([disabled])',
    'textarea:not([disabled])',
    'input[type="text"]:not([disabled])',
    'input[type="radio"]:not([disabled])',
    'input[type="checkbox"]:not([disabled])',
    'select:not([disabled])',
    '[tabindex]:not([tabindex="-1"])'
  ];

  function getFocusableElements(container) {
    return Array.from(container.querySelectorAll(focusableSelectors.join(',')))
      .filter(el => !el.hasAttribute('disabled') && !el.getAttribute('aria-hidden'));
  }

  function trapFocus(event) {
    const focusableElements = getFocusableElements(modal);
    if (focusableElements.length === 0) return;

    const firstEl = focusableElements[0];
    const lastEl = focusableElements[focusableElements.length - 1];

    if (event.key === 'Tab') {
      if (event.shiftKey) {
        if (document.activeElement === firstEl) {
          lastEl.focus();
          event.preventDefault();
        }
      } else {
        if (document.activeElement === lastEl) {
          firstEl.focus();
          event.preventDefault();
        }
      }
    }
  }

  function openModal() {
    lastFocusedElement = document.activeElement;
    modal.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';
    const focusable = getFocusableElements(modal);
    if (focusable.length) {
      focusable[0].focus();
    }
    document.addEventListener('keydown', handleKeydown);
    modal.addEventListener('keydown', trapFocus);
  }

  function closeModal() {
    modal.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
    document.removeEventListener('keydown', handleKeydown);
    modal.removeEventListener('keydown', trapFocus);
    if (lastFocusedElement) {
      lastFocusedElement.focus();
    }
  }

  function handleKeydown(event) {
    if (event.key === 'Escape') {
      closeModal();
    }
  }

  trigger.addEventListener('click', openModal);

  dismissButtons.forEach(button => {
    button.addEventListener('click', closeModal);
  });

  modal.addEventListener('click', event => {
    if (event.target === modal) {
      closeModal();
    }
  });
</script>
</body>
</html>