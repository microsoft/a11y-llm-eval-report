<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopSphere — Home</title>
  <meta name="description" content="ShopSphere — discover popular items, limited-time deals, and the latest from our blog. Shop smart, save big." />
  <style>
    :root{
      --primary:#0b74de;
      --accent:#ff6b35;
      --muted:#6b7280;
      --bg:#f6f8fb;
      --card:#ffffff;
      --radius:12px;
      --shadow: 0 6px 18px rgba(12,18,29,0.06);
      --glass: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.85));
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg, #f8fbff 0%, var(--bg) 100%);
      color:#0b1220;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.35;
      padding-bottom:48px;
    }
    header{
      background:transparent;
      padding:20px 28px;
      display:flex;
      align-items:center;
      gap:18px;
      position:sticky;
      top:0;
      z-index:40;
      backdrop-filter: blur(6px);
    }
    .logo{
      display:flex;
      gap:10px;
      align-items:center;
      font-weight:700;
      font-size:18px;
      color:var(--primary);
      text-decoration:none;
    }
    .logo svg{width:36px;height:36px}
    nav{margin-left:12px; display:flex; gap:14px; align-items:center;}
    nav a{
      color:var(--muted);
      text-decoration:none;
      font-weight:600;
      padding:8px 10px;
      border-radius:8px;
    }
    nav a:hover{background:rgba(11,116,222,0.06); color:var(--primary)}
    .searchbar{
      margin-left:auto;
      display:flex;
      align-items:center;
      gap:10px;
      background:var(--card);
      padding:8px;
      border-radius:12px;
      box-shadow:var(--shadow);
      width:min(640px,55%);
    }
    .searchbar input{
      border:0; outline:0; font-size:14px; flex:1; padding:6px 8px;
      background:transparent;
    }
    .icon-btn{
      background:transparent;
      border:0; cursor:pointer;
      display:inline-flex; align-items:center; gap:8px;
    }
    .cart{
      display:flex; align-items:center; gap:8px; margin-left:12px;
    }
    .cart button{
      background:var(--card); border-radius:12px; padding:8px 10px; border:0; box-shadow:var(--shadow); cursor:pointer;
      display:inline-flex; align-items:center; gap:8px;
    }
    .cart-count{
      background:var(--accent); color:white; font-weight:700; font-size:12px; padding:2px 8px; border-radius:999px;
    }
    main{max-width:1200px; margin:22px auto; padding:0 18px;}
    .hero{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:18px;
      align-items:stretch;
      margin-bottom:22px;
    }
    .hero-card{
      background:var(--card);
      padding:22px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .hero-title{font-size:22px; font-weight:800; margin-bottom:8px;}
    .hero-sub{color:var(--muted); margin-bottom:16px;}
    .cta{
      display:inline-flex; gap:10px; align-items:center; padding:10px 14px; background:var(--primary); color:white; border-radius:10px; border:0; cursor:pointer; font-weight:700;
    }
    .hero-visual{
      background: linear-gradient(135deg, rgba(11,116,222,0.12), rgba(255,107,53,0.06));
      border-radius:10px;
      height:200px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--primary);
      font-weight:800;
      font-size:36px;
    }
    .deal-sidebar{
      background:linear-gradient(180deg,#fff 0%, rgba(255,255,255,0.95) 100%);
      padding:18px;
      border-radius:12px;
      box-shadow:var(--shadow);
      height:100%;
    }
    .deal-list{display:flex; flex-direction:column; gap:12px; margin-top:8px;}
    .deal-item{display:flex; gap:12px; align-items:center; padding:8px; border-radius:10px; background:linear-gradient(180deg, #fbfdff, #ffffff);}
    .deal-thumb{width:64px; height:64px; border-radius:8px; background:#eef6ff; display:grid;place-items:center; font-weight:700; color:var(--primary)}
    .deal-meta{flex:1}
    .deal-price{font-weight:800; color:var(--accent)}
    .timer{font-weight:700; color:var(--muted); font-size:13px}
    /* Popular Items */
    .section{margin:26px 0}
    .section-header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px}
    .section-header h2{margin:0; font-size:18px}
    .filters{display:flex; gap:8px; align-items:center}
    .filter-btn{background:transparent; border:1px solid rgba(11,116,222,0.08); padding:8px 12px; border-radius:12px; cursor:pointer; color:var(--muted)}
    .filter-btn.active{background:var(--primary); color:white; border-color:transparent}
    .products-grid{
      display:grid;
      grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
      gap:14px;
    }
    .card{
      background:var(--card);
      border-radius:12px;
      padding:12px;
      box-shadow:var(--shadow);
      display:flex; flex-direction:column;
      gap:10px;
    }
    .thumb{
      height:160px; border-radius:10px; overflow:hidden; background:linear-gradient(135deg,#fff,#f2f8ff);
      display:flex; align-items:center; justify-content:center;
      font-size:20px; font-weight:700; color:var(--primary);
    }
    .product-title{font-weight:700; font-size:15px; margin:0}
    .meta{color:var(--muted); font-size:13px}
    .price{font-weight:800; color:#0b1220}
    .price .old{color:var(--muted); text-decoration:line-through; font-weight:600; margin-left:8px; font-size:13px}
    .card-actions{display:flex; gap:8px; margin-top:auto}
    .btn{padding:10px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:700}
    .btn-primary{background:var(--primary); color:white}
    .btn-outline{background:transparent; border:1px solid rgba(11,116,222,0.08)}
    .badge-sale{background:linear-gradient(90deg,#ff6b35,#ff964c); color:white; font-weight:800; padding:6px 8px; border-radius:999px; font-size:12px}
    /* Blog */
    .blog-grid{display:grid; grid-template-columns: repeat(auto-fill,minmax(280px,1fr)); gap:14px}
    .blog-card{background:var(--card); border-radius:12px; padding:12px; box-shadow:var(--shadow); display:flex; gap:12px; align-items:flex-start}
    .blog-thumb{width:100px; height:80px; border-radius:8px; background:#fff6ef; display:grid;place-items:center; color:var(--accent); font-weight:800}
    .blog-body h3{margin:0; font-size:15px}
    .blog-body p{margin:6px 0 0 0; color:var(--muted); font-size:14px}
    .read-more{margin-top:8px; color:var(--primary); font-weight:700; background:transparent; border:0; cursor:pointer}
    /* Footer */
    footer{max-width:1200px; margin:28px auto; padding:18px; background:transparent}
    .footer-grid{display:grid; grid-template-columns: 1fr 1fr 1fr; gap:12px}
    .newsletter{background:var(--card); padding:12px; border-radius:12px; box-shadow:var(--shadow)}
    .newsletter input{border:0; padding:10px; outline:0; width:100%; font-size:14px}
    .subscribe{background:var(--primary); color:white; padding:10px 12px; border-radius:8px; border:0; margin-top:8px; cursor:pointer; font-weight:700}
    /* Responsive */
    @media (max-width:900px){
      .hero{grid-template-columns:1fr; gap:12px}
      .searchbar{width:45%}
      .footer-grid{grid-template-columns:1fr}
    }
    @media (max-width:520px){
      .searchbar{display:none}
      nav{display:none}
      .thumb{height:140px}
      .searchbar input{display:none}
    }
    /* modal */
    .modal-backdrop{
      position:fixed; inset:0; background:rgba(6,10,20,0.45); display:none; align-items:center; justify-content:center; z-index:80;
    }
    .modal{
      background:var(--card); padding:18px; border-radius:12px; width:min(760px,96%); box-shadow:var(--shadow);
    }
    .close-btn{background:transparent; border:0; cursor:pointer; color:var(--muted); font-weight:800}
    .progress{height:8px; background:#eef3ff; border-radius:999px; overflow:hidden}
    .progress > span{display:block; height:100%; background:linear-gradient(90deg,var(--accent),#ff9a6b)}
  </style>
</head>
<body>
  <header>
    <a href="#" class="logo" aria-label="ShopSphere home">
      <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-hidden="true">
        <rect x="4" y="8" width="40" height="32" rx="8" fill="#0B74DE"/>
        <path d="M14 20h20v12H14z" fill="#fff" opacity="0.95"/>
      </svg>
      ShopSphere
    </a>

    <nav aria-label="Main navigation">
      <a href="#" aria-current="page">Home</a>
      <a href="#">Categories</a>
      <a href="#">Deals</a>
      <a href="#">Blog</a>
      <a href="#">Support</a>
    </nav>

    <div class="searchbar" role="search" aria-label="Site search">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.9">
        <path d="M21 21l-4.35-4.35" stroke="#0b1220" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="11" cy="11" r="6" stroke="#0b1220" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <input type="search" placeholder="Search for products, brands and more" aria-label="Search input" id="search">
      <button class="icon-btn" id="voiceBtn" aria-label="Voice search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M12 14a3 3 0 0 0 3-3V6a3 3 0 1 0-6 0v5a3 3 0 0 0 3 3z" stroke="#0b1220" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M19 11v1a7 7 0 0 1-14 0v-1" stroke="#0b1220" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 21v-3" stroke="#0b1220" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <div class="cart" aria-live="polite">
      <div style="font-size:13px;color:var(--muted);text-align:right">
        <div style="font-weight:700">Welcome</div>
        <div style="font-size:12px">Shop the best deals</div>
      </div>
      <div>
        <button class="icon-btn" aria-label="Open cart" id="openCart">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 6h15l-1.5 9h-12z" stroke="#0b1220" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="10" cy="20" r="1" fill="#0b1220"/><circle cx="18" cy="20" r="1" fill="#0b1220"/></svg>
          <span class="cart-count" id="cartCount">0</span>
        </button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero" aria-labelledby="hero-heading">
      <div class="hero-card">
        <div class="hero-title" id="hero-heading">Flash Picks — Curated for you</div>
        <div class="hero-sub">Top-rated gadgets, fashion picks, and home essentials. Limited stock — grab them before they're gone.</div>
        <div class="hero-visual" aria-hidden="true">
          Deals Up To 70% OFF
        </div>
        <div style="margin-top:14px;display:flex;gap:12px;align-items:center">
          <button class="cta" id="shopNow">Shop Now</button>
          <button class="btn-outline btn" id="browseAll" style="padding:10px 12px;border-radius:10px">Browse Categories</button>
        </div>
      </div>

      <aside class="deal-sidebar" aria-labelledby="today-deals">
        <h3 id="today-deals" style="margin:0;font-size:16px">Today's Hot Deals</h3>
        <p style="margin:6px 0 0 0;color:var(--muted);font-size:13px">Limited-time savings across categories</p>
        <div class="deal-list" id="dealList" style="margin-top:12px">
          <!-- Deals rendered by JS -->
          <div class="deal-item">
            <div class="deal-thumb">S1</div>
            <div class="deal-meta">
              <div style="display:flex;align-items:center;justify-content:space-between">
                <div style="font-weight:800">Wireless Headphones</div>
                <div class="deal-price">$59<span style="font-size:12px;color:var(--muted);font-weight:600;margin-left:8px">was $129</span></div>
              </div>
              <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
                <div class="timer" data-ends-in="3600" id="timer-1">Ends in 01:00:00</div>
                <button class="btn-outline btn" data-deal="1">View Deal</button>
              </div>
            </div>
          </div>

          <div class="deal-item">
            <div class="deal-thumb" style="background:#fff6f0;color:var(--accent)">M2</div>
            <div class="deal-meta">
              <div style="display:flex;align-items:center;justify-content:space-between">
                <div style="font-weight:800">Smart Mug Pro</div>
                <div class="deal-price">$39<span style="font-size:12px;color:var(--muted);font-weight:600;margin-left:8px">was $69</span></div>
              </div>
              <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
                <div class="timer" data-ends-in="7200" id="timer-2">Ends in 02:00:00</div>
                <button class="btn-outline btn" data-deal="2">View Deal</button>
              </div>
            </div>
          </div>

          <div class="deal-item">
            <div class="deal-thumb" style="background:#f2fff6;color:#0fa358">H3</div>
            <div class="deal-meta">
              <div style="display:flex;align-items:center;justify-content:space-between">
                <div style="font-weight:800">Air Purifier Mini</div>
                <div class="deal-price">$89<span style="font-size:12px;color:var(--muted);font-weight:600;margin-left:8px">was $149</span></div>
              </div>
              <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
                <div class="timer" data-ends-in="14400" id="timer-3">Ends in 04:00:00</div>
                <button class="btn-outline btn" data-deal="3">View Deal</button>
              </div>
            </div>
          </div>

        </div>
      </aside>
    </section>

    <section class="section" aria-labelledby="popular-heading">
      <div class="section-header">
        <h2 id="popular-heading">Popular Items</h2>
        <div style="display:flex;align-items:center;gap:12px">
          <div class="filters" role="tablist" aria-label="Product categories">
            <button class="filter-btn active" data-cat="all" role="tab" aria-selected="true">All</button>
            <button class="filter-btn" data-cat="electronics" role="tab">Electronics</button>
            <button class="filter-btn" data-cat="fashion" role="tab">Fashion</button>
            <button class="filter-btn" data-cat="home" role="tab">Home</button>
          </div>
          <div style="display:flex;gap:8px;align-items:center;">
            <select id="sort" style="border-radius:10px;padding:8px;border:1px solid rgba(11,116,222,0.07)">
              <option value="popular">Sort: Popular</option>
              <option value="new">Newest</option>
              <option value="price-asc">Price: Low to High</option>
              <option value="price-desc">Price: High to Low</option>
            </select>
          </div>
        </div>
      </div>

      <div class="products-grid" id="productsGrid" aria-live="polite">
        <!-- product cards -->
        <article class="card" data-category="electronics" data-price="59">
          <div class="thumb" aria-hidden="true">WH-1</div>
          <div>
            <h3 class="product-title">Wireless Headphones — Noise Canceling</h3>
            <div class="meta">4.7 • 3.2k reviews</div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div class="price">$59 <span class="old">$129</span></div>
              <div class="badge-sale">54% OFF</div>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn btn-primary add-to-cart">Add to Cart</button>
            <button class="btn btn-outline quick-view">Quick View</button>
          </div>
        </article>

        <article class="card" data-category="home" data-price="39">
          <div class="thumb" aria-hidden="true" style="background:#fff6f0;color:var(--accent)">SM</div>
          <div>
            <h3 class="product-title">Smart Mug Pro — Temperature Control</h3>
            <div class="meta">4.5 • 1.1k reviews</div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div class="price">$39 <span class="old">$69</span></div>
              <div class="badge-sale">43% OFF</div>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn btn-primary add-to-cart">Add to Cart</button>
            <button class="btn btn-outline quick-view">Quick View</button>
          </div>
        </article>

        <article class="card" data-category="electronics" data-price="159">
          <div class="thumb" aria-hidden="true" style="background:#eef6ff;color:var(--primary)">SS</div>
          <div>
            <h3 class="product-title">Smart Speaker X — Room Filling Sound</h3>
            <div class="meta">4.8 • 8.4k reviews</div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div class="price">$159</div>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn btn-primary add-to-cart">Add to Cart</button>
            <button class="btn btn-outline quick-view">Quick View</button>
          </div>
        </article>

        <article class="card" data-category="fashion" data-price="29">
          <div class="thumb" aria-hidden="true" style="background:#fff0f6;color:#c42b66">TS</div>
          <div>
            <h3 class="product-title">Everyday Tee — Soft Cotton</h3>
            <div class="meta">4.4 • 2.3k reviews</div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div class="price">$29</div>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn btn-primary add-to-cart">Add to Cart</button>
            <button class="btn btn-outline quick-view">Quick View</button>
          </div>
        </article>

        <article class="card" data-category="home" data-price="89">
          <div class="thumb" aria-hidden="true" style="background:#f2fff6;color:#0fa358">AP</div>
          <div>
            <h3 class="product-title">Air Purifier — Compact</h3>
            <div class="meta">4.6 • 970 reviews</div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div class="price">$89 <span class="old">$149</span></div>
              <div class="badge-sale">40% OFF</div>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn btn-primary add-to-cart">Add to Cart</button>
            <button class="btn btn-outline quick-view">Quick View</button>
          </div>
        </article>

        <article class="card" data-category="fashion" data-price="124">
          <div class="thumb" aria-hidden="true" style="background:#fff4e6;color:#ff8a3d">JK</div>
          <div>
            <h3 class="product-title">Lightweight Jacket — Windproof</h3>
            <div class="meta">4.5 • 540 reviews</div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
              <div class="price">$124</div>
            </div>
          </div>
          <div class="card-actions">
            <button class="btn btn-primary add-to-cart">Add to Cart</button>
            <button class="btn btn-outline quick-view">Quick View</button>
          </div>
        </article>

      </div>

      <div style="display:flex;justify-content:center;margin-top:14px">
        <button class="btn-outline btn" id="loadMore">Load more</button>
      </div>
    </section>

    <section class="section" aria-labelledby="blog-heading">
      <div class="section-header">
        <h2 id="blog-heading">From the Blog</h2>
        <div style="color:var(--muted);font-size:14px">Tips, trends, and product guides</div>
      </div>

      <div class="blog-grid" id="blogGrid">
        <article class="blog-card">
          <div class="blog-thumb">G1</div>
          <div class="blog-body">
            <h3>5 Ways to Make Your Gadgets Last Longer</h3>
            <p class="excerpt">Simple maintenance habits that extend the life of your devices — from batteries to screens.</p>
            <button class="read-more" data-post="1">Read more →</button>
          </div>
        </article>

        <article class="blog-card">
          <div class="blog-thumb">F2</div>
          <div class="blog-body">
            <h3>Choosing the Right Jacket for Every Season</h3>
            <p class="excerpt">A quick guide to materials, fits, and packing tips for travel-ready layers.</p>
            <button class="read-more" data-post="2">Read more →</button>
          </div>
        </article>

        <article class="blog-card">
          <div class="blog-thumb">H3</div>
          <div class="blog-body">
            <h3>Designing a Cozy Home Office on a Budget</h3>
            <p class="excerpt">Small changes that make a big difference to comfort and productivity.</p>
            <button class="read-more" data-post="3">Read more →</button>
          </div>
        </article>
      </div>
    </section>

  </main>

  <footer>
    <div class="footer-grid">
      <div>
        <h4 style="margin:0">ShopSphere</h4>
        <p style="color:var(--muted);margin-top:6px">Your one-stop shop for curated products, deals, and inspiration.</p>
        <div style="margin-top:12px;color:var(--muted);font-size:13px">© <span id="year"></span> ShopSphere. All rights reserved.</div>
      </div>
      <div>
        <h4 style="margin:0">Customer Care</h4>
        <ul style="list-style:none;padding:0;margin:8px 0 0 0;color:var(--muted);font-size:14px">
          <li><a href="#" style="color:inherit;text-decoration:none">Help Center</a></li>
          <li><a href="#" style="color:inherit;text-decoration:none">Shipping & Returns</a></li>
          <li><a href="#" style="color:inherit;text-decoration:none">Warranty</a></li>
        </ul>
      </div>
      <div>
        <h4 style="margin:0">Newsletter</h4>
        <div class="newsletter" style="margin-top:8px">
          <label for="newsletter" style="font-size:13px;color:var(--muted)">Get deals and inspiration — once a week.</label>
          <div style="display:flex;gap:8px;margin-top:8px">
            <input id="newsletter" placeholder="Your email" aria-label="Newsletter email">
            <button class="subscribe" id="subscribeBtn">Subscribe</button>
          </div>
          <div id="subscribeMsg" style="margin-top:8px;color:var(--muted);font-size:13px"></div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Modal: Quick view / Deal -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal" role="document" aria-labelledby="modalTitle">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3 id="modalTitle" style="margin:0">Product</h3>
          <div id="modalSub" style="color:var(--muted);font-size:13px;margin-top:4px">Details</div>
        </div>
        <div>
          <button class="close-btn" id="closeModal" aria-label="Close">✕</button>
        </div>
      </div>
      <div style="display:flex;gap:16px;margin-top:14px;align-items:center">
        <div style="width:220px;height:160px;border-radius:10px;background:linear-gradient(135deg,#fff,#eef6ff);display:grid;place-items:center;font-weight:800;color:var(--primary);font-size:28px" id="modalImage">IMG</div>
        <div style="flex:1">
          <div id="modalDesc" style="color:var(--muted)">Full product description and highlights appear here. Includes warranty, shipping estimates, and customer ratings.</div>
          <div style="display:flex;gap:8px;align-items:center;margin-top:12px">
            <div style="font-weight:800;font-size:20px" id="modalPrice">$0</div>
            <div style="color:var(--muted);margin-left:8px" id="modalOldPrice"></div>
          </div>

          <div style="margin-top:12px">
            <div style="font-size:13px;color:var(--muted)">Limited stock remaining</div>
            <div class="progress" style="margin-top:6px"><span id="modalProgress" style="width:45%"></span></div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn btn-primary" id="modalAdd">Add to Cart</button>
            <button class="btn btn-outline" id="modalShare">Share</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // basic interactivity: cart, filters, load more, quick view, countdown timers, subscribe
    (function(){
      const cartCountEl = document.getElementById('cartCount');
      let cartCount = 0;
      function updateCart(delta=1){
        cartCount = Math.max(0, cartCount + delta);
        cartCountEl.textContent = cartCount;
      }
      document.querySelectorAll('.add-to-cart').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          updateCart(1);
          btn.textContent = 'Added';
          btn.disabled = true;
          setTimeout(()=>{btn.textContent='Add to Cart'; btn.disabled=false}, 1000);
        });
      });

      // quick view and modal
      const modalBackdrop = document.getElementById('modalBackdrop');
      const modalTitle = document.getElementById('modalTitle');
      const modalDesc = document.getElementById('modalDesc');
      const modalPrice = document.getElementById('modalPrice');
      const modalOldPrice = document.getElementById('modalOldPrice');
      const modalImage = document.getElementById('modalImage');
      const modalProgress = document.getElementById('modalProgress');

      function openModal(data){
        modalTitle.textContent = data.title;
        modalDesc.textContent = data.desc || 'High quality product with free returns within 30 days.';
        modalPrice.textContent = data.price;
        modalOldPrice.textContent = data.old? data.old : '';
        modalImage.textContent = data.code || 'PR';
        modalProgress.style.width = (data.stockPercent || 60) + '%';
        modalBackdrop.style.display = 'flex';
        modalBackdrop.setAttribute('aria-hidden','false');
      }
      function closeModal(){
        modalBackdrop.style.display = 'none';
        modalBackdrop.setAttribute('aria-hidden','true');
      }
      document.getElementById('closeModal').addEventListener('click', closeModal);
      modalBackdrop.addEventListener('click', (e)=>{
        if(e.target === modalBackdrop) closeModal();
      });

      document.querySelectorAll('.quick-view').forEach((btn,i)=>{
        btn.addEventListener('click', ()=>{
          const card = btn.closest('.card');
          const title = card.querySelector('.product-title').textContent;
          const price = card.querySelector('.price').innerText.split('\n')[0] || '$0';
          const old = (card.querySelector('.old') && card.querySelector('.old').textContent) || '';
          const thumb = card.querySelector('.thumb').textContent || '';
          openModal({title, price, old, code:thumb, stockPercent: Math.floor(Math.random()*60)+30});
        });
      });

      // modal add to cart
      document.getElementById('modalAdd').addEventListener('click', ()=>{
        updateCart(1);
        closeModal();
      });

      // filters
      const filterBtns = document.querySelectorAll('.filter-btn');
      const productsGrid = document.getElementById('productsGrid');
      filterBtns.forEach(btn=>{
        btn.addEventListener('click', ()=>{
          filterBtns.forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          const cat = btn.getAttribute('data-cat');
          const cards = productsGrid.querySelectorAll('.card');
          cards.forEach(c=>{
            if(cat==='all' || c.getAttribute('data-category')===cat) c.style.display = '';
            else c.style.display = 'none';
          });
        });
      });

      // load more (simulated)
      document.getElementById('loadMore').addEventListener('click', (e)=>{
        const more = [
          {cat:'electronics',code:'C1',title:'Compact Camera Z',meta:'4.3 • 430 reviews',price:'$199',old:''},
          {cat:'home',code:'K2',title:'Ceramic Kettle',meta:'4.2 • 760 reviews',price:'$49',old:''},
          {cat:'fashion',code:'S3',title:'Slip-On Sneakers',meta:'4.6 • 1.9k reviews',price:'$74',old:''}
        ];
        more.forEach(item=>{
          const art = document.createElement('article');
          art.className = 'card';
          art.setAttribute('data-category', item.cat);
          art.innerHTML = `
            <div class="thumb">${item.code}</div>
            <div>
              <h3 class="product-title">${item.title}</h3>
              <div class="meta">${item.meta}</div>
              <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
                <div class="price">${item.price}</div>
              </div>
            </div>
            <div class="card-actions">
              <button class="btn btn-primary add-to-cart">Add to Cart</button>
              <button class="btn btn-outline quick-view">Quick View</button>
            </div>
          `;
          productsGrid.appendChild(art);
        });
        // rewire events for new nodes
        document.querySelectorAll('.add-to-cart').forEach(btn=>{
          if(!btn.dataset.bound){
            btn.dataset.bound = 'true';
            btn.addEventListener('click', ()=>{
              updateCart(1);
              btn.textContent = 'Added';
              btn.disabled = true;
              setTimeout(()=>{btn.textContent='Add to Cart'; btn.disabled=false}, 1000);
            });
          }
        });
        document.querySelectorAll('.quick-view').forEach(btn=>{
          if(!btn.dataset.bound){
            btn.dataset.bound='true';
            btn.addEventListener('click', ()=>{
              const card = btn.closest('.card');
              const title = card.querySelector('.product-title').textContent;
              const price = card.querySelector('.price').innerText.split('\n')[0] || '$0';
              const old = (card.querySelector('.old') && card.querySelector('.old').textContent) || '';
              const thumb = card.querySelector('.thumb').textContent || '';
              openModal({title, price, old, code:thumb, stockPercent: Math.floor(Math.random()*60)+30});
            });
          }
        });

        e.target.textContent = 'Loaded';
        setTimeout(()=> e.target.textContent = 'Load more', 1200);
      });

      // timers for deals
      function formatHMS(secs){
        const h = String(Math.floor(secs/3600)).padStart(2,'0');
        const m = String(Math.floor((secs%3600)/60)).padStart(2,'0');
        const s = String(secs%60).padStart(2,'0');
        return `${h}:${m}:${s}`;
      }
      const timers = document.querySelectorAll('.timer');
      timers.forEach(t=>{
        const endsIn = parseInt(t.getAttribute('data-ends-in'),10) || 0;
        let remaining = endsIn;
        t.textContent = 'Ends in ' + formatHMS(remaining);
        const id = setInterval(()=>{
          remaining--;
          if(remaining<=0){ t.textContent='Deal ended'; clearInterval(id); }
          else t.textContent = 'Ends in ' + formatHMS(remaining);
        },1000);
      });

      // deal view buttons open modal with deal info
      document.querySelectorAll('.deal-item .btn-outline').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const id = btn.getAttribute('data-deal');
          // map data
          const mapping = {
            '1': {title:'Wireless Headphones — Hot Deal', price:'$59', old:'$129', code:'WH'},
            '2': {title:'Smart Mug Pro — Flash Sale', price:'$39', old:'$69', code:'SM'},
            '3': {title:'Air Purifier Mini — Discount', price:'$89', old:'$149', code:'AP'}
          };
          openModal(Object.assign(mapping[id]||{}, {stockPercent: Math.floor(Math.random()*50)+30}));
        });
      });

      // blog read more inline expand (simulate)
      document.querySelectorAll('.read-more').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const post = btn.getAttribute('data-post');
          const body = btn.closest('.blog-body');
          if(btn.dataset.open==='true'){
            // collapse
            const excerpt = body.querySelector('.excerpt');
            excerpt.textContent = body.dataset.excerpt;
            btn.textContent = 'Read more →';
            btn.dataset.open = 'false';
          } else {
            // expand
            if(!body.dataset.excerpt) body.dataset.excerpt = body.querySelector('.excerpt').textContent;
            const excerpts = {
              '1': 'From battery care to safe charging and storage tips — learn how to protect your devices and enjoy longer lasting performance.',
              '2': 'Materials, cuts, and layering techniques to keep you warm and stylish. Includes care instructions and packing advice.',
              '3': 'Optimize airflow, choose the right filter, and place devices strategically to get the most from compact purifiers.'
            };
            body.querySelector('.excerpt').textContent = excerpts[post] || body.dataset.excerpt;
            btn.textContent = 'Show less';
            btn.dataset.open = 'true';
          }
        });
      });

      // subscribe
      document.getElementById('subscribeBtn').addEventListener('click', ()=>{
        const input = document.getElementById('newsletter');
        const msg = document.getElementById('subscribeMsg');
        if(!input.value || !input.value.includes('@')){ msg.textContent = 'Enter a valid email address.'; msg.style.color = '#c42b66'; return; }
        msg.textContent = 'Thanks for subscribing! Check your email for a welcome coupon.';
        msg.style.color = 'var(--primary)';
        input.value = '';
      });

      // misc
      document.getElementById('year').textContent = new Date().getFullYear();

      // keyboard accessible openCart
      document.getElementById('openCart').addEventListener('click', ()=>{
        alert('Cart is empty. Add items to get started!');
      });

      // initial small animation: shop now
      document.getElementById('shopNow').addEventListener('click', ()=>{
        document.querySelector('.filter-btn[data-cat="all"]').click();
        window.scrollTo({top:document.getElementById('popular-heading').offsetTop - 6, behavior:'smooth'});
      });

      // basic search (filter titles)
      document.getElementById('search').addEventListener('input', (e)=>{
        const q = e.target.value.trim().toLowerCase();
        document.querySelectorAll('#productsGrid .card').forEach(card=>{
          const title = card.querySelector('.product-title').textContent.toLowerCase();
          if(!q || title.includes(q)) card.style.display = '';
          else card.style.display = 'none';
        });
      });

      // share (dummy)
      document.getElementById('modalShare').addEventListener('click', ()=>{
        alert('Share link copied to clipboard!');
      });
    })();
  </script>
</body>
</html>