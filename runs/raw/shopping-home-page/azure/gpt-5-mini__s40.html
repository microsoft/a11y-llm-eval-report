<html lang="en">
<head>
  <meta charset="utf-8">
  <title>ShopEase — Home of Great Deals</title>
  <meta name="description" content="ShopEase — curated popular items, daily deals, and shopping tips. Explore top products, limited-time discounts, and latest blog articles.">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{
      --brand:#0b76ff;
      --accent:#ff6b6b;
      --muted:#6b7280;
      --bg:#f7fafc;
      --card:#ffffff;
      --radius:12px;
      --max-width:1200px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:#0f1724;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,#f7fbff, #f7fafc 60%);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
    }
    .container{
      max-width:var(--max-width);
      margin:32px auto;
      padding:0 20px;
    }

    /* Header */
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:24px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      text-decoration:none;
      color:inherit;
    }
    .logo{
      width:48px;height:48px;border-radius:10px;
      background:linear-gradient(135deg,var(--brand),#7c3aed);
      display:inline-grid;
      place-items:center;
      color:white;
      font-weight:700;
      box-shadow:0 6px 20px rgba(11,118,255,0.14), inset 0 -6px 12px rgba(255,255,255,0.06);
    }
    .brand h1{font-size:18px;margin:0}
    nav{
      display:flex;
      gap:16px;
      align-items:center;
      margin-left:12px;
      flex:1;
    }
    .nav-links{
      display:flex;
      gap:12px;
      align-items:center;
      color:var(--muted);
    }
    .nav-links a{
      text-decoration:none;
      color:var(--muted);
      font-size:14px;
      padding:8px 10px;
      border-radius:8px;
    }
    .nav-links a:hover{background:rgba(11,118,255,0.06); color:var(--brand)}
    .search{
      position:relative;
      flex:1;
      max-width:460px;
    }
    .search input{
      width:100%;
      padding:12px 16px 12px 44px;
      border-radius:12px;
      border:1px solid rgba(15,23,36,0.06);
      background:linear-gradient(180deg,white, #fbfdff);
      box-shadow:0 4px 18px rgba(11,118,255,0.03);
      font-size:14px;
    }
    .search svg{position:absolute;left:12px;top:50%;transform:translateY(-50%);opacity:0.6}

    .actions{
      display:flex;
      gap:8px;
      align-items:center;
      margin-left:12px;
    }
    .icon-btn{
      background:transparent;
      border:1px solid rgba(15,23,36,0.06);
      padding:8px 10px;
      border-radius:10px;
      display:inline-flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
      color:var(--muted);
    }
    .cart{
      position:relative;
    }
    .cart-badge{
      position:absolute;
      right:4px;
      top:2px;
      background:var(--accent);
      color:white;
      font-size:12px;
      padding:3px 7px;
      border-radius:999px;
      box-shadow:0 4px 12px rgba(255,107,107,0.18);
    }

    /* Hero */
    .hero{
      background:linear-gradient(90deg, rgba(11,118,255,0.05), rgba(124,58,237,0.03));
      border-radius:16px;
      padding:28px;
      display:grid;
      grid-template-columns:1fr 320px;
      gap:20px;
      align-items:center;
      margin-bottom:20px;
    }
    .hero-text h2{margin:0;font-size:26px}
    .hero-text p{color:var(--muted);margin:10px 0 18px}
    .cta{
      display:inline-flex;
      gap:10px;
      align-items:center;
      padding:10px 14px;
      background:var(--brand);
      color:white;
      border-radius:12px;
      text-decoration:none;
      box-shadow:0 10px 30px rgba(11,118,255,0.12);
      font-weight:600;
    }
    .hero-image{
      display:grid;
      place-items:center;
    }
    .promo-card{
      width:280px;
      border-radius:12px;
      padding:14px;
      background:linear-gradient(180deg,#fff 0%, #f4f8ff 100%);
      box-shadow:0 6px 22px rgba(11,118,255,0.06);
      text-align:center;
    }
    .promo-card img{
      width:100%;
      height:160px;
      object-fit:cover;
      border-radius:8px;
    }

    /* Sections */
    section{margin-bottom:26px}
    section .section-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:12px;
      gap:12px;
    }
    section h3{margin:0;font-size:18px}
    .subtle{color:var(--muted);font-size:14px}

    /* Product grid */
    .grid{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:14px;
    }
    @media (max-width:1100px){ .grid{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:760px){ .hero{grid-template-columns:1fr; padding:18px} .grid{grid-template-columns:repeat(2,1fr)} .promo-card{width:100%} }
    @media (max-width:460px){ .grid{grid-template-columns:1fr} header{flex-wrap:wrap} .search{order:3;width:100%} .nav-links{display:none} .brand h1{font-size:16px} }

    .card{
      background:var(--card);
      border-radius:12px;
      padding:12px;
      box-shadow:0 6px 18px rgba(12,18,28,0.04);
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:260px;
    }
    .card img{
      width:100%;
      height:150px;
      object-fit:cover;
      border-radius:8px;
    }
    .card .title{font-weight:600;font-size:15px}
    .card .meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:13px}
    .price{font-weight:700;color:#07143a}
    .old{color:var(--muted);text-decoration:line-through;font-weight:600}
    .tag{
      background:linear-gradient(90deg,#ffedd5,#fff);
      color:#b45309;
      padding:6px 8px;
      border-radius:999px;
      font-size:12px;
      font-weight:700;
    }
    .card .actions{
      margin-top:auto;
      display:flex;
      gap:8px;
      align-items:center;
    }
    .btn{
      flex:1;
      padding:10px 12px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:700;
      color:white;
      background:var(--brand);
    }
    .btn.secondary{background:#f1f5f9;color:var(--muted);font-weight:700}
    .small{
      font-size:13px;padding:8px 10px;border-radius:10px;background:#fff;border:1px solid rgba(15,23,36,0.06);
    }

    /* Deals area */
    .deals{
      display:grid;
      grid-template-columns:2fr 1fr;
      gap:14px;
    }
    .deal-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:12px;
    }
    @media (max-width:960px){ .deals{grid-template-columns:1fr} .deal-grid{grid-template-columns:repeat(2,1fr)} }
    .deal-card{
      position:relative;
      overflow:hidden;
    }
    .badge{
      position:absolute;
      left:12px;
      top:12px;
      background:var(--accent);
      color:white;
      padding:6px 8px;
      border-radius:10px;
      font-weight:700;
      font-size:13px;
      z-index:2;
    }
    .countdown{
      display:inline-flex;
      gap:8px;
      align-items:center;
      font-weight:700;
      color:#0b1220;
      background:white;
      padding:6px 8px;
      border-radius:10px;
      box-shadow:0 8px 20px rgba(2,6,23,0.06);
    }

    /* Blog */
    .blog-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:14px;
    }
    @media (max-width:1100px){ .blog-grid{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:760px){ .blog-grid{grid-template-columns:1fr} }

    .blog-card img{width:100%;height:140px;object-fit:cover;border-radius:8px;margin-bottom:10px}
    .blog-card .meta{font-size:13px;color:var(--muted)}

    /* Footer */
    footer{
      margin-top:30px;
      padding-top:20px;
      border-top:1px solid rgba(15,23,36,0.04);
      display:flex;
      justify-content:space-between;
      gap:20px;
      align-items:center;
      flex-wrap:wrap;
    }
    .newsletter{
      display:flex;gap:8px;align-items:center;
    }
    .newsletter input{
      padding:10px 12px;border-radius:10px;border:1px solid rgba(15,23,36,0.06);
      background:white;
    }
    .socials{display:flex;gap:8px;align-items:center}
    .socials a{display:inline-flex;padding:8px;border-radius:10px;background:linear-gradient(180deg,#fff,#f7f9ff);border:1px solid rgba(15,23,36,0.04)}

    /* utility */
    .muted{color:var(--muted)}
    .center{display:flex;align-items:center;gap:8px}
  </style>
</head>
<body>
  <div class="container" role="main">
    <header aria-label="Top navigation">
      <a href="#" class="brand" aria-label="ShopEase home">
        <div class="logo" aria-hidden="true">SE</div>
        <div>
          <h1>ShopEase</h1>
          <div class="muted" style="font-size:12px;margin-top:2px">Smart shopping made simple</div>
        </div>
      </a>

      <nav aria-label="Primary">
        <div class="nav-links" role="navigation">
          <a href="#popular">Popular</a>
          <a href="#deals">Deals</a>
          <a href="#blog">Blog</a>
          <a href="#categories">Categories</a>
        </div>
      </nav>

      <div class="search" role="search" aria-label="Search products">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#1f2937" stroke-width="2" stroke-linecap="round"/><circle cx="11" cy="11" r="6" stroke="#1f2937" stroke-width="2"/></svg>
        <input id="searchInput" type="search" placeholder="Search products, brands, or categories" aria-label="Search products">
      </div>

      <div class="actions" aria-hidden="false">
        <button class="icon-btn" id="wishlistBtn" aria-pressed="false" title="Wishlist">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M20.8 6.6a5.8 5.8 0 0 0-9.3 0L11 7.1l-.5-.5a5.8 5.8 0 0 0-9.3 0 6.1 6.1 0 0 0 0 8.6L11 22.5l9.8-7.3a6.1 6.1 0 0 0 0-8.6z" stroke="currentColor" stroke-width="1" stroke-linejoin="round" /></svg>
          <span class="muted" style="font-weight:700">Wishlist</span>
        </button>
        <button class="icon-btn cart" id="cartBtn" aria-label="View cart">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M3 3h2l1 7h13l2-7H6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span class="muted">Cart</span>
          <span class="cart-badge" id="cartCount" aria-live="polite">0</span>
        </button>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero" aria-labelledby="heroTitle">
      <div class="hero-text">
        <h2 id="heroTitle">Holiday picks & limited-time deals — up to 60% off</h2>
        <p>Discover trending gadgets, fashion, and home essentials curated by our editors. Free shipping on orders over $50.</p>
        <div style="display:flex;gap:12px;align-items:center">
          <a href="#deals" class="cta">Shop Deals
            <svg width="16" height="16" style="opacity:0.95" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M12 5l7 7-7 7" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </a>
          <button class="small" id="browseBtn">Browse Categories</button>
        </div>
      </div>
      <div class="hero-image" aria-hidden="false">
        <div class="promo-card" role="region" aria-label="Featured product">
          <span class="tag">Editor's Pick</span>
          <img src="https://picsum.photos/seed/promo/420/260" alt="Featured product image">
          <div style="text-align:left;margin-top:10px">
            <div style="font-weight:700">Sleek Wireless Headphones</div>
            <div class="muted" style="font-size:13px">Immersive sound with 40hr battery life</div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
              <div><span class="price">$89</span> <span class="old muted">$129</span></div>
              <button class="btn" onclick="addToCart({id:'promo1',name:'Sleek Wireless Headphones',price:89})">Add to Cart</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Categories -->
    <section id="categories" aria-labelledby="catTitle">
      <div class="section-header">
        <h3 id="catTitle">Popular Categories</h3>
        <div class="muted">Explore curated categories</div>
      </div>
      <div class="grid" style="grid-template-columns:repeat(6,1fr);gap:12px;">
        <a class="card center" href="#" style="text-decoration:none;color:inherit">
          <img src="https://picsum.photos/seed/tech/400/300" alt="Electronics">
          <div style="font-weight:700">Electronics</div>
          <div class="muted" style="font-size:13px">Gadgets & accessories</div>
        </a>
        <a class="card center" href="#" style="text-decoration:none;color:inherit">
          <img src="https://picsum.photos/seed/fashion/400/300" alt="Fashion">
          <div style="font-weight:700">Fashion</div>
          <div class="muted" style="font-size:13px">Trending styles</div>
        </a>
        <a class="card center" href="#" style="text-decoration:none;color:inherit">
          <img src="https://picsum.photos/seed/home/400/300" alt="Home">
          <div style="font-weight:700">Home</div>
          <div class="muted" style="font-size:13px">Decor & essentials</div>
        </a>
        <a class="card center" href="#" style="text-decoration:none;color:inherit">
          <img src="https://picsum.photos/seed/sport/400/300" alt="Sports">
          <div style="font-weight:700">Sport</div>
          <div class="muted" style="font-size:13px">Fitness gear</div>
        </a>
        <a class="card center" href="#" style="text-decoration:none;color:inherit">
          <img src="https://picsum.photos/seed/beauty/400/300" alt="Beauty">
          <div style="font-weight:700">Beauty</div>
          <div class="muted" style="font-size:13px">Skincare & more</div>
        </a>
        <a class="card center" href="#" style="text-decoration:none;color:inherit">
          <img src="https://picsum.photos/seed/kids/400/300" alt="Kids">
          <div style="font-weight:700">Kids</div>
          <div class="muted" style="font-size:13px">Toys & clothing</div>
        </a>
      </div>
    </section>

    <!-- Popular Items -->
    <section id="popular" aria-labelledby="popularTitle">
      <div class="section-header">
        <h3 id="popularTitle">Popular Items</h3>
        <div style="display:flex;gap:8px;align-items:center">
          <div class="muted" id="resultsCount">Showing popular items</div>
          <div style="width:1px;height:28px;background:rgba(15,23,36,0.04);margin:0 8px"></div>
          <div class="subtle">Sort:</div>
          <select id="sortSelect" style="padding:8px;border-radius:10px;border:1px solid rgba(15,23,36,0.06)">
            <option value="popular">Most popular</option>
            <option value="price-asc">Price: low to high</option>
            <option value="price-desc">Price: high to low</option>
            <option value="rating">Top rated</option>
          </select>
        </div>
      </div>

      <div class="grid" id="productsGrid" aria-live="polite">
        <!-- JS populates product cards -->
      </div>
    </section>

    <!-- Deals -->
    <section id="deals" aria-labelledby="dealsTitle">
      <div class="section-header">
        <h3 id="dealsTitle">Limited-Time Deals</h3>
        <div class="muted">Hurry! Deals end soon</div>
      </div>

      <div class="deals">
        <div class="deal-grid" id="dealsGrid">
          <!-- deal cards populated via JS -->
        </div>

        <aside style="display:flex;flex-direction:column;gap:12px">
          <div class="card" style="display:flex;flex-direction:column;gap:12px;align-items:flex-start">
            <div style="display:flex;justify-content:space-between;align-items:center;width:100%">
              <div>
                <div style="font-weight:800">Flash Sale</div>
                <div class="muted" style="font-size:13px">Best prices for today</div>
              </div>
              <div id="globalCountdown" class="countdown" aria-live="polite">--:--:--</div>
            </div>
            <p class="muted" style="margin:0">Save an extra 10% when you checkout with code FLASH10. Limited quantities.</p>
            <div style="width:100%;display:flex;gap:8px">
              <button class="btn" onclick="applyCode('FLASH10')">Use FLASH10</button>
              <button class="small" onclick="showDeals()">View all deals</button>
            </div>
          </div>

          <div class="card">
            <div style="display:flex;align-items:center;gap:10px">
              <img src="https://picsum.photos/seed/free/120/80" alt="Free ship" style="width:120px;height:80px;object-fit:cover;border-radius:8px">
              <div>
                <div style="font-weight:700">Free shipping</div>
                <div class="muted" style="font-size:13px">On orders over $50</div>
              </div>
            </div>
            <div style="margin-top:8px" class="muted">Join our rewards program to earn points on every purchase.</div>
          </div>
        </aside>
      </div>
    </section>

    <!-- Blog -->
    <section id="blog" aria-labelledby="blogTitle">
      <div class="section-header">
        <h3 id="blogTitle">From Our Blog</h3>
        <div class="muted">Trends, tips & guides</div>
      </div>

      <div class="blog-grid" id="blogGrid">
        <!-- blogs rendered by JS -->
      </div>
    </section>

    <footer aria-label="Footer">
      <div class="muted">© <span id="year"></span> ShopEase — All rights reserved</div>
      <div class="newsletter">
        <label for="newsletter" class="muted" style="font-weight:700">Get weekly deals</label>
        <input id="newsletter" type="email" placeholder="Your email" aria-label="Email for newsletter">
        <button class="btn" id="subscribeBtn">Subscribe</button>
      </div>
      <div class="socials" aria-hidden="false">
        <a href="#" title="Instagram"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="4" stroke="currentColor" stroke-width="1.4"></rect><circle cx="12" cy="12" r="3.2" stroke="currentColor" stroke-width="1.4"></circle><circle cx="17.5" cy="6.5" r="0.6" fill="currentColor"/></svg></a>
        <a href="#" title="Twitter"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M23 4.7c-.8.4-1.6.7-2.5.9.9-.6 1.6-1.5 1.9-2.6-.9.6-2 .9-3.1 1.1C18 3.8 16.7 3 15.2 3c-2.5 0-4.5 2.2-3.9 4.6-3.2-.2-6-1.7-7.9-4.1-1 1.8-.2 4.1 1.6 5.2-.7 0-1.4-.2-2-.5v.1c0 2.1 1.5 3.8 3.5 4.2-.7.2-1.4.3-2.2.2.6 1.9 2.5 3.2 4.6 3.2-2.2 1.7-4.9 2.8-7.8 2.8-.5 0-1 0-1.6-.1 2.8 1.9 6.2 3 9.8 3 11.7 0 18.1-10 18.1-18.7v-.9c1.3-.9 2.3-2 3.1-3.3z" stroke="currentColor" stroke-width="0.6"/></svg></a>
        <a href="#" title="Facebook"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M18 2h-3a4 4 0 0 0-4 4v3H8v3h3v7h3v-7h2.5l.5-3H14V6a1 1 0 0 1 1-1h3V2z" stroke="currentColor" stroke-width="1.2"/></svg></a>
      </div>
    </footer>
  </div>

  <script>
    (function(){
      // Data
      const products = [
        { id:'p1', name:'Wireless Earbuds Pro', category:'Electronics', price:79, oldPrice:129, rating:4.6, image:'https://picsum.photos/seed/earbuds/500/400' },
        { id:'p2', name:'Smart Watch Series 5', category:'Electronics', price:149, oldPrice:199, rating:4.4, image:'https://picsum.photos/seed/watch/500/400' },
        { id:'p3', name:'Cozy Knit Sweater', category:'Fashion', price:39, oldPrice:59, rating:4.7, image:'https://picsum.photos/seed/sweater/500/400' },
        { id:'p4', name:'Ergonomic Office Chair', category:'Home', price:199, oldPrice:279, rating:4.3, image:'https://picsum.photos/seed/chair/500/400' },
        { id:'p5', name:'Yoga Mat', category:'Sport', price:24, oldPrice:34, rating:4.5, image:'https://picsum.photos/seed/yoga/500/400' },
        { id:'p6', name:'Ceramic Mug Set', category:'Home', price:29, oldPrice:49, rating:4.8, image:'https://picsum.photos/seed/mugs/500/400' },
        { id:'p7', name:'Leather Crossbody Bag', category:'Fashion', price:89, oldPrice:129, rating:4.2, image:'https://picsum.photos/seed/bag/500/400' },
        { id:'p8', name:'Portable Bluetooth Speaker', category:'Electronics', price:59, oldPrice:89, rating:4.6, image:'https://picsum.photos/seed/speaker/500/400' },
      ];

      const deals = [
        { id:'d1', name:'Noise-Canceling Headphones', price:129, oldPrice:249, discount:'48%', image:'https://picsum.photos/seed/d1/500/400', endsIn:3600*6 },
        { id:'d2', name:'Smart Home Camera', price:49, oldPrice:99, discount:'51%', image:'https://picsum.photos/seed/d2/500/400', endsIn:3600*4 + 1800 },
        { id:'d3', name:'Gaming Mouse', price:29, oldPrice:59, discount:'51%', image:'https://picsum.photos/seed/d3/500/400', endsIn:3600*9 + 600 },
        { id:'d4', name:'Air Purifier', price:89, oldPrice:159, discount:'44%', image:'https://picsum.photos/seed/d4/500/400', endsIn:3600*2 + 120 },
        { id:'d5', name:'Instant Pot 6QT', price:79, oldPrice:119, discount:'33%', image:'https://picsum.photos/seed/d5/500/400', endsIn:3600*12 },
        { id:'d6', name:'Fitness Tracker', price:39, oldPrice:79, discount:'50%', image:'https://picsum.photos/seed/d6/500/400', endsIn:3600*1 + 300 },
      ];

      const blogs = [
        { id:'b1', title:'Top 10 Gifts for Tech Lovers', excerpt:'From smart speakers to wireless chargers — find the perfect gift ideas for the gadget fan in your life.', image:'https://picsum.photos/seed/blog1/800/600', date:'Nov 02, 2025', author:'Alex Carter' },
        { id:'b2', title:'How to Build a Capsule Wardrobe', excerpt:'Timeless pieces and tips to maximize style while minimizing clutter.', image:'https://picsum.photos/seed/blog2/800/600', date:'Oct 14, 2025', author:'Maya Lin' },
        { id:'b3', title:'5 Easy Ways to Upgrade Your Home Office', excerpt:'Small improvements that make a big difference in comfort and productivity.', image:'https://picsum.photos/seed/blog3/800/600', date:'Sep 29, 2025', author:'Jordan Blake' }
      ];

      // State
      let cart = JSON.parse(localStorage.getItem('se_cart')||'{}');
      let wishlist = new Set(JSON.parse(localStorage.getItem('se_wishlist')||'[]'));
      const cartCountEl = document.getElementById('cartCount');
      const productsGrid = document.getElementById('productsGrid');
      const dealsGrid = document.getElementById('dealsGrid');
      const blogGrid = document.getElementById('blogGrid');
      const searchInput = document.getElementById('searchInput');
      const resultsCount = document.getElementById('resultsCount');
      const sortSelect = document.getElementById('sortSelect');

      // Utilities
      function saveState(){
        localStorage.setItem('se_cart', JSON.stringify(cart));
        localStorage.setItem('se_wishlist', JSON.stringify(Array.from(wishlist)));
      }
      function updateCartBadge(){
        const totalItems = Object.values(cart).reduce((s,n)=>s+n,0);
        cartCountEl.textContent = totalItems;
      }
      function addToCart(product){
        cart[product.id] = (cart[product.id]||0) + 1;
        saveState();
        updateCartBadge();
        flashMessage(`${product.name} added to cart`);
      }
      function flashMessage(msg){
        const el = document.createElement('div');
        el.textContent = msg;
        el.style.position = 'fixed';
        el.style.right = '20px';
        el.style.bottom = '20px';
        el.style.padding = '12px 16px';
        el.style.background = 'linear-gradient(90deg,#101828,#0b76ff)';
        el.style.color = 'white';
        el.style.borderRadius = '10px';
        el.style.boxShadow = '0 10px 30px rgba(11,118,255,0.16)';
        el.style.zIndex = 9999;
        document.body.appendChild(el);
        setTimeout(()=>el.style.opacity='0',2000);
        setTimeout(()=>el.remove(),2500);
      }

      // Renderers
      function renderProducts(list){
        productsGrid.innerHTML = '';
        if(!list.length){
          productsGrid.innerHTML = '<div class="muted" style="padding:20px">No products found.</div>';
          resultsCount.textContent = 'No results';
          return;
        }
        resultsCount.textContent = `${list.length} items`;
        list.forEach(p=>{
          const card = document.createElement('article');
          card.className = 'card';
          card.innerHTML = `
            <img loading="lazy" src="${p.image}" alt="${escapeHtml(p.name)}">
            <div class="title">${escapeHtml(p.name)}</div>
            <div class="meta"><div class="muted">${escapeHtml(p.category)}</div><div class="muted">⭐ ${p.rating}</div></div>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div><div class="price">$${p.price}</div><div class="old muted">${p.oldPrice ? '$'+p.oldPrice : ''}</div></div>
              <div style="text-align:right">
                <button class="small" data-wish="${p.id}" title="Add to wishlist">♡</button>
              </div>
            </div>
            <div class="actions">
              <button class="btn" data-add="${p.id}">Add to Cart</button>
              <button class="btn secondary" data-view="${p.id}">View</button>
            </div>
          `;
          productsGrid.appendChild(card);
        });
      }

      function renderDeals(list){
        dealsGrid.innerHTML = '';
        list.forEach(d=>{
          const el = document.createElement('div');
          el.className = 'card deal-card';
          el.innerHTML = `
            <span class="badge">${d.discount}</span>
            <img loading="lazy" src="${d.image}" alt="${escapeHtml(d.name)}">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:700">${escapeHtml(d.name)}</div>
              <div class="muted old">$${d.oldPrice}</div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:800;color:#0b1220">$${d.price}</div>
              <div class="countdown" data-ends="${d.endsIn}">--:--:--</div>
            </div>
            <div style="display:flex;gap:8px;margin-top:8px">
              <button class="btn" data-buy="${d.id}">Buy now</button>
              <button class="small" data-add="${d.id}">Add</button>
            </div>
          `;
          dealsGrid.appendChild(el);
        });
      }

      function renderBlogs(list){
        blogGrid.innerHTML = '';
        list.forEach(b=>{
          const el = document.createElement('article');
          el.className = 'card blog-card';
          el.innerHTML = `
            <img loading="lazy" src="${b.image}" alt="${escapeHtml(b.title)}">
            <div style="font-weight:700">${escapeHtml(b.title)}</div>
            <div class="meta">${escapeHtml(b.date)} • ${escapeHtml(b.author)}</div>
            <p class="muted" style="margin:8px 0 0">${escapeHtml(b.excerpt)}</p>
            <div style="margin-top:auto;display:flex;justify-content:flex-end">
              <button class="small" data-read="${b.id}">Read</button>
            </div>
          `;
          blogGrid.appendChild(el);
        });
      }

      // Helpers
      function escapeHtml(s){ return String(s).replace(/[&<>"']/g, function(m){return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]}) }

      // Countdown tick
      function startCountdowns(){
        // global countdown: next top of day + 8h for demo (set to 14 hours)
        const globalEnds = Date.now() + 1000*3600*14;
        const globalEl = document.getElementById('globalCountdown');
        function fmtRemaining(ms){
          if(ms<=0) return '00:00:00';
          const s = Math.floor(ms/1000);
          const hh = Math.floor(s/3600).toString().padStart(2,'0');
          const mm = Math.floor((s%3600)/60).toString().padStart(2,'0');
          const ss = (s%60).toString().padStart(2,'0');
          return `${hh}:${mm}:${ss}`;
        }
        function tick(){
          const rem = globalEnds - Date.now();
          globalEl.textContent = fmtRemaining(rem);
          // per-deal timers
          document.querySelectorAll('.countdown[data-ends]').forEach(node=>{
            const seconds = Number(node.getAttribute('data-ends')) || 0;
            const created = node.__created__ || Date.now();
            // store created time to compute relative end
            if(!node.__created__) node.__created__ = Date.now();
            const endsAt = node.__endsAt__ || (Date.now() + seconds*1000);
            if(!node.__endsAt__) node.__endsAt__ = Date.now() + seconds*1000;
            const remMs = node.__endsAt__ - Date.now();
            node.textContent = fmtRemaining(remMs);
          });
        }
        tick();
        setInterval(tick,1000);
      }

      // Interactions
      function wireEvents(){
        // Product buttons
        productsGrid.addEventListener('click', (e)=>{
          const add = e.target.closest('[data-add]');
          const view = e.target.closest('[data-view]');
          const wish = e.target.closest('[data-wish]');
          if(add){
            const id = add.getAttribute('data-add');
            const p = products.find(x=>x.id===id) || deals.find(x=>x.id===id);
            if(p) addToCart(p);
          } else if(view){
            const id = view.getAttribute('data-view');
            const p = products.find(x=>x.id===id);
            if(p) alert(p.name + '\\n\\n' + p.category + ' • $' + p.price);
          } else if(wish){
            const id = wish.getAttribute('data-wish');
            if(wishlist.has(id)){ wishlist.delete(id); wish.style.opacity=0.6; } else { wishlist.add(id); wish.style.opacity=1; }
            saveState();
            flashMessage('Wishlist updated');
          }
        });

        // Deals buttons
        dealsGrid.addEventListener('click', (e)=>{
          const buy = e.target.closest('[data-buy]');
          const add = e.target.closest('[data-add]');
          if(buy){
            const id = buy.getAttribute('data-buy');
            const d = deals.find(x=>x.id===id);
            if(d){
              addToCart({id:d.id,name:d.name,price:d.price});
              flashMessage('Deal added — checkout soon!');
            }
          } else if(add){
            const id = add.getAttribute('data-add');
            const d = deals.find(x=>x.id===id);
            if(d) addToCart({id:d.id,name:d.name,price:d.price});
          }
        });

        // Blog read
        blogGrid.addEventListener('click', (e)=>{
          const read = e.target.closest('[data-read]');
          if(read){
            const id = read.getAttribute('data-read');
            const b = blogs.find(x=>x.id===id);
            if(b) alert(b.title + '\\n\\n' + b.excerpt);
          }
        });

        // Search filter
        searchInput.addEventListener('input', ()=>applyFilters());

        // Sort
        sortSelect.addEventListener('change', ()=>applyFilters());

        // Subscribe
        document.getElementById('subscribeBtn').addEventListener('click', ()=>{
          const email = document.getElementById('newsletter').value.trim();
          if(!email || !email.includes('@')) return flashMessage('Please enter a valid email');
          flashMessage('Thanks! We\'ll send deals to ' + email);
          document.getElementById('newsletter').value = '';
        });

        // Wishlist header
        document.getElementById('wishlistBtn').addEventListener('click', ()=>{
          const list = Array.from(wishlist).join(', ') || 'No items yet';
          alert('Wishlist items:\\n' + list);
        });

        // Browse categories
        document.getElementById('browseBtn').addEventListener('click', ()=> window.location.hash = '#categories');

        // Cart view
        document.getElementById('cartBtn').addEventListener('click', ()=>{
          const items = Object.entries(cart);
          if(!items.length) return alert('Your cart is empty');
          let txt = 'Cart contents:\\n';
          items.forEach(([id,q])=>{
            const p = products.find(x=>x.id===id) || deals.find(x=>x.id===id) || {name:id};
            txt += `${p.name} — ${q} pcs\\n`;
          });
          txt += '\\nProceed to checkout on the next page.';
          alert(txt);
        });
      }

      function applyFilters(){
        const q = (searchInput.value||'').toLowerCase().trim();
        let list = products.slice();
        if(q){
          list = list.filter(p=> (p.name + ' ' + p.category).toLowerCase().includes(q) );
        }
        // sort
        const s = sortSelect.value;
        if(s==='price-asc') list.sort((a,b)=>a.price-b.price);
        if(s==='price-desc') list.sort((a,b)=>b.price-a.price);
        if(s==='rating') list.sort((a,b)=>b.rating-b.rating);
        if(s==='popular') list.sort((a,b)=>b.rating-b.rating || a.price-b.price);
        renderProducts(list);
      }

      // Initial render
      function init(){
        document.getElementById('year').textContent = new Date().getFullYear();
        renderProducts(products);
        renderDeals(deals);
        renderBlogs(blogs);
        updateCartBadge();
        wireEvents();
        startCountdowns();

        // set per-deal timer end times relative to now
        document.querySelectorAll('.countdown[data-ends]').forEach(node=>{
          const seconds = Number(node.getAttribute('data-ends')) || 0;
          node.__endsAt__ = Date.now() + seconds * 1000;
        });
      }

      // Small utility functions for demo
      window.addToCart = addToCart;
      window.applyCode = (code)=>flashMessage('Code applied: '+code);
      window.showDeals = ()=>window.location.hash = '#deals';

      init();
    })();
  </script>
</body>
</html>