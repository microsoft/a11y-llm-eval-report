<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopSmart - Home</title>
  <meta name="description" content="ShopSmart — Popular items, today's best deals, and fresh blog posts about shopping and lifestyle." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0ea5a4;
      --accent-2:#0f172a;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 6px 18px rgba(16,24,40,0.08);
      --container: 1100px;
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg, #f6f7fb 0%, #eef2f7 100%);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
    }
    .wrap{
      max-width:var(--container);
      margin:32px auto;
      padding:0 20px;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      margin-bottom:24px;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      text-decoration:none;
      color:inherit;
    }
    .logo{
      width:46px;height:46px;border-radius:10px;
      display:grid;place-items:center;
      background:linear-gradient(135deg,var(--accent),#0284c7);
      color:white;font-weight:700;font-size:18px;
      box-shadow: 0 6px 18px rgba(14,165,164,0.18);
    }
    nav{display:flex;gap:14px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px;font-weight:600}
    nav a:hover{background:var(--glass);color:var(--accent-2)}
    .actions{display:flex;gap:10px;align-items:center}
    .search{
      display:flex;align-items:center;gap:8px;
      background:var(--card);padding:8px 12px;border-radius:12px;box-shadow:var(--shadow);
    }
    .search input{
      border:0;outline:0;background:transparent;width:220px;font-size:14px;
    }
    .icon-btn{
      background:transparent;border:0;padding:8px;border-radius:10px;cursor:pointer;color:var(--muted)
    }
    .hero{
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:20px;
      margin-bottom:26px;
      align-items:stretch;
    }
    .hero-card{
      background: linear-gradient(180deg,#fff,#fbfdff);
      padding:26px;border-radius:14px;box-shadow:var(--shadow);
      display:flex;flex-direction:column;gap:12px;
    }
    .hero h1{margin:0;font-size:28px;line-height:1.05}
    .hero p{margin:0;color:var(--muted)}
    .cta-row{display:flex;gap:10px;margin-top:8px}
    .btn{
      padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#fff;font-weight:700;cursor:pointer;
    }
    .btn-ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);color:var(--accent-2)}
    .promo{
      background:linear-gradient(135deg,#fff 0%, #f8fcff 100%); padding:16px;border-radius:12px;box-shadow:var(--shadow);
    }
    .grid{
      display:grid;
      gap:18px;
    }
    .popular-grid{
      grid-template-columns: repeat(auto-fill,minmax(220px,1fr));
    }
    .card{
      background:var(--card);border-radius:12px;padding:12px;box-shadow: 0 6px 20px rgba(16,24,40,0.04);display:flex;flex-direction:column;gap:10px;
    }
    .img{
      height:160px;border-radius:10px;background:#eef2f7;overflow:hidden;display:flex;align-items:center;justify-content:center;
    }
    .img img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{display:flex;justify-content:space-between;align-items:center;margin-top:4px}
    .title{font-weight:600}
    .price{font-weight:700;color:var(--accent-2)}
    .rating{color:#f59e0b;font-weight:700;font-size:13px}
    .card .actions-row{display:flex;gap:8px;margin-top:auto}
    .small{font-size:13px;color:var(--muted)}
    .badge{background:#eef7f6;color:#05605a;padding:6px 8px;border-radius:8px;font-weight:600;font-size:13px}
    .deal-card{display:flex;gap:12px;align-items:center;padding:14px;border-radius:12px;background:linear-gradient(180deg,#fff,#fff);box-shadow:var(--shadow)}
    .deal-left{flex:1}
    .deal-img{width:120px;height:84px;border-radius:8px;overflow:hidden;background:#f1f5f9}
    .deal-prices{display:flex;gap:12px;align-items:center}
    .old{color:var(--muted);text-decoration:line-through}
    .pct{background:#ffedd5;color:#c2410c;padding:6px 8px;border-radius:8px;font-weight:700}
    .progress{height:8px;background:#eef2f7;border-radius:999px;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,#10b981,#06b6d4)}
    .deals-grid{grid-template-columns: repeat(auto-fit,minmax(320px,1fr))}
    .blog-grid{grid-template-columns: repeat(auto-fit,minmax(260px,1fr))}
    .post .excerpt{color:var(--muted);font-size:14px}
    footer{margin-top:36px;padding:28px;border-radius:12px;background:linear-gradient(180deg,#fff,#fbfbff);box-shadow:var(--shadow)}
    .footer-grid{display:flex;gap:24px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    .socials{display:flex;gap:10px}
    .pill{background:#f1f5f9;padding:8px 12px;border-radius:999px}
    /* responsive */
    @media (max-width:980px){
      .hero{grid-template-columns:1fr}
      .search input{width:140px}
      header{flex-direction:column;align-items:flex-start;gap:12px}
    }
    @media (max-width:520px){
      .popular-grid{grid-template-columns:repeat(1,1fr)}
      .search input{display:none}
      nav{display:none}
      .wrap{padding:12px}
    }
    /* cart drawer */
    .cart-btn{position:relative}
    .cart-count{position:absolute;top:-6px;right:-6px;background:#ef4444;color:white;border-radius:999px;padding:3px 7px;font-size:12px}
    .drawer{
      position:fixed;right:20px;top:80px;width:320px;max-width:90%;background:white;border-radius:12px;padding:12px;box-shadow:0 14px 40px rgba(2,6,23,0.18);display:none;
      z-index:60;
    }
    .drawer.show{display:block}
    .drawer h4{margin:0 0 8px 0}
    .cart-item{display:flex;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed #eef2f6}
    .cart-item img{width:56px;height:48px;border-radius:8px;object-fit:cover}
    .empty{color:var(--muted);text-align:center;padding:18px 0}
    .chip{display:inline-block;padding:6px 8px;border-radius:6px;background:#f8fafc;color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <header>
      <a class="brand" href="#" aria-label="ShopSmart Home">
        <div class="logo">SS</div>
        <div>
          <div style="font-weight:700">ShopSmart</div>
          <div style="font-size:12px;color:var(--muted)">Curated deals & trending picks</div>
        </div>
      </a>

      <nav aria-label="Main navigation">
        <a href="#">Home</a>
        <a href="#">Categories</a>
        <a href="#">Deals</a>
        <a href="#">Blog</a>
      </nav>

      <div class="actions">
        <div class="search" role="search" aria-label="Search products">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#6b7280" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#6b7280" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="search" placeholder="Search popular items..." aria-label="Search popular items" />
        </div>
        <button class="icon-btn" title="Wishlist" aria-label="Wishlist">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20.8 7.1c0 6.4-8 12.4-8 12.4S4.8 13.5 4.8 7.1A4.2 4.2 0 019 2.9c1.6 0 3.1.9 3.6 2.3.5-1.4 2-2.3 3.6-2.3a4.2 4.2 0 014.7 4.2z" stroke="#6b7280" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <button id="cartBtn" class="icon-btn cart-btn" aria-haspopup="true" aria-expanded="false" title="Cart" aria-label="Open cart">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M6 6h15l-1.5 9h-12L3 3H1" stroke="#0f172a" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span id="cartCount" class="cart-count" hidden>0</span>
        </button>
      </div>
    </header>

    <section class="hero">
      <div class="hero-card">
        <div style="display:flex;gap:12px;align-items:center;justify-content:space-between">
          <div>
            <h1>Find what you love — save more today</h1>
            <p>Popular picks, limited-time deals, and expert tips — all in one place.</p>
          </div>
          <div class="chip">Free shipping over $49</div>
        </div>

        <div style="display:flex;gap:14px;margin-top:8px;flex-wrap:wrap">
          <div class="pill">Fast delivery</div>
          <div class="pill">30-day returns</div>
          <div class="pill">Secure payments</div>
        </div>

        <div style="margin-top:auto;display:flex;gap:12px">
          <button class="btn" id="shopNow">Shop Trending</button>
          <button class="btn-ghost">Explore categories</button>
        </div>
      </div>

      <aside class="promo" aria-labelledby="today-deals-heading">
        <h3 id="today-deals-heading" style="margin:0 0 8px 0">Today's Highlights</h3>
        <div style="display:flex;flex-direction:column;gap:12px">
          <div style="display:flex;gap:12px;align-items:center">
            <div style="width:44px;height:44px;border-radius:8px;background:#eef2ff;display:grid;place-items:center;font-weight:700;color:#3730a3">20%</div>
            <div>
              <div style="font-weight:700">Home & Kitchen Sale</div>
              <div class="small">Save on cookware, decor, and more</div>
            </div>
          </div>
          <div style="display:flex;gap:12px;align-items:center">
            <div style="width:44px;height:44px;border-radius:8px;background:#fff0f6;display:grid;place-items:center;font-weight:700;color:#be185d">Up to 50%</div>
            <div>
              <div style="font-weight:700">Fashion Express</div>
              <div class="small">New season arrivals</div>
            </div>
          </div>
          <div style="margin-top:6px">
            <button class="btn" style="width:100%">See all deals</button>
          </div>
        </div>
      </aside>
    </section>

    <!-- Popular Items -->
    <section aria-labelledby="popular-heading" style="margin-bottom:28px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h2 id="popular-heading" style="margin:0">Popular items</h2>
        <div class="small">Showing top picks for you</div>
      </div>

      <div class="grid popular-grid" id="popularGrid">
        <!-- cards injected by JS -->
      </div>
    </section>

    <!-- Deals -->
    <section aria-labelledby="deals-heading" style="margin-bottom:28px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h2 id="deals-heading" style="margin:0">Limited-time deals</h2>
        <div class="small">Grab them before they're gone</div>
      </div>

      <div class="grid deals-grid" id="dealsGrid">
        <!-- deals injected by JS -->
      </div>
    </section>

    <!-- Blog -->
    <section aria-labelledby="blog-heading">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h2 id="blog-heading" style="margin:0">From the blog</h2>
        <div class="small">Shopping tips & lifestyle</div>
      </div>

      <div class="grid blog-grid" id="blogGrid">
        <!-- blog posts injected by JS -->
      </div>
    </section>

    <footer>
      <div class="footer-grid">
        <div style="max-width:460px">
          <div style="font-weight:700;font-size:18px">Join 1M+ shoppers</div>
          <div class="small" style="margin:8px 0 14px 0">Get early access to deals and curated picks. No spam — unsubscribe anytime.</div>
          <form id="newsletter" onsubmit="return false" style="display:flex;gap:8px">
            <input id="email" type="email" required placeholder="Your email address" style="flex:1;padding:10px;border-radius:10px;border:1px solid #e6eef6" />
            <button class="btn">Subscribe</button>
          </form>
        </div>

        <div style="display:flex;gap:18px;align-items:center">
          <div>
            <div style="font-weight:700">Support</div>
            <div class="small">Help center • Shipping • Returns</div>
          </div>
          <div>
            <div style="font-weight:700">Company</div>
            <div class="small">About • Careers • Press</div>
          </div>
          <div style="min-width:120px">
            <div style="font-weight:700">Follow us</div>
            <div class="socials" aria-hidden="true">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M22 4.01c-.77.35-1.6.58-2.47.69a4.26 4.26 0 0 0-7.26 3.88A12.08 12.08 0 0 1 3.16 3.15a4.28 4.28 0 0 0 1.32 5.7 4.22 4.22 0 0 1-1.94-.54v.05a4.28 4.28 0 0 0 3.43 4.2c-.5.14-1.02.17-1.56.07a4.29 4.29 0 0 0 4 2.97A8.58 8.58 0 0 1 2 19.54a12.09 12.09 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2v-.56A8.65 8.65 0 0 0 22 4.01z" fill="#0f172a"/></svg>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 2.04c-5.5 0-9.96 4.46-9.96 9.96 0 4.41 2.86 8.15 6.84 9.48.5.09.68-.22.68-.48 0-.24-.01-.87-.01-1.7-2.78.6-3.37-1.34-3.37-1.34-.45-1.16-1.12-1.47-1.12-1.47-.92-.63.07-.62.07-.62 1.02.07 1.56 1.05 1.56 1.05.9 1.55 2.36 1.1 2.94.84.09-.66.35-1.1.64-1.36-2.22-.25-4.55-1.11-4.55-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.26.1-2.62 0 0 .84-.27 2.75 1.03a9.6 9.6 0 0 1 5 0c1.9-1.3 2.75-1.03 2.75-1.03.55 1.36.2 2.37.1 2.62.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.86 0 1.34-.01 2.42-.01 2.75 0 .27.18.58.69.48A10.01 10.01 0 0 0 22 12c0-5.5-4.46-9.96-9.96-9.96z" fill="#0f172a"/></svg>
            </div>
          </div>
        </div>
      </div>

      <div style="margin-top:18px;text-align:center;color:var(--muted);font-size:13px">© <span id="year"></span> ShopSmart • All rights reserved</div>
    </footer>
  </div>

  <!-- Cart drawer -->
  <div id="cartDrawer" class="drawer" role="dialog" aria-label="Shopping cart" aria-hidden="true">
    <h4>Your cart</h4>
    <div id="cartItems">
      <div class="empty">Your cart is empty</div>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
      <div class="small">Estimated total</div>
      <div style="font-weight:700" id="cartTotal">$0.00</div>
    </div>
    <div style="margin-top:12px;display:flex;gap:8px">
      <button class="btn" style="flex:1">Checkout</button>
      <button class="btn-ghost" id="clearCart">Clear</button>
    </div>
  </div>

  <script>
    // Data model
    const popularItems = [
      { id: 'p1', title: 'Wireless Noise-Canceling Headphones', price: 129.99, rating: 4.7, sold: 1245, img: 'https://picsum.photos/id/180/400/300' },
      { id: 'p2', title: 'Stainless Steel Coffee Press', price: 34.00, rating: 4.5, sold: 860, img: 'https://picsum.photos/id/1080/400/300' },
      { id: 'p3', title: 'Ergonomic Office Chair', price: 219.00, rating: 4.6, sold: 430, img: 'https://picsum.photos/id/1005/400/300' },
      { id: 'p4', title: 'Smart Home Speaker', price: 59.99, rating: 4.4, sold: 980, img: 'https://picsum.photos/id/1040/400/300' },
      { id: 'p5', title: 'Yoga Mat (Eco)', price: 29.99, rating: 4.8, sold: 2100, img: 'https://picsum.photos/id/1011/400/300' },
      { id: 'p6', title: '4K Action Camera', price: 149.00, rating: 4.3, sold: 610, img: 'https://picsum.photos/id/1069/400/300' }
    ];

    const deals = [
      { id:'d1', title:'Premium Chef Knife 8"', oldPrice:89.99, price:49.99, pct:44, img:'https://picsum.photos/id/1084/400/300', endsInMinutes: 240 },
      { id:'d2', title:'Portable Blender', oldPrice:69.95, price:34.95, pct:50, img:'https://picsum.photos/id/870/400/300', endsInMinutes: 90 },
      { id:'d3', title:'Noise-Isolating Earbuds', oldPrice:59.99, price:19.99, pct:67, img:'https://picsum.photos/id/855/400/300', endsInMinutes: 20 }
    ];

    const posts = [
      { id:'b1', title:'How to find the perfect gift', author:'Maya Kim', date:'Oct 28, 2025', excerpt:'A quick guide to choosing gifts that feel personal without breaking the bank.' , img:'https://picsum.photos/id/1018/800/600' },
      { id:'b2', title:'5 Ways to Refresh Your Home', author:'Liam Torres', date:'Nov 2, 2025', excerpt:'Low-cost updates that make a big difference — styling tips and product picks.' , img:'https://picsum.photos/id/1025/800/600' },
      { id:'b3', title:'Tech essentials for remote work', author:'Zara Patel', date:'Nov 7, 2025', excerpt:'From webcams to ergonomic stands: the gear that improves comfort and productivity.' , img:'https://picsum.photos/id/1033/800/600' }
    ];

    // Utility
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));

    // Render functions
    function renderPopular(items){
      const grid = $('#popularGrid');
      grid.innerHTML = '';
      items.forEach(it => {
        const el = document.createElement('article');
        el.className = 'card';
        el.setAttribute('data-title', it.title.toLowerCase());
        el.innerHTML = `
          <div class="img" aria-hidden="true"><img loading="lazy" src="${it.img}" alt="${escapeHTML(it.title)}"></div>
          <div style="display:flex;justify-content:space-between;align-items:flex-start">
            <div>
              <div class="title">${escapeHTML(it.title)}</div>
              <div class="small">${it.sold} sold</div>
            </div>
            <div style="text-align:right">
              <div class="price">$${it.price.toFixed(2)}</div>
              <div class="rating">★ ${it.rating.toFixed(1)}</div>
            </div>
          </div>
          <div class="actions-row">
            <button class="btn add-to-cart" data-id="${it.id}" aria-label="Add ${escapeHTML(it.title)} to cart">Add to cart</button>
            <button class="btn-ghost quick" data-id="${it.id}">Quick view</button>
          </div>
        `;
        grid.appendChild(el);
      });
    }

    function renderDeals(){
      const grid = $('#dealsGrid');
      grid.innerHTML = '';
      deals.forEach(d => {
        const el = document.createElement('div');
        el.className = 'deal-card';
        el.innerHTML = `
          <div class="deal-left">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:700">${escapeHTML(d.title)}</div>
              <div class="pct">${d.pct}% off</div>
            </div>
            <div class="deal-prices" style="margin-top:8px">
              <div class="old">$${d.oldPrice.toFixed(2)}</div>
              <div style="font-weight:800;color:var(--accent-2);font-size:18px">$${d.price.toFixed(2)}</div>
            </div>
            <div style="margin-top:10px">
              <div class="small">Deal ends in <span class="countdown" data-ends="${d.endsInMinutes}"></span></div>
              <div class="progress" style="margin-top:8px"><i style="width:${Math.max(10, 100 - d.endsInMinutes/3)}%"></i></div>
            </div>
            <div style="margin-top:12px">
              <button class="btn add-to-cart" data-id="${d.id}">Add to cart</button>
              <button class="btn-ghost">View deal</button>
            </div>
          </div>
          <div class="deal-img" aria-hidden="true"><img loading="lazy" src="${d.img}" alt="${escapeHTML(d.title)}" style="width:100%;height:100%;object-fit:cover"></div>
        `;
        grid.appendChild(el);
      });
      startCountdowns();
    }

    function renderBlog(){
      const grid = $('#blogGrid');
      grid.innerHTML = '';
      posts.forEach(p => {
        const el = document.createElement('article');
        el.className = 'card post';
        el.innerHTML = `
          <div class="img" aria-hidden="true"><img loading="lazy" src="${p.img}" alt="${escapeHTML(p.title)}"></div>
          <div>
            <div style="font-weight:700">${escapeHTML(p.title)}</div>
            <div class="small">By ${escapeHTML(p.author)} • ${escapeHTML(p.date)}</div>
            <div class="excerpt" style="margin-top:8px">${escapeHTML(p.excerpt)}</div>
          </div>
          <div style="display:flex;gap:8px;margin-top:auto">
            <button class="btn-ghost read" data-id="${p.id}">Read more</button>
            <button class="btn" style="margin-left:auto">Save</button>
          </div>
        `;
        grid.appendChild(el);
      });
    }

    // Search filter
    $('#search').addEventListener('input', (e) => {
      const q = e.target.value.trim().toLowerCase();
      $$('#popularGrid .card').forEach(card => {
        const t = card.getAttribute('data-title') || '';
        card.style.display = q && !t.includes(q) ? 'none' : '';
      });
    });

    // Escape helper
    function escapeHTML(s){ return (s+'').replace(/[&<>"']/g, (m)=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }

    // Cart logic
    let cart = JSON.parse(localStorage.getItem('ss_cart') || '[]');
    function saveCart(){ localStorage.setItem('ss_cart', JSON.stringify(cart)); renderCart(); }
    function addToCart(item){
      const existing = cart.find(i => i.id === item.id);
      if(existing){ existing.qty += 1; }
      else cart.push({ ...item, qty: 1 });
      saveCart();
    }
    function renderCart(){
      const container = $('#cartItems');
      const count = cart.reduce((s,i)=>s+i.qty,0);
      const total = cart.reduce((s,i)=>s + (i.price || i._price || 0) * i.qty,0);
      const cartCount = $('#cartCount');
      if(count){
        cartCount.hidden = false;
        cartCount.textContent = count;
      } else {
        cartCount.hidden = true;
      }
      $('#cartTotal').textContent = `$${total.toFixed(2)}`;
      if(cart.length === 0){
        container.innerHTML = '<div class="empty">Your cart is empty</div>';
        return;
      }
      container.innerHTML = '';
      cart.forEach(i => {
        const itemEl = document.createElement('div');
        itemEl.className = 'cart-item';
        itemEl.innerHTML = `
          <img src="${i.img || 'https://picsum.photos/seed/' + i.id + '/200/160'}" alt="${escapeHTML(i.title)}" />
          <div style="flex:1">
            <div style="font-weight:700">${escapeHTML(i.title)}</div>
            <div class="small">$${(i.price || i._price || 0).toFixed(2)} • Qty ${i.qty}</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">
            <button class="btn-ghost small remove" data-id="${i.id}">Remove</button>
          </div>
        `;
        container.appendChild(itemEl);
      });
      // attach remove handlers
      $$('#cartItems .remove').forEach(btn => btn.addEventListener('click', (e) => {
        const id = e.currentTarget.dataset.id;
        cart = cart.filter(x => x.id !== id);
        saveCart();
      }));
    }

    $('#clearCart').addEventListener('click', ()=>{ cart = []; saveCart(); });

    // Quick view and add to cart for popular items and deals
    document.addEventListener('click', (e) => {
      const at = e.target.closest('.add-to-cart');
      if(at){
        const id = at.dataset.id;
        // find item in popular or deals
        const p = popularItems.find(x=>x.id===id) || deals.find(x=>x.id===id);
        if(p){
          // normalize data for cart
          addToCart({ id: p.id, title: p.title, price: p.price || p.price, img: p.img });
          showTempMessage('Added to cart');
        }
      }
      const qv = e.target.closest('.quick');
      if(qv){
        const id = qv.dataset.id;
        const p = popularItems.find(x=>x.id===id);
        if(p) alert(`${p.title}\n\nPrice: $${p.price.toFixed(2)}\nRating: ${p.rating}`);
      }
      const read = e.target.closest('.read');
      if(read){
        const id = read.dataset.id;
        const post = posts.find(p=>p.id===id);
        if(post) alert(`${post.title}\n\n${post.excerpt}\n\nRead more at our blog.`);
      }
    });

    // small notification
    function showTempMessage(text){
      const n = document.createElement('div');
      n.style.position='fixed';
      n.style.right='20px';
      n.style.bottom='20px';
      n.style.background='rgba(15,23,42,0.95)';
      n.style.color='white';
      n.style.padding='10px 14px';
      n.style.borderRadius='10px';
      n.style.boxShadow='0 8px 30px rgba(2,6,23,0.2)';
      n.style.zIndex=9999;
      n.textContent = text;
      document.body.appendChild(n);
      setTimeout(()=>n.style.opacity=0,1800);
      setTimeout(()=>n.remove(),2400);
    }

    // Cart drawer toggle
    const drawer = $('#cartDrawer');
    $('#cartBtn').addEventListener('click', ()=>{
      const open = drawer.classList.toggle('show');
      drawer.setAttribute('aria-hidden', String(!open));
      $('#cartBtn').setAttribute('aria-expanded', String(open));
      if(open) renderCart();
    });

    // Countdown timers
    function startCountdowns(){
      const els = $$('.countdown');
      els.forEach(el => {
        const mins = Number(el.dataset.ends) || 0;
        const end = Date.now() + mins * 60 * 1000;
        el.dataset.endTs = end;
      });
      updateCountdowns();
      if(window._countdownInterval) clearInterval(window._countdownInterval);
      window._countdownInterval = setInterval(updateCountdowns, 1000);
    }

    function updateCountdowns(){
      const els = $$('.countdown');
      els.forEach(el => {
        const end = Number(el.dataset.endTs) || 0;
        let diff = Math.max(0, Math.floor((end - Date.now())/1000));
        const h = Math.floor(diff/3600); diff%=3600;
        const m = Math.floor(diff/60); const s = diff%60;
        el.textContent = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
      });
    }

    // Newsletter fake submit
    $('#newsletter').addEventListener('submit', (e)=>{
      const email = $('#email').value.trim();
      if(!email) return;
      showTempMessage('Thanks! Check your inbox.');
      $('#email').value = '';
    });

    // Utility to render everything
    function init(){
      renderPopular(popularItems);
      renderDeals();
      renderBlog();
      renderCart();
      document.getElementById('year').textContent = new Date().getFullYear();

      // shop now scrolls to popular
      $('#shopNow').addEventListener('click', ()=> document.getElementById('popular-heading').scrollIntoView({behavior:'smooth'}));
    }

    init();

    // Preload sample images in background (optional)
    (function prefetchImages(){
      [...popularItems, ...deals, ...posts].forEach(i=>{
        const img = new Image();
        img.src = i.img;
      });
    })();
  </script>
</body>
</html>