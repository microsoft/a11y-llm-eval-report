<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopEase — Home</title>
  <meta name="description" content="ShopEase - discover popular items, hot deals, and the latest blog posts about shopping and style." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --accent:#0b84ff;
      --muted:#6b7280;
      --success:#16a34a;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.75);
      --shadow: 0 6px 18px rgba(16,24,40,0.08);
      --radius:12px;
      color-scheme: light;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg) 0%, #eef2ff 100%);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
    }

    header{position:sticky;top:0;z-index:60;background:rgba(255,255,255,0.8);backdrop-filter:saturate(140%) blur(6px);box-shadow:0 1px 0 rgba(15,23,42,0.05)}
    .container{max-width:1200px;margin:0 auto;padding:20px}
    .header-inner{display:flex;align-items:center;gap:18px}
    .logo{display:flex;align-items:center;gap:10px;text-decoration:none;color:inherit}
    .logo-mark{
      width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#7c3aed);
      display:flex;align-items:center;justify-content:center;color:white;font-weight:800;box-shadow:var(--shadow)
    }
    nav{margin-left:8px;display:flex;gap:14px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;font-weight:600;padding:8px;border-radius:8px}
    nav a:hover{color:var(--accent);background:rgba(11,132,255,0.06)}
    .search{
      flex:1;display:flex;align-items:center;background:var(--card);padding:8px 12px;border-radius:12px;box-shadow:var(--shadow)
    }
    .search input{border:0;outline:0;background:transparent;font-size:14px;padding:8px 10px;width:100%}
    .icons{display:flex;gap:12px;align-items:center}
    .icon-btn{background:transparent;border:0;padding:8px;border-radius:10px;cursor:pointer}
    .cart-bubble{
      position:relative;display:inline-flex;align-items:center;gap:6px;background:var(--card);
      padding:8px 10px;border-radius:12px;box-shadow:var(--shadow)
    }
    .bubble-count{background:var(--accent);color:white;border-radius:999px;padding:4px 8px;font-size:12px;font-weight:700}
    main{padding:28px 0 80px}
    .hero{
      background:linear-gradient(90deg, rgba(11,132,255,0.06) 0%, rgba(124,58,237,0.03) 100%);
      border-radius:18px;padding:28px;display:flex;gap:20px;align-items:center;box-shadow:var(--shadow)
    }
    .hero-left{flex:1;min-width:220px}
    .eyebrow{display:inline-block;background:rgba(11,132,255,0.09);color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px}
    .hero-title{font-size:28px;font-weight:800;margin:12px 0;color:#071033;line-height:1.05}
    .hero-desc{color:var(--muted);margin-bottom:16px}
    .cta-row{display:flex;gap:12px;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:12px 16px;border-radius:12px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:linear-gradient(90deg,var(--accent),#7c3aed);color:white;box-shadow:0 8px 24px rgba(11,132,255,0.12)}
    .btn-ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);color:var(--muted)}
    .hero-right{width:420px;min-width:260px}
    .hero-panel{background:linear-gradient(180deg,#fff 0%,#fbfdff 100%);border-radius:14px;padding:12px;display:grid;grid-template-columns:repeat(3,1fr);gap:10px;box-shadow:var(--shadow)}
    .product-mini{background:linear-gradient(180deg,#fff 0%,#f8fbff 100%);padding:10px;border-radius:10px;display:flex;flex-direction:column;align-items:center;gap:8px}
    .product-mini img{width:76px;height:76px;object-fit:cover;border-radius:8px}
    .price{font-weight:800;color:#071033}
    section{margin-top:26px}
    .section-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .section-title{font-size:18px;font-weight:800}
    .section-sub{color:var(--muted);font-size:13px}
    .grid{display:grid;gap:16px}
    /* Popular grid */
    .popular-grid{grid-template-columns:repeat(3,1fr)}
    .card{background:var(--card);border-radius:14px;padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px}
    .card-media{height:180px;border-radius:12px;overflow:hidden;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,#f8fafc, #ffffff)}
    .card-media img{width:100%;height:100%;object-fit:cover;display:block}
    .card-body{display:flex;flex-direction:column;gap:8px}
    .card-title{font-weight:700}
    .rating{display:flex;gap:6px;align-items:center;color:#f59e0b;font-weight:700}
    .price-row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .price-current{font-weight:800}
    .price-old{color:var(--muted);text-decoration:line-through;font-size:13px}
    .card-actions{display:flex;gap:8px}
    .btn-sm{padding:8px 10px;border-radius:10px;font-weight:700}
    .deal-carousel{display:flex;gap:14px;align-items:center}
    .carousel-track{display:flex;gap:14px;overflow:hidden;padding:8px}
    .deal-card{min-width:280px;background:linear-gradient(180deg,#fff,#f7fbff);padding:12px;border-radius:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px}
    .countdown{background:#071033;color:white;padding:8px 10px;border-radius:10px;font-weight:700;display:inline-block}
    .blog-grid{grid-template-columns:repeat(3,1fr)}
    .post{background:var(--card);border-radius:12px;overflow:hidden;box-shadow:var(--shadow);display:flex;flex-direction:column}
    .post img{width:100%;height:160px;object-fit:cover}
    .post-body{padding:12px;display:flex;flex-direction:column;gap:10px}
    .footer{background:linear-gradient(180deg,#0b1220 0%, #071033 100%);color:#dbeafe;padding:28px;border-radius:18px;margin-top:40px}
    .footer a{color:#c7e4ff;text-decoration:none}
    .newsletter{display:flex;gap:8px}
    input[type="email"]{padding:12px;border-radius:10px;border:0;outline:0;flex:1}
    /* Responsive */
    @media (max-width:1000px){
      .popular-grid{grid-template-columns:repeat(2,1fr)}
      .hero{flex-direction:column}
      .hero-right{width:100%}
      .container{padding:16px}
    }
    @media (max-width:680px){
      nav{display:none}
      .search{order:3;margin-top:8px}
      .header-inner{flex-wrap:wrap;gap:8px}
      .popular-grid{grid-template-columns:1fr}
      .blog-grid{grid-template-columns:1fr}
      .hero-right{order:2}
    }

    /* tiny helpers */
    .muted{color:var(--muted)}
    .visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="header-inner" role="navigation" aria-label="Top navigation">
        <a href="#" class="logo" aria-label="ShopEase Home">
          <div class="logo-mark" aria-hidden="true">SE</div>
          <div>
            <div style="font-weight:800;font-size:15px">ShopEase</div>
            <div style="font-size:12px;color:var(--muted);margin-top:2px">Everyday essentials</div>
          </div>
        </a>

        <nav aria-label="Main menu">
          <a href="#popular">Popular</a>
          <a href="#deals">Deals</a>
          <a href="#blog">Blog</a>
          <a href="#about">About</a>
        </nav>

        <div class="search" role="search" aria-label="Search products">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#9CA3AF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#9CA3AF" stroke-width="2"/></svg>
          <input id="searchInput" placeholder="Search for products, brands and more" aria-label="Search" />
        </div>

        <div class="icons" aria-hidden="false">
          <button class="icon-btn" title="Account" aria-label="Account">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10zM3 21a9 9 0 0 1 18 0" stroke="#374151" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </button>
          <div class="cart-bubble" role="region" aria-label="Shopping cart">
            <button class="icon-btn" id="cartBtn" aria-label="Open cart">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 6h15l-1.5 9h-12L6 6z" stroke="#374151" stroke-width="1.5" stroke-linejoin="round"/><circle cx="9" cy="20" r="1" fill="#374151"/><circle cx="19" cy="20" r="1" fill="#374151"/></svg>
            </button>
            <span class="bubble-count" id="cartCount" aria-live="polite">0</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="container" id="main">
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-left">
        <span class="eyebrow">Free shipping over $50</span>
        <h1 id="hero-title" class="hero-title">Find your next favorite — curated picks and limited-time deals</h1>
        <p class="hero-desc">Hand-picked items from trusted brands. Fast shipping, easy returns, and 24/7 support. Shop smart with ShopEase.</p>
        <div class="cta-row">
          <button class="btn btn-primary" id="shopNowBtn">Shop Trending</button>
          <button class="btn btn-ghost" id="viewDealsBtn">View Deals</button>
        </div>
      </div>
      <div class="hero-right" aria-hidden="false">
        <div class="hero-panel" aria-hidden="false">
          <div class="product-mini" tabindex="0">
            <img src="https://images.unsplash.com/photo-1606813902926-2f5f0b1a36f1?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Wireless earbuds">
            <div style="font-weight:700">SonicPods X</div>
            <div class="price">$59.00</div>
          </div>
          <div class="product-mini" tabindex="0">
            <img src="https://images.unsplash.com/photo-1555529771-9b6b49f0c7a6?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Classic watch">
            <div style="font-weight:700">Aquila Watch</div>
            <div class="price">$129.00</div>
          </div>
          <div class="product-mini" tabindex="0">
            <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Stylish backpack">
            <div style="font-weight:700">Rover Pack</div>
            <div class="price">$79.00</div>
          </div>
          <div class="product-mini" tabindex="0">
            <img src="https://images.unsplash.com/photo-1526178611570-1f65b7f80b47?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Bluetooth speaker">
            <div style="font-weight:700">WaveBox Mini</div>
            <div class="price">$39.00</div>
          </div>
          <div class="product-mini" tabindex="0">
            <img src="https://images.unsplash.com/photo-1526178611570-1f65b7f80b47?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Comfort shoes">
            <div style="font-weight:700">CloudWalk</div>
            <div class="price">$89.00</div>
          </div>
          <div class="product-mini" tabindex="0">
            <img src="https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Sunglasses">
            <div style="font-weight:700">North Shades</div>
            <div class="price">$29.00</div>
          </div>
        </div>
      </div>
    </section>

    <section id="popular" aria-labelledby="popular-title">
      <div class="section-head">
        <div>
          <div id="popular-title" class="section-title">Popular Items</div>
          <div class="section-sub">Trending this week — customer favorites</div>
        </div>
        <div style="display:flex;gap:12px;align-items:center">
          <label for="sort" class="visually-hidden">Sort</label>
          <select id="sort" aria-label="Sort products" style="padding:8px;border-radius:10px;border:1px solid rgba(15,23,42,0.06)">
            <option value="popular">Most popular</option>
            <option value="new">New arrivals</option>
            <option value="price-asc">Price: Low to High</option>
            <option value="price-desc">Price: High to Low</option>
          </select>
        </div>
      </div>

      <div class="grid popular-grid" id="productGrid" role="list">
        <!-- Product cards inserted by JS -->
      </div>
    </section>

    <section id="deals" aria-labelledby="deals-title">
      <div class="section-head">
        <div>
          <div id="deals-title" class="section-title">Hot Deals</div>
          <div class="section-sub">Limited time offers — grab them before they're gone</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <div id="carouselControls" aria-hidden="false">
            <button class="btn btn-ghost" id="prevDeal" aria-label="Previous deals">‹</button>
            <button class="btn btn-ghost" id="nextDeal" aria-label="Next deals">›</button>
          </div>
        </div>
      </div>

      <div class="deal-carousel" role="region" aria-label="Deals carousel">
        <div style="flex:1;overflow:hidden">
          <div class="carousel-track" id="dealTrack">
            <!-- Deal cards via JS -->
          </div>
        </div>
      </div>
    </section>

    <section id="blog" aria-labelledby="blog-title">
      <div class="section-head">
        <div>
          <div id="blog-title" class="section-title">From the Blog</div>
          <div class="section-sub">Tips, guides, and stories from our editors</div>
        </div>
        <a href="#blog" class="muted" style="text-decoration:none">View all posts →</a>
      </div>

      <div class="grid blog-grid">
        <article class="post" aria-labelledby="post1-title">
          <img src="https://images.unsplash.com/photo-1545239351-1141bd82e8a6?q=80&w=1200&auto=format&fit=crop&crop=entropy" alt="Gift ideas">
          <div class="post-body">
            <div style="display:flex;gap:8px;align-items:center"><span class="eyebrow" style="background:rgba(124,58,237,0.06);color:#7c3aed">Gift Guide</span><time datetime="2025-11-01" class="muted">Nov 1, 2025</time></div>
            <h3 id="post1-title" style="margin:0;font-size:16px">10 Thoughtful Gifts Under $50</h3>
            <p class="muted" style="margin:0">Curated picks that feel premium without breaking the bank—perfect for birthdays and holidays.</p>
            <a href="#" style="font-weight:700;color:var(--accent);margin-top:6px;text-decoration:none">Read more →</a>
          </div>
        </article>

        <article class="post" aria-labelledby="post2-title">
          <img src="https://images.unsplash.com/photo-1503602642458-232111445657?q=80&w=1200&auto=format&fit=crop&crop=entropy" alt="Sustainable shopping">
          <div class="post-body">
            <div style="display:flex;gap:8px;align-items:center"><span class="eyebrow" style="background:rgba(11,132,255,0.06);color:#0b84ff">Sustainability</span><time datetime="2025-10-20" class="muted">Oct 20, 2025</time></div>
            <h3 id="post2-title" style="margin:0;font-size:16px">How to Shop More Sustainably</h3>
            <p class="muted" style="margin:0">Small changes to your shopping habits that reduce waste and support ethical brands.</p>
            <a href="#" style="font-weight:700;color:var(--accent);margin-top:6px;text-decoration:none">Read more →</a>
          </div>
        </article>

        <article class="post" aria-labelledby="post3-title">
          <img src="https://images.unsplash.com/photo-1517511620798-cec17d428bc0?q=80&w=1200&auto=format&fit=crop&crop=entropy" alt="Home organization">
          <div class="post-body">
            <div style="display:flex;gap:8px;align-items:center"><span class="eyebrow" style="background:rgba(16,185,129,0.06);color:#10b981">Home</span><time datetime="2025-09-30" class="muted">Sep 30, 2025</time></div>
            <h3 id="post3-title" style="margin:0;font-size:16px">5 Clever Ways to Organize Small Spaces</h3>
            <p class="muted" style="margin:0">Affordable organizers and smart layouts to maximize every inch of your home.</p>
            <a href="#" style="font-weight:700;color:var(--accent);margin-top:6px;text-decoration:none">Read more →</a>
          </div>
        </article>
      </div>
    </section>

    <section id="newsletter" aria-labelledby="newsletter-title" style="margin-top:36px">
      <div class="section-head">
        <div>
          <div id="newsletter-title" class="section-title">Stay in the loop</div>
          <div class="section-sub">Join our newsletter for exclusive offers and new arrivals</div>
        </div>
        <div></div>
      </div>
      <form class="newsletter" id="newsletterForm" onsubmit="return false" aria-label="Subscribe to newsletter">
        <label for="email" class="visually-hidden">Email</label>
        <input id="email" type="email" placeholder="Your email address" required />
        <button class="btn btn-primary" type="submit">Subscribe</button>
      </form>
      <div id="newsletterMsg" class="muted" style="margin-top:10px"></div>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div class="container" style="display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap">
      <div style="flex:1;min-width:220px">
        <div style="display:flex;align-items:center;gap:12px">
          <div class="logo-mark" style="width:48px;height:48px">SE</div>
          <div>
            <div style="font-weight:800">ShopEase</div>
            <div class="muted" style="font-size:13px">Fast delivery · Secure checkout · 24/7 support</div>
          </div>
        </div>
      </div>
      <div style="display:flex;gap:40px;flex-wrap:wrap">
        <div>
          <div style="font-weight:700;margin-bottom:8px">Company</div>
          <div class="muted"><a href="#about">About</a><br><a href="#blog">Blog</a><br><a href="#">Careers</a></div>
        </div>
        <div>
          <div style="font-weight:700;margin-bottom:8px">Support</div>
          <div class="muted"><a href="#">Help Center</a><br><a href="#">Returns</a><br><a href="#">Shipping</a></div>
        </div>
      </div>
      <div style="min-width:220px;text-align:right">
        <div style="font-weight:700;margin-bottom:8px">Secure payments</div>
        <div style="display:flex;gap:8px;justify-content:flex-end">
          <div style="background:rgba(255,255,255,0.06);padding:10px;border-radius:8px">Visa</div>
          <div style="background:rgba(255,255,255,0.06);padding:10px;border-radius:8px">Mastercard</div>
          <div style="background:rgba(255,255,255,0.06);padding:10px;border-radius:8px">PayPal</div>
        </div>
      </div>
    </div>
    <div style="border-top:1px solid rgba(255,255,255,0.04);margin-top:18px;margin-left:18px;margin-right:18px;padding:16px 18px;text-align:center;color:rgba(219,234,254,0.7)">
      © 2025 ShopEase. All rights reserved.
    </div>
  </footer>

  <script>
    // Sample product data
    const products = [
      { id: 'p1', title: 'SonicPods X Wireless Earbuds', price: 59, old: 79, rating: 4.6, img: 'https://images.unsplash.com/photo-1606813902926-2f5f0b1a36f1?q=80&w=1200&auto=format&fit=crop&crop=entropy' },
      { id: 'p2', title: 'Aquila Classic Watch', price: 129, old: 189, rating: 4.8, img: 'https://images.unsplash.com/photo-1555529771-9b6b49f0c7a6?q=80&w=1200&auto=format&fit=crop&crop=entropy' },
      { id: 'p3', title: 'Rover Everyday Backpack', price: 79, old: null, rating: 4.5, img: 'https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?q=80&w=1200&auto=format&fit=crop&crop=entropy' },
      { id: 'p4', title: 'WaveBox Mini Speaker', price: 39, old: 49, rating: 4.4, img: 'https://images.unsplash.com/photo-1526178611570-1f65b7f80b47?q=80&w=1200&auto=format&fit=crop&crop=entropy' },
      { id: 'p5', title: 'CloudWalk Running Shoes', price: 89, old: 129, rating: 4.7, img: 'https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?q=80&w=1200&auto=format&fit=crop&crop=entropy' },
      { id: 'p6', title: 'North Shades Sunglasses', price: 29, old: null, rating: 4.2, img: 'https://images.unsplash.com/photo-1526178611570-1f65b7f80b47?q=80&w=1200&auto=format&fit=crop&crop=entropy' },
    ];

    const deals = [
      { id: 'd1', title: '50% off SonicPods X', price: 29, old: 59, img: 'https://images.unsplash.com/photo-1606813902926-2f5f0b1a36f1?q=80&w=900&auto=format&fit=crop&crop=entropy', ends: Date.now() + 1000*60*60*12 },
      { id: 'd2', title: 'Aquila Watch — $50 off', price: 99, old: 149, img: 'https://images.unsplash.com/photo-1555529771-9b6b49f0c7a6?q=80&w=900&auto=format&fit=crop&crop=entropy', ends: Date.now() + 1000*60*60*24*2 },
      { id: 'd3', title: 'WaveBox Mini — Buy 1 Get 1', price: 39, old: 78, img: 'https://images.unsplash.com/photo-1526178611570-1f65b7f80b47?q=80&w=900&auto=format&fit=crop&crop=entropy', ends: Date.now() + 1000*60*45 },
    ];

    // Render popular products
    const productGrid = document.getElementById('productGrid');
    function renderProducts(list) {
      productGrid.innerHTML = '';
      list.forEach(p => {
        const el = document.createElement('article');
        el.className = 'card';
        el.setAttribute('role','listitem');
        el.innerHTML = `
          <div class="card-media" aria-hidden="false">
            <img loading="lazy" src="${p.img}" alt="${p.title}">
          </div>
          <div class="card-body">
            <div style="display:flex;justify-content:space-between;align-items:start">
              <div>
                <div class="card-title">${p.title}</div>
                <div class="rating" aria-label="${p.rating} out of 5 stars">${renderStars(p.rating)} <span style="color:var(--muted);font-weight:600;margin-left:6px">${p.rating.toFixed(1)}</span></div>
              </div>
            </div>
            <div class="price-row">
              <div>
                <div class="price-current">$${p.price.toFixed(2)}</div>
                ${p.old ? `<div class="price-old">$${p.old.toFixed(2)}</div>` : ''}
              </div>
              <div style="display:flex;flex-direction:column;align-items:flex-end">
                <div style="display:flex;gap:8px" class="card-actions">
                  <button class="btn btn-sm btn-primary" data-add="${p.id}" aria-label="Add ${p.title} to cart">Add</button>
                  <button class="btn btn-sm btn-ghost" data-quick="${p.id}" aria-label="Quick view ${p.title}">View</button>
                </div>
              </div>
            </div>
          </div>
        `;
        productGrid.appendChild(el);
      });
    }

    function renderStars(rating){
      const full = Math.floor(rating);
      const half = (rating - full) >= 0.5;
      let out = '';
      for(let i=0;i<full;i++) out += '★';
      if(half) out += '☆';
      while(out.length < 5) out += '☆';
      return `<span style="font-size:14px">${out}</span>`;
    }

    renderProducts(products);

    // Cart logic
    let cart = JSON.parse(localStorage.getItem('se_cart') || '{}');
    function updateCartCount(){
      const count = Object.values(cart).reduce((s,v)=>s+v,0);
      document.getElementById('cartCount').textContent = count;
      localStorage.setItem('se_cart', JSON.stringify(cart));
    }
    updateCartCount();

    document.addEventListener('click', (e) => {
      if(e.target.closest('[data-add]')){
        const id = e.target.closest('[data-add]').getAttribute('data-add');
        cart[id] = (cart[id] || 0) + 1;
        updateCartCount();
        flashMessage('Added to cart');
      } else if(e.target.closest('[data-quick]')){
        const id = e.target.closest('[data-quick]').getAttribute('data-quick');
        quickView(id);
      }
    });

    function flashMessage(msg){
      const el = document.createElement('div');
      el.textContent = msg;
      el.style.position = 'fixed';
      el.style.right = '20px';
      el.style.bottom = '20px';
      el.style.background = 'var(--accent)';
      el.style.color = 'white';
      el.style.padding = '10px 14px';
      el.style.borderRadius = '10px';
      el.style.boxShadow = '0 8px 30px rgba(11,132,255,0.12)';
      document.body.appendChild(el);
      setTimeout(()=>el.style.opacity='0',1500);
      setTimeout(()=>el.remove(),2200);
    }

    // Quick view modal (simple)
    function quickView(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      const modal = document.createElement('div');
      modal.setAttribute('role','dialog');
      modal.setAttribute('aria-modal','true');
      modal.style.position='fixed';
      modal.style.left=0;modal.style.top=0;modal.style.right=0;modal.style.bottom=0;
      modal.style.display='flex';
      modal.style.alignItems='center';
      modal.style.justifyContent='center';
      modal.style.background='rgba(2,6,23,0.5)';
      modal.innerHTML = `
        <div style="background:white;border-radius:12px;max-width:760px;width:94%;box-shadow:var(--shadow);overflow:hidden">
          <div style="display:flex;gap:12px;align-items:stretch">
            <img src="${p.img}" alt="${p.title}" style="width:50%;object-fit:cover">
            <div style="padding:18px;flex:1">
              <h2 style="margin:0 0 8px">${p.title}</h2>
              <p style="color:var(--muted);margin:0 0 12px">Customer rating ${p.rating.toFixed(1)} • Free returns • Fast shipping</p>
              <div style="font-weight:800;font-size:20px">$${p.price.toFixed(2)} ${p.old ? `<span style="text-decoration:line-through;color:var(--muted);font-weight:600;margin-left:8px">$${p.old.toFixed(2)}</span>` : ''}</div>
              <div style="margin-top:12px;display:flex;gap:8px">
                <button class="btn btn-primary" id="modalAdd">Add to cart</button>
                <button class="btn btn-ghost" id="modalClose">Close</button>
              </div>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
      modal.querySelector('#modalClose').addEventListener('click', ()=>modal.remove());
      modal.querySelector('#modalAdd').addEventListener('click', ()=>{
        cart[id] = (cart[id] || 0) + 1;
        updateCartCount();
        modal.remove();
        flashMessage('Added to cart');
      });
    }

    // Deals carousel
    const dealTrack = document.getElementById('dealTrack');
    function renderDeals(){
      dealTrack.innerHTML = '';
      deals.forEach(d => {
        const el = document.createElement('div');
        el.className = 'deal-card';
        el.setAttribute('data-id', d.id);
        el.innerHTML = `
          <img src="${d.img}" alt="${d.title}" style="width:100%;height:140px;object-fit:cover;border-radius:8px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:800">${d.title}</div>
            <div class="countdown" data-ends="${d.ends}" aria-live="polite">00:00:00</div>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
            <div>
              <div style="font-weight:800;font-size:18px">$${d.price.toFixed(2)}</div>
              <div class="price-old">$${d.old ? d.old.toFixed(2) : ''}</div>
            </div>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn btn-primary" data-add="${d.id}">Claim</button>
              <button class="btn btn-ghost" data-info="${d.id}">Details</button>
            </div>
          </div>
        `;
        dealTrack.appendChild(el);
      });
      startCountdowns();
    }

    function startCountdowns(){
      const els = document.querySelectorAll('.countdown');
      function tick(){
        const now = Date.now();
        els.forEach(el => {
          const ends = Number(el.getAttribute('data-ends'));
          const diff = Math.max(0, ends - now);
          const hours = Math.floor(diff / (1000*60*60));
          const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
          const seconds = Math.floor((diff % (1000*60)) / 1000);
          el.textContent = String(hours).padStart(2,'0') + ':' + String(minutes).padStart(2,'0') + ':' + String(seconds).padStart(2,'0');
          if(diff === 0) el.textContent = 'Ended';
        });
      }
      tick();
      setInterval(tick, 1000);
    }

    renderDeals();

    // Carousel controls
    const prevDeal = document.getElementById('prevDeal');
    const nextDeal = document.getElementById('nextDeal');
    prevDeal.addEventListener('click', ()=>scrollDeals(-1));
    nextDeal.addEventListener('click', ()=>scrollDeals(1));
    function scrollDeals(dir){
      const cardWidth = document.querySelector('.deal-card')?.getBoundingClientRect().width || 300;
      dealTrack.scrollBy({left: dir * (cardWidth + 14), behavior:'smooth'});
    }

    // Add-to-cart for deals
    dealTrack.addEventListener('click', (e) => {
      if(e.target.closest('[data-add]')){
        const id = e.target.closest('[data-add]').getAttribute('data-add');
        // If id corresponds to a deal, map to a fake product id
        cart[id] = (cart[id] || 0) + 1;
        updateCartCount();
        flashMessage('Deal added to cart');
      } else if(e.target.closest('[data-info]')){
        const id = e.target.closest('[data-info]').getAttribute('data-info');
        alert('More details coming soon for this deal.');
      }
    });

    // Sort functionality
    const sort = document.getElementById('sort');
    sort.addEventListener('change', () => {
      const val = sort.value;
      let sorted = [...products];
      if(val === 'new'){
        sorted = sorted.reverse();
      } else if(val === 'price-asc'){
        sorted.sort((a,b)=>a.price-b.price);
      } else if(val === 'price-desc'){
        sorted.sort((a,b)=>b.price-a.price);
      } else {
        sorted = [...products];
      }
      renderProducts(sorted);
    });

    // Shop now / view deals buttons
    document.getElementById('shopNowBtn').addEventListener('click', ()=>{
      document.getElementById('popular').scrollIntoView({behavior:'smooth', block:'start'});
    });
    document.getElementById('viewDealsBtn').addEventListener('click', ()=>{
      document.getElementById('deals').scrollIntoView({behavior:'smooth', block:'start'});
    });

    // Newsletter submit
    document.getElementById('newsletterForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value.trim();
      if(!email || !email.includes('@')) {
        document.getElementById('newsletterMsg').textContent = 'Please enter a valid email address.';
        return;
      }
      document.getElementById('newsletterMsg').textContent = 'Thanks for subscribing! Check your inbox for a welcome email.';
      document.getElementById('email').value = '';
    });

    // Cart persistence on load
    window.addEventListener('load', () => {
      updateCartCount();
    });

    // Simple search filtering
    document.getElementById('searchInput').addEventListener('input', (e) => {
      const q = e.target.value.trim().toLowerCase();
      if(!q) {
        renderProducts(products);
        return;
      }
      const filtered = products.filter(p => p.title.toLowerCase().includes(q));
      renderProducts(filtered);
    });

    // Accessibility: keyboard quick view (Enter on product cards)
    productGrid.addEventListener('keydown', (e) => {
      const card = e.target.closest('.card');
      if(card && (e.key === 'Enter' || e.key === ' ')) {
        const idAttr = card.querySelector('[data-quick]')?.getAttribute('data-quick');
        if(idAttr) quickView(idAttr);
      }
    });

  </script>
</body>
</html>