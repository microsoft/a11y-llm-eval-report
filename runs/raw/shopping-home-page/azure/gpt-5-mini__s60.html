<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>ShopWave — Home</title>
  <meta name="description" content="ShopWave — curated popular items, hot deals, and style & lifestyle articles."/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#ff6b6b;
      --accent-2:#4f46e5;
      --glass: rgba(255,255,255,0.6);
      --shadow: 0 6px 18px rgba(16,24,40,0.08);
      --radius:12px;
      --max-width:1180px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,#fbfdff 0%, #f6f7fb 100%);
      color:#0f1724;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
    }
    header{
      background:transparent;
      padding:18px 20px;
      position:sticky;
      top:0;
      z-index:40;
      backdrop-filter: blur(6px);
      border-bottom:1px solid rgba(15,23,36,0.04);
    }
    .nav{
      max-width:var(--max-width);
      margin:0 auto;
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:space-between;
    }
    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent-2),#06b6d4);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:18px;box-shadow: var(--shadow);
    }
    .brand h1{font-size:18px;margin:0}
    nav ul{display:flex;gap:14px;list-style:none;margin:0;padding:0}
    nav a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px;font-weight:500}
    nav a:hover{background:rgba(79,70,229,0.06);color:var(--accent-2)}
    .actions{display:flex;gap:10px;align-items:center}
    .search{
      display:flex;align-items:center;background:var(--card);padding:8px 12px;border-radius:12px;box-shadow:var(--shadow);gap:8px;width:420px;
    }
    .search input{border:0;outline:0;background:transparent;font-size:14px;width:100%}
    .btn{
      background:var(--accent-2);color:#fff;border:0;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer;
    }
    .icon-btn{background:transparent;border:0;padding:8px;border-radius:10px;cursor:pointer;color:var(--muted)}
    main{max-width:var(--max-width);margin:26px auto;padding:0 20px}
    .hero{
      display:grid;grid-template-columns:1fr 360px;gap:20px;align-items:center;margin-bottom:22px;
    }
    .hero-card{
      background:linear-gradient(180deg, rgba(79,70,229,0.06), rgba(79,70,229,0.02));padding:28px;border-radius:18px;box-shadow:var(--shadow);
    }
    .hero h2{margin:0 0 8px 0;font-size:26px}
    .hero p{margin:0;color:var(--muted);margin-bottom:16px}
    .categories{display:flex;gap:10px;flex-wrap:wrap}
    .chip{background:var(--card);padding:8px 12px;border-radius:999px;border:1px solid rgba(15,23,36,0.04);font-weight:600;color:var(--muted);cursor:pointer}
    .hero-cta{display:flex;gap:10px;margin-top:10px}
    .grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:18px;
    }
    @media (max-width:980px){ .hero{grid-template-columns:1fr} .grid{grid-template-columns:repeat(2,1fr)} .search{width:260px} }
    @media (max-width:640px){ .grid{grid-template-columns:1fr} .search{display:none} header{padding:12px} .nav{gap:8px} .hero-card{padding:18px} .brand h1{display:none} }
    .product{
      background:var(--card);border-radius:14px;padding:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:12px;
    }
    .media{height:160px;border-radius:10px;background:#f3f4f6;display:flex;align-items:center;justify-content:center;overflow:hidden}
    .media img{width:100%;height:100%;object-fit:cover}
    .title{font-weight:600;font-size:15px}
    .meta{display:flex;justify-content:space-between;align-items:center;gap:10px}
    .price{font-weight:700;color:#0f1724}
    .old{color:var(--muted);text-decoration:line-through;font-size:13px}
    .rating{color:#f59e0b;font-weight:700;font-size:13px}
    .card-actions{display:flex;gap:8px}
    .outline{background:transparent;border:1px solid rgba(15,23,36,0.06);padding:8px;border-radius:10px;cursor:pointer}
    .badge{
      font-size:12px;background:var(--accent);color:#fff;padding:6px 8px;border-radius:8px;font-weight:700;
    }
    section h3{margin:0 0 12px 0}
    .deals{
      display:flex;gap:12px;align-items:center;overflow:hidden;
    }
    .carousel{
      display:flex;gap:12px;transition:transform .45s cubic-bezier(.2,.8,.2,1);
      will-change:transform;
    }
    .deal{
      min-width:260px;background:linear-gradient(180deg,#fff,#fff);border-radius:14px;padding:12px;box-shadow:var(--shadow);flex:0 0 260px;
    }
    .deal .media{height:140px;border-radius:10px}
    .timer{font-weight:700;color:var(--accent-2);font-size:13px}
    .controls{display:flex;gap:8px;align-items:center}
    .dots{display:flex;gap:6px}
    .dot{width:8px;height:8px;border-radius:8px;background:rgba(15,23,36,0.08)}
    .dot.active{background:var(--accent-2)}
    .blogs{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .post{background:var(--card);border-radius:12px;padding:12px;box-shadow:var(--shadow)}
    .post .thumb{height:150px;border-radius:8px;overflow:hidden;background:#eef2ff}
    .post h4{margin:8px 0 6px 0}
    .muted{color:var(--muted);font-size:14px}
    footer{margin-top:28px;padding:28px 20px;background:transparent;border-top:1px solid rgba(15,23,36,0.04)}
    .footer-inner{max-width:var(--max-width);margin:0 auto;display:flex;gap:20px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    .newsletter{display:flex;gap:8px;align-items:center}
    .newsletter input{padding:10px 12px;border-radius:10px;border:1px solid rgba(15,23,36,0.06);outline:0}
    .cart-bubble{background:var(--accent);color:#fff;padding:6px 8px;border-radius:999px;font-weight:700;font-size:13px}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    /* Quick view modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.4);display:none;align-items:center;justify-content:center;z-index:60}
    .modal{background:var(--card);border-radius:12px;padding:18px;max-width:860px;width:94%;box-shadow:0 30px 60px rgba(2,6,23,0.3);display:flex;gap:18px}
    .modal .media{height:300px;min-width:320px}
    .hidden{display:none}
    .toast{position:fixed;right:20px;bottom:20px;background:#111827;color:#fff;padding:12px 16px;border-radius:12px;box-shadow:var(--shadow);display:none;z-index:70}
    .sale-tag{background:linear-gradient(90deg,#ffedd5,#fff7ed);color:#b45309;padding:6px 8px;border-radius:8px;font-weight:700}
  </style>
</head>
<body>
  <header>
    <div class="nav" role="navigation" aria-label="Main navigation">
      <div class="brand">
        <div class="logo" aria-hidden="true">SW</div>
        <div>
          <h1>ShopWave</h1>
          <div class="muted" style="font-size:12px;margin-top:4px">Curated finds · Fast shipping</div>
        </div>
      </div>

      <nav aria-label="Primary">
        <ul>
          <li><a href="#" class="active">Home</a></li>
          <li><a href="#">Shop</a></li>
          <li><a href="#">Deals</a></li>
          <li><a href="#">Blog</a></li>
          <li><a href="#">Support</a></li>
        </ul>
      </nav>

      <div class="actions" role="group" aria-label="Header actions">
        <label class="search" for="site-search" aria-hidden="false">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.7"><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="site-search" placeholder="Search products, brands, categories" aria-label="Search products">
        </label>

        <button class="icon-btn" title="Wishlist" aria-label="Wishlist">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M20.8 7.6a5 5 0 0 0-7.1-.2L12 9.1l-1.7-1.7a5 5 0 1 0-7.1 7.1L12 22l8.8-7.3a5 5 0 0 0 .0-7.1z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <button class="btn" id="cart-btn" aria-label="Open cart">
          Cart <span id="cart-count" class="cart-bubble" style="margin-left:8px">0</span>
        </button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="hero-card" aria-labelledby="hero-title">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <h2 id="hero-title">Find what you love. Save a little love.</h2>
            <p>Explore handpicked popular items, flash deals updated daily, and stories from creators.</p>
            <div class="categories" aria-hidden="false">
              <button class="chip" data-cat="all">All</button>
              <button class="chip" data-cat="home">Home</button>
              <button class="chip" data-cat="tech">Tech</button>
              <button class="chip" data-cat="fashion">Fashion</button>
              <button class="chip" data-cat="outdoors">Outdoors</button>
            </div>
            <div class="hero-cta" style="margin-top:14px">
              <button class="btn" id="shop-now">Shop Now</button>
              <button class="outline">Free returns · 30 days</button>
            </div>
          </div>
          <div style="text-align:right">
            <div class="sale-tag">Free shipping over $50</div>
            <div class="muted" style="margin-top:12px;font-size:13px">Trending right now</div>
            <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
              <div style="background:#fff;border-radius:10px;padding:10px;box-shadow:var(--shadow);min-width:120px">
                <div class="muted" style="font-size:12px">Avg. Rating</div>
                <div style="font-weight:700">4.8 / 5</div>
              </div>
              <div style="background:#fff;border-radius:10px;padding:10px;box-shadow:var(--shadow);min-width:120px">
                <div class="muted" style="font-size:12px">Orders this week</div>
                <div style="font-weight:700">1.2k</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <aside style="display:flex;flex-direction:column;gap:12px">
        <div style="background:linear-gradient(180deg,#fff,#f9fafb);padding:14px;border-radius:14px;box-shadow:var(--shadow);">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted" style="font-size:13px">Your picks</div>
              <div style="font-weight:700;margin-top:6px">Personalized for you</div>
            </div>
            <div class="muted" style="font-size:13px">Updated hourly</div>
          </div>
          <div style="display:flex;gap:10px;margin-top:12px">
            <div style="flex:1">
              <div style="height:72px;border-radius:10px;background:#f3f4f6;display:flex;align-items:center;justify-content:center">Image</div>
              <div class="muted" style="font-size:13px;margin-top:8px">Smart Lamp</div>
              <div style="font-weight:700">$39.00</div>
            </div>
            <div style="flex:1">
              <div style="height:72px;border-radius:10px;background:#f3f4f6;display:flex;align-items:center;justify-content:center">Image</div>
              <div class="muted" style="font-size:13px;margin-top:8px">Cotton Tee</div>
              <div style="font-weight:700">$24.00</div>
            </div>
          </div>
        </div>

        <div style="background:linear-gradient(180deg,#fff,#fff);padding:14px;border-radius:14px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted" style="font-size:13px">Gift Guide</div>
              <div style="font-weight:700">Gifts under $50</div>
            </div>
            <button class="outline">Browse</button>
          </div>
          <div style="display:flex;gap:10px">
            <div style="flex:1;height:72px;border-radius:10px;background:#f3f4f6"></div>
            <div style="flex:1;height:72px;border-radius:10px;background:#fff7ed;border:1px solid rgba(196,75,14,0.06);display:flex;align-items:center;justify-content:center">
              <div style="text-align:center">
                <div class="muted" style="font-size:12px">Member perks</div>
                <div style="font-weight:700">Extra 10% off</div>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </section>

    <section aria-labelledby="popular-title" style="margin-top:6px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3 id="popular-title">Popular items</h3>
        <div style="display:flex;gap:8px;align-items:center">
          <div class="muted">Sort:</div>
          <select id="sort" style="padding:8px;border-radius:8px;border:1px solid rgba(15,23,36,0.06)">
            <option value="popular">Most popular</option>
            <option value="new">New arrivals</option>
            <option value="low">Price low to high</option>
            <option value="high">Price high to low</option>
          </select>
        </div>
      </div>

      <div class="grid" id="popular-grid">
        <!-- Product cards rendered by JS -->
      </div>
    </section>

    <section aria-labelledby="deals-title" style="margin-top:22px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3 id="deals-title">Limited time deals</h3>
        <div class="controls">
          <button class="outline" id="prev-deal" aria-label="Previous deal">&larr;</button>
          <button class="outline" id="next-deal" aria-label="Next deal">&rarr;</button>
        </div>
      </div>

      <div class="deals" aria-live="polite">
        <div class="carousel" id="deal-carousel">
          <!-- deals rendered by JS -->
        </div>
      </div>

      <div style="display:flex;justify-content:center;margin-top:10px" class="dots" id="carousel-dots" aria-hidden="true"></div>
    </section>

    <section aria-labelledby="blog-title" style="margin-top:22px">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
        <h3 id="blog-title">From the blog</h3>
        <a href="#" class="muted" style="text-decoration:none">See all posts →</a>
      </div>

      <div class="blogs" id="blog-grid">
        <!-- blog posts via JS -->
      </div>
    </section>

    <!-- Quick view modal -->
    <div class="modal-backdrop" id="modal" role="dialog" aria-modal="true" aria-hidden="true">
      <div class="modal" role="document">
        <div class="media" id="modal-image"><img src="https://via.placeholder.com/600x400?text=Product" alt=""></div>
        <div style="flex:1;display:flex;flex-direction:column;gap:12px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="muted" id="modal-category">Category</div>
              <h3 id="modal-title" style="margin:0">Product Title</h3>
            </div>
            <button class="outline" id="modal-close" aria-label="Close">Close</button>
          </div>
          <div id="modal-price" style="font-weight:800;font-size:18px">$39.00</div>
          <div class="muted" id="modal-desc" style="font-size:14px">Short product description goes here — material, features, and quick benefits.</div>
          <div style="margin-top:auto;display:flex;gap:8px">
            <button class="btn" id="modal-add">Add to cart</button>
            <button class="outline" id="modal-wish">Add to wishlist</button>
          </div>
        </div>
      </div>
    </div>

    <div class="toast" id="toast" role="status" aria-live="polite">Added to cart</div>
  </main>

  <footer>
    <div class="footer-inner">
      <div style="display:flex;gap:14px;align-items:center">
        <div class="logo" style="width:44px;height:44px">SW</div>
        <div>
          <div style="font-weight:700">ShopWave</div>
          <div class="muted" style="font-size:13px">Quality goods for everyday life</div>
        </div>
      </div>

      <div class="newsletter" aria-label="Subscribe to newsletter">
        <input type="email" id="newsletter-email" placeholder="Your email" aria-label="Your email">
        <button class="btn" id="subscribe">Subscribe</button>
      </div>
    </div>
  </footer>

  <script>
    // Sample data
    const products = [
      {id:1,title:"Bamboo Wireless Speaker",category:"tech",price:49,old:69, rating:4.7, image:"https://via.placeholder.com/600x400?text=Speaker"},
      {id:2,title:"Everyday Cotton Tee",category:"fashion",price:22,old:0, rating:4.5,image:"https://via.placeholder.com/600x400?text=Tee"},
      {id:3,title:"Minimal Desk Lamp",category:"home",price:39,old:59,rating:4.8,image:"https://via.placeholder.com/600x400?text=Lamp"},
      {id:4,title:"Insulated Water Bottle",category:"outdoors",price:28,old:0,rating:4.6,image:"https://via.placeholder.com/600x400?text=Bottle"},
      {id:5,title:"Noise-cancel Headphones",category:"tech",price:129,old:199,rating:4.4,image:"https://via.placeholder.com/600x400?text=Headphones"},
      {id:6,title:"Classic Leather Belt",category:"fashion",price:45,old:0,rating:4.2,image:"https://via.placeholder.com/600x400?text=Belt"},
      {id:7,title:"Compact Camping Stove",category:"outdoors",price:59,old:79,rating:4.5,image:"https://via.placeholder.com/600x400?text=Stove"},
      {id:8,title:"Ceramic Planter Set",category:"home",price:34,old:49,rating:4.3,image:"https://via.placeholder.com/600x400?text=Planter"},
      {id:9,title:"Travel Tech Organizer",category:"tech",price:19,old:29,rating:4.1,image:"https://via.placeholder.com/600x400?text=Organizer"}
    ];

    const deals = [
      {id:101,title:"Holiday Bundle — Speaker + Lamp",price:79,old:128,endsInSec:3600*6,image:"https://via.placeholder.com/600x400?text=Bundle"},
      {id:102,title:"Headphones Flash Sale",price:99,old:199,endsInSec:3600*2,image:"https://via.placeholder.com/600x400?text=Headphones"},
      {id:103,title:"Camping Starter Kit",price:89,old:129,endsInSec:3600*24,image:"https://via.placeholder.com/600x400?text=Camping"},
      {id:104,title:"Home Decor Picks",price:29,old:49,endsInSec:3600*12,image:"https://via.placeholder.com/600x400?text=Decor"}
    ];

    const posts = [
      {id:201,title:"10 Small Space Makeovers",excerpt:"Quick tips for transforming small rooms with budget-friendly pieces.",image:"https://via.placeholder.com/600x400?text=Makeover",author:"Lina",date:"Nov 6"},
      {id:202,title:"How to Choose a Travel Bag",excerpt:"Lightweight, durable, and smart — what to look for and why.",image:"https://via.placeholder.com/600x400?text=Bag",author:"Ravi",date:"Oct 28"},
      {id:203,title:"Care Guide for Everyday Tees",excerpt:"Keep your tees soft and color-rich with these simple steps.",image:"https://via.placeholder.com/600x400?text=Tees",author:"Maya",date:"Oct 10"}
    ];

    // Render popular items
    const grid = document.getElementById('popular-grid');
    function renderProducts(list){
      grid.innerHTML = '';
      list.forEach(p=>{
        const el = document.createElement('article');
        el.className = 'product';
        el.innerHTML = `
          <div class="media"><img src="${p.image}" alt="${escapeHtml(p.title)}"></div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="title">${escapeHtml(p.title)}</div>
              <div class="muted" style="font-size:13px;text-transform:capitalize">${p.category}</div>
            </div>
            ${p.old?`<div class="badge">-${Math.round((1 - p.price/p.old)*100)}%</div>`:''}
          </div>
          <div class="meta">
            <div><span class="price">$${p.price.toFixed(2)}</span> ${p.old?`<span class="old">$${p.old.toFixed(2)}</span>`:''}</div>
            <div class="rating">★ ${p.rating}</div>
          </div>
          <div class="card-actions">
            <button class="btn add" data-id="${p.id}" aria-label="Add ${escapeHtml(p.title)} to cart">Add to cart</button>
            <button class="outline view" data-id="${p.id}">Quick view</button>
          </div>
        `;
        grid.appendChild(el);
      });
    }

    function escapeHtml(s){ return (s+'').replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }); }

    // Sorting and filtering
    document.getElementById('sort').addEventListener('change', (e)=>{
      const val = e.target.value;
      let sorted = [...products];
      if(val==='new'){ sorted = sorted.reverse(); }
      if(val==='low'){ sorted.sort((a,b)=>a.price-b.price) }
      if(val==='high'){ sorted.sort((a,b)=>b.price-a.price) }
      renderProducts(sorted);
    });

    // Category chips
    document.querySelectorAll('.chip').forEach(ch=>{
      ch.addEventListener('click', ()=> {
        document.querySelectorAll('.chip').forEach(c=>c.style.boxShadow='none');
        ch.style.boxShadow = 'inset 0 0 0 2px rgba(79,70,229,0.08)';
        const cat = ch.dataset.cat;
        if(cat==='all') renderProducts(products);
        else renderProducts(products.filter(p=>p.category===cat));
      });
    });

    // Add to cart behavior
    const cartCountEl = document.getElementById('cart-count');
    const toast = document.getElementById('toast');
    let cart = JSON.parse(localStorage.getItem('sw_cart')||'[]');

    function updateCartUI(){
      cartCountEl.textContent = cart.length;
      localStorage.setItem('sw_cart', JSON.stringify(cart));
    }

    document.addEventListener('click', (e)=>{
      if(e.target.matches('.add')){
        const id = Number(e.target.dataset.id);
        const prod = products.find(p=>p.id===id);
        cart.push({id:prod.id,title:prod.title,price:prod.price});
        updateCartUI();
        showToast(`${prod.title} added to cart`);
      } else if(e.target.matches('.view')){
        const id = Number(e.target.dataset.id);
        openModal(id);
      }
    });

    function showToast(msg){
      toast.textContent = msg;
      toast.style.display = 'block';
      setTimeout(()=>toast.style.display='none',2200);
    }

    // Modal
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image').querySelector('img');
    const modalPrice = document.getElementById('modal-price');
    const modalDesc = document.getElementById('modal-desc');
    const modalCategory = document.getElementById('modal-category');
    let currentModalId = null;

    function openModal(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      currentModalId = id;
      modalTitle.textContent = p.title;
      modalCategory.textContent = p.category;
      modalImage.src = p.image;
      modalImage.alt = p.title;
      modalPrice.textContent = `$${p.price.toFixed(2)}`;
      modalDesc.textContent = `A versatile ${p.category} item — ${p.title} rated ${p.rating}.`;
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden','false');
    }

    document.getElementById('modal-close').addEventListener('click', closeModal);
    function closeModal(){ modal.style.display='none'; modal.setAttribute('aria-hidden','true'); currentModalId = null; }

    document.getElementById('modal-add').addEventListener('click', ()=>{
      if(currentModalId){
        const p = products.find(x=>x.id===currentModalId);
        cart.push({id:p.id,title:p.title,price:p.price});
        updateCartUI();
        showToast(`${p.title} added to cart`);
        closeModal();
      }
    });

    document.getElementById('modal-wish').addEventListener('click', ()=> showToast('Added to wishlist'));

    // Deals carousel
    const carousel = document.getElementById('deal-carousel');
    const dots = document.getElementById('carousel-dots');
    let index = 0;

    function formatTime(s){
      const h = Math.floor(s/3600); s%=3600;
      const m = Math.floor(s/60); const sec = s%60;
      return `${h}h ${m}m`;
    }

    function renderDeals(){
      carousel.innerHTML = '';
      dots.innerHTML = '';
      deals.forEach((d,i)=>{
        const el = document.createElement('div');
        el.className = 'deal';
        el.innerHTML = `
          <div class="media"><img src="${d.image}" alt="${escapeHtml(d.title)}"></div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
            <div>
              <div style="font-weight:700">${escapeHtml(d.title)}</div>
              <div class="muted" style="font-size:13px">Limited time</div>
            </div>
            <div style="text-align:right">
              <div class="price">$${d.price.toFixed(2)}</div>
              <div class="old">$${d.old.toFixed(2)}</div>
            </div>
          </div>
          <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
            <div class="timer" data-ends="${d.endsInSec}">${formatTime(d.endsInSec)}</div>
            <button class="btn" data-dealid="${d.id}">Buy</button>
          </div>
        `;
        carousel.appendChild(el);
        const dot = document.createElement('div');
        dot.className='dot'+(i===0?' active':'');
        dots.appendChild(dot);
      });
      updateCarousel();
    }

    function updateCarousel(){
      const width = 272; // approx card + gap
      carousel.style.transform = `translateX(${-index * (width)}px)`;
      Array.from(dots.children).forEach((d,i)=>d.classList.toggle('active', i===index));
    }

    document.getElementById('prev-deal').addEventListener('click', ()=>{ index = Math.max(0,index-1); updateCarousel(); });
    document.getElementById('next-deal').addEventListener('click', ()=>{ index = Math.min(deals.length-1,index+1); updateCarousel(); });

    // Auto cycle deals
    setInterval(()=>{ index = (index+1)%deals.length; updateCarousel(); }, 5000);

    // Deal countdowns
    setInterval(()=>{
      document.querySelectorAll('.timer').forEach(t=>{
        let s = parseInt(t.dataset.ends,10);
        if(s>0) s--; t.dataset.ends = s;
        t.textContent = formatTime(s);
      });
    },1000);

    // Blog posts
    const blogGrid = document.getElementById('blog-grid');
    function renderPosts(){
      blogGrid.innerHTML = '';
      posts.forEach(p=>{
        const el = document.createElement('article');
        el.className = 'post';
        el.innerHTML = `
          <div class="thumb"><img src="${p.image}" alt="${escapeHtml(p.title)}" style="width:100%;height:100%;object-fit:cover"></div>
          <h4>${escapeHtml(p.title)}</h4>
          <div class="muted">${escapeHtml(p.excerpt)}</div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px">
            <div class="muted" style="font-size:13px">${p.author} · ${p.date}</div>
            <a href="#" class="btn" style="padding:8px 10px">Read</a>
          </div>
        `;
        blogGrid.appendChild(el);
      });
    }

    // Newsletter subscribe
    document.getElementById('subscribe').addEventListener('click', ()=>{
      const em = document.getElementById('newsletter-email').value.trim();
      if(!em) { showToast('Enter an email'); return; }
      showToast('Thanks for subscribing!');
      document.getElementById('newsletter-email').value = '';
    });

    // Newsletter quick action
    document.getElementById('shop-now').addEventListener('click', ()=>{ showToast('Redirecting to shop...'); });

    // Cart button action
    document.getElementById('cart-btn').addEventListener('click', ()=> {
      showToast(`Cart: ${cart.length} items`);
    });

    // Initialize
    renderProducts(products);
    renderDeals();
    renderPosts();
    updateCartUI();

    // Accessibility: close modal on escape
    document.addEventListener('keydown', (e)=> {
      if(e.key === 'Escape') closeModal();
    });

    // Simple click handler for deal buy
    carousel.addEventListener('click', (e)=>{
      if(e.target.matches('button[data-dealid]')){
        showToast('Deal added to cart');
      }
    });
  </script>
</body>
</html>