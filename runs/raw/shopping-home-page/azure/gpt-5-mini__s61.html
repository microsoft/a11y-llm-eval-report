<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopSphere — Home</title>
  <meta name="description" content="ShopSphere — Discover popular items, today's deals, and inspiring blog posts. Fast shipping, great prices." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f7f9fb; --card:#ffffff; --muted:#6b7280; --accent:#0ea5a4; --accent-600:#09948f;
      --danger:#ef4444; --glass: rgba(255,255,255,0.6);
      --max-width:1200px;
      --radius:12px;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color-scheme: light;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,#f0f6f9 0%, #f7f9fb 60%);
      color:#0f1724;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.35;
    }
    header{
      background:transparent;
      padding:20px 16px;
      display:flex;
      justify-content:center;
      border-bottom:1px solid rgba(15,23,36,0.04);
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(6px);
    }
    .container{max-width:var(--max-width); width:100%; margin:0 auto; padding:0 16px}
    .topbar{display:flex; align-items:center; gap:16px; width:100%}
    .brand{display:flex; align-items:center; gap:10px; text-decoration:none; color:inherit; font-weight:700}
    .logo{width:42px; height:42px; border-radius:10px; background:linear-gradient(135deg,#06b6d4, #7c3aed); display:grid; place-items:center; color:white; font-weight:800; font-size:18px}
    nav{margin-left:auto; display:flex; gap:10px; align-items:center}
    .nav-link{font-weight:600; color:var(--muted); text-decoration:none; padding:8px 10px; border-radius:10px}
    .nav-link:hover{background:rgba(15,23,36,0.04); color:inherit}
    .searchbar{display:flex; gap:10px; align-items:center; background:var(--card); padding:10px; border-radius:12px; box-shadow:0 6px 18px rgba(9,30,66,0.04)}
    .searchbar input{border:0; outline:none; background:transparent; width:420px; font-size:15px}
    .cta{display:flex; align-items:center; gap:8px}
    .cart-btn{position:relative; background:var(--accent); color:white; border:0; padding:10px 12px; border-radius:10px; font-weight:700; cursor:pointer}
    .cart-count{position:absolute; top:-6px; right:-6px; background:#0f1724; color:white; font-size:12px; width:20px; height:20px; display:grid; place-items:center; border-radius:50%}
    main{padding:28px 16px 80px}
    .hero{
      background:linear-gradient(90deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.2) 100%);
      border-radius:18px;
      padding:28px;
      display:flex;
      gap:20px;
      align-items:center;
      margin-bottom:22px;
      box-shadow:0 6px 30px rgba(15,23,36,0.04);
    }
    .hero .left{flex:1}
    .hero h1{margin:0; font-size:28px; line-height:1.05}
    .hero p{color:var(--muted); margin:8px 0 16px}
    .categories{display:flex; gap:8px; flex-wrap:wrap}
    .category{background:var(--card); padding:8px 12px; border-radius:999px; color:var(--muted); font-weight:600; font-size:14px; border:1px solid rgba(15,23,36,0.03)}
    .hero .right{width:360px; display:grid; place-items:center}
    .hero .promo{width:100%; border-radius:12px; overflow:hidden; display:block}
    /* grids */
    .section{margin-top:26px}
    .section-header{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:12px}
    .section-header h2{margin:0; font-size:18px}
    .section .cta-small{background:transparent; border:0; color:var(--accent); font-weight:700; cursor:pointer}
    .grid{display:grid; gap:14px}
    /* items grid */
    .items-grid{grid-template-columns:repeat(4,1fr)}
    .card{background:var(--card); padding:14px; border-radius:12px; display:flex; gap:12px; align-items:flex-start; box-shadow:0 6px 18px rgba(16,24,40,0.03)}
    .card img{width:120px; height:90px; object-fit:cover; border-radius:8px; flex-shrink:0}
    .card .meta{flex:1}
    .title{font-weight:700; margin:0 0 6px}
    .meta p{margin:0; color:var(--muted); font-size:14px}
    .price-row{display:flex; align-items:center; gap:8px; margin-top:8px}
    .price{font-weight:800}
    .old-price{color:var(--muted); text-decoration:line-through; font-weight:600; font-size:13px}
    .rating{display:flex; gap:6px; align-items:center; color:#f59e0b; font-weight:700; font-size:13px}
    .card-actions{display:flex; gap:8px; margin-top:10px}
    .btn{background:var(--accent); color:white; border:0; padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700}
    .btn.ghost{background:transparent; color:var(--accent); border:1px solid rgba(9,132,128,0.12)}
    /* deals carousel */
    .carousel{position:relative; overflow:hidden; border-radius:12px}
    .slides{display:flex; transition:transform 400ms ease}
    .deal{min-width:100%; padding:18px; display:flex; gap:14px; align-items:center; background:linear-gradient(180deg, #fffbeb, #ffffff)}
    .deal img{width:160px; height:120px; object-fit:cover; border-radius:10px; flex-shrink:0}
    .deal .deal-info{flex:1}
    .deal .tag{display:inline-block; padding:6px 8px; background:#ffedd5; color:#92400e; border-radius:999px; font-weight:700; font-size:13px}
    .carousel-controls{position:absolute; top:50%; transform:translateY(-50%); width:100%; display:flex; justify-content:space-between; padding:0 8px}
    .ctrl{background:rgba(15,23,36,0.06); border:0; padding:8px; border-radius:999px; cursor:pointer}
    /* blog */
    .blog-grid{grid-template-columns:repeat(3,1fr)}
    .post{background:var(--card); border-radius:12px; overflow:hidden; display:flex; flex-direction:column; gap:12px}
    .post img{width:100%; height:160px; object-fit:cover}
    .post .post-body{padding:12px}
    .post .kicker{color:var(--muted); font-weight:700; font-size:13px}
    .subscribe{background:linear-gradient(180deg,#ffffff,#f7f9fb); padding:18px; border-radius:12px; display:flex; gap:12px; align-items:center}
    .subscribe input{flex:1; padding:10px 12px; border-radius:10px; border:1px solid rgba(15,23,36,0.06)}
    /* footer */
    footer{margin-top:30px; padding:30px 0; color:var(--muted)}
    .footer-grid{display:grid; grid-template-columns:1fr 1fr; gap:20px; align-items:start}
    .socials{display:flex; gap:10px}
    /* responsive */
    @media (max-width:1100px){.items-grid{grid-template-columns:repeat(3,1fr)} .hero .right{display:none}}
    @media (max-width:820px){.topbar{flex-direction:column; align-items:flex-start} .searchbar input{width:160px} .items-grid{grid-template-columns:repeat(2,1fr)} .blog-grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.items-grid{grid-template-columns:1fr} .hero{flex-direction:column} .searchbar input{width:100px} .nav-link{display:none}}
    /* small UI niceties */
    .toast{position:fixed; bottom:24px; right:24px; background:#111827; color:white; padding:12px 16px; border-radius:10px; box-shadow:0 10px 30px rgba(2,6,23,0.3); display:none; z-index:90}
    .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="topbar" role="navigation" aria-label="Main Navigation">
        <a class="brand" href="#" aria-label="ShopSphere home">
          <div class="logo">SS</div>
          <div>
            <div style="font-weight:800">ShopSphere</div>
            <div style="font-size:12px;color:var(--muted);margin-top:2px">Find what you love</div>
          </div>
        </a>

        <div class="searchbar" role="search" aria-label="Site search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35" stroke="#6b7280" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>
            <circle cx="11" cy="11" r="6" stroke="#6b7280" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></circle>
          </svg>
          <input type="search" placeholder="Search popular products, brands..." aria-label="Search products" id="searchInput">
          <button class="btn" id="searchBtn" aria-label="Search">Search</button>
        </div>

        <nav>
          <a class="nav-link" href="#popular">Popular</a>
          <a class="nav-link" href="#deals">Deals</a>
          <a class="nav-link" href="#blog">Blog</a>
          <div class="cta">
            <button class="btn ghost" aria-label="Account">Account</button>
            <button class="cart-btn" id="cartBtn" aria-label="Open cart">
              Cart
              <span class="cart-count" id="cartCount" aria-live="polite">0</span>
            </button>
          </div>
        </nav>
      </div>
    </div>
  </header>

  <main class="container" id="main">
    <section class="hero" aria-labelledby="hero-heading">
      <div class="left">
        <h1 id="hero-heading">Discover items people love — fast delivery, great prices</h1>
        <p>Curated collections, flash deals, and editor picks to help you shop smarter.</p>

        <div class="categories" aria-label="Popular categories">
          <button class="category" data-category="electronics">Electronics</button>
          <button class="category" data-category="home">Home</button>
          <button class="category" data-category="fashion">Fashion</button>
          <button class="category" data-category="outdoors">Outdoors</button>
          <button class="category" data-category="beauty">Beauty</button>
        </div>

        <div style="margin-top:16px; display:flex; gap:10px">
          <button class="btn" id="shopNow">Shop Now</button>
          <button class="btn ghost" id="learnMore">How it works</button>
        </div>
      </div>

      <div class="right" aria-hidden="true">
        <img class="promo" src="https://images.unsplash.com/photo-1606813908778-3f8a3d96b8b7?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=d2e41e9a6c8ffb55f9f6b3ec59d0e8e2" alt="Promotional banner">
      </div>
    </section>

    <section id="popular" class="section" aria-labelledby="popular-heading">
      <div class="section-header">
        <h2 id="popular-heading">Popular Items</h2>
        <div>
          <label for="sort" class="sr-only">Sort items</label>
          <select id="sort" aria-label="Sort popular items">
            <option value="best">Best Selling</option>
            <option value="rating">Top Rated</option>
            <option value="price-low">Price: Low to High</option>
            <option value="price-high">Price: High to Low</option>
          </select>
        </div>
      </div>

      <div class="grid items-grid" id="productsGrid" role="list">
        <!-- Product cards inserted in DOM -->
      </div>
    </section>

    <section id="deals" class="section" aria-labelledby="deals-heading">
      <div class="section-header">
        <h2 id="deals-heading">Today's Deals</h2>
        <button class="cta-small" id="viewAllDeals">View all deals</button>
      </div>

      <div class="carousel" aria-roledescription="carousel" aria-label="Featured deals">
        <div class="slides" id="slides">
          <!-- slides -->
          <article class="deal" data-deal-id="d1" role="group" aria-roledescription="slide" aria-label="Deal 1">
            <img src="https://images.unsplash.com/photo-1606813908431-1f9f8f26e8c4?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=2b5b0b5f1adf6b6dcf4a1f2b0c9f6a3e" alt="Wireless headphones">
            <div class="deal-info">
              <span class="tag">Flash 40% Off</span>
              <h3 style="margin:8px 0 6px">Wireless Headphones — Active Noise Canceling</h3>
              <p style="margin:0;color:var(--muted)">High-fidelity sound with comfortable fit and 30 hours battery life.</p>
              <div style="display:flex; gap:10px; align-items:center; margin-top:10px">
                <div style="font-weight:800; font-size:18px">$89 <span style="font-weight:600; color:var(--muted); text-decoration:line-through; font-size:14px">$149</span></div>
                <div id="countdown-d1" style="color:#b91c1c; font-weight:700; margin-left:8px">00:18:12</div>
                <button class="btn" data-id="p1">Add</button>
              </div>
            </div>
          </article>

          <article class="deal" data-deal-id="d2" role="group" aria-roledescription="slide" aria-label="Deal 2">
            <img src="https://images.unsplash.com/photo-1611870070454-1550b3e26e88?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=3c6f8b2c9a8e3f4b0c7d1b2a3e4f9c0d" alt="Smartwatch">
            <div class="deal-info">
              <span class="tag">Deal</span>
              <h3 style="margin:8px 0 6px">Smartwatch Series 7 — Fitness & Sleep</h3>
              <p style="margin:0;color:var(--muted)">Advanced health sensors, AMOLED display and interchangeable bands.</p>
              <div style="display:flex; gap:10px; align-items:center; margin-top:10px">
                <div style="font-weight:800; font-size:18px">$129 <span style="font-weight:600; color:var(--muted); text-decoration:line-through; font-size:14px">$199</span></div>
                <button class="btn" data-id="p3">Add</button>
              </div>
            </div>
          </article>

          <article class="deal" data-deal-id="d3" role="group" aria-roledescription="slide" aria-label="Deal 3">
            <img src="https://images.unsplash.com/photo-1602526230665-0b9f3d7b1c8d?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=bb5c6f5f78b2f4a1b2c3d4e5f6a7b8c9" alt="Blender">
            <div class="deal-info">
              <span class="tag">Limited</span>
              <h3 style="margin:8px 0 6px">High-Speed Blender — 1200W</h3>
              <p style="margin:0;color:var(--muted)">Perfect for smoothies, soups and nut butter — durable glass jar.</p>
              <div style="display:flex; gap:10px; align-items:center; margin-top:10px">
                <div style="font-weight:800; font-size:18px">$69 <span style="font-weight:600; color:var(--muted); text-decoration:line-through; font-size:14px">$119</span></div>
                <button class="btn" data-id="p6">Add</button>
              </div>
            </div>
          </article>
        </div>

        <div class="carousel-controls" aria-hidden="false">
          <button class="ctrl" id="prev" aria-label="Previous deal">‹</button>
          <button class="ctrl" id="next" aria-label="Next deal">›</button>
        </div>
      </div>
    </section>

    <section id="blog" class="section" aria-labelledby="blog-heading">
      <div class="section-header">
        <h2 id="blog-heading">From the Blog</h2>
        <a class="cta-small" href="#blog-list">See all posts</a>
      </div>

      <div class="grid blog-grid">
        <article class="post" aria-labelledby="post-1">
          <img src="https://images.unsplash.com/photo-1507679799987-c73779587ccf?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8d3b6b3fb0f9f9d5f7a4f0f7f0a1d7e8" alt="Home organization tips">
          <div class="post-body">
            <div class="kicker">Guides</div>
            <h3 id="post-1" style="margin:8px 0 6px">5 Ways to Organize Your Home for Better Living</h3>
            <p style="margin:0;color:var(--muted);font-size:14px">Simple, budget-friendly ideas to maximize space and keep things tidy.</p>
          </div>
        </article>

        <article class="post" aria-labelledby="post-2">
          <img src="https://images.unsplash.com/photo-1512496015851-a90fb38ba796?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=3a2b8d8738a4b9a1c7c2d4f2b6d7e8a9" alt="Gadget gift ideas">
          <div class="post-body">
            <div class="kicker">Buying Guide</div>
            <h3 id="post-2" style="margin:8px 0 6px">Top 10 Gift Ideas for Tech Lovers</h3>
            <p style="margin:0;color:var(--muted);font-size:14px">From earbuds to smart home gadgets — curated for every budget.</p>
          </div>
        </article>

        <article class="post" aria-labelledby="post-3">
          <img src="https://images.unsplash.com/photo-1494997139859-2b7f9ebc7a20?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=57a8c0b7b8c1d0f6d7e0a1b2c3d4e5f6" alt="Sustainable shopping tips">
          <div class="post-body">
            <div class="kicker">Lifestyle</div>
            <h3 id="post-3" style="margin:8px 0 6px">Sustainable Shopping: How to Choose Eco-Friendly Products</h3>
            <p style="margin:0;color:var(--muted);font-size:14px">Small changes that make a big environmental impact.</p>
          </div>
        </article>
      </div>
    </section>

    <section class="section" aria-labelledby="subscribe-heading" style="margin-top:26px">
      <div class="subscribe" role="region" aria-label="Subscribe to newsletter">
        <div style="display:flex; gap:12px; align-items:center;">
          <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M20 8v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8" stroke="#06b6d4" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 13v6" stroke="#06b6d4" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M20 8l-8 5-8-5" stroke="#06b6d4" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div>
            <div id="subscribe-heading" style="font-weight:800">Get deals & product picks — weekly</div>
            <div style="color:var(--muted); font-size:13px">Exclusive offers, blog highlights and first dibs on flash sales.</div>
          </div>
        </div>

        <form id="subscribeForm" style="display:flex; gap:8px; margin-left:auto; width:40%" aria-label="Subscribe form">
          <label for="email" class="sr-only">Email address</label>
          <input id="email" type="email" placeholder="you@example.com" required>
          <button class="btn" type="submit">Subscribe</button>
        </form>
      </div>
    </section>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>

  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div>
          <div style="display:flex; gap:12px; align-items:center">
            <div class="logo" style="width:48px;height:48px;border-radius:10px;font-size:20px">SS</div>
            <div>
              <div style="font-weight:800">ShopSphere</div>
              <div style="color:var(--muted); font-size:13px">Fast shipping · 30-day returns · Secure payments</div>
            </div>
          </div>

          <div style="margin-top:14px; color:var(--muted); font-size:14px">
            © <span id="year"></span> ShopSphere, Inc. All rights reserved.
          </div>
        </div>

        <div style="display:flex; justify-content:flex-end; gap:18px; align-items:start; flex-direction:column">
          <div style="display:flex; gap:12px;">
            <a href="#" style="color:var(--muted); text-decoration:none">Help</a>
            <a href="#" style="color:var(--muted); text-decoration:none">Shipping</a>
            <a href="#" style="color:var(--muted); text-decoration:none">Returns</a>
            <a href="#" style="color:var(--muted); text-decoration:none">Privacy</a>
          </div>

          <div class="socials" aria-label="Follow us">
            <a href="#" aria-label="Follow on Twitter" style="color:var(--muted)"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M23 4.5c-.7.3-1.5.5-2.3.6.8-.5 1.4-1.3 1.7-2.2-.8.5-1.7.9-2.6 1.1C18.6 3 17.5 2.5 16.3 2.5c-2.2 0-4 1.8-4 4 0 .3 0 .6.1.9-3.3-.2-6.2-1.8-8.1-4.3-.3.5-.5 1.2-.5 1.9 0 1.6.8 3 2.1 3.8-.7 0-1.4-.2-1.9-.5 0 2.1 1.5 3.8 3.5 4.2-.4.1-.8.1-1.2.1-.3 0-.6 0-.9-.1.6 1.8 2.4 3.1 4.5 3.1-1.7 1.3-3.8 2-6.1 2-.4 0-.9 0-1.3-.1C3.9 21.1 6.6 22 9.6 22c7.1 0 11-5.9 11-11v-.5c.8-.6 1.4-1.4 1.9-2.3-.7.3-1.5.5-2.3.6z" fill="currentColor"/></svg></a>
            <a href="#" aria-label="Follow on Instagram" style="color:var(--muted)"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M17.5 6.5h.01" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg></a>
            <a href="#" aria-label="Follow on Facebook" style="color:var(--muted)"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M22 12.07C22 6.48 17.52 2 11.93 2 6.35 2 1.86 6.48 1.86 12.07c0 4.99 3.66 9.13 8.44 9.86v-6.98H8.17v-2.88h2.13V9.41c0-2.11 1.25-3.28 3.16-3.28.92 0 1.88.17 1.88.17v2.07h-1.06c-1.05 0-1.37.65-1.37 1.32v1.59h2.33l-.37 2.88h-1.96v6.98c4.79-.73 8.45-4.87 8.45-9.86z" fill="currentColor"/></svg></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script>
    // Sample product dataset
    const products = [
      {id:'p1', title:'Wireless Headphones', desc:'Noise-cancelling, comfy earcups', price:89, old:149, rating:4.7, img:'https://images.unsplash.com/photo-1518444029131-2f7d4a6c7e6e?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=adf4f4b3e8c5d2b1c3d4e5f6a7b8c9d0'},
      {id:'p2', title:'Portable Charger 20000mAh', desc:'Fast-charge power bank with USB-C', price:39, old:null, rating:4.5, img:'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=9a6b6f4b8b3a1c2d3e4f5a6b7c8d9e0f'},
      {id:'p3', title:'Smartwatch Series 7', desc:'Fitness tracking & sleep analysis', price:129, old:199, rating:4.6, img:'https://images.unsplash.com/photo-1519741499875-7d2a3f1a0f5f?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=3b4c5d6e7f8a9b0c1d2e3f4a5b6c7d8e'},
      {id:'p4', title:'Everyday Backpack', desc:'Water-resistant, laptop compartment', price:59, old:null, rating:4.4, img:'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=5c6a7b8d9e0f1a2b3c4d5e6f7a8b9c0d'},
      {id:'p5', title:'Ceramic Coffee Mug', desc:'12oz double-walled, keeps coffee warm', price:14, old:null, rating:4.8, img:'https://images.unsplash.com/photo-1498804103079-a6351b050096?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=4e5f6a7b8c9d0a1b2c3d4e5f6a7b8c9d'},
      {id:'p6', title:'High-Speed Blender', desc:'1200W motor with multiple speeds', price:69, old:119, rating:4.3, img:'https://images.unsplash.com/photo-1564836236740-4f4bca4f0f9a?q=80&w=800&auto=format&fit=crop&ixlib=rb-4.0.3&s=b7e8f9a0c1d2e3f4a5b6c7d8e9f0a1b2'}
    ];

    const productsGrid = document.getElementById('productsGrid');
    const cartCountEl = document.getElementById('cartCount');
    const toast = document.getElementById('toast');

    // Load cart from storage
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    cartCountEl.textContent = cart.length;

    function renderProducts(list){
      productsGrid.innerHTML = '';
      list.forEach(p => {
        const item = document.createElement('article');
        item.className = 'card';
        item.setAttribute('role','listitem');
        item.innerHTML = `
          <img loading="lazy" src="${p.img}" alt="${p.title}">
          <div class="meta">
            <h3 class="title">${p.title}</h3>
            <p>${p.desc}</p>
            <div class="price-row">
              <div class="price">$${p.price}</div>
              ${p.old ? `<div class="old-price">$${p.old}</div>` : ''}
              <div class="rating" aria-label="${p.rating} out of 5 stars">★ ${p.rating}</div>
            </div>
            <div class="card-actions">
              <button class="btn add-to-cart" data-id="${p.id}">Add to Cart</button>
              <button class="btn ghost view" data-id="${p.id}">View</button>
            </div>
          </div>
        `;
        productsGrid.appendChild(item);
      });
    }

    renderProducts(products);

    // Add to cart interactions
    document.body.addEventListener('click', (e) => {
      const add = e.target.closest('.add-to-cart');
      if(add){
        const id = add.dataset.id;
        addToCart(id);
      }
      const view = e.target.closest('.view');
      if(view){
        const id = view.dataset.id;
        showToast('Open product page — demo only');
      }
      // deals add buttons
      const dealAdd = e.target.closest('.deal .btn');
      if(dealAdd && dealAdd.dataset.id){
        addToCart(dealAdd.dataset.id);
      }
    });

    function addToCart(id){
      const p = products.find(x => x.id === id) || {id};
      cart.push({id: p.id, added:Date.now()});
      localStorage.setItem('cart', JSON.stringify(cart));
      cartCountEl.textContent = cart.length;
      showToast('Added to cart');
    }

    function showToast(msg){
      toast.textContent = msg;
      toast.style.display = 'block';
      setTimeout(()=>{ toast.style.opacity='1'; },20);
      clearTimeout(window._t);
      window._t = setTimeout(()=>{ toast.style.opacity='0'; setTimeout(()=>toast.style.display='none',300); },2000);
    }

    // Sorting
    document.getElementById('sort').addEventListener('change', (e) => {
      const val = e.target.value;
      let sorted = [...products];
      if(val === 'rating') sorted.sort((a,b) => b.rating - a.rating);
      if(val === 'price-low') sorted.sort((a,b) => a.price - b.price);
      if(val === 'price-high') sorted.sort((a,b) => b.price - a.price);
      renderProducts(sorted);
    });

    // Category filters
    document.querySelectorAll('.category').forEach(btn=>{
      btn.addEventListener('click', () => {
        const cat = btn.dataset.category;
        showToast('Filtering: ' + cat);
        // demo: just shuffle products slightly to simulate filter
        const shuffled = products.slice().sort(()=>Math.random()-0.5).slice(0,4);
        renderProducts(shuffled);
      });
    });

    // Simple deals carousel
    const slides = document.getElementById('slides');
    const prev = document.getElementById('prev');
    const next = document.getElementById('next');
    let idx = 0;
    const total = slides.children.length;

    function goTo(i){
      idx = (i + total) % total;
      slides.style.transform = `translateX(${-idx * 100}%)`;
    }

    prev.addEventListener('click', ()=>goTo(idx-1));
    next.addEventListener('click', ()=>goTo(idx+1));
    let auto = setInterval(()=>goTo(idx+1), 6000);
    [prev,next].forEach(btn=>btn.addEventListener('click', ()=>{ clearInterval(auto); auto = setInterval(()=>goTo(idx+1), 6000); }));

    // Countdown for first deal
    const endTime = Date.now() + 1000*60*18 + 1000*12; // 18 minutes 12 seconds
    function updateCountdown(){
      const el = document.getElementById('countdown-d1');
      if(!el) return;
      const diff = Math.max(0, endTime - Date.now());
      const hrs = Math.floor(diff/3600000);
      const mins = Math.floor((diff%3600000)/60000);
      const secs = Math.floor((diff%60000)/1000);
      el.textContent = `${hrs.toString().padStart(2,'0')}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
      if(diff<=0) clearInterval(window._cd);
    }
    updateCountdown();
    window._cd = setInterval(updateCountdown, 1000);

    // Subscribe form
    document.getElementById('subscribeForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const email = document.getElementById('email').value;
      if(!email) return showToast('Enter a valid email');
      showToast('Thanks! Check your inbox.');
      e.target.reset();
    });

    // Quick search button
    document.getElementById('searchBtn').addEventListener('click', ()=>{
      const q = document.getElementById('searchInput').value.trim().toLowerCase();
      if(!q) return showToast('Type to search');
      const filtered = products.filter(p => p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q));
      if(filtered.length) {
        renderProducts(filtered);
        document.getElementById('popular').scrollIntoView({behavior:'smooth'});
      } else {
        showToast('No results found');
      }
    });

    // accessibility: keyboard shortcut 'f' focuses search
    document.addEventListener('keydown', (e)=>{
      if(e.key.toLowerCase() === 'f' && !e.metaKey && !e.ctrlKey){
        e.preventDefault();
        document.getElementById('searchInput').focus();
        showToast('Focus search');
      }
    });

    // Set footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Small performance: prefer-reduced-motion respect
    if(window.matchMedia('(prefers-reduced-motion: reduce)').matches){
      clearInterval(auto);
      slides.style.transition = 'none';
    }
  </script>
</body>
</html>