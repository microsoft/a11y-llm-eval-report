<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopSphere — Discover Deals & Popular Finds</title>
  <meta name="description" content="ShopSphere: curated popular items, limited-time deals, and helpful articles to make smarter shopping choices." />
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --accent:#0b74ff;
      --accent-2:#ff6b35;
      --muted:#6b7280;
      --glass: rgba(255,255,255,0.7);
      --success:#16a34a;
      --danger:#ef4444;
      --radius:12px;
      --container:1200px;
      --shadow: 0 6px 18px rgba(15,23,42,0.08);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg, #f6f7fb 0%, #eef2ff 100%);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.35;
    }
    .wrap{max-width:var(--container);margin:0 auto;padding:28px;}
    header{
      position:sticky;top:0;z-index:60;
      backdrop-filter: blur(8px);
      background: rgba(255,255,255,0.6);
      border-bottom:1px solid rgba(15,23,42,0.04);
      box-shadow: 0 2px 10px rgba(2,6,23,0.03);
    }
    .topbar{display:flex;align-items:center;gap:18px;padding:16px 24px;}
    .brand{display:flex;align-items:center;gap:12px;font-weight:700;font-size:18px;color:var(--accent);}
    .logo{
      width:44px;height:44px;border-radius:10px;display:inline-grid;place-items:center;
      background:linear-gradient(135deg,var(--accent),#4fd1c5);
      color:white;font-weight:800;box-shadow:var(--shadow);
    }
    nav{margin-left:12px;}
    .nav-list{display:flex;gap:12px;align-items:center}
    .nav-list a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px;font-weight:600}
    .nav-list a:hover, .nav-list a:focus{background:rgba(11,116,255,0.08);color:var(--accent);outline:none}
    .search-wrap{flex:1;display:flex;align-items:center;gap:12px;}
    .search{
      display:flex;align-items:center;background:var(--card);padding:8px;border-radius:12px;box-shadow:var(--shadow);flex:1;gap:8px;
      min-width:0;
    }
    .search input{border:0;outline:none;padding:10px 6px;font-size:14px;background:transparent;width:100%}
    .icon-btn{background:transparent;border:0;padding:8px;border-radius:10px;cursor:pointer;color:var(--muted)}
    .actions{display:flex;gap:8px;align-items:center}
    .cart-btn{position:relative}
    .cart-count{position:absolute;right:-6px;top:-6px;background:var(--accent-2);color:white;padding:3px 6px;border-radius:999px;font-size:12px;font-weight:700}
    /* Hero */
    .hero{display:grid;grid-template-columns:1fr 420px;gap:20px;align-items:stretch;padding:28px 24px}
    .hero-card{background:linear-gradient(180deg,#ffffff,#fbfdff);border-radius:16px;padding:28px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:12px}
    .hero h1{margin:0;font-size:28px}
    .hero p{margin:0;color:var(--muted)}
    .promo-badges{display:flex;gap:8px;margin-top:6px;flex-wrap:wrap}
    .badge{background:rgba(11,116,255,0.08);color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:700;font-size:13px}
    .hero-cta{display:flex;gap:10px;margin-top:10px}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn.alt{background:transparent;border:1px solid rgba(11,116,255,0.12);color:var(--accent)}
    .hero-visual{display:grid;place-items:center}
    .hero-visual img{width:100%;max-width:360px;border-radius:14px;box-shadow:0 20px 40px rgba(11,116,255,0.08)}
    /* categories */
    .categories{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}
    .cat{background:linear-gradient(180deg,#fff,#f8fafc);padding:10px 12px;border-radius:12px;display:flex;gap:10px;align-items:center;min-width:120px;box-shadow:var(--shadow);cursor:pointer;border:1px solid rgba(15,23,42,0.02)}
    .cat svg{width:36px;height:36px;border-radius:10px;padding:7px;background:linear-gradient(135deg,#f1f5f9,#e6eefb);color:var(--accent)}
    /* Sections */
    section{margin-top:28px}
    .section-header{display:flex;justify-content:space-between;align-items:end;gap:12px}
    .section-header h2{margin:0;font-size:18px}
    .section-sub{color:var(--muted);font-size:13px}
    .see-all{color:var(--muted);text-decoration:none;font-weight:700}
    /* Product grid */
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;margin-top:16px}
    .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:10px;transition:transform .16s}
    .card:hover{transform:translateY(-6px)}
    .thumb{width:100%;aspect-ratio:1.2/1;border-radius:8px;overflow:hidden;display:block;background:#f2f4f8}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .product-title{font-weight:700;font-size:15px;margin:0}
    .meta{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:800;color:var(--accent-2)}
    .old{color:var(--muted);text-decoration:line-through;font-size:13px}
    .rating{color:#f59e0b;font-size:13px}
    .card-actions{display:flex;gap:8px;align-items:center}
    .small-btn{background:transparent;border:1px solid rgba(15,23,42,0.06);padding:8px;border-radius:10px;cursor:pointer}
    .fav.active{background:linear-gradient(90deg,#fff1f0,#fff7f6);border-color:rgba(239,68,68,0.08);color:var(--danger)}
    /* Deals carousel */
    .carousel{position:relative;overflow:hidden;border-radius:12px;padding:12px;background:linear-gradient(90deg,#fff7ed,#fff4f2);display:flex;align-items:center;gap:12px}
    .carousel-track{display:flex;gap:12px;transition:transform .5s ease}
    .deal-card{min-width:260px;background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow)}
    .deal-price{font-weight:900;color:var(--accent-2);font-size:18px}
    .countdown{display:flex;gap:8px;margin-top:8px}
    .count-item{background:#0f172a;color:white;padding:6px 10px;border-radius:8px;font-weight:800;font-size:13px;min-width:44px;text-align:center}
    .carousel-controls{display:flex;gap:8px;align-items:center}
    .dot{width:8px;height:8px;border-radius:999px;background:rgba(15,23,42,0.12)}
    .dot.active{background:var(--accent)}
    /* Blog */
    .blog-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:16px}
    .post{display:flex;flex-direction:column;gap:10px;background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow)}
    .post-thumb{height:140px;border-radius:10px;overflow:hidden}
    .post-thumb img{width:100%;height:100%;object-fit:cover}
    .post-meta{color:var(--muted);font-size:13px}
    /* footer */
    footer{margin-top:34px;padding:28px;border-top:1px solid rgba(15,23,42,0.04);background:transparent}
    .footer-grid{display:flex;gap:24px;flex-wrap:wrap;justify-content:space-between;align-items:flex-start}
    .foot-col{min-width:160px}
    .socials{display:flex;gap:10px;margin-top:8px}
    .newsletter{display:flex;gap:8px;margin-top:10px}
    .newsletter input{padding:10px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);outline:none}
    /* Responsive */
    @media (max-width:1100px){
      .grid{grid-template-columns:repeat(3,1fr)}
      .hero{grid-template-columns:1fr}
    }
    @media (max-width:820px){
      .grid{grid-template-columns:repeat(2,1fr)}
      .blog-grid{grid-template-columns:repeat(2,1fr)}
      .nav-list{display:none}
    }
    @media (max-width:520px){
      .grid{grid-template-columns:repeat(1,1fr)}
      .hero-card{padding:18px}
      .search-wrap{display:none}
      .topbar{padding:12px}
    }
    /* Accessibility focus */
    a:focus, button:focus, input:focus{outline:3px solid rgba(11,116,255,0.12);outline-offset:2px}
    /* subtle helper text */
    .muted{color:var(--muted);font-size:13px}
  </style>
</head>
<body>
  <header role="banner">
    <div class="wrap topbar">
      <div style="display:flex;align-items:center;">
        <div class="brand" aria-label="ShopSphere home">
          <div class="logo" aria-hidden="true">SS</div>
          <div>
            <div style="font-size:14px">ShopSphere</div>
            <div style="font-size:11px;color:var(--muted);font-weight:600">Find it. Love it. Buy it.</div>
          </div>
        </div>
      </div>

      <nav aria-label="Main navigation">
        <div class="nav-list" role="menubar">
          <a role="menuitem" href="#" aria-current="page">Home</a>
          <a role="menuitem" href="#">Categories</a>
          <a role="menuitem" href="#">Deals</a>
          <a role="menuitem" href="#">Blog</a>
          <a role="menuitem" href="#">Support</a>
        </div>
      </nav>

      <div class="search-wrap" style="margin-left:auto;">
        <div class="search" role="search" aria-label="Search products">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input id="searchInput" type="search" placeholder="Search for products, brands, categories..." aria-label="Search input" />
          <button class="icon-btn" id="searchBtn" aria-label="Start search">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M12 5v14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="actions" role="group" aria-label="Utility actions">
        <button class="icon-btn" aria-label="Your account">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="icon-btn cart-btn" aria-label="View cart" id="cartBtn">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 6h15l-1.5 9h-13z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="9" cy="20" r="1" fill="currentColor"/>
            <circle cx="19" cy="20" r="1" fill="currentColor"/>
          </svg>
          <span class="cart-count" id="cartCount" aria-hidden="true">0</span>
        </button>
      </div>
    </div>
  </header>

  <main class="wrap" role="main">
    <section class="hero" aria-labelledby="heroHeading">
      <div class="hero-card">
        <h1 id="heroHeading">Discover popular picks and lightning-fast deals</h1>
        <p class="muted">Curated products, best prices, and expert tips — all in one place. Save more with limited-time bundles and exclusive blog guides.</p>

        <div class="promo-badges" aria-hidden="true">
          <div class="badge">Free shipping over $50</div>
          <div class="badge" style="background:linear-gradient(90deg,#fff7ed,#fff4f2);color:var(--accent-2)">Deal of the day</div>
          <div class="badge">Editor’s picks</div>
        </div>

        <div style="display:flex;gap:10px;align-items:center;margin-top:12px;">
          <div>
            <div style="font-size:13px;color:var(--muted)">Shop by category</div>
            <div class="categories" role="list">
              <div class="cat" role="listitem" tabindex="0">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 3h6l1 2h8l2 6v8H3V3z" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <div>
                  <div style="font-weight:700">Fashion</div>
                  <div class="muted" style="font-size:12px">Trending</div>
                </div>
              </div>

              <div class="cat" role="listitem" tabindex="0">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 12h18" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M5 8h14" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <div>
                  <div style="font-weight:700">Home</div>
                  <div class="muted" style="font-size:12px">Essentials</div>
                </div>
              </div>

              <div class="cat" role="listitem" tabindex="0">
                <svg viewBox="0 0 24 24" fill="none" aria-hidden="true"><circle cx="12" cy="8" r="3" stroke="currentColor" stroke-width="1.4"/><path d="M5 20c1.9-3.3 5.3-5 7-5s5.1 1.7 7 5" stroke="currentColor" stroke-width="1.4"/></svg>
                <div>
                  <div style="font-weight:700">Beauty</div>
                  <div class="muted" style="font-size:12px">New</div>
                </div>
              </div>
            </div>
          </div>

          <div style="margin-left:auto;display:flex;flex-direction:column;gap:8px;align-items:flex-end;">
            <div class="hero-cta">
              <button class="btn" id="shopNowBtn">Shop now</button>
              <button class="btn alt">Explore deals</button>
            </div>
            <div class="muted" style="font-size:13px">Fast delivery • Easy returns • Secure checkout</div>
          </div>
        </div>
      </div>

      <div class="hero-visual" aria-hidden="true">
        <img src="https://picsum.photos/seed/shop/640/480" alt="Featured products" loading="lazy"/>
      </div>
    </section>

    <!-- Popular items -->
    <section aria-labelledby="popularHeading">
      <div class="section-header">
        <div>
          <h2 id="popularHeading">Popular right now</h2>
          <div class="section-sub">Top-rated items our shoppers love</div>
        </div>
        <a href="#" class="see-all">See all popular</a>
      </div>

      <div class="grid" id="popularGrid" aria-live="polite">
        <!-- Product cards will be injected here -->
      </div>
    </section>

    <!-- Deals -->
    <section aria-labelledby="dealsHeading">
      <div class="section-header">
        <div>
          <h2 id="dealsHeading">Limited-time deals</h2>
          <div class="section-sub">Grab them before they're gone</div>
        </div>
        <div class="carousel-controls">
          <button class="small-btn" id="prevDeal" aria-label="Previous deal">◀</button>
          <div id="dealDots" style="display:flex;gap:6px;padding:0 6px;align-items:center" aria-hidden="true"></div>
          <button class="small-btn" id="nextDeal" aria-label="Next deal">▶</button>
        </div>
      </div>

      <div class="carousel" aria-roledescription="carousel" aria-label="Deals carousel" id="dealsCarousel">
        <div class="carousel-track" id="carouselTrack" role="list">
          <!-- Deal cards injected here -->
        </div>
      </div>
    </section>

    <!-- Blog posts -->
    <section aria-labelledby="blogHeading">
      <div class="section-header">
        <div>
          <h2 id="blogHeading">From our blog</h2>
          <div class="section-sub">Expert buying guides, trend reports, and tips</div>
        </div>
        <a href="#" class="see-all">View all posts</a>
      </div>

      <div class="blog-grid" id="blogGrid">
        <!-- Posts injected here -->
      </div>
    </section>

    <!-- Newsletter -->
    <section aria-labelledby="newsHeading">
      <div class="section-header">
        <div>
          <h2 id="newsHeading">Stay in the loop</h2>
          <div class="section-sub">Get exclusive deals and weekly inspiration</div>
        </div>
        <div class="muted">No spam — unsubscribe anytime</div>
      </div>

      <form id="newsletterForm" class="newsletter" onsubmit="return false;" aria-label="Newsletter signup">
        <input id="newsletterEmail" type="email" placeholder="Your email address" aria-label="Email address" required />
        <button class="btn" type="submit">Subscribe</button>
      </form>
      <div id="newsletterMsg" class="muted" style="margin-top:10px"></div>
    </section>
  </main>

  <footer>
    <div class="wrap footer-grid" role="contentinfo">
      <div style="display:flex;gap:18px;align-items:flex-start;flex:1">
        <div class="foot-col">
          <div style="font-weight:800;font-size:16px;color:var(--accent)">ShopSphere</div>
          <div class="muted" style="max-width:240px;margin-top:8px">A thoughtful shopping experience with curated picks, smart deals, and useful advice.</div>
          <div class="socials" aria-label="Social media">
            <a href="#" aria-label="Follow on Twitter" style="display:inline-grid;place-items:center;width:36px;height:36px;border-radius:8px;background:#eaf2ff;color:var(--accent)"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 22.43.36a9 9 0 0 1-2.84 1.08A4.5 4.5 0 0 0 16.6 0c-2.48 0-4.5 2.04-4.5 4.55 0 .36.04.71.12 1.05A12.8 12.8 0 0 1 1.67.88a4.43 4.43 0 0 0-.61 2.29c0 1.57.8 2.95 2.02 3.76A4.48 4.48 0 0 1 .9 6v.06c0 2.2 1.58 4.03 3.67 4.44a4.46 4.46 0 0 1-2.03.08c.57 1.78 2.21 3.08 4.15 3.11A9 9 0 0 1 0 19.54a12.7 12.7 0 0 0 6.92 2.02c8.3 0 12.85-7.08 12.85-13.22v-.6A9.44 9.44 0 0 0 23 3z" fill="currentColor"/></svg></a>
            <a href="#" aria-label="Follow on Instagram" style="display:inline-grid;place-items:center;width:36px;height:36px;border-radius:8px;background:#fff0f6;color:var(--accent-2)"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect x="3" y="3" width="18" height="18" rx="5" stroke="currentColor" stroke-width="1.2"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="1.2"/><circle cx="17.5" cy="6.5" r="0.6" fill="currentColor"/></svg></a>
            <a href="#" aria-label="Follow on Facebook" style="display:inline-grid;place-items:center;width:36px;height:36px;border-radius:8px;background:#eef6ff;color:var(--accent)"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M18 2h-3a4 4 0 0 0-4 4v2H8v3h3v7h3v-7h2.5l.5-3H14V6a1 1 0 0 1 1-1h3V2z" fill="currentColor"/></svg></a>
          </div>
        </div>

        <div class="foot-col" style="min-width:120px">
          <div style="font-weight:700">Shop</div>
          <nav aria-label="Footer shop">
            <ul style="list-style:none;padding:0;margin-top:8px">
              <li><a href="#" class="muted">All products</a></li>
              <li><a href="#" class="muted">New arrivals</a></li>
              <li><a href="#" class="muted">Gift cards</a></li>
              <li><a href="#" class="muted">Stores</a></li>
            </ul>
          </nav>
        </div>

        <div class="foot-col" style="min-width:120px">
          <div style="font-weight:700">Help</div>
          <nav aria-label="Footer help">
            <ul style="list-style:none;padding:0;margin-top:8px">
              <li><a href="#" class="muted">Shipping</a></li>
              <li><a href="#" class="muted">Returns</a></li>
              <li><a href="#" class="muted">Payment</a></li>
              <li><a href="#" class="muted">Contact</a></li>
            </ul>
          </nav>
        </div>
      </div>

      <div style="width:100%;display:flex;justify-content:space-between;margin-top:20px;align-items:center;flex-wrap:wrap;">
        <div class="muted">© <span id="year"></span> ShopSphere. All rights reserved.</div>
        <div class="muted">Made with ♥ for smarter shopping</div>
      </div>
    </div>
  </footer>

  <script>
    // Sample product data
    const products = [
      { id:1, title:"Minimalist Leather Backpack", price:79.99, old:129.99, rating:4.8, img:"https://picsum.photos/seed/p1/600/480" },
      { id:2, title:"Wireless Noise-Canceling Headphones", price:129.00, old:199.00, rating:4.7, img:"https://picsum.photos/seed/p2/600/480" },
      { id:3, title:"Stainless Steel Water Bottle 1L", price:22.50, old:29.99, rating:4.9, img:"https://picsum.photos/seed/p3/600/480" },
      { id:4, title:"Ergonomic Office Chair", price:249.00, old:349.00, rating:4.6, img:"https://picsum.photos/seed/p4/600/480" },
      { id:5, title:"Smart Home LED Light Strip", price:34.99, old:59.99, rating:4.5, img:"https://picsum.photos/seed/p5/600/480" },
      { id:6, title:"Organic Skincare Set", price:49.00, old:79.00, rating:4.8, img:"https://picsum.photos/seed/p6/600/480" },
      { id:7, title:"Compact Air Fryer", price:89.99, old:129.99, rating:4.4, img:"https://picsum.photos/seed/p7/600/480" },
      { id:8, title:"Noise-Isolating Earbuds", price:59.00, old:89.00, rating:4.3, img:"https://picsum.photos/seed/p8/600/480" }
    ];

    const deals = [
      { id:'d1', title:'4K Action Camera', price:119.99, old:199.99, img:'https://picsum.photos/seed/d1/400/300', untilOffsetHours:28 },
      { id:'d2', title:'Smartwatch Series 5', price:149.99, old:249.99, img:'https://picsum.photos/seed/d2/400/300', untilOffsetHours:48 },
      { id:'d3', title:'Portable Projector', price:199.00, old:299.00, img:'https://picsum.photos/seed/d3/400/300', untilOffsetHours:12 },
      { id:'d4', title:'Robot Vacuum Cleaner', price:259.99, old:399.99, img:'https://picsum.photos/seed/d4/400/300', untilOffsetHours:72 }
    ];

    const posts = [
      { id:'b1', title:'How to pick the perfect backpack', excerpt:'A thoughtful guide on choosing a backpack that fits your lifestyle and longevity.', img:'https://picsum.photos/seed/b1/800/600', date:'Oct 2, 2025' },
      { id:'b2', title:'Home kitchen upgrades under $100', excerpt:'Small upgrades that make a big difference in everyday cooking.', img:'https://picsum.photos/seed/b2/800/600', date:'Sep 20, 2025' },
      { id:'b3', title:'Skincare routines for busy people', excerpt:'Quick and effective routines backed by dermatologist tips.', img:'https://picsum.photos/seed/b3/800/600', date:'Sep 10, 2025' }
    ];

    // Populate popular products
    const popularGrid = document.getElementById('popularGrid');
    let cartCount = 0;
    function createProductCard(p){
      const el = document.createElement('article');
      el.className = 'card';
      el.setAttribute('tabindex','0');
      el.setAttribute('aria-labelledby','p-'+p.id);
      el.innerHTML = `
        <a class="thumb" href="#" aria-hidden="true"><img src="${p.img}" alt="${p.title}" loading="lazy"></a>
        <div>
          <h3 id="p-${p.id}" class="product-title">${p.title}</h3>
          <div class="muted" style="margin-top:6px">Free returns • 2-year warranty</div>
        </div>
        <div class="meta">
          <div>
            <div class="price">$${p.price.toFixed(2)}</div>
            <div class="old">${p.old ? '$'+p.old.toFixed(2) : ''}</div>
          </div>
          <div style="text-align:right">
            <div class="rating" aria-hidden="true">${renderStars(p.rating)} <span class="muted" style="font-size:12px">(${p.rating.toFixed(1)})</span></div>
          </div>
        </div>
        <div class="card-actions" style="margin-top:auto;">
          <button class="small-btn add-to-cart" data-id="${p.id}" aria-label="Add ${p.title} to cart">Add to cart</button>
          <button class="small-btn fav" aria-label="Add to wishlist">♡</button>
          <button class="small-btn" aria-label="Quick view" data-id="${p.id}">Quick view</button>
        </div>
      `;
      return el;
    }
    function renderStars(r){
      const full = Math.floor(r);
      let s='';
      for(let i=0;i<5;i++){
        s += i<full ? '★' : '☆';
      }
      return s;
    }
    products.forEach(p=>{
      popularGrid.appendChild(createProductCard(p));
    });

    // Add to cart behavior
    document.addEventListener('click', (e)=>{
      if(e.target.closest('.add-to-cart')){
        const id = e.target.closest('.add-to-cart').dataset.id;
        cartCount++;
        document.getElementById('cartCount').textContent = cartCount;
        // simple visual feedback
        e.target.textContent = 'Added';
        e.target.disabled = true;
        e.target.style.opacity = 0.9;
        setTimeout(()=>{ e.target.textContent = 'Add to cart'; e.target.disabled = false; }, 1400);
      }
      if(e.target.closest('.fav')){
        const btn = e.target.closest('.fav');
        btn.classList.toggle('fav');
        btn.classList.toggle('active');
        btn.textContent = btn.classList.contains('active') ? '♥' : '♡';
        btn.setAttribute('aria-pressed', btn.classList.contains('active'));
      }
      if(e.target.closest('.small-btn') && e.target.getAttribute('aria-label')?.startsWith('Quick view')){
        // quick view modal (simple)
        const id = e.target.dataset.id;
        const prod = products.find(p=>p.id==id);
        if(prod) quickView(prod);
      }
    });

    // Quick view modal
    function quickView(prod){
      const modal = document.createElement('div');
      modal.style.position='fixed';modal.style.inset=0;modal.style.background='rgba(2,6,23,0.4)';
      modal.style.display='grid';modal.style.placeItems='center';modal.style.zIndex=1200;
      modal.innerHTML = `
        <div style="background:white;border-radius:12px;max-width:720px;width:92%;padding:16px;box-shadow:var(--shadow);display:grid;grid-template-columns:1fr 1fr;gap:12px;">
          <div style="border-radius:10px;overflow:hidden"><img src="${prod.img}" alt="${prod.title}" style="width:100%;height:100%;object-fit:cover"></div>
          <div>
            <h3 style="margin:0 0 8px 0">${prod.title}</h3>
            <div class="muted" style="margin-bottom:12px">High demand • Ships in 1-2 days</div>
            <div style="font-size:20px;font-weight:800;color:var(--accent-2)">$${prod.price.toFixed(2)} <span class="old" style="font-size:13px;font-weight:600;margin-left:8px">${prod.old ? '$'+prod.old.toFixed(2) : ''}</span></div>
            <p class="muted" style="margin-top:10px">A great pick for everyday use — comfortable, stylish, and built to last.</p>
            <div style="margin-top:14px;display:flex;gap:10px">
              <button class="btn" id="qAdd">Add to cart</button>
              <button class="btn alt" id="qClose">Close</button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
      document.body.style.overflow='hidden';
      modal.querySelector('#qClose').addEventListener('click', ()=>{ closeModal(); });
      modal.querySelector('#qAdd').addEventListener('click', ()=>{
        cartCount++;document.getElementById('cartCount').textContent = cartCount;
        closeModal();
      });
      modal.addEventListener('click', (ev)=>{
        if(ev.target === modal) closeModal();
      });
      function closeModal(){ modal.remove(); document.body.style.overflow=''; }
    }

    // Populate deals carousel
    const track = document.getElementById('carouselTrack');
    const dealDots = document.getElementById('dealDots');
    const carouselSize = deals.length;
    let currentDeal = 0;
    deals.forEach((d, idx)=>{
      const card = document.createElement('div');
      card.className='deal-card';
      card.setAttribute('role','listitem');
      const until = new Date(Date.now() + d.untilOffsetHours*3600*1000);
      card.innerHTML = `
        <img src="${d.img}" alt="${d.title}" style="width:100%;height:140px;object-fit:cover;border-radius:8px 8px 6px 6px">
        <div style="margin-top:8px;font-weight:800">${d.title}</div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px;">
          <div><div class="deal-price">$${d.price.toFixed(2)}</div><div class="old">${d.old ? '$'+d.old.toFixed(2) : ''}</div></div>
          <div style="text-align:right"><div class="muted" style="font-size:12px">Ends in</div><div class="countdown" data-until="${until.toISOString()}" aria-hidden="true"></div></div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px;">
          <button class="btn">Buy now</button>
          <button class="btn alt">View</button>
        </div>
      `;
      track.appendChild(card);

      // dots
      const dot = document.createElement('div');
      dot.className='dot' + (idx===0 ? ' active' : '');
      dealDots.appendChild(dot);
    });

    // Initialize countdown timers
    function updateCountdowns(){
      document.querySelectorAll('.countdown').forEach(node=>{
        const until = new Date(node.dataset.until);
        const diff = Math.max(0, until - Date.now());
        const hrs = Math.floor(diff/3600000);
        const mins = Math.floor((diff%3600000)/60000);
        const secs = Math.floor((diff%60000)/1000);
        node.innerHTML = `<div class="count-item" title="hours">${hrs}</div><div class="count-item" title="minutes">${String(mins).padStart(2,'0')}</div><div class="count-item" title="seconds">${String(secs).padStart(2,'0')}</div>`;
      });
    }
    updateCountdowns();
    setInterval(updateCountdowns, 1000);

    // Carousel navigation and autoplay
    const prevBtn = document.getElementById('prevDeal');
    const nextBtn = document.getElementById('nextDeal');
    function goToDeal(i){
      currentDeal = (i + carouselSize) % carouselSize;
      const width = track.children[0].getBoundingClientRect().width + 12;
      track.style.transform = `translateX(${-currentDeal * width}px)`;
      Array.from(dealDots.children).forEach((dot, idx)=>dot.classList.toggle('active', idx===currentDeal));
    }
    prevBtn.addEventListener('click', ()=> goToDeal(currentDeal-1));
    nextBtn.addEventListener('click', ()=> goToDeal(currentDeal+1));
    let autoplay = setInterval(()=> goToDeal(currentDeal+1), 4500);
    document.getElementById('dealsCarousel').addEventListener('mouseenter', ()=> clearInterval(autoplay));
    document.getElementById('dealsCarousel').addEventListener('mouseleave', ()=> autoplay = setInterval(()=> goToDeal(currentDeal+1), 4500));

    // Populate blog posts
    const blogGrid = document.getElementById('blogGrid');
    posts.forEach(p=>{
      const card = document.createElement('article');
      card.className='post';
      card.innerHTML = `
        <div class="post-thumb"><img src="${p.img}" alt="${p.title}" loading="lazy"></div>
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div style="font-weight:700">${p.title}</div>
          <div class="muted" style="font-size:12px">${p.date}</div>
        </div>
        <div class="post-meta">${p.excerpt}</div>
        <div style="margin-top:auto;"><a href="#" class="see-all" style="font-weight:700">Read more →</a></div>
      `;
      blogGrid.appendChild(card);
    });

    // Newsletter handling
    const newsletterForm = document.getElementById('newsletterForm');
    newsletterForm.addEventListener('submit', (e)=>{
      const email = document.getElementById('newsletterEmail').value.trim();
      const msg = document.getElementById('newsletterMsg');
      if(!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
        msg.textContent = 'Please enter a valid email address.';
        msg.style.color = 'var(--danger)';
        return;
      }
      msg.textContent = 'Thanks — you are subscribed!';
      msg.style.color = 'var(--success)';
      newsletterForm.reset();
    });

    // Year update
    document.getElementById('year').textContent = new Date().getFullYear();

    // Basic keyboard support for carousel
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'ArrowLeft'){ goToDeal(currentDeal-1); }
      if(e.key === 'ArrowRight'){ goToDeal(currentDeal+1); }
    });

    // Responsive behavior: recalc track transform when resize
    let resizeTimeout;
    window.addEventListener('resize', ()=>{
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(()=> goToDeal(currentDeal), 150);
    });

    // Accessibility: make product cards keyboard-friendly (Enter to quick view)
    popularGrid.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter'){
        const card = e.target.closest('.card');
        if(card){
          const id = card.querySelector('.add-to-cart')?.dataset.id;
          const prod = products.find(p=>p.id==id);
          if(prod) quickView(prod);
        }
      }
    });

    // Minimal search demo (filter popular grid)
    const searchInput = document.getElementById('searchInput');
    document.getElementById('searchBtn').addEventListener('click', ()=> applySearch(searchInput.value));
    searchInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') applySearch(searchInput.value); });
    function applySearch(q){
      const terms = q.trim().toLowerCase();
      Array.from(popularGrid.children).forEach(card=>{
        const title = card.querySelector('.product-title')?.textContent?.toLowerCase() || '';
        card.style.display = terms && !title.includes(terms) ? 'none' : 'flex';
      });
    }

    // Initial focus outline: highlight first product for keyboard users
    window.addEventListener('load', ()=>{ const first = popularGrid.querySelector('.card'); if(first) first.tabIndex = 0; });
  </script>
</body>
</html>