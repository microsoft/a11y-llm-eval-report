<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widgets Demo</title>
  <style>
    :root {
      --border: #d0d7de;
      --bg: #f6f8fa;
      --panel-bg: #ffffff;
      --text: #24292f;
      --accent: #0969da;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: var(--bg);
      margin: 0;
      padding: 2rem 1rem;
      line-height: 1.5;
    }

    h1 {
      margin: 0 0 1rem;
      font-size: 1.75rem;
    }

    p.lead {
      margin: 0 0 1.25rem;
      color: #4b5563;
    }

    .container {
      max-width: 960px;
      margin: 0 auto;
    }

    .example {
      background: var(--panel-bg);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem;
      margin: 1rem 0;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    }

    .example .title {
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .example .desc {
      color: #586069;
      margin: 0 0 0.75rem;
      font-size: 0.95rem;
    }

    /* Controlled content containers */
    .details {
      display: block;
    }

    /* Native <details> styling */
    details.details {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.25rem 0.5rem;
      background: #fff;
    }

    details.details + details.details {
      margin-top: 0.5rem;
    }

    details.details summary {
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      list-style: none; /* Some browsers */
      user-select: none;
    }

    details.details summary::-webkit-details-marker {
      display: none; /* Hide default marker in WebKit */
    }

    .caret {
      display: inline-block;
      width: 1em;
      text-align: center;
      transition: transform 160ms ease;
    }
    @media (prefers-reduced-motion: reduce) {
      .caret { transition: none; }
    }
    .details[open] summary .caret {
      transform: rotate(90deg);
    }

    .details-content {
      margin: 0.5rem 0 0.25rem 1.5rem;
      color: #374151;
    }

    /* Custom toggle button */
    .toggle {
      appearance: none;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: #fff;
      color: var(--text);
      font: inherit;
      padding: 0.5rem 0.75rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }
    .toggle:hover {
      border-color: #b8c0cc;
      background: #f9fafb;
    }
    .toggle:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .badge {
      font-size: 0.75rem;
      padding: 0.15rem 0.4rem;
      border-radius: 999px;
      background: #e5e7eb;
      color: #111827;
    }

    .callout {
      border-left: 4px solid var(--accent);
      padding: 0.5rem 0.75rem;
      background: #f0f7ff;
      border-radius: 6px;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Expand/Collapse Widgets</h1>
    <p class="lead">Examples using native details/summary and custom JavaScript-controlled panels.</p>

    <div class="example" id="native-details-demo">
      <div class="title">Native details/summary</div>
      <p class="desc">A semantic, accessible expand/collapse using the HTML details element.</p>

      <details class="details">
        <summary><span class="caret" aria-hidden="true">▸</span> What is an expand/collapse widget?</summary>
        <div class="details-content">
          <p>An expand/collapse widget lets you reveal or hide additional information. The native HTML element for this is <code>&lt;details&gt;</code> with a <code>&lt;summary&gt;</code> label.</p>
          <div class="callout">Tip: Use it for FAQs, code samples, or progressive disclosure.</div>
        </div>
      </details>

      <details class="details" open>
        <summary><span class="caret" aria-hidden="true">▸</span> This one starts expanded</summary>
        <div class="details-content">
          <ul>
            <li>It uses the <span class="badge">open</span> attribute.</li>
            <li>Click the summary line to collapse or expand.</li>
            <li>Keyboard users can focus and toggle with Space/Enter.</li>
          </ul>
        </div>
      </details>
    </div>

    <div class="example" id="custom-button-demo">
      <div class="title">Custom button-controlled panel</div>
      <p class="desc">A button toggles a content region. The container for controlled content uses the details class.</p>

      <button id="btn-custom-1" class="toggle" aria-expanded="false" aria-controls="panel-custom-1">
        <span class="caret" aria-hidden="true">▸</span>
        Show details
      </button>

      <div id="panel-custom-1" class="details" role="region" aria-labelledby="btn-custom-1" hidden>
        <div class="details-content">
          <p>This panel is controlled via JavaScript and the <code>hidden</code> attribute.</p>
          <ul>
            <li>Button updates <code>aria-expanded</code> for accessibility.</li>
            <li>Region has <code>role="region"</code> and <code>aria-labelledby</code> to associate the label.</li>
            <li>The container for controlled content is given the <span class="badge">details</span> class.</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="example" id="accordion-demo" data-accordion>
      <div class="title">Accordion (only one open at a time)</div>
      <p class="desc">An accordion built with multiple details elements. Opening one closes the others.</p>

      <details class="details">
        <summary><span class="caret" aria-hidden="true">▸</span> Section A</summary>
        <div class="details-content">
          <p>Content for Section A. Accords restrict to a single open panel.</p>
        </div>
      </details>

      <details class="details">
        <summary><span class="caret" aria-hidden="true">▸</span> Section B</summary>
        <div class="details-content">
          <p>Content for Section B with some extra notes.</p>
          <ul>
            <li>Declarative HTML structure</li>
            <li>No external libraries</li>
          </ul>
        </div>
      </details>

      <details class="details">
        <summary><span class="caret" aria-hidden="true">▸</span> Section C</summary>
        <div class="details-content">
          <p>Content for Section C. Click any summary to toggle.</p>
        </div>
      </details>
    </div>
  </div>

  <script>
    // Custom button-controlled panel
    (function() {
      const btn = document.getElementById('btn-custom-1');
      const region = document.getElementById(btn.getAttribute('aria-controls'));
      const caretSpan = btn.querySelector('.caret');

      function syncButton(expanded) {
        btn.setAttribute('aria-expanded', String(expanded));
        btn.firstChild && (btn.firstChild.textContent = ""); // ensure caret remains
        btn.lastChild.nodeType === Node.TEXT_NODE
          ? btn.lastChild.textContent = expanded ? " Hide details" : " Show details"
          : btn.append(document.createTextNode(expanded ? " Hide details" : " Show details"));
        if (caretSpan) caretSpan.style.transform = expanded ? "rotate(90deg)" : "rotate(0deg)";
      }

      btn.addEventListener('click', () => {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        region.hidden = expanded;
        syncButton(!expanded);
      });

      // Initialize state
      syncButton(false);
    }());

    // Accordion: keep only one <details> open at a time within the example container
    (function() {
      document.querySelectorAll('.example[data-accordion]').forEach(accordion => {
        accordion.addEventListener('toggle', event => {
          const target = event.target;
          if (target.tagName.toLowerCase() !== 'details') return;
          if (!target.open) return;
          accordion.querySelectorAll('details').forEach(d => {
            if (d !== target) d.open = false;
          });
        }, true);
      });
    }());
  </script>
</body>
</html>