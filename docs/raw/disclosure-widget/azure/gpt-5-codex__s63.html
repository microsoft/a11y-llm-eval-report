<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Expand/Collapse Widget Demo</title>
  <style>
    :root {
      font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      color: #1f2933;
      background-color: #f6f7fb;
      line-height: 1.6;
    }

    body {
      margin: 0;
      padding: 40px;
      max-width: 960px;
    }

    h1 {
      font-size: clamp(2rem, 3vw, 3rem);
      margin-bottom: 0.25em;
    }

    p.lede {
      font-size: 1.05rem;
      color: #52606d;
      margin-top: 0;
    }

    .example {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 20px 40px -24px rgba(15, 23, 42, 0.35);
      margin: 28px 0;
      padding: 24px;
      border: 1px solid rgba(15, 23, 42, 0.06);
    }

    .example h2 {
      margin-top: 0;
      font-size: 1.35rem;
      color: #172540;
    }

    .details {
      border: 1px solid rgba(71, 85, 105, 0.2);
      border-radius: 10px;
      background: #fdfdff;
      padding: 0;
      transition: border-color 200ms ease, box-shadow 200ms ease;
    }

    .details + .details {
      margin-top: 12px;
    }

    .details summary {
      list-style: none;
      cursor: pointer;
      padding: 18px 20px 18px 52px;
      position: relative;
      font-weight: 600;
      color: #243b53;
      user-select: none;
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .details summary::marker,
    .details summary::-webkit-details-marker {
      display: none;
    }

    .details summary::before {
      content: "";
      position: absolute;
      top: 50%;
      left: 20px;
      width: 12px;
      height: 12px;
      border-right: 2px solid currentColor;
      border-bottom: 2px solid currentColor;
      transform: translateY(-50%) rotate(45deg);
      transition: transform 200ms ease;
    }

    .details[open] summary::before {
      transform: translateY(-50%) rotate(225deg);
    }

    .details[open] {
      border-color: #557cf2;
      box-shadow: 0 10px 28px -18px rgba(85, 124, 242, 0.8);
    }

    .details summary:focus-visible {
      outline: 3px solid rgba(85, 124, 242, 0.65);
      outline-offset: 4px;
      border-radius: 10px;
    }

    .details summary:hover {
      background: rgba(85, 124, 242, 0.05);
    }

    .details-content {
      padding: 0 20px 18px 52px;
      color: #364152;
    }

    .details-content p {
      margin-top: 0;
    }

    .details-content ul,
    .details-content ol {
      margin: 12px 0;
      padding-left: 20px;
    }

    .details[data-status] summary::after {
      content: attr(data-status);
      margin-left: auto;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #486581;
      background: rgba(85, 124, 242, 0.12);
      border-radius: 12px;
      padding: 4px 10px;
    }

    @media (max-width: 640px) {
      body {
        padding: 24px;
      }

      .details summary {
        padding-left: 48px;
      }

      .details-content {
        padding-left: 48px;
      }
    }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widget Demonstration</h1>
  <p class="lede">These widgets use the native <code>&lt;details&gt;</code> element for accessible expand/collapse behavior, enhanced with custom styling and scripted behaviors.</p>

  <div class="example">
    <h2>1. Basic Expand/Collapse</h2>
    <details class="details">
      <summary>How does the basic widget work?</summary>
      <div class="details-content">
        <p>The simplest widget relies on the native HTML <code>summary</code> element to toggle the visibility of its associated content. This means keyboard support and screen reader announcements all work automatically.</p>
        <ul>
          <li><strong>Click</strong> or <strong>press Enter</strong> on the summary to toggle the panel.</li>
          <li>The content below the summary becomes visible when the widget is expanded.</li>
          <li>Pressing <kbd>Shift</kbd> + <kbd>Tab</kbd> returns focus to earlier interactive elements.</li>
        </ul>
      </div>
    </details>
  </div>

  <div class="example">
    <h2>2. Default-Open Panel with Rich Content</h2>
    <details class="details" open data-status="Auto">
      <summary>What makes this section stay open?</summary>
      <div class="details-content">
        <p>Setting the <code>open</code> attribute keeps a <code>&lt;details&gt;</code> element expanded until the user decides to close it. This is useful for highlighting information that should be visible on first load.</p>
        <ol>
          <li><strong>Pre-expanded:</strong> The <code>open</code> attribute signals initial visibility.</li>
          <li><strong>Auto status badge:</strong> The label on the right is injected via a <code>data-status</code> attribute.</li>
          <li><strong>Rich formatting:</strong> Lists, code samples, and other semantic HTML can live in the controlled panel.</li>
        </ol>
        <figure>
          <img src="https://images.unsplash.com/photo-1523475472560-d2df97ec485c?auto=format&fit=crop&w=900&q=80" alt="Stacked books on a desk" style="width:100%;max-width:520px;border-radius:10px;box-shadow:0 16px 36px -24px rgba(15,23,42,0.6);">
          <figcaption style="font-size:0.85rem;color:#8290a0;margin-top:8px;">Figure: Panels can hold media, such as images or charts.</figcaption>
        </figure>
      </div>
    </details>
  </div>

  <div class="example" data-accordion>
    <h2>3. Accordion Mode (Mutually Exclusive)</h2>
    <details class="details" data-accordion-item>
      <summary>Why would I use an accordion?</summary>
      <div class="details-content">
        <p>When space is limited, an accordion ensures that only one panel is open at a time. This keeps focus on the active topic while collapsing the others for you.</p>
      </div>
    </details>
    <details class="details" data-accordion-item>
      <summary>How is exclusivity enforced?</summary>
      <div class="details-content">
        <p>A tiny script listens for the <code>toggle</code> event on each panel. When one opens, the script closes its siblings within the same <code>data-accordion</code> container.</p>
        <p>This approach still respects native semantics—keyboard users and assistive technologies receive the same cues as they would with standalone expanders.</p>
      </div>
    </details>
    <details class="details" data-accordion-item>
      <summary>Can I add transitions?</summary>
      <div class="details-content">
        <p>Yes. Although the <code>&lt;details&gt;</code> element does not animate height out-of-the-box, you can use CSS transitions on child wrappers or employ the Web Animations API to orchestrate smooth expansion.</p>
        <p>Always ensure that animations are subtle and respect the user’s <code>prefers-reduced-motion</code> preference.</p>
      </div>
    </details>
  </div>

  <div class="example">
    <h2>4. Programmatic Control and Status Sync</h2>
    <button id="toggle-all" type="button" style="background:#557cf2;color:#fff;border:none;border-radius:999px;padding:12px 22px;font-weight:600;cursor:pointer;box-shadow:0 14px 30px -20px rgba(85,124,242,0.8);transition:transform 160ms ease;">Toggle All Sections</button>
    <details class="details" data-status-target>
      <summary>Can scripts manipulate the open state?</summary>
      <div class="details-content">
        <p>Absolutely. This panel demonstrates synchronizing UI state with a script. The button above toggles every widget on the page to the opposite state and updates status badges as needed.</p>
      </div>
    </details>
    <details class="details" data-status-target>
      <summary>How is the badge updated?</summary>
      <div class="details-content">
        <p>The script observes each <code>toggle</code> event. When a panel opens, it sets a <code>data-status</code> attribute on the <code>&lt;details&gt;</code> element, allowing CSS to render the label automatically.</p>
      </div>
    </details>
  </div>

  <script>
    document.querySelectorAll('[data-accordion]').forEach(function (accordion) {
      const items = accordion.querySelectorAll('[data-accordion-item]');
      items.forEach(function (item) {
        item.addEventListener('toggle', function () {
          if (!item.open) {
            return;
          }
          items.forEach(function (other) {
            if (other !== item && other.open) {
              other.open = false;
            }
          });
        });
      });
    });

    const statusTargets = document.querySelectorAll('.details[data-status-target], .details[data-status]');
    const updateStatusLabel = function (details) {
      const status = details.hasAttribute('open') ? 'Open' : 'Closed';
      details.setAttribute('data-status', status);
    };
    statusTargets.forEach(function (details) {
      updateStatusLabel(details);
      details.addEventListener('toggle', function () {
        updateStatusLabel(details);
      });
    });

    const toggleAllButton = document.getElementById('toggle-all');
    toggleAllButton.addEventListener('click', function () {
      const allDetails = document.querySelectorAll('.details');
      const shouldOpen = Array.from(allDetails).some(function (details) {
        return !details.open;
      });
      allDetails.forEach(function (details) {
        details.open = shouldOpen;
        if (details.hasAttribute('data-status-target') || details.hasAttribute('data-status')) {
          updateStatusLabel(details);
        }
      });
      toggleAllButton.textContent = shouldOpen ? 'Collapse All Sections' : 'Expand All Sections';
      toggleAllButton.style.transform = shouldOpen ? 'translateY(-1px)' : 'translateY(0)';
    });
  </script>
</body>
</html>