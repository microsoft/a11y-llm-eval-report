<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Examples</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #f8fafc;
      --border: #d0d7de;
      --text: #0f172a;
      --muted: #475569;
      --accent: #2563eb;
      --accent-contrast: #ffffff;
      --panel: #ffffff;
      --radius: 10px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: linear-gradient(180deg, var(--bg), #eef2f7);
    }
    main {
      max-width: 920px;
      margin: 0 auto;
      padding: 24px;
    }
    h1 {
      margin: 0 0 16px;
      font-size: 28px;
      line-height: 1.2;
    }
    p.lead {
      margin: 0 0 24px;
      color: var(--muted);
    }

    .example {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
      padding: 18px;
      margin: 18px 0;
    }
    .example h2 {
      margin: 0 0 10px;
      font-size: 18px;
    }
    .example .note {
      margin: 0 0 12px;
      color: var(--muted);
      font-size: 14px;
    }

    /* Shared styles for controlled content containers */
    .details {
      background: #fff;
      border: 1px solid var(--border);
      border-radius: 8px;
      margin-top: 10px;
      overflow: hidden;
    }
    .details[hidden] { display: none !important; }
    .details .inner {
      padding: 14px 16px;
    }

    /* Native <details> styling */
    details.details {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0;
    }
    details.details summary {
      list-style: none;
      cursor: pointer;
      user-select: none;
      padding: 12px 16px;
      font-weight: 600;
      position: relative;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    /* custom marker */
    details.details summary::before {
      content: "▸";
      display: inline-block;
      width: 1em;
      text-align: center;
      color: var(--muted);
      transition: transform 160ms ease;
    }
    details.details[open] summary::before {
      transform: rotate(90deg);
      color: var(--accent);
    }
    details.details .inner {
      border-top: 1px solid var(--border);
      padding: 14px 16px;
    }

    /* Button toggles */
    .toggle {
      appearance: none;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
      border-radius: 8px;
      font: inherit;
      padding: 10px 14px 10px 32px;
      line-height: 1.2;
      cursor: pointer;
      position: relative;
      transition: border-color 120ms ease, box-shadow 120ms ease, transform 120ms ease;
    }
    .toggle:focus-visible {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.25);
    }
    .toggle:hover { transform: translateY(-1px); }
    .toggle::before {
      content: "▸";
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
      transition: transform 160ms ease, color 160ms ease;
    }
    .toggle[aria-expanded="true"]::before {
      transform: translateY(-50%) rotate(90deg);
      color: var(--accent);
    }
    .toggle.accent {
      background: var(--accent);
      color: var(--accent-contrast);
      border-color: var(--accent);
    }
    .toggle.accent::before {
      color: var(--accent-contrast);
    }
    .toggle.accent[aria-expanded="true"]::before {
      color: var(--accent-contrast);
    }

    /* Accordion structure */
    .accordion .section {
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
      margin-top: 10px;
      background: #fff;
    }
    .accordion .section .toggle {
      width: 100%;
      border: none;
      border-radius: 0;
      text-align: left;
      background: transparent;
      padding-left: 36px;
    }
    .accordion .section .toggle:hover { background: #f8fafc; }
    .accordion .section .details {
      border: none;
      border-top: 1px solid var(--border);
      border-radius: 0;
      margin-top: 0;
    }

    /* Small utility */
    code.inline {
      background: #f1f5f9;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0 6px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95em;
    }
  </style>
</head>
<body>
  <main>
    <h1>Expand/Collapse Widget Demonstration</h1>
    <p class="lead">This page shows three approaches: a native HTML details/summary, a custom toggle button, and an accordion where only one section stays open.</p>

    <div class="example">
      <h2>Native details/summary</h2>
      <p class="note">Built-in HTML behavior. The controlled container is the <code class="inline">details</code> element itself with class <code class="inline">details</code>.</p>

      <details class="details">
        <summary>What is an expand/collapse widget?</summary>
        <div class="inner">
          <p>An expand/collapse widget hides supplemental information until a user chooses to reveal it. This helps reduce visual clutter and lets readers focus.</p>
          <ul>
            <li>Click the header to toggle visibility.</li>
            <li>Use the keyboard: Tab to the summary, then Enter or Space to toggle.</li>
            <li>The element remembers its open state per page interaction.</li>
          </ul>
        </div>
      </details>
    </div>

    <div class="example">
      <h2>Custom toggle button</h2>
      <p class="note">A button controls a separate content region. The controlled container uses the <code class="inline">details</code> class.</p>

      <button class="toggle accent" id="toggle1" aria-controls="panel1" aria-expanded="false">
        Show more details
      </button>
      <div id="panel1" class="details" role="region" aria-labelledby="toggle1" hidden>
        <div class="inner">
          <p>This panel is controlled with JavaScript via the button above. It uses:</p>
          <ul>
            <li><code class="inline">aria-controls</code> to associate the button with its panel.</li>
            <li><code class="inline">aria-expanded</code> to reflect the current toggle state.</li>
            <li><code class="inline">role="region"</code> and <code class="inline">aria-labelledby</code> for screen readers.</li>
          </ul>
          <p>Try clicking the button again to collapse the content.</p>
        </div>
      </div>
    </div>

    <div class="example accordion" data-accordion>
      <h2>Accordion (single expansion)</h2>
      <p class="note">Only one section is expanded at a time. Each controlled content container has the <code class="inline">details</code> class.</p>

      <div class="section">
        <button class="toggle" id="accBtn1" aria-controls="accPanel1" aria-expanded="false">
          Getting started
        </button>
        <div id="accPanel1" class="details" role="region" aria-labelledby="accBtn1" hidden>
          <div class="inner">
            <p>Begin by choosing the appropriate expand/collapse pattern:</p>
            <ol>
              <li>Use native <code class="inline">&lt;details&gt;</code> for simple disclosure.</li>
              <li>Use a button-controlled panel for custom styling and logic.</li>
              <li>Use an accordion when space is limited and items are mutually exclusive.</li>
            </ol>
          </div>
        </div>
      </div>

      <div class="section">
        <button class="toggle" id="accBtn2" aria-controls="accPanel2" aria-expanded="false">
          Accessibility tips
        </button>
        <div id="accPanel2" class="details" role="region" aria-labelledby="accBtn2" hidden>
          <div class="inner">
            <ul>
              <li>Ensure the control is a real <code class="inline">button</code>.</li>
              <li>Keep <code class="inline">aria-expanded</code> in sync with visibility.</li>
              <li>Link controls and panels with <code class="inline">aria-controls</code>.</li>
              <li>Provide a label via <code class="inline">aria-labelledby</code> or <code class="inline">aria-label</code>.</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="section">
        <button class="toggle" id="accBtn3" aria-controls="accPanel3" aria-expanded="false">
          Styling options
        </button>
        <div id="accPanel3" class="details" role="region" aria-labelledby="accBtn3" hidden>
          <div class="inner">
            <p>Common styling approaches:</p>
            <ul>
              <li>Animate the disclosure indicator (arrow) to rotate on expand.</li>
              <li>Use borders and subtle shadows for visual separation.</li>
              <li>Match spacing and typography to your design system.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    (function () {
      function setExpanded(button, panel, expanded) {
        button.setAttribute('aria-expanded', expanded ? 'true' : 'false');
        if (expanded) {
          panel.removeAttribute('hidden');
        } else {
          panel.setAttribute('hidden', '');
        }
      }

      function toggleWithinAccordion(button, panel) {
        const accordion = button.closest('[data-accordion]');
        if (!accordion) {
          const isExpanded = button.getAttribute('aria-expanded') === 'true';
          setExpanded(button, panel, !isExpanded);
          return;
        }
        // Close all other sections in this accordion
        const allButtons = accordion.querySelectorAll('.toggle[aria-controls]');
        allButtons.forEach(b => {
          const id = b.getAttribute('aria-controls');
          const p = id ? document.getElementById(id) : null;
          if (!p) return;
          if (b === button) {
            // Toggle current one (open if closed, close if open)
            const expanded = b.getAttribute('aria-expanded') === 'true';
            setExpanded(b, p, !expanded);
          } else {
            setExpanded(b, p, false);
          }
        });
      }

      function initButtons() {
        const buttons = document.querySelectorAll('.toggle[aria-controls]');
        buttons.forEach(button => {
          const panelId = button.getAttribute('aria-controls');
          const panel = panelId ? document.getElementById(panelId) : null;
          if (!panel) return;

          // Ensure initial aria-expanded matches visibility
          const initiallyHidden = panel.hasAttribute('hidden');
          button.setAttribute('aria-expanded', initiallyHidden ? 'false' : 'true');

          button.addEventListener('click', () => toggleWithinAccordion(button, panel));

          // Optional: Space/Enter keys are already handled by <button>, but keep robustness.
          button.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              // Let default button behavior handle it
            }
          });
        });
      }

      document.addEventListener('DOMContentLoaded', initButtons);
    })();
  </script>
</body>
</html>