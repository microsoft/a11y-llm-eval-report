<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root{
      --bg:#f7f8fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#2563eb;
      --radius:10px;
      --shadow: 0 2px 6px rgba(16,24,40,0.06);
      --transition: 220ms cubic-bezier(.2,.9,.3,1);
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,#eef2ff 0%,#f7fbff 100%);
      color:#0f172a;
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
    }

    h1{margin:0 0 8px;font-size:20px}
    p.lead{margin:0 0 20px;color:var(--muted);font-size:14px}

    .container{
      max-width:900px;
      margin:0 auto;
    }

    .example{
      background:var(--card);
      border-radius:var(--radius);
      padding:16px;
      box-shadow:var(--shadow);
      margin:18px 0;
      border:1px solid rgba(15,23,42,0.04);
    }

    /* Toggle button */
    .toggle-button{
      display:flex;
      align-items:center;
      gap:12px;
      width:100%;
      background:transparent;
      border:0;
      padding:12px 14px;
      border-radius:8px;
      cursor:pointer;
      text-align:left;
      font-size:15px;
      color:inherit;
      transition:background var(--transition), box-shadow var(--transition);
    }
    .toggle-button:focus{
      outline:4px solid rgba(37,99,235,0.12);
      outline-offset:2px;
    }
    .toggle-button:hover{
      background:rgba(15,23,42,0.03);
    }
    .toggle-header{
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      gap:2px;
      flex:1;
    }
    .title{font-weight:600}
    .subtitle{font-size:13px;color:var(--muted)}

    .icon{
      display:inline-block;
      width:26px;
      height:26px;
      border-radius:7px;
      background:rgba(99,102,241,0.08);
      color:var(--accent);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:14px;
      transform:rotate(0deg);
      transition:transform var(--transition);
      flex-shrink:0;
    }
    .toggle-button[aria-expanded="true"] .icon{
      transform:rotate(90deg);
    }

    /* Controlled content */
    .details{
      overflow:hidden;
      max-height:0;
      transition:max-height 280ms cubic-bezier(.2,.9,.3,1), opacity 150ms linear;
      opacity:0;
      margin-top:10px;
    }
    .details.open{
      /* large enough to reveal typical content; dynamic heights are handled by JS if needed */
      max-height:1200px;
      opacity:1;
    }

    .details .content{
      padding:12px 6px;
      border-radius:6px;
      background:linear-gradient(180deg, rgba(99,102,241,0.03), rgba(99,102,241,0.01));
      border:1px solid rgba(99,102,241,0.06);
      font-size:14px;
      color:#0f172a;
    }

    /* small utilities */
    code{background:#f3f4f6;padding:2px 6px;border-radius:4px;font-family:monospace;font-size:13px}
    .muted{color:var(--muted);font-size:13px}
    @media (prefers-reduced-motion: reduce){
      .details{transition:none}
      .toggle-button{transition:none}
      .icon{transition:none}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Expand / Collapse Widget</h1>
      <p class="lead">Each widget is wrapped in a <code>div.example</code>. The controlled panels use the class <code>details</code>. The buttons use <code>aria-expanded</code> and <code>aria-controls</code> for accessibility.</p>
    </header>

    <!-- Example 1 -->
    <div class="example" id="example-1">
      <button class="toggle-button" aria-expanded="false" aria-controls="details-1" id="toggle-1" type="button">
        <span class="icon" aria-hidden="true">▸</span>
        <div class="toggle-header">
          <span class="title">Simple summary</span>
          <span class="subtitle">Click to reveal a short paragraph</span>
        </div>
      </button>

      <div class="details" id="details-1" aria-hidden="true" role="region" aria-labelledby="toggle-1">
        <div class="content">
          <p>This is a concise block of content that can be shown or hidden. It demonstrates the basic expand/collapse behavior using a button that controls the visibility of the container with the <code>details</code> class.</p>
        </div>
      </div>
    </div>

    <!-- Example 2 -->
    <div class="example" id="example-2">
      <button class="toggle-button" aria-expanded="false" aria-controls="details-2" id="toggle-2" type="button">
        <span class="icon" aria-hidden="true">▸</span>
        <div class="toggle-header">
          <span class="title">More content with list</span>
          <span class="subtitle">Contains multiple paragraphs and a list</span>
        </div>
      </button>

      <div class="details" id="details-2" aria-hidden="true" role="region" aria-labelledby="toggle-2">
        <div class="content">
          <p class="muted">Below is an example of a longer content block that includes descriptive text and a list.</p>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tincidunt sapien. Phasellus a turpis ac lacus fermentum dictum.</p>
          <ul>
            <li>Point one: explanation and details</li>
            <li>Point two: additional information</li>
            <li>Point three: final remark</li>
          </ul>
          <p>Use this pattern when you want to hide non-essential content until the user requests it.</p>
        </div>
      </div>
    </div>

    <!-- Example 3 -->
    <div class="example" id="example-3">
      <button class="toggle-button" aria-expanded="false" aria-controls="details-3" id="toggle-3" type="button">
        <span class="icon" aria-hidden="true">▸</span>
        <div class="toggle-header">
          <span class="title">Interactive content</span>
          <span class="subtitle">Includes form elements inside the controlled region</span>
        </div>
      </button>

      <div class="details" id="details-3" aria-hidden="true" role="region" aria-labelledby="toggle-3">
        <div class="content">
          <p class="muted">Form inside a collapsible area. Inputs remain reachable via keyboard when visible.</p>
          <form onsubmit="event.preventDefault();" aria-label="Demo form">
            <label style="display:block;margin-bottom:8px">
              Name<br />
              <input type="text" name="name" placeholder="Your name" style="padding:8px;margin-top:6px;border-radius:6px;border:1px solid rgba(15,23,42,0.08);width:100%;box-sizing:border-box" />
            </label>
            <label style="display:block;margin-bottom:8px">
              Subscribe<br />
              <select style="padding:8px;margin-top:6px;border-radius:6px;border:1px solid rgba(15,23,42,0.08);width:100%;box-sizing:border-box">
                <option>Email</option>
                <option>SMS</option>
                <option>Push</option>
              </select>
            </label>
            <div style="display:flex;gap:8px;margin-top:10px">
              <button type="submit" style="padding:8px 12px;border-radius:8px;border:0;background:var(--accent);color:white;cursor:pointer">Save</button>
              <button type="button" style="padding:8px 12px;border-radius:8px;border:1px solid rgba(15,23,42,0.08);background:white;cursor:pointer" onclick="document.getElementById('toggle-3').focus()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <footer style="margin-top:18px;color:var(--muted);font-size:13px">
      Tip: The accessible pattern uses <code>aria-expanded</code> on the button and <code>aria-hidden</code> on the <code>details</code> element. The button's <code>aria-controls</code> references the controlled region's id.
    </footer>
  </div>

  <script>
    // Initialize toggle behavior for buttons that control panels
    (function(){
      const toggles = document.querySelectorAll('.toggle-button[aria-controls]');
      toggles.forEach(btn => {
        const detailsId = btn.getAttribute('aria-controls');
        const details = document.getElementById(detailsId);
        if(!details) return;

        // Ensure initial state matches attributes
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        details.classList.toggle('open', expanded);
        details.setAttribute('aria-hidden', expanded ? 'false' : 'true');

        // Toggle function
        function toggle(doExpand){
          const willExpand = typeof doExpand === 'boolean' ? doExpand : btn.getAttribute('aria-expanded') !== 'true';
          btn.setAttribute('aria-expanded', willExpand ? 'true' : 'false');
          details.setAttribute('aria-hidden', willExpand ? 'false' : 'true');
          details.classList.toggle('open', willExpand);

          // For smooth height transition on dynamic content we could compute height, but the CSS max-height approach is used here.
        }

        btn.addEventListener('click', () => toggle());
        // Optional: allow Enter/Space implicitly handled by button element
      });

      // Close any open panels when Escape is pressed and focus is inside one of them
      document.addEventListener('keydown', (e) => {
        if(e.key === 'Escape'){
          const openDetails = document.querySelectorAll('.details.open');
          openDetails.forEach(details => {
            const id = details.id;
            if(!id) return;
            const controller = document.querySelector('[aria-controls="' + id + '"]');
            if(controller){
              controller.setAttribute('aria-expanded','false');
              details.setAttribute('aria-hidden','true');
              details.classList.remove('open');
              controller.focus();
            }
          });
        }
      });
    })();
  </script>
</body>
</html>