<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Examples</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --border: #1f2937;
      --accent: #60a5fa;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --focus: #93c5fd;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      padding: 2rem;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.6;
      color: var(--text);
      background: linear-gradient(180deg, #0b1225, var(--bg));
    }

    h1 {
      margin: 0 0 1rem 0;
      font-size: 1.75rem;
      font-weight: 700;
    }

    .page-intro {
      color: var(--muted);
      margin-bottom: 2rem;
    }

    .examples {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
      max-width: 900px;
    }

    .example {
      border: 1px solid var(--border);
      background: rgba(17, 24, 39, 0.6);
      backdrop-filter: blur(4px);
      border-radius: 12px;
      overflow: clip;
      box-shadow: 0 10px 24px rgba(0,0,0,0.35);
    }

    .example header {
      padding: 0.85rem 1rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: rgba(31, 41, 55, 0.4);
    }

    .example header h2 {
      font-size: 1rem;
      margin: 0;
      font-weight: 600;
      color: var(--accent);
    }

    .example .content {
      padding: 1rem;
    }

    /* Native <details> styling */
    details.details {
      border: 1px solid var(--border);
      border-radius: 10px;
      background: rgba(31, 41, 55, 0.3);
    }

    details.details summary {
      cursor: pointer;
      list-style: none;
      padding: 0.75rem 1rem;
      user-select: none;
      outline: none;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.6rem;
      color: var(--text);
    }

    /* Hide default marker if supported */
    details.details summary::-webkit-details-marker { display: none; }

    details.details summary::before {
      content: "▸";
      color: var(--accent);
      display: inline-block;
      transform: translateY(-1px);
    }

    details.details[open] summary::before {
      content: "▾";
    }

    details.details .body {
      padding: 0.75rem 1rem 1rem 1.9rem;
      border-top: 1px solid var(--border);
      color: var(--text);
    }

    /* Custom button toggle */
    .toggle-btn {
      appearance: none;
      border: 1px solid var(--border);
      background: rgba(31, 41, 55, 0.6);
      color: var(--text);
      font: inherit;
      padding: 0.6rem 0.85rem 0.6rem 2rem;
      border-radius: 10px;
      cursor: pointer;
      position: relative;
      transition: border-color 0.2s ease, background 0.2s ease;
    }

    .toggle-btn:hover {
      border-color: var(--accent);
      background: rgba(31, 41, 55, 0.75);
    }

    .toggle-btn:focus-visible {
      outline: 3px solid var(--focus);
      outline-offset: 2px;
    }

    .toggle-btn::before {
      content: "▸";
      position: absolute;
      left: 0.7rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--accent);
    }

    .toggle-btn[aria-expanded="true"]::before {
      content: "▾";
    }

    .details {
      border: 1px solid var(--border);
      border-radius: 10px;
      margin-top: 0.75rem;
      background: rgba(31, 41, 55, 0.3);
      overflow: hidden;
    }

    .details .inner {
      padding: 0.85rem 1rem;
    }

    .muted {
      color: var(--muted);
    }

    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.9em;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      border-bottom-color: rgba(255,255,255,0.2);
      border-radius: 6px;
      padding: 0.08rem 0.35rem;
    }

    /* Simple list styling */
    .checklist {
      margin: 0.5rem 0 0 0;
      padding-left: 1.1rem;
    }
    .checklist li { margin: 0.2rem 0; }
    .checklist li::marker { color: var(--accent); }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widget Demo</h1>
  <p class="page-intro">Two approaches are shown below: the native HTML details/summary element and a custom button-controlled toggle. Each widget is wrapped in a container with class "example", and the controlled content uses the "details" class.</p>

  <section class="examples">

    <div class="example">
      <header>
        <h2>Native details/summary</h2>
      </header>
      <div class="content">
        <details class="details">
          <summary>What is an expand/collapse widget?</summary>
          <div class="body">
            <p>An expand/collapse widget allows you to reveal or hide related content. The native HTML <span class="kbd">&lt;details&gt;</span> element includes keyboard and screen reader support out of the box.</p>
            <ul class="checklist">
              <li>Built-in accessibility and keyboard interaction</li>
              <li>Works without JavaScript</li>
              <li>Simple to style for most use cases</li>
            </ul>
            <p class="muted">Tip: Use the <span class="kbd">open</span> attribute on <span class="kbd">&lt;details&gt;</span> if you want the widget to start expanded.</p>
          </div>
        </details>
      </div>
    </div>

    <div class="example">
      <header>
        <h2>Custom button toggle</h2>
      </header>
      <div class="content">
        <button
          type="button"
          class="toggle-btn"
          aria-expanded="false"
          aria-controls="custom-details-1"
          data-label-collapsed="Show details"
          data-label-expanded="Hide details"
        >Show details</button>

        <div id="custom-details-1" class="details" hidden>
          <div class="inner">
            <p>This version uses a button to control a content container with the class <span class="kbd">details</span>.</p>
            <ul class="checklist">
              <li>ARIA attributes reflect the current state</li>
              <li>No reliance on <span class="kbd">&lt;details&gt;</span>, useful for custom visuals</li>
              <li>Keyboard and screen reader friendly</li>
            </ul>
            <p class="muted">Press the button again to collapse the content.</p>
          </div>
        </div>
      </div>
    </div>

  </section>

  <script>
    (function () {
      function setButtonLabel(btn, expanded) {
        const collapsedLabel = btn.getAttribute('data-label-collapsed') || 'Show';
        const expandedLabel = btn.getAttribute('data-label-expanded') || 'Hide';
        btn.textContent = expanded ? expandedLabel : collapsedLabel;
      }

      function toggleDetailsByButton(btn) {
        const id = btn.getAttribute('aria-controls');
        if (!id) return;
        const content = document.getElementById(id);
        if (!content) return;

        const isExpanded = btn.getAttribute('aria-expanded') === 'true';
        const next = !isExpanded;

        btn.setAttribute('aria-expanded', String(next));
        content.hidden = !next;

        setButtonLabel(btn, next);
      }

      document.addEventListener('click', function (e) {
        const btn = e.target.closest('button.toggle-btn[aria-controls]');
        if (!btn) return;
        toggleDetailsByButton(btn);
      });

      // Initialize labels based on aria-expanded
      document.querySelectorAll('button.toggle-btn[aria-controls]').forEach(function (btn) {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        setButtonLabel(btn, expanded);
      });
    })();
  </script>
</body>
</html>