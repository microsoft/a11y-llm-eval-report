<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Examples</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #60a5fa;
      --border: #1f2937;
      --focus: #93c5fd;
    }
    * { box-sizing: border-box; }
    html, body {
      background: linear-gradient(180deg, #0b1220, var(--bg));
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      margin: 0;
      padding: 0;
      min-height: 100%;
    }
    .page {
      max-width: 900px;
      margin: 0 auto;
      padding: 32px 16px 80px;
    }
    h1 {
      font-size: 1.75rem;
      margin: 0 0 16px 0;
      letter-spacing: -0.02em;
    }
    p.lead {
      color: var(--muted);
      margin: 0 0 24px 0;
    }
    .example {
      background: rgba(17, 24, 39, 0.75);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin: 16px 0;
      box-shadow: 0 1px 0 rgba(255,255,255,0.04) inset, 0 18px 60px rgba(0,0,0,0.35);
    }
    .example h2 {
      font-size: 1rem;
      margin: 0 0 12px 0;
      color: var(--muted);
    }

    /* Shared content container styling */
    .details {
      margin-top: 10px;
      padding: 12px 14px;
      border-left: 3px solid var(--accent);
      background: rgba(96, 165, 250, 0.08);
      border-radius: 8px;
    }
    .details[hidden] { display: none !important; }

    /* Example 1: Native <details>/<summary> */
    details {
      background: rgba(255,255,255,0.03);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 10px;
    }
    details summary {
      list-style: none;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      outline: none;
    }
    details summary::-webkit-details-marker { display: none; }
    details summary::before {
      content: "";
      width: 12px;
      height: 12px;
      border: 2px solid var(--muted);
      border-left: 0;
      border-top: 0;
      transform: rotate(45deg);
      transition: transform 160ms ease, border-color 160ms ease;
    }
    details[open] summary::before {
      transform: rotate(225deg);
      border-color: var(--accent);
    }
    details summary:focus-visible {
      outline: 2px solid var(--focus);
      outline-offset: 3px;
      border-radius: 6px;
    }

    /* Example 2/3: Custom toggle buttons */
    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-weight: 600;
      color: #0b1220;
      background: linear-gradient(180deg, #e0f2fe, #bae6fd);
      border: 1px solid #93c5fd;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 1px 0 rgba(255,255,255,0.9) inset, 0 10px 20px rgba(2, 6, 23, 0.25);
    }
    .toggle:hover { background: linear-gradient(180deg, #d5effe, #b3e1fb); }
    .toggle:active { transform: translateY(1px); }
    .toggle:focus-visible {
      outline: 2px solid var(--focus);
      outline-offset: 3px;
    }
    .chev {
      width: 10px;
      height: 10px;
      border: 2px solid currentColor;
      border-left: 0;
      border-top: 0;
      transform: rotate(45deg);
      transition: transform 160ms ease;
    }
    .toggle[aria-expanded="true"] .chev { transform: rotate(225deg); }

    /* Example footer note */
    .note {
      font-size: 0.88rem;
      color: var(--muted);
      margin-top: 6px;
    }

    /* Small transitions for custom content */
    .anim-wrap {
      overflow: hidden;
      transition: grid-template-rows 220ms ease, opacity 220ms ease;
      display: grid;
      grid-template-rows: 0fr;
      opacity: 0;
    }
    .anim-wrap > .details {
      min-height: 0;
    }
    .anim-wrap[data-open="true"] {
      grid-template-rows: 1fr;
      opacity: 1;
    }
  </style>
</head>
<body>
  <main class="page" role="main">
    <h1>Expand/Collapse Widgets</h1>
    <p class="lead">Three approaches: native details/summary, a basic button-controlled panel, and a panel with smooth open/close animation.</p>

    <div class="example" id="example-1">
      <h2>Example 1: Native details/summary</h2>
      <details>
        <summary>What is an expand/collapse widget?</summary>
        <div class="details">
          <p>An expand/collapse widget (also called a disclosure) shows or hides additional information on demand. The native HTML element <code>&lt;details&gt;</code> with a <code>&lt;summary&gt;</code> provides built-in accessibility and keyboard support.</p>
          <ul>
            <li>Click or press Enter/Space to toggle.</li>
            <li>Screen readers announce the expanded state.</li>
            <li>No JavaScript required for basic behavior.</li>
          </ul>
        </div>
      </details>
      <p class="note">The container for the controlled content has a <code>details</code> class.</p>
    </div>

    <div class="example" id="example-2">
      <h2>Example 2: Button-controlled panel</h2>
      <button class="toggle" type="button" aria-expanded="false" aria-controls="ex2-content" data-toggle-target="ex2-content">
        <span class="chev" aria-hidden="true"></span>
        Toggle overview
      </button>
      <div class="details" id="ex2-content" hidden>
        <p>This panel is controlled via a button using <code>aria-expanded</code> and <code>aria-controls</code>. JavaScript toggles the <code>hidden</code> attribute on the content container.</p>
        <p>Use this pattern when you need custom behavior or visuals beyond the native <code>&lt;details&gt;</code> element.</p>
      </div>
      <p class="note">The content container uses the class <code>details</code> and starts hidden.</p>
    </div>

    <div class="example" id="example-3">
      <h2>Example 3: Smooth animated panel</h2>
      <button class="toggle" type="button" aria-expanded="false" aria-controls="ex3-content" data-toggle-target="ex3-content" data-animated="true">
        <span class="chev" aria-hidden="true"></span>
        Read more about accessibility
      </button>
      <div class="anim-wrap" id="ex3-wrap" data-open="false" data-content="ex3-content">
        <div class="details" id="ex3-content" hidden>
          <p>For accessible disclosures:</p>
          <ul>
            <li>Use a native <code>&lt;details&gt;</code> or a <code>&lt;button&gt;</code> with <code>aria-expanded</code> and <code>aria-controls</code>.</li>
            <li>Keep focus on the control; do not move focus unexpectedly.</li>
            <li>Ensure the toggle state is programmatically determinable.</li>
          </ul>
          <p>This example adds a smooth open/close animation using a CSS grid trick while preserving accessibility.</p>
        </div>
      </div>
      <p class="note">The animated wrapper manages the transition; the content itself remains a <code>details</code>-class container.</p>
    </div>
  </main>

  <script>
    (function() {
      function toggleContent(btn, content, animatedWrap) {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        const next = !expanded;
        btn.setAttribute('aria-expanded', String(next));
        content.hidden = !next;

        if (animatedWrap) {
          animatedWrap.setAttribute('data-open', String(next));
        }
      }

      document.addEventListener('click', function(e) {
        const btn = e.target.closest('[data-toggle-target]');
        if (!btn) return;

        const targetId = btn.getAttribute('data-toggle-target');
        const content = document.getElementById(targetId);
        if (!content) return;

        const animated = btn.getAttribute('data-animated') === 'true';
        let animatedWrap = null;

        if (animated) {
          // Find a wrapping element that controls animation
          animatedWrap = document.querySelector('[data-content="' + targetId + '"]');
        }

        toggleContent(btn, content, animatedWrap);
      });

      // Optional: open with keyboard on Space/Enter for non-button controls (safety)
      document.addEventListener('keydown', function(e) {
        const btn = e.target.closest('[data-toggle-target]');
        if (!btn) return;
        if (btn.tagName.toLowerCase() !== 'button' && (e.key === ' ' || e.key === 'Enter')) {
          e.preventDefault();
          btn.click();
        }
      });

      // Enhance native <details> summary focus styling on click (no-op for functionality)
      const allDetails = document.querySelectorAll('details');
      allDetails.forEach(d => {
        d.addEventListener('toggle', function() {
          // This space reserved if you'd like to sync external UI with <details> state.
        });
      });
    })();
  </script>
</body>
</html>