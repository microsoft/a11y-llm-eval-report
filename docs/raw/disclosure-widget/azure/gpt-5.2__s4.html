<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widget Example</title>
  <style>
    :root {
      --bg: #0b1020;
      --panel: #111a33;
      --text: #e7ecff;
      --muted: #aab6e8;
      --border: rgba(255, 255, 255, 0.12);
      --focus: #7aa2ff;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      --radius: 12px;
      --pad: 14px;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% 0%, #16255a, transparent 60%),
                  radial-gradient(900px 700px at 90% 20%, #2a1a60, transparent 55%),
                  var(--bg);
      min-height: 100vh;
      padding: 28px;
      box-sizing: border-box;
    }

    h1 {
      margin: 0 0 14px;
      font-weight: 700;
      font-size: 20px;
      letter-spacing: 0.2px;
    }

    p {
      margin: 0 0 18px;
      color: var(--muted);
      max-width: 72ch;
      line-height: 1.45;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 14px;
      max-width: 1000px;
    }

    .example {
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: var(--pad);
      user-select: none;
      cursor: pointer;
      background: rgba(0,0,0,0.14);
    }

    .title {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .title strong {
      font-size: 14px;
      letter-spacing: 0.2px;
    }

    .title span {
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .toggle {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.05);
      color: var(--text);
      border-radius: 999px;
      padding: 8px 10px;
      font-size: 12px;
      cursor: pointer;
    }

    .toggle:focus-visible {
      outline: 3px solid rgba(122, 162, 255, 0.35);
      outline-offset: 2px;
    }

    .chev {
      width: 18px;
      height: 18px;
      display: inline-block;
      transition: transform 160ms ease;
    }

    .details {
      padding: 0 var(--pad);
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height 220ms ease, opacity 180ms ease;
      border-top: 1px solid transparent;
    }

    .example[aria-expanded="true"] .details {
      padding: var(--pad);
      max-height: 220px;
      opacity: 1;
      border-top-color: var(--border);
    }

    .example[aria-expanded="true"] .chev {
      transform: rotate(180deg);
    }

    .details .content {
      color: var(--text);
      line-height: 1.45;
      font-size: 13px;
    }

    .details ul {
      margin: 10px 0 0;
      padding-left: 18px;
      color: var(--muted);
    }

    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 12px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.05);
      padding: 1px 6px;
      border-radius: 6px;
      color: var(--text);
    }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widgets</h1>
  <p>
    Click a header or press <span class="kbd">Enter</span>/<span class="kbd">Space</span> on the toggle button to expand or collapse.
    Each widget is wrapped in a <span class="kbd">div.example</span>, and the controlled content container has class <span class="kbd">details</span>.
  </p>

  <div class="grid">
    <div class="example" aria-expanded="false">
      <div class="header" data-action="toggle">
        <div class="title">
          <strong>Widget A</strong>
          <span>Product specs (collapsed by default)</span>
        </div>
        <button class="toggle" type="button" aria-controls="details-a" aria-expanded="false">
          Details
          <svg class="chev" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M12 15.5a1 1 0 0 1-.7-.29l-6-6a1 1 0 1 1 1.4-1.42L12 13.09l5.3-5.3a1 1 0 0 1 1.4 1.42l-6 6a1 1 0 0 1-.7.29Z"/>
          </svg>
        </button>
      </div>
      <div id="details-a" class="details" role="region" aria-label="Widget A details">
        <div class="content">
          <div><strong>Overview:</strong> Lightweight, durable, and optimized for everyday use.</div>
          <ul>
            <li>Battery life: up to 12 hours</li>
            <li>Weight: 1.25 kg</li>
            <li>Warranty: 2 years</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="example" aria-expanded="true">
      <div class="header" data-action="toggle">
        <div class="title">
          <strong>Widget B</strong>
          <span>FAQ (expanded by default)</span>
        </div>
        <button class="toggle" type="button" aria-controls="details-b" aria-expanded="true">
          Details
          <svg class="chev" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M12 15.5a1 1 0 0 1-.7-.29l-6-6a1 1 0 1 1 1.4-1.42L12 13.09l5.3-5.3a1 1 0 0 1 1.4 1.42l-6 6a1 1 0 0 1-.7.29Z"/>
          </svg>
        </button>
      </div>
      <div id="details-b" class="details" role="region" aria-label="Widget B details">
        <div class="content">
          <div><strong>Q:</strong> Does this support offline mode?</div>
          <div><strong>A:</strong> Yes, it caches recent items automatically and syncs when you reconnect.</div>
          <ul>
            <li>Tip: Refresh the page after long offline sessions.</li>
            <li>Tip: Keep storage permission enabled for best results.</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="example" aria-expanded="false">
      <div class="header" data-action="toggle">
        <div class="title">
          <strong>Widget C</strong>
          <span>Release notes</span>
        </div>
        <button class="toggle" type="button" aria-controls="details-c" aria-expanded="false">
          Details
          <svg class="chev" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path fill="currentColor" d="M12 15.5a1 1 0 0 1-.7-.29l-6-6a1 1 0 1 1 1.4-1.42L12 13.09l5.3-5.3a1 1 0 0 1 1.4 1.42l-6 6a1 1 0 0 1-.7.29Z"/>
          </svg>
        </button>
      </div>
      <div id="details-c" class="details" role="region" aria-label="Widget C details">
        <div class="content">
          <div><strong>v2.3.0</strong></div>
          <ul>
            <li>Improved search relevance and keyboard navigation</li>
            <li>Reduced bundle size by ~8%</li>
            <li>Fixed a rare state sync issue in multi-tab sessions</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function () {
      function setExpanded(exampleEl, expanded) {
        exampleEl.setAttribute('aria-expanded', String(expanded));
        const btn = exampleEl.querySelector('.toggle');
        if (btn) btn.setAttribute('aria-expanded', String(expanded));
      }

      document.querySelectorAll('.example').forEach((exampleEl) => {
        const btn = exampleEl.querySelector('.toggle');
        const header = exampleEl.querySelector('.header');

        // Ensure initial state is consistent between container and button
        const expanded = exampleEl.getAttribute('aria-expanded') === 'true';
        setExpanded(exampleEl, expanded);

        const toggle = () => setExpanded(exampleEl, exampleEl.getAttribute('aria-expanded') !== 'true');

        if (btn) btn.addEventListener('click', (e) => { e.stopPropagation(); toggle(); });
        if (header) header.addEventListener('click', (e) => {
          // Avoid double toggle when clicking the button itself
          if (e.target && e.target.closest && e.target.closest('.toggle')) return;
          toggle();
        });
      });
    })();
  </script>
</body>
</html>