<html lang="en">
<head>
<meta charset="UTF-8">
<title>Expand/Collapse Widget Demo</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root {
  color-scheme: light dark;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  line-height: 1.5;
}
body {
  margin: 0;
  padding: 2rem;
  background: radial-gradient(circle at top, #f0f4ff, #ffffff 40%);
}
h1 {
  margin-bottom: 2rem;
  text-align: center;
}
.example {
  background: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 12px;
  padding: 1.5rem;
  margin-inline: auto;
  margin-bottom: 2rem;
  max-width: 600px;
  box-shadow: 0 15px 40px rgba(15, 23, 42, 0.1);
}
.example header {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-bottom: 1rem;
}
.example h2 {
  margin: 0;
  font-size: 1.25rem;
}
.toggle-button {
  align-self: flex-start;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1.25rem;
  background: linear-gradient(135deg, #2563eb, #7c3aed);
  color: #ffffff;
  font-weight: 600;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.toggle-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 20px rgba(37, 99, 235, 0.25);
}
.toggle-button:focus-visible {
  outline: 3px solid rgba(37, 99, 235, 0.3);
  outline-offset: 3px;
}
.toggle-button .icon {
  display: inline-block;
  width: 1.25rem;
  height: 1.25rem;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  position: relative;
}
.toggle-button .icon::before,
.toggle-button .icon::after {
  content: "";
  position: absolute;
  inset: 50%;
  width: 50%;
  height: 3px;
  background: #ffffff;
  border-radius: 999px;
  transform-origin: center;
  transition: transform 0.2s ease, opacity 0.2s ease;
}
.toggle-button .icon::before {
  transform: translate(-50%, -50%);
}
.toggle-button .icon::after {
  transform: translate(-50%, -50%) rotate(90deg);
}
.toggle-button[aria-expanded="true"] .icon::after {
  opacity: 0;
}
.details {
  display: grid;
  gap: 0.75rem;
  background: rgba(148, 163, 184, 0.05);
  border-radius: 10px;
  padding: 1rem;
  border: 1px solid rgba(148, 163, 184, 0.25);
}
.details p {
  margin: 0;
}
.fade {
  opacity: 0;
  transition: opacity 0.3s ease;
}
.fade.show {
  opacity: 1;
}
ul {
  margin: 0;
  padding-left: 1.2rem;
}
code {
  background: rgba(15, 23, 42, 0.1);
  padding: 0.15rem 0.4rem;
  border-radius: 6px;
}
</style>
</head>
<body>
<h1>Expand &amp; Collapse Widget Examples</h1>

<div class="example" data-example>
  <header>
    <h2>Toggle Overview</h2>
    <p>Click to reveal an overview of the widget&rsquo;s features.</p>
  </header>
  <button class="toggle-button" type="button" aria-expanded="false" aria-controls="details-1">
    <span class="icon" aria-hidden="true"></span>
    Show overview
  </button>
  <div class="details fade" id="details-1" hidden>
    <p>This widget uses a button to toggle visibility of associated content. The button text and icon update to reflect the current state.</p>
    <ul>
      <li>Accessible with keyboard and screen readers.</li>
      <li>Uses the <code>hidden</code> attribute to control visibility.</li>
      <li>ARIA attributes synchronize state and target association.</li>
    </ul>
  </div>
</div>

<div class="example" data-example>
  <header>
    <h2>Expandable FAQ</h2>
    <p>Expand to read answers to common questions.</p>
  </header>
  <button class="toggle-button" type="button" aria-expanded="false" aria-controls="details-2">
    <span class="icon" aria-hidden="true"></span>
    Show answers
  </button>
  <div class="details fade" id="details-2" hidden>
    <p><strong>How does this work?</strong><br>The button toggles the <code>hidden</code> attribute on the associated content container.</p>
    <p><strong>Can I use multiple widgets?</strong><br>Yes, each widget maintains its own state using data attributes and unique IDs.</p>
    <p><strong>Is it customizable?</strong><br>Absolutely. Adjust the styling or animation by modifying the CSS rules.</p>
  </div>
</div>

<script>
(function () {
  const examples = document.querySelectorAll('[data-example]');
  examples.forEach((example, index) => {
    const button = example.querySelector('.toggle-button');
    const content = example.querySelector('.details');
    const fadeTarget = content.classList.contains('fade') ? content : null;

    if (!button || !content) return;

    if (!content.id) {
      content.id = `details-generated-${index + 1}`;
      button.setAttribute('aria-controls', content.id);
    }

    button.addEventListener('click', () => {
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      button.setAttribute('aria-expanded', String(!isExpanded));
      button.innerHTML = `
        <span class="icon" aria-hidden="true"></span>
        ${isExpanded ? 'Show' : 'Hide'} ${example.querySelector('h2') ? example.querySelector('h2').textContent.toLowerCase() : 'content'}
      `;
      if (isExpanded) {
        content.hidden = true;
        if (fadeTarget) fadeTarget.classList.remove('show');
      } else {
        content.hidden = false;
        requestAnimationFrame(() => {
          if (fadeTarget) fadeTarget.classList.add('show');
        });
      }
    });
  });
})();
</script>
</body>
</html>