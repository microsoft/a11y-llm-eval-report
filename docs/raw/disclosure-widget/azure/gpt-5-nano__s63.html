<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widget Demo</title>
  <style>
    :root {
      --bg: #0b1020;
      --card: #141a26;
      --text: #e9edfb;
      --muted: #98a2b3;
      --accent: #6aa8f5;
    }

    html, body {
      margin: 0;
      padding: 0;
      background: #0b1020;
      color: var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    }

    .container {
      max-width: 760px;
      margin: 40px auto;
      padding: 0 16px;
    }

    h1 {
      font-size: 1.75rem;
      margin: 0 0 20px;
      letter-spacing: .2px;
    }

    .example {
      background: #111827;
      border: 1px solid #1f2937;
      border-radius: 10px;
      padding: 14px;
      margin-bottom: 14px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
    }

    .example-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
    }

    .example-title {
      margin: 0;
      font-size: 0.95rem;
      color: #eaf0ff;
    }

    .expander {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      font-size: 14px;
      color: #0b1020;
      background: #e0e7ff;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background .2s ease;
    }

    .expander:hover { background: #d8e3ff; }

    .arrow {
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 8px solid #0b1020;
      display: inline-block;
      transform: rotate(-90deg);
      transition: transform .2s ease;
    }

    .expander[aria-expanded="true"] { background: #dbe8ff; }
    .expander[aria-expanded="true"] .arrow { transform: rotate(0deg); }

    .details {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height .35s ease, opacity .2s ease;
      padding: 0 4px;
    }

    .details.open {
      opacity: 1;
      max-height: 220px;
      padding-top: 8px;
      padding-bottom: 8px;
    }

    .details p {
      margin: 0;
      color: #cbd5e1;
    }

    /* Focus styles for accessibility */
    .expander:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    @media (prefers-reduced-motion: reduce) {
      .arrow { transition: none; }
      .details { transition: none; }
    }
  </style>
</head>
<body>
  <main class="container" aria-label="Expand/Collapse Widget Demo">
    <h1>Expand/Collapse Widget Demo</h1>

    <!-- Widget 1 -->
    <div class="example" aria-labelledby="example1-title">
      <div class="example-header">
        <h2 id="example1-title" class="example-title">Widget 1</h2>
        <button class="expander" aria-expanded="false" aria-controls="panel1" id="btn1" type="button">
          Expand details
          <span class="arrow" aria-hidden="true"></span>
        </button>
      </div>
      <div id="panel1" class="details" role="region" aria-labelledby="btn1">
        <p>Here is some extra information that is hidden by default. Clicking the button above expands this content to reveal more details about Widget 1.</p>
      </div>
    </div>

    <!-- Widget 2 -->
    <div class="example" aria-labelledby="example2-title">
      <div class="example-header">
        <h2 id="example2-title" class="example-title">Widget 2 (Another collapse)</h2>
        <button class="expander" aria-expanded="false" aria-controls="panel2" id="btn2" type="button">
          Show more
          <span class="arrow" aria-hidden="true"></span>
        </button>
      </div>
      <div id="panel2" class="details" role="region" aria-labelledby="btn2">
        <p>Additional content for the second widget. It uses the same controlled area pattern with a details container.</p>
      </div>
    </div>

    <!-- Widget 3 -->
    <div class="example" aria-labelledby="example3-title">
      <div class="example-header">
        <h2 id="example3-title" class="example-title">Widget 3 (Accordion style)</h2>
        <button class="expander" aria-expanded="false" aria-controls="panel3" id="btn3" type="button">
          Reveal content
          <span class="arrow" aria-hidden="true"></span>
        </button>
      </div>
      <div id="panel3" class="details" role="region" aria-labelledby="btn3">
        <p>Content for a third widget to demonstrate multiple expandables on a single page.</p>
      </div>
    </div>
  </main>

  <script>
    (function () {
      const widgetContainers = document.querySelectorAll('.example');
      widgetContainers.forEach((container) => {
        const btn = container.querySelector('.expander');
        const panel = container.querySelector('.details');
        if (!btn || !panel) return;

        // Initialize state
        panel.style.maxHeight = '0px';
        panel.classList.remove('open');
        btn.setAttribute('aria-expanded', 'false');

        btn.addEventListener('click', () => {
          const isOpen = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', String(!isOpen));

          if (!isOpen) {
            // Open
            panel.classList.add('open');
            panel.style.maxHeight = panel.scrollHeight + 'px';
          } else {
            // Close
            panel.style.maxHeight = '0px';
            panel.classList.remove('open');
          }
        });

        panel.addEventListener('transitionend', () => {
          if (panel.classList.contains('open')) {
            // Let the panel adapt to content height if it changes
            panel.style.maxHeight = 'none';
          }
        });
      });
    })();
  </script>
</body>
</html>