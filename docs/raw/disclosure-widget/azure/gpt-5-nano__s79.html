<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/Collapse Widget Demo</title>
  <style>
    :root {
      --bg: #0e101b;
      --card: #1b1f39;
      --surface: #2a2f6b;
      --text: #e9e9f1;
      --accent: #7bd389;
    }
    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; background: var(--bg); color: var(--text); font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif; }
    body { padding: 2rem; }
    h1 { font-size: 1.75rem; margin-bottom: 1rem; }
    .example {
      background: #1b1f39;
      border: 1px solid #3b4ea6;
      border-radius: 8px;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      display: block;
      max-width: 800px;
    }
    .trigger {
      background: #3a3f88;
      border: none;
      color: white;
      padding: 0.75rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s ease;
    }
    .trigger:hover { background: #4a5399; }
    .trigger:focus { outline: 2px solid #8bd; outline-offset: 2px; }
    .trigger[aria-expanded="true"] { background: #5662a2; }

    .details {
      overflow: hidden;
      max-height: 0;
      transition: max-height 0.35s ease;
      padding-top: 0;
      color: #e9e9f1;
    }
    .details.open {
      /* when open, use a reasonable max-height to show content; can be adjusted per widget */
      max-height: 400px;
      padding-top: 0.5rem;
    }

    /* Optional: ensure content looks nice when very little content is present */
    .details p { margin: 0 0 0.5rem 0; line-height: 1.4; }

    /* Small screens: stacked layout */
    @media (max-width: 700px) {
      .example { padding: 0.75rem; }
      .trigger { width: 100%; }
    }
  </style>
</head>
<body>
  <h1>Expand/Collapse Widget Demo</h1>

  <div class="example" aria-label="Expandable panel example 1">
    <button class="trigger" aria-expanded="false" aria-controls="panel-1" id="trigger-1">What is Lorem?</button>
    <div id="panel-1" class="details" role="region" aria-labelledby="trigger-1" hidden>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ac dui vel mauris placerat efficitur. Integer ac sem at arcu sollicitudin bibendum.</p>
    </div>
  </div>

  <div class="example" aria-label="Expandable panel example 2">
    <button class="trigger" aria-expanded="false" aria-controls="panel-2" id="trigger-2">Why choose this widget?</button>
    <div id="panel-2" class="details" role="region" aria-labelledby="trigger-2" hidden>
      <p>This widget demonstrates accessible expand/collapse behavior with ARIA attributes. It can be extended with smooth transitions and multiple panels.</p>
    </div>
  </div>

  <div class="example" aria-label="Expandable panel example 3">
    <button class="trigger" aria-expanded="false" aria-controls="panel-3" id="trigger-3">Example: Short answer</button>
    <div id="panel-3" class="details" role="region" aria-labelledby="trigger-3" hidden>
      <p>Yes, it works. Click to collapse or expand this content.</p>
    </div>
  </div>

  <script>
    (function() {
      // Attach behavior to all triggers inside .example blocks
      const triggers = document.querySelectorAll('.example .trigger');
      triggers.forEach(trigger => {
        trigger.addEventListener('click', function() {
          const panelId = trigger.getAttribute('aria-controls');
          const panel = document.getElementById(panelId);
          const isOpen = trigger.getAttribute('aria-expanded') === 'true';

          // Toggle ARIA state
          trigger.setAttribute('aria-expanded', String(!isOpen));

          if (!isOpen) {
            // Open panel
            panel.hidden = false;
            panel.classList.add('open');
            // Give height for transition
            panel.style.maxHeight = panel.scrollHeight + 'px';
          } else {
            // Close panel
            panel.style.maxHeight = '0px';
            // After transition, hide element to remove from accessibility flow
            panel.addEventListener('transitionend', function te() {
              panel.hidden = true;
              panel.classList.remove('open');
              panel.style.maxHeight = '';
              panel.removeEventListener('transitionend', te);
            });
          }
        });
      });
    })();
  </script>
</body>
</html>