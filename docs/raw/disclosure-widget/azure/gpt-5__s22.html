<html lang="en">
<head>
<meta charset="UTF-8">
<title>Expand/Collapse Widget Examples</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root {
    --bg: #f9fafb;
    --fg: #222;
    --brand: #2563eb;
    --border: #ddd;
    --muted: #555;
  }
  * { box-sizing: border-box; }
  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
    margin: 0;
    color: var(--fg);
    background: var(--bg);
  }
  header {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid var(--border);
    background: #fff;
  }
  header h1 { margin: 0 0 .25rem 0; font-size: 1.5rem; }
  header p { margin: 0; color: var(--muted); }
  main {
    padding: 1rem 1.5rem;
    max-width: 900px;
    margin: 0 auto;
  }
  .example {
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
    background: #fff;
    box-shadow: 0 1px 2px rgba(0,0,0,.04);
  }
  .example h2 {
    margin: 0 0 .5rem 0;
    font-size: 1.1rem;
  }
  .details {
    margin-top: .75rem;
    border: 1px dashed var(--border);
    border-radius: 6px;
    padding: .75rem;
    background: #fff;
  }
  .muted { color: var(--muted); }

  /* Native <details> styling */
  details.details {
    padding: .75rem;
  }
  details.details > summary {
    cursor: pointer;
    list-style: none;
    font-weight: 600;
    color: var(--brand);
    outline: none;
    margin: -.75rem;
    padding: .75rem;
    border-radius: 6px;
  }
  details.details > summary::-webkit-details-marker { display: none; }

  .caret {
    display: inline-block;
    transition: transform .2s ease;
    margin-right: .5rem;
    transform: rotate(0deg);
  }
  details.details[open] .caret { transform: rotate(90deg); }

  /* Button-controlled collapsible */
  .toggle-btn {
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    border: 1px solid var(--border);
    background: #f3f4f6;
    color: var(--fg);
    padding: .5rem .75rem;
    border-radius: 6px;
    cursor: pointer;
  }
  .toggle-btn[aria-expanded="true"] {
    background: #eef2ff;
    border-color: #c7d2fe;
  }
  .toggle-btn .caret { transform: rotate(0deg); }
  .toggle-btn[aria-expanded="true"] .caret { transform: rotate(90deg); }

  .collapsible {
    max-height: 0;
    overflow: hidden;
    transition: max-height .25s ease;
  }
  .collapsible.expanded {
    max-height: 300px;
  }

  /* CSS-only checkbox toggle */
  .checkbox-toggle { display: none; }
  .checkbox-label {
    display: inline-flex;
    align-items: center;
    gap: .5rem;
    cursor: pointer;
    user-select: none;
    border: 1px solid var(--border);
    padding: .5rem .75rem;
    border-radius: 6px;
    background: #f3f4f6;
  }
  .checkbox-toggle:checked + .checkbox-label {
    background: #eef2ff;
    border-color: #c7d2fe;
  }
  .checkbox-toggle + .checkbox-label .caret { transform: rotate(0deg); }
  .checkbox-toggle:checked + .checkbox-label .caret { transform: rotate(90deg); }
  .checkbox-toggle ~ .details {
    max-height: 0;
    overflow: hidden;
    transition: max-height .25s ease;
  }
  .checkbox-toggle:checked ~ .details {
    max-height: 300px;
  }

  .code {
    background: #f8fafc;
    border: 1px solid var(--border);
    padding: .5rem .75rem;
    border-radius: 6px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: .9rem;
    overflow-x: auto;
  }

  @media (prefers-reduced-motion: reduce) {
    .collapsible, .checkbox-toggle ~ .details { transition: none; }
    .caret, .toggle-btn .caret { transition: none; }
  }
</style>
</head>
<body>
<header>
  <h1>Expand/Collapse Widgets</h1>
  <p class="muted">Three approaches: native HTML, ARIA button-controlled, and CSS-only.</p>
</header>
<main>
  <div class="example" id="ex1">
    <h2>Native HTML Details/Summary</h2>
    <details class="details">
      <summary><span class="caret">▶</span> What is an expand/collapse widget?</summary>
      <div class="content">
        <p>An expand/collapse widget shows or hides additional information when activated. This example uses the built-in HTML <code>&lt;details&gt;</code> element paired with a <code>&lt;summary&gt;</code> trigger.</p>
        <ul>
          <li>Click the summary to toggle visibility.</li>
          <li>Works without JavaScript.</li>
          <li>Provides accessible semantics by default.</li>
        </ul>
        <div class="code">
<pre><code>&lt;details class="details"&gt;
  &lt;summary&gt;Title&lt;/summary&gt;
  &lt;p&gt;Hidden content.&lt;/p&gt;
&lt;/details&gt;</code></pre>
        </div>
      </div>
    </details>
  </div>

  <div class="example" id="ex2">
    <h2>Button with ARIA Controls (JavaScript)</h2>
    <button id="btn-2" class="toggle-btn" aria-expanded="false" aria-controls="panel-2">
      <span class="caret">▶</span>
      Toggle panel
    </button>
    <div id="panel-2" class="details collapsible" role="region" aria-labelledby="btn-2">
      <p>This panel is controlled by a button using ARIA attributes. The button updates its <code>aria-expanded</code> state, and the panel toggles a CSS class to animate open/close.</p>
      <ul>
        <li><strong>aria-controls</strong> references the panel.</li>
        <li><strong>aria-expanded</strong> reflects the current state.</li>
        <li>CSS animates the panel height.</li>
      </ul>
      <div class="code">
<pre><code>&lt;button aria-expanded="false" aria-controls="panel"&gt;Toggle&lt;/button&gt;
&lt;div id="panel" class="details collapsible"&gt;...&lt;/div&gt;</code></pre>
      </div>
    </div>
  </div>

  <div class="example" id="ex3">
    <h2>CSS-Only Checkbox Toggle</h2>
    <input type="checkbox" id="cb-3" class="checkbox-toggle">
    <label class="checkbox-label" for="cb-3"><span class="caret">▶</span> Show more</label>
    <div class="details">
      <p>No JavaScript needed: the label toggles the checkbox, and CSS targets the sibling <span class="muted">(the details container)</span> to expand/collapse.</p>
      <ol>
        <li>Use a visually styled label as the trigger.</li>
        <li>Checked state drives the CSS.</li>
        <li>Keep the content accessible and focusable.</li>
      </ol>
      <div class="code">
<pre><code>.checkbox-toggle:checked ~ .details { max-height: 300px; }</code></pre>
      </div>
    </div>
  </div>
</main>

<script>
  (function () {
    var btn = document.getElementById('btn-2');
    var panel = document.getElementById('panel-2');

    function togglePanel() {
      var expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', String(!expanded));
      panel.classList.toggle('expanded', !expanded);
    }

    btn.addEventListener('click', togglePanel);

    // Allow Space/Enter to toggle if focus is moved programmatically
    btn.addEventListener('keydown', function (e) {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        togglePanel();
      }
    });
  })();
</script>
</body>
</html>