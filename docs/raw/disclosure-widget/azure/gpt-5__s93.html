<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widget Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      color-scheme: light dark;
      --bg: #f8f9fa;
      --fg: #1b1b1b;
      --border: #c8c8c8;
      --accent: #0b6efd;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #121212;
        --fg: #e6e6e6;
        --border: #3a3a3a;
        --accent: #6ea0ff;
      }
    }
    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--fg);
      line-height: 1.6;
    }
    main {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem 1rem 4rem;
    }
    header {
      margin-bottom: 1.5rem;
    }
    header h1 {
      font-size: 1.75rem;
      margin: 0 0 .5rem 0;
    }
    header p {
      margin: 0;
      color: #6a6a6a;
    }

    .example {
      border: 1px dashed var(--border);
      border-radius: 12px;
      padding: 1rem;
      margin: 1rem 0 2rem;
      background: color-mix(in oklab, var(--bg) 92%, var(--accent) 8%);
    }
    .example h2 {
      font-size: 1.1rem;
      margin: 0 0 .75rem 0;
    }

    /* Shared "details" container styling (applies to native <details> and custom <div>) */
    .details {
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: .75rem 1rem;
      background: color-mix(in oklab, var(--bg) 96%, white 4%);
      box-shadow: 0 1px 2px rgba(0,0,0,.05);
      margin-top: .5rem;
    }
    .details[hidden] {
      display: none !important;
    }

    /* Native <details> tweaks */
    details.details {
      padding: 0;
    }
    details.details > summary {
      list-style: none;
      cursor: pointer;
      user-select: none;
      padding: .75rem 1rem;
      font-weight: 600;
      border-bottom: 1px solid var(--border);
    }
    details.details > summary::marker {
      content: "";
    }
    details.details > summary:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
      border-radius: 10px 10px 0 0;
    }
    details.details[open] > summary {
      border-bottom-color: transparent;
      border-radius: 10px 10px 0 0;
      background: color-mix(in oklab, var(--bg) 92%, var(--accent) 8%);
    }
    details.details > .panel {
      padding: .75rem 1rem;
    }

    /* Button styles for custom disclosure */
    .controls {
      display: flex;
      gap: .5rem;
      align-items: center;
      flex-wrap: wrap;
    }
    button.toggle {
      appearance: none;
      border: 1px solid var(--border);
      border-radius: 999px;
      padding: .5rem .9rem;
      background: color-mix(in oklab, var(--bg) 90%, var(--accent) 10%);
      color: inherit;
      font-weight: 600;
      cursor: pointer;
      transition: background-color .15s ease, border-color .15s ease, transform .05s ease;
    }
    button.toggle:hover {
      border-color: color-mix(in oklab, var(--border) 50%, var(--accent) 50%);
      background: color-mix(in oklab, var(--bg) 80%, var(--accent) 20%);
    }
    button.toggle:active {
      transform: translateY(1px);
    }
    button.toggle:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 3px;
    }

    code, pre {
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    }
    pre {
      background: color-mix(in oklab, var(--bg) 90%, black 10%);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: .75rem;
      overflow: auto;
      margin: .5rem 0;
    }

    footer {
      color: #7a7a7a;
      text-align: center;
      margin-top: 3rem;
      font-size: .9rem;
    }
  </style>
</head>
<body>
  <main>
    <header>
      <h1>Expand/Collapse Widgets</h1>
      <p>Examples of native and custom disclosure controls. Each widget is contained in a div with the class “example”, and the controlled content is inside an element with the class “details”.</p>
    </header>

    <div class="example" id="native-details-example">
      <h2>Native details disclosure</h2>
      <details class="details">
        <summary>What is an expand/collapse widget?</summary>
        <div class="panel" role="region" aria-label="Expand/Collapse Widget Details">
          <p>An expand/collapse widget lets users reveal or hide additional content on demand, reducing visual clutter. The native HTML element <code>&lt;details&gt;</code> provides this behavior out of the box with accessible keyboard support.</p>
          <ul>
            <li>Click the summary to toggle visibility.</li>
            <li>Use the keyboard to focus and activate the summary.</li>
            <li>The content below is part of the same container with class <code>details</code>.</li>
          </ul>
          <pre><code>&lt;details class="details"&gt;
  &lt;summary&gt;Heading&lt;/summary&gt;
  Content that can be expanded/collapsed
&lt;/details&gt;</code></pre>
        </div>
      </details>
    </div>

    <div class="example" id="custom-disclosure-example">
      <h2>Custom button-controlled disclosure</h2>
      <div class="controls">
        <button id="toggle1"
                class="toggle"
                aria-controls="customDetails1"
                aria-expanded="false"
                data-open="Show details"
                data-close="Hide details">
          Show details
        </button>
      </div>
      <div id="customDetails1"
           class="details"
           hidden
           role="region"
           aria-labelledby="toggle1">
        <p>This custom widget uses a button with <code>aria-expanded</code> and <code>aria-controls</code> to toggle a content container with the class <code>details</code>. It’s useful when you want greater control over animations, state, or styling beyond what the native <code>&lt;details&gt;</code> element offers.</p>
        <p>Features:</p>
        <ul>
          <li>Accessible ARIA attributes and keyboard support.</li>
          <li>Button label updates between “Show details” and “Hide details”.</li>
          <li>Press Escape while focused inside the region to collapse and return focus to the trigger.</li>
        </ul>
        <p>Example content:</p>
        <pre><code>&lt;button aria-controls="customDetails1" aria-expanded="false"&gt;Show details&lt;/button&gt;
&lt;div id="customDetails1" class="details" hidden&gt;...&lt;/div&gt;</code></pre>
      </div>
    </div>

    <div class="example" id="accordion-like-example">
      <h2>Multiple sections (accordion-like)</h2>
      <div class="controls" aria-label="Sections">
        <button id="toggle-a" class="toggle" aria-controls="section-a" aria-expanded="false" data-open="Section A" data-close="Close Section A">Section A</button>
        <button id="toggle-b" class="toggle" aria-controls="section-b" aria-expanded="false" data-open="Section B" data-close="Close Section B">Section B</button>
        <button id="toggle-c" class="toggle" aria-controls="section-c" aria-expanded="false" data-open="Section C" data-close="Close Section C">Section C</button>
      </div>

      <div id="section-a" class="details" hidden role="region" aria-labelledby="toggle-a">
        <p>Section A content. This container uses the class <code>details</code> and can be independently toggled.</p>
      </div>
      <div id="section-b" class="details" hidden role="region" aria-labelledby="toggle-b">
        <p>Section B content. You can open multiple sections at once or modify the script below to enforce a single-open rule.</p>
      </div>
      <div id="section-c" class="details" hidden role="region" aria-labelledby="toggle-c">
        <p>Section C content. Press Escape while focused here to collapse and return focus to its trigger.</p>
      </div>
    </div>

    <footer>
      Built to showcase expand/collapse patterns with containers using the “details” class.
    </footer>
  </main>

  <script>
    (function () {
      function initDisclosureButton(btn) {
        var targetId = btn.getAttribute('aria-controls');
        var target = document.getElementById(targetId);
        if (!target) return;

        function setState(expanded) {
          btn.setAttribute('aria-expanded', expanded ? 'true' : 'false');
          if (expanded) {
            target.removeAttribute('hidden');
            if (btn.dataset.close) btn.textContent = btn.dataset.close;
          } else {
            target.setAttribute('hidden', '');
            if (btn.dataset.open) btn.textContent = btn.dataset.open;
          }
        }

        // Initialize state based on current DOM
        var isHidden = target.hasAttribute('hidden');
        setState(!isHidden);

        // Toggle on click
        btn.addEventListener('click', function () {
          var expanded = btn.getAttribute('aria-expanded') === 'true';
          setState(!expanded);
        });

        // Collapse on Escape from inside the region
        target.addEventListener('keydown', function (e) {
          if (e.key === 'Escape') {
            setState(false);
            btn.focus();
          }
        });
      }

      // Initialize all buttons that control a .details target
      Array.prototype.forEach.call(document.querySelectorAll('button[aria-controls]'), function (btn) {
        var targetId = btn.getAttribute('aria-controls');
        var target = document.getElementById(targetId);
        if (target && target.classList.contains('details')) {
          initDisclosureButton(btn);
        }
      });
    }());
  </script>
</body>
</html>