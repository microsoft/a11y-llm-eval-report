<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Expand/Collapse Widgets Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --border: #d9d9d9;
      --bg: #fafafa;
      --text: #222;
      --accent: #2962ff;
    }

    * { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: #fff;
      line-height: 1.6;
    }

    header {
      padding: 2rem 1rem 0;
      text-align: center;
    }
    header h1 {
      margin: 0 0 .25rem;
      font-size: clamp(1.5rem, 3.5vw, 2rem);
    }
    header p {
      margin: 0 0 1rem;
      color: #555;
    }

    .example {
      margin: 1rem auto;
      max-width: 800px;
      border: 1px solid var(--border);
      background: var(--bg);
      padding: 1rem 1rem 1.25rem;
      border-radius: 12px;
      box-shadow: 0 1px 2px rgba(0,0,0,.04);
    }
    .example h2 {
      margin: 0 0 .5rem;
      font-size: 1.1rem;
      color: #333;
    }

    /* Native details widget styling */
    details.details {
      border: 1px solid var(--border);
      border-radius: 10px;
      background: #fff;
      overflow: hidden;
    }
    details.details + details.details { margin-top: .75rem; }
    details.details summary {
      list-style: none;
      cursor: pointer;
      padding: .75rem 1rem;
      font-weight: 600;
      user-select: none;
      display: flex;
      align-items: center;
      gap: .5rem;
      color: #222;
    }
    details.details summary::marker { display: none; }
    details.details summary::before {
      content: "▸";
      display: inline-block;
      transition: transform .2s ease;
      color: #777;
    }
    details.details[open] summary::before {
      transform: rotate(90deg);
      color: var(--accent);
    }
    details.details .panel {
      border-top: 1px solid var(--border);
      padding: .75rem 1rem;
      background: #fff;
    }

    /* Button-controlled content */
    .controls {
      display: flex;
      gap: .5rem;
      align-items: center;
      margin-bottom: .5rem;
    }
    .toggle {
      appearance: none;
      border: 1px solid var(--border);
      background: #fff;
      color: #222;
      padding: .5rem .75rem;
      border-radius: 8px;
      font-size: .95rem;
      cursor: pointer;
      transition: border-color .15s ease, box-shadow .15s ease;
    }
    .toggle:hover {
      border-color: #c7c7c7;
      box-shadow: 0 1px 2px rgba(0,0,0,.06);
    }
    .toggle[aria-expanded="true"] {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(41, 98, 255, .15);
    }
    .toggle .chev {
      margin-left: .35rem;
      display: inline-block;
      transition: transform .2s ease;
    }
    .toggle[aria-expanded="true"] .chev {
      transform: rotate(180deg);
    }

    .details[hidden] { display: none !important; }
    .details {
      border: 1px solid var(--border);
      border-radius: 10px;
      background: #fff;
      padding: .75rem 1rem;
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: .9em;
      background: #f6f6f6;
      padding: .1rem .3rem;
      border-radius: 4px;
      border: 1px solid #eee;
    }

    footer {
      max-width: 800px;
      margin: 1rem auto 2rem;
      padding: 0 1rem;
      color: #666;
      font-size: .9rem;
    }
  </style>
</head>
<body>
  <header>
    <h1>Expand/Collapse Widgets</h1>
    <p>Examples using native and custom interactive patterns.</p>
  </header>

  <div class="example">
    <h2>Native details element</h2>
    <details class="details">
      <summary>What is an expand/collapse widget?</summary>
      <div class="panel">
        <p>An expand/collapse widget reveals additional content on demand. The native <code>&lt;details&gt;</code> element provides this behavior with built-in accessibility and keyboard support.</p>
        <ul>
          <li>Click the summary to toggle visibility.</li>
          <li>Use keyboard: Space or Enter toggles; Tab focuses the summary.</li>
          <li>Open state can be reflected using the <code>[open]</code> attribute.</li>
        </ul>
      </div>
    </details>
  </div>

  <div class="example">
    <h2>Button-controlled content</h2>
    <div class="controls">
      <button id="ex2-button" class="toggle" aria-expanded="false" aria-controls="ex2-content">
        Show more <span class="chev">▾</span>
      </button>
    </div>
    <div id="ex2-content" class="details" role="region" aria-labelledby="ex2-button" hidden>
      <p>This block is controlled by the button above. The button's <code>aria-expanded</code> reflects the current state, and the content region uses <code>hidden</code> to remain out of the accessibility tree when collapsed.</p>
      <p>Use this pattern when you need more control over the trigger element or want to manage animations and state in JavaScript.</p>
    </div>
  </div>

  <div class="example">
    <h2>Another details example</h2>
    <details class="details">
      <summary>More tips</summary>
      <div class="panel">
        <p>Consider the following tips when using expand/collapse:</p>
        <ul>
          <li>Keep summary labels short and descriptive.</li>
          <li>Group related content under a single panel when possible.</li>
          <li>Ensure focus management when toggling complex layouts.</li>
        </ul>
      </div>
    </details>
  </div>

  <footer>
    Demo complete. Interact with the panels to expand or collapse content.
  </footer>

  <script>
    (function () {
      function setExpanded(button, expanded) {
        button.setAttribute('aria-expanded', String(expanded));
        const controlsId = button.getAttribute('aria-controls');
        if (!controlsId) return;
        const region = document.getElementById(controlsId);
        if (!region) return;
        region.hidden = !expanded;

        const labelParts = button.textContent.split('▾')[0].split('▸')[0].trim().toLowerCase();
        // Update label text while preserving chevron element
        const chev = button.querySelector('.chev');
        const baseText = expanded ? 'Hide' : 'Show more';
        button.textContent = baseText + ' ';
        if (chev) button.appendChild(chev);
      }

      document.addEventListener('click', function (ev) {
        const btn = ev.target.closest('.toggle');
        if (!btn) return;
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        setExpanded(btn, !expanded);
      });

      // Init all buttons to ensure content matches default aria-expanded
      document.querySelectorAll('.toggle[aria-controls]').forEach(function (btn) {
        const expanded = btn.getAttribute('aria-expanded') === 'true';
        setExpanded(btn, expanded);
      });
    })();
  </script>
</body>
</html>