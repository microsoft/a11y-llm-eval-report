<html lang="en">
<head>
<meta charset="UTF-8">
<title>Expand/Collapse Widget Demonstration</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    :root {
        color-scheme: light dark;
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        background-color: #f7f7f7;
        color: #1e1f25;
    }

    body {
        margin: 0;
        padding: 2rem;
        line-height: 1.6;
        background: linear-gradient(135deg, rgba(10,132,255,0.08), rgba(48,209,88,0.08));
        min-height: 100vh;
    }

    h1, h2 {
        font-weight: 600;
        color: #0b7285;
    }

    h1 {
        margin-bottom: 1.5rem;
    }

    .intro {
        max-width: 60ch;
        margin-bottom: 2.5rem;
    }

    .example {
        background: rgba(255,255,255,0.85);
        border-radius: 18px;
        box-shadow: 0 30px 60px rgba(15, 23, 42, 0.12);
        padding: 1.75rem;
        margin-bottom: 2rem;
        border: 1px solid rgba(12, 74, 110, 0.1);
        backdrop-filter: blur(12px);
    }

    .example h2 {
        margin-top: 0;
        margin-bottom: 1rem;
        font-size: 1.2rem;
    }

    .toggle {
        appearance: none;
        border: none;
        border-radius: 999px;
        padding: 0.75rem 1.6rem;
        background: linear-gradient(135deg, #0ea5e9, #6366f1);
        color: white;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s;
        box-shadow: 0 12px 30px rgba(79, 70, 229, 0.25);
        margin-bottom: 1rem;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }

    .toggle:hover {
        transform: translateY(-2px);
        box-shadow: 0 16px 36px rgba(79, 70, 229, 0.32);
    }

    .toggle:focus-visible {
        outline: 3px solid rgba(14, 165, 233, 0.5);
        outline-offset: 3px;
    }

    .toggle[data-icon="true"]::after {
        content: attr(data-symbol);
        font-size: 1.2em;
        transition: transform 0.3s ease;
    }

    .toggle[aria-expanded="true"][data-icon="true"]::after {
        transform: rotate(45deg);
    }

    .details {
        border-radius: 16px;
        border: 1px solid rgba(14, 165, 233, 0.15);
        background: rgba(225, 245, 254, 0.7);
        padding: 1.25rem;
        box-shadow: inset 0 0 0 1px rgba(14, 165, 233, 0.08);
        transition: opacity 0.25s ease;
        opacity: 1;
    }

    .details[hidden] {
        display: block;
        opacity: 0;
        max-height: 0;
        overflow: hidden;
        padding-top: 0;
        padding-bottom: 0;
        margin: 0;
        border-width: 0;
        box-shadow: none;
    }

    .details p:last-child {
        margin-bottom: 0;
    }

    .accordion {
        display: grid;
        gap: 1rem;
    }

    .accordion .toggle {
        width: 100%;
        justify-content: space-between;
        border-radius: 12px;
        padding: 0.9rem 1.2rem;
        font-size: 0.95rem;
        box-shadow: 0 10px 25px rgba(14, 165, 233, 0.18);
        background: linear-gradient(135deg, rgba(14, 165, 233, 0.92), rgba(99, 102, 241, 0.92));
    }

    @media (max-width: 600px) {
        body {
            padding: 1.5rem;
        }
        .example {
            padding: 1.4rem;
        }
    }
</style>
</head>
<body>
<main>
    <h1>Expand/Collapse Widget Demonstration</h1>
    <p class="intro">These interactive modules illustrate accessible expand/collapse behavior using buttons that control dedicated content regions. Each controlled region is wrapped in an element bearing the <code>details</code> class for consistent styling and scripting.</p>

    <div class="example">
        <h2>Basic Toggle with Status Update</h2>
        <button class="toggle" type="button" aria-expanded="false" aria-controls="basic-details" data-symbol="+" data-icon="true" data-expanded-text="Hide overview" data-collapsed-text="Show overview">Show overview</button>
        <div class="details" id="basic-details" hidden>
            <p>This expandable panel uses a single toggle button to reveal or conceal supplemental information. As the panel opens, the button text updates to reflect the new state, and the symbol rotates to provide a visual cue.</p>
            <p>The controlled region also sets <code>aria-live="polite"</code> to announce the change to assistive technologies, ensuring the experience remains inclusive.</p>
        </div>
    </div>

    <div class="example">
        <h2>Accordion with Single-Open Constraint</h2>
        <div class="accordion" data-accordion-group>
            <button class="toggle" type="button" aria-expanded="false" aria-controls="section-one" data-symbol="+" data-icon="true">Design Principles</button>
            <div class="details" id="section-one" hidden>
                <p>Prioritize clarity and simplicity. Use contrast, whitespace, and hierarchy to guide attention. Consistent iconography and motion help reinforce meaning for interactive elements.</p>
            </div>

            <button class="toggle" type="button" aria-expanded="false" aria-controls="section-two" data-symbol="+" data-icon="true">Interaction Patterns</button>
            <div class="details" id="section-two" hidden>
                <p>Adhere to established patterns for controls to reduce cognitive load. For expand/collapse interfaces, ensure keyboard and screen-reader compatibility, providing meaningful labels and status indicators.</p>
            </div>

            <button class="toggle" type="button" aria-expanded="false" aria-controls="section-three" data-symbol="+" data-icon="true">Implementation Notes</button>
            <div class="details" id="section-three" hidden>
                <p>Each button carries the <code>aria-controls</code> attribute linking it to the corresponding content container. The script manages the <code>hidden</code> state, guaranteeing that only one panel remains open at a time within this accordion.</p>
            </div>
        </div>
    </div>
</main>

<script>
    const toggleButtons = document.querySelectorAll('.toggle');

    toggleButtons.forEach(button => {
        const panelId = button.getAttribute('aria-controls');
        const panel = document.getElementById(panelId);

        if (!panel) return;

        panel.setAttribute('role', 'region');
        panel.setAttribute('aria-live', 'polite');
        panel.setAttribute('aria-labelledby', button.id || assignButtonId(button));

        button.addEventListener('click', () => {
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            const group = button.closest('[data-accordion-group]');

            if (group) {
                const groupButtons = group.querySelectorAll('.toggle');
                groupButtons.forEach(btn => {
                    if (btn !== button) {
                        const otherPanel = document.getElementById(btn.getAttribute('aria-controls'));
                        collapse(btn, otherPanel);
                    }
                });
            }

            if (isExpanded) {
                collapse(button, panel);
            } else {
                expand(button, panel);
            }
        });
    });

    function assignButtonId(button) {
        const generatedId = `toggle-${Math.random().toString(36).slice(2, 8)}`;
        button.id = generatedId;
        return generatedId;
    }

    function expand(button, panel) {
        button.setAttribute('aria-expanded', 'true');
        panel.hidden = false;

        const expandedText = button.getAttribute('data-expanded-text');
        if (expandedText) {
            button.dataset.originalText = button.textContent.trim();
            button.textContent = expandedText;
            appendSymbol(button);
        }
    }

    function collapse(button, panel) {
        button.setAttribute('aria-expanded', 'false');
        panel.hidden = true;

        const collapsedText = button.getAttribute('data-collapsed-text');
        if (collapsedText) {
            button.textContent = collapsedText;
            appendSymbol(button);
        } else if (button.dataset.originalText) {
            button.textContent = button.dataset.originalText;
            appendSymbol(button);
        }
    }

    function appendSymbol(button) {
        if (button.dataset.icon === 'true') {
            const symbol = button.getAttribute('data-symbol') || '+';
            button.textContent = button.textContent.trim();
            button.insertAdjacentText('beforeend', ` ${symbol}`);
        }
    }
</script>
</body>
</html>