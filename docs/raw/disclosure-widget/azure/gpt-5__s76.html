<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #4f46e5;
      --border: #1f2937;
      --focus: #22d3ee;
    }
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      line-height: 1.5;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
      padding: 32px 20px 48px;
    }
    h1 {
      font-size: 1.8rem;
      margin: 0 0 12px;
      letter-spacing: -0.02em;
    }
    .lead {
      color: var(--muted);
      margin-bottom: 28px;
    }

    .example {
      background: linear-gradient(180deg, #0f172a 0%, #0d1426 100%);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin: 16px 0 22px;
      box-shadow: 0 1px 0 rgba(255,255,255,0.05) inset, 0 10px 30px rgba(0,0,0,0.35);
    }
    .example h2 {
      font-size: 1.1rem;
      margin: 0 0 10px;
      color: var(--text);
    }
    .help {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 8px;
    }

    /* Native <details> styling */
    details.details {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 6px 10px;
      overflow: hidden;
    }
    details.details summary {
      list-style: none;
      cursor: pointer;
      font-weight: 600;
      color: var(--text);
      padding: 8px 6px;
      border-radius: 8px;
      outline: none;
      display: flex;
      align-items: center;
      gap: 10px;
      position: relative;
    }
    details.details summary::-webkit-details-marker {
      display: none;
    }
    details.details summary::before {
      content: "";
      width: 14px;
      height: 14px;
      border: 2px solid var(--muted);
      border-radius: 3px;
      transform: rotate(0deg);
      transition: transform 160ms ease, border-color 160ms ease, background 160ms ease;
      display: inline-block;
    }
    details.details[open] summary::before {
      transform: rotate(45deg);
      border-color: var(--accent);
      background: rgba(79,70,229,0.15);
    }
    details.details summary:focus-visible {
      outline: 2px solid var(--focus);
      outline-offset: 3px;
    }
    details.details .panel {
      padding: 10px 8px 12px;
      border-top: 1px dashed var(--border);
      color: var(--text);
      animation: fadeIn 180ms ease;
    }

    /* ARIA-controlled content container */
    .details {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 12px;
      margin-top: 10px;
    }
    .details[hidden] {
      display: none !important;
    }
    .toggle {
      appearance: none;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text);
      font-weight: 600;
      padding: 10px 12px;
      border-radius: 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      transition: border-color 120ms ease, background 120ms ease;
    }
    .toggle::before {
      content: "+";
      width: 18px;
      height: 18px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      background: rgba(255,255,255,0.06);
      color: var(--muted);
      font-weight: 700;
      line-height: 1;
    }
    .toggle[aria-expanded="true"]::before {
      content: "â€“";
      background: rgba(79,70,229,0.18);
      color: var(--accent);
    }
    .toggle:hover {
      background: rgba(255,255,255,0.03);
      border-color: #243045;
    }
    .toggle:focus-visible {
      outline: 2px solid var(--focus);
      outline-offset: 3px;
    }

    .details.open {
      border-color: #2b3b57;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
    }

    .small {
      font-size: 0.95rem;
      color: var(--muted);
    }

    code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.95em;
      background: rgba(255,255,255,0.06);
      padding: 2px 6px;
      border-radius: 6px;
      border: 1px solid var(--border);
      color: #cbd5e1;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-2px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggles = document.querySelectorAll('[data-toggle="collapse"]');

      toggles.forEach(btn => {
        const targetId = btn.getAttribute('aria-controls');
        const target = document.getElementById(targetId);

        if (!target) return;

        const setState = expanded => {
          btn.setAttribute('aria-expanded', expanded ? 'true' : 'false');
          target.hidden = !expanded;
          target.classList.toggle('open', expanded);
        };

        const initialExpanded = !target.hasAttribute('hidden');
        btn.setAttribute('aria-expanded', initialExpanded ? 'true' : 'false');
        target.classList.toggle('open', initialExpanded);

        btn.addEventListener('click', () => {
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          setState(!expanded);
        });

        btn.addEventListener('keydown', (e) => {
          // Space/Enter to toggle, Escape to collapse
          if (e.key === ' ' || e.key === 'Enter') {
            e.preventDefault();
            const expanded = btn.getAttribute('aria-expanded') === 'true';
            setState(!expanded);
          } else if (e.key === 'Escape') {
            setState(false);
            btn.focus();
          }
        });
      });

      // Optional: Allow "Close" buttons inside content to collapse
      document.querySelectorAll('[data-action="collapse"]').forEach(closeBtn => {
        closeBtn.addEventListener('click', (e) => {
          const targetId = closeBtn.getAttribute('data-target');
          const target = document.getElementById(targetId);
          const controller = document.querySelector('[aria-controls="' + targetId + '"]');
          if (!target || !controller) return;
          controller.setAttribute('aria-expanded', 'false');
          target.hidden = true;
          target.classList.remove('open');
          controller.focus();
        });
      });
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>Expand/Collapse Widget Examples</h1>
    <p class="lead">Examples of both a native HTML widget and an ARIA-controlled custom widget. Each widget is wrapped in an element with class <code>example</code>, and the controlled content uses the class <code>details</code>.</p>

    <div class="example">
      <h2>Example 1: Native HTML details/summary</h2>
      <p class="help">This uses the built-in <code>&lt;details&gt;</code> element. Click the summary to expand.</p>

      <details class="details">
        <summary>What is an expand/collapse widget?</summary>
        <div class="panel">
          <p>An expand/collapse widget allows users to reveal or hide additional information on demand. It keeps pages concise while still offering details when needed.</p>
          <p class="small">Tip: The native element manages focus, keyboard, and accessibility out of the box.</p>
        </div>
      </details>
    </div>

    <div class="example">
      <h2>Example 2: Button-controlled details (ARIA)</h2>
      <p class="help">This version uses a <code>&lt;button&gt;</code> with <code>aria-expanded</code> and <code>aria-controls</code> to toggle the content container.</p>

      <button class="toggle" aria-expanded="false" aria-controls="aria-details-1" data-toggle="collapse">How does the ARIA version work?</button>
      <div id="aria-details-1" class="details" hidden>
        <p>The button updates its <code>aria-expanded</code> attribute while showing or hiding this container. Screen readers announce the expanded state and the relationship via <code>aria-controls</code>.</p>
        <ul>
          <li>Accessible state is indicated via <code>aria-expanded</code>.</li>
          <li>This container is the controlled content and has class <code>details</code>.</li>
          <li>Keyboard: Space/Enter toggles, Escape collapses.</li>
        </ul>
        <p><button type="button" class="toggle" data-action="collapse" data-target="aria-details-1">Close this section</button></p>
      </div>
    </div>

    <div class="example">
      <h2>Example 3: Multiple collapsible sections</h2>
      <p class="help">Each button controls its own <span class="small">details</span> container.</p>

      <div style="display: grid; gap: 12px;">
        <div>
          <button class="toggle" aria-expanded="true" aria-controls="aria-details-2" data-toggle="collapse">Section A: Overview</button>
          <div id="aria-details-2" class="details">
            <p>This section starts expanded. Use the button to collapse or expand it again.</p>
            <p class="small">You can add any markup here, including lists, images, and code samples.</p>
          </div>
        </div>

        <div>
          <button class="toggle" aria-expanded="false" aria-controls="aria-details-3" data-toggle="collapse">Section B: FAQs</button>
          <div id="aria-details-3" class="details" hidden>
            <dl>
              <dt><strong>Can I style the arrow?</strong></dt>
              <dd>Yes. The toggle button uses a plus/minus indicator via CSS. The native details triangle can also be styled or replaced.</dd>
              <dt><strong>Is this accessible?</strong></dt>
              <dd>When built with proper ARIA attributes and keyboard support, custom collapsibles can be accessible. The native element is generally preferred when it fits your needs.</dd>
            </dl>
          </div>
        </div>
      </div>
    </div>

    <div class="example">
      <h2>Example 4: Nested details</h2>
      <p class="help">You can nest collapsibles. Both containers use the class <code>details</code>.</p>

      <details class="details">
        <summary>Top-level topic</summary>
        <div class="panel">
          <p>This panel contains another collapsible section:</p>
          <details class="details">
            <summary>Nested topic</summary>
            <div class="panel">
              <p>Nested content inside a second <code>&lt;details&gt;</code> element.</p>
              <ul>
                <li>Useful for progressive disclosure.</li>
                <li>Avoid nesting too deeply for usability.</li>
              </ul>
            </div>
          </details>
        </div>
      </details>
    </div>
  </div>
</body>
</html>