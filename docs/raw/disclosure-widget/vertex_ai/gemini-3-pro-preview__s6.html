<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            margin: 0;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
        }

        /* Widget Container */
        .example {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        /* The Trigger Button */
        .toggle-btn {
            width: 100%;
            background: none;
            border: none;
            padding: 15px 20px;
            text-align: left;
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            outline: none;
            transition: background-color 0.2s;
        }

        .toggle-btn:hover {
            background-color: #f8f9fa;
        }

        .toggle-btn:focus {
            background-color: #eef2f7;
            color: #0056b3;
        }

        /* Icon rotation */
        .icon {
            transition: transform 0.3s ease;
            font-size: 0.8em;
        }

        .toggle-btn[aria-expanded="true"] .icon {
            transform: rotate(180deg);
        }

        /* The Content Container (hidden by default) */
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease;
            background-color: #fff;
            color: #555;
            line-height: 1.6;
        }

        /* State when open */
        .details.open {
            /* max-height is set via JS for smooth animation, 
               but we add padding here */
            border-top: 1px solid #eee;
        }
        
        .details-inner {
            padding: 20px;
        }

    </style>
</head>
<body>

    <h1>Expand/Collapse Examples</h1>

    <!-- Widget 1: Pure JavaScript Implementation -->
    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-1">
            Section 1: Introduction
            <span class="icon">▼</span>
        </button>
        <div id="content-1" class="details">
            <div class="details-inner">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            </div>
        </div>
    </div>

    <!-- Widget 2 -->
    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-2">
            Section 2: Features
            <span class="icon">▼</span>
        </button>
        <div id="content-2" class="details">
            <div class="details-inner">
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                <ul>
                    <li>Responsive design</li>
                    <li>Smooth animations</li>
                    <li>Accessible markup</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Widget 3 -->
    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-3">
            Section 3: Settings
            <span class="icon">▼</span>
        </button>
        <div id="content-3" class="details">
            <div class="details-inner">
                <p>This section contains more complex content to demonstrate that the height calculation works dynamically regardless of the amount of text inside.</p>
                <button style="padding: 8px 16px; margin-top: 10px; cursor: pointer;">Action Button</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const triggers = document.querySelectorAll('.toggle-btn');

            triggers.forEach(trigger => {
                trigger.addEventListener('click', function() {
                    const contentId = this.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);
                    const isExpanded = this.getAttribute('aria-expanded') === 'true';

                    // Toggle Aria State
                    this.setAttribute('aria-expanded', !isExpanded);
                    
                    // Toggle Content
                    if (!isExpanded) {
                        content.classList.add('open');
                        // Set specific height for transition
                        content.style.maxHeight = content.scrollHeight + "px";
                    } else {
                        content.style.maxHeight = null;
                        // Wait for transition to finish before removing border styling if needed, 
                        // but strictly CSS transition handles the visual close nicely.
                        content.classList.remove('open');
                    }
                });
            });
        });
    </script>
</body>
</html>