<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            padding: 2rem;
            line-height: 1.6;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 2rem;
        }

        /* Wrapper style as requested */
        .example {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            overflow: hidden;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Button styling */
        .toggle-btn {
            background: none;
            border: none;
            width: 100%;
            padding: 1rem 1.5rem;
            text-align: left;
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease;
        }

        .toggle-btn:hover {
            background-color: #f8f9fa;
        }

        .toggle-btn:focus {
            outline: 2px solid #0056b3;
            outline-offset: -2px;
        }

        /* Icon rotation */
        .icon {
            transition: transform 0.3s ease;
            width: 12px;
            height: 12px;
            border-right: 2px solid #7f8c8d;
            border-bottom: 2px solid #7f8c8d;
            transform: rotate(45deg);
            margin-top: -5px;
        }

        .toggle-btn[aria-expanded="true"] .icon {
            transform: rotate(225deg);
            margin-top: 5px;
            border-color: #0056b3;
        }

        /* Content container style as requested */
        .details {
            padding: 0 1.5rem;
            color: #555;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease;
        }

        .details.open {
            padding-bottom: 1.5rem;
            /* Max-height is set via JS for smooth animation */
        }
        
        /* Different method using <details> and <summary> for the second example */
        details.native-widget summary {
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            list-style: none; /* Hide default triangle */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        details.native-widget summary::-webkit-details-marker {
            display: none;
        }

        details.native-widget summary::after {
            content: '+';
            font-size: 1.5rem;
            font-weight: 300;
        }

        details.native-widget[open] summary::after {
            content: '-';
        }

        details.native-widget .details {
            max-height: none; /* Native behavior doesn't need JS height calc */
            padding-bottom: 1.5rem;
            border-top: 1px solid #eee;
        }
    </style>
</head>
<body>

    <h1>Expand/Collapse Demos</h1>

    <!-- Method 1: JavaScript-controlled Button + Div -->
    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-1">
            <span>What is an Expand/Collapse widget?</span>
            <span class="icon"></span>
        </button>
        <div id="content-1" class="details" role="region">
            <p>An expand/collapse widget, often called an accordion or disclosure widget, allows users to toggle the visibility of content. This pattern is excellent for managing large amounts of information by hiding details until the user requests them.</p>
        </div>
    </div>

    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-2">
            <span>Why use aria-expanded?</span>
            <span class="icon"></span>
        </button>
        <div id="content-2" class="details" role="region">
            <p>The <code>aria-expanded</code> attribute is crucial for accessibility. It informs screen reader users whether the collapsible content is currently visible (true) or hidden (false), ensuring the UI state is programmatically determinable.</p>
        </div>
    </div>

    <!-- Method 2: Native HTML <details> and <summary> -->
    <div class="example">
        <details class="native-widget">
            <summary>Native HTML5 Solution</summary>
            <div class="details">
                <p>This widget uses the native <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> HTML tags. It requires zero JavaScript to function, is semantic, and accessible by default in modern browsers.</p>
            </div>
        </details>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggles = document.querySelectorAll('.toggle-btn');

            toggles.forEach(toggle => {
                toggle.addEventListener('click', () => {
                    // Get the content ID from aria-controls
                    const contentId = toggle.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);
                    
                    // Check current state
                    const isExpanded = toggle.getAttribute('aria-expanded') === 'true';

                    // Toggle state
                    toggle.setAttribute('aria-expanded', !isExpanded);
                    content.classList.toggle('open');

                    // Handle smooth height animation
                    if (!isExpanded) {
                        content.style.maxHeight = content.scrollHeight + "px";
                    } else {
                        content.style.maxHeight = null;
                    }
                });
            });
        });
    </script>
</body>
</html>