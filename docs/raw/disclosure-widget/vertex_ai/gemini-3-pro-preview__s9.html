<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
            color: #333;
        }

        h1 {
            margin-bottom: 30px;
        }

        .example {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .toggle-btn {
            width: 100%;
            background: none;
            border: none;
            padding: 15px 20px;
            text-align: left;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #2c3e50;
            transition: background-color 0.2s;
        }

        .toggle-btn:hover {
            background-color: #f8f9fa;
        }

        .toggle-btn:focus {
            outline: 2px solid #0056b3;
            outline-offset: -2px;
        }

        /* Icon rotation */
        .icon {
            transition: transform 0.3s ease;
        }

        .toggle-btn[aria-expanded="true"] .icon {
            transform: rotate(180deg);
        }

        .details {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease;
            background-color: #fff;
            line-height: 1.6;
        }

        .details.open {
            padding-bottom: 20px; 
            /* max-height is set via JS */
        }
    </style>
</head>
<body>

    <h1>Disclosure Widgets</h1>

    <!-- Widget 1 -->
    <div class="example">
        <button type="button" class="toggle-btn" aria-expanded="false" aria-controls="content-1">
            <span>What is an expand/collapse widget?</span>
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </button>
        <div id="content-1" class="details">
            <p>An expand/collapse widget, often implemented using the disclosure pattern, allows users to toggle the visibility of content. This helps in managing screen real estate and reducing cognitive load by hiding information until it is needed.</p>
        </div>
    </div>

    <!-- Widget 2 -->
    <div class="example">
        <button type="button" class="toggle-btn" aria-expanded="false" aria-controls="content-2">
            <span>How does this implementation work?</span>
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </button>
        <div id="content-2" class="details">
            <p>This implementation uses vanilla JavaScript. It listens for clicks on the button, toggles the <code>aria-expanded</code> attribute for accessibility, and calculates the <code>scrollHeight</code> of the content container to animate the <code>max-height</code> property smoothly.</p>
        </div>
    </div>

    <!-- Widget 3 -->
    <div class="example">
        <button type="button" class="toggle-btn" aria-expanded="false" aria-controls="content-3">
            <span>Why use ARIA attributes?</span>
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
        </button>
        <div id="content-3" class="details">
            <p>ARIA attributes like <code>aria-expanded</code> and <code>aria-controls</code> are crucial for screen readers. They inform assistive technology users about the state of the widget (whether it is open or closed) and which content block corresponds to which button.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const buttons = document.querySelectorAll('.toggle-btn');

            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    const contentId = button.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);
                    
                    // Toggle the Expanded state
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';
                    
                    // Update ARIA attribute
                    button.setAttribute('aria-expanded', !isExpanded);
                    
                    // Toggle content visibility
                    if (!isExpanded) {
                        content.classList.add('open');
                        // Set max-height to the scrollHeight to allow animation
                        content.style.maxHeight = content.scrollHeight + 20 + "px"; // +20 for padding buffer
                    } else {
                        // Reset max-height to 0
                        content.style.maxHeight = null;
                        content.classList.remove('open');
                    }
                });
            });
        });
    </script>
</body>
</html>