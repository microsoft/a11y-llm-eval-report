<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
        }

        .example {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        .toggle-btn {
            width: 100%;
            background: none;
            border: none;
            text-align: left;
            padding: 20px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease;
        }

        .toggle-btn:hover {
            background-color: #fafafa;
        }

        .toggle-btn:focus {
            outline: 2px solid #0056b3;
            outline-offset: -2px;
        }

        .icon {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
            color: #666;
        }

        /* State for expanded button */
        .toggle-btn[aria-expanded="true"] .icon {
            transform: rotate(180deg);
        }

        .toggle-btn[aria-expanded="true"] {
            border-bottom: 1px solid #f0f0f0;
        }

        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out, opacity 0.4s ease-out;
            opacity: 0;
            background-color: #fff;
        }

        .details.open {
            opacity: 1;
            /* max-height is set via JS for smooth animation to auto height */
        }

        .content-inner {
            padding: 20px;
            color: #555;
            line-height: 1.6;
        }
    </style>
</head>
<body>

    <!-- Widget 1: Basic Example -->
    <div class="example">
        <button type="button" class="toggle-btn" aria-expanded="false" aria-controls="content-1">
            <span>Why is the sky blue?</span>
            <span class="icon" aria-hidden="true">▼</span>
        </button>
        <div id="content-1" class="details">
            <div class="content-inner">
                <p>The sky is blue due to Rayleigh scattering. As sunlight reaches Earth's atmosphere, it is scattered in all directions by all the gases and particles in the air. Blue light is scattered more than other colors because it travels as shorter, smaller waves. This is why we see a blue sky most of the time.</p>
            </div>
        </div>
    </div>

    <!-- Widget 2: Another Example -->
    <div class="example">
        <button type="button" class="toggle-btn" aria-expanded="false" aria-controls="content-2">
            <span>What is the capital of Australia?</span>
            <span class="icon" aria-hidden="true">▼</span>
        </button>
        <div id="content-2" class="details">
            <div class="content-inner">
                <p>The capital of Australia is <strong>Canberra</strong>. It is located at the northern end of the Australian Capital Territory (ACT), 280 km (170 mi) south-west of Sydney and 660 km (410 mi) north-east of Melbourne.</p>
                <p>It was chosen as a compromise between the two largest cities, Sydney and Melbourne.</p>
            </div>
        </div>
    </div>

    <!-- Widget 3: Image Content -->
    <div class="example">
        <button type="button" class="toggle-btn" aria-expanded="false" aria-controls="content-3">
            <span>Show me a placeholder image</span>
            <span class="icon" aria-hidden="true">▼</span>
        </button>
        <div id="content-3" class="details">
            <div class="content-inner">
                <div style="background-color: #eee; height: 150px; display: flex; align-items: center; justify-content: center; border-radius: 4px;">
                    Placeholder Area
                </div>
                <p style="margin-top: 10px;">This content expands to fit the image height.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const buttons = document.querySelectorAll('.toggle-btn');

            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    const expanded = button.getAttribute('aria-expanded') === 'true';
                    const targetId = button.getAttribute('aria-controls');
                    const targetContent = document.getElementById(targetId);

                    // Toggle accessibility state
                    button.setAttribute('aria-expanded', !expanded);

                    // Toggle visibility class
                    targetContent.classList.toggle('open');

                    if (!expanded) {
                        // Expanding: Set max-height to scrollHeight to allow transition
                        targetContent.style.maxHeight = targetContent.scrollHeight + "px";
                    } else {
                        // Collapsing: Set max-height back to 0
                        targetContent.style.maxHeight = null;
                    }
                });
            });
        });
    </script>
</body>
</html>