<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        .example {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #e9ecef;
            cursor: pointer;
            border-bottom: 1px solid #dee2e6;
            transition: background-color 0.2s ease;
        }

        .widget-header:hover {
            background-color: #e2e6ea;
        }

        .widget-header h2 {
            margin: 0;
            font-size: 1.2em;
            color: #343a40;
        }

        .toggle-icon {
            font-size: 1.5em;
            font-weight: bold;
            color: #6c757d;
            transition: transform 0.2s ease;
        }

        .widget-header[aria-expanded="true"] .toggle-icon {
            transform: rotate(45deg); /* Plus becomes an X-like shape or just rotates */
        }

        .details {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            background-color: #f8f9fa;
        }

        /* When the details are expanded, set max-height to a value greater than its actual content */
        .details.expanded {
            max-height: 500px; /* Adjust as needed, ensure it's larger than the content */
            padding: 15px 20px;
            border-top: 1px solid #dee2e6; /* Only show border if content is visible */
        }
    </style>
</head>
<body>

    <h1>Expand/Collapse Widgets</h1>

    <div class="example">
        <div class="widget-header" role="button" aria-expanded="false" tabindex="0">
            <h2>Section One Title</h2>
            <span class="toggle-icon">+</span>
        </div>
        <div class="details">
            <p>This is the detailed content for section one. It can contain paragraphs, lists, images, or any other HTML elements.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <ul>
                <li>Item 1</li>
                <li>Item 2</li>
                <li>Item 3</li>
            </ul>
        </div>
    </div>

    <div class="example">
        <div class="widget-header" role="button" aria-expanded="false" tabindex="0">
            <h2>Another Section Heading</h2>
            <span class="toggle-icon">+</span>
        </div>
        <div class="details">
            <p>Here is some different content for the second widget. Each widget operates independently.</p>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        </div>
    </div>

    <div class="example">
        <div class="widget-header" role="button" aria-expanded="false" tabindex="0">
            <h2>Third Widget with More Content</h2>
            <span class="toggle-icon">+</span>
        </div>
        <div class="details">
            <p>This widget demonstrates a longer content area. The `max-height` in CSS should be sufficient to cover it.</p>
            <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean.</p>
            <p>A wonderful serenity has taken possession of my entire soul, like these sweet mornings of spring which I enjoy with my whole heart. I am alone, and feel the charm of existence in this spot, which was created for the bliss of souls like mine.</p>
            <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const headers = document.querySelectorAll('.widget-header');

            headers.forEach(header => {
                header.addEventListener('click', () => {
                    const details = header.nextElementSibling; // The .details div
                    const isExpanded = header.getAttribute('aria-expanded') === 'true';

                    if (isExpanded) {
                        details.classList.remove('expanded');
                        header.setAttribute('aria-expanded', 'false');
                    } else {
                        details.classList.add('expanded');
                        header.setAttribute('aria-expanded', 'true');
                    }
                });

                // Optional: Allow keyboard interaction (Space or Enter)
                header.addEventListener('keydown', (event) => {
                    if (event.key === ' ' || event.key === 'Enter') {
                        event.preventDefault(); // Prevent default scroll for spacebar
                        header.click(); // Simulate a click
                    }
                });
            });
        });
    </script>
</body>
</html>