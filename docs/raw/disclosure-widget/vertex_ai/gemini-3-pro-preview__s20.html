<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f4f4f9;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
        }

        .example {
            background: white;
            width: 100%;
            max-width: 500px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }

        .toggle-btn {
            width: 100%;
            padding: 15px 20px;
            background: none;
            border: none;
            text-align: left;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s ease;
        }

        .toggle-btn:hover {
            background-color: #f9f9f9;
        }

        .toggle-btn:focus {
            outline: 2px solid #0056b3;
            outline-offset: -2px;
        }

        .icon {
            font-size: 12px;
            transition: transform 0.3s ease;
        }

        .toggle-btn[aria-expanded="true"] .icon {
            transform: rotate(180deg);
        }

        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease;
            opacity: 0;
            background-color: #fff;
        }

        .details.open {
            /* max-height is set via JS for smooth animation */
            opacity: 1;
        }

        .content-inner {
            padding: 20px;
            color: #555;
            line-height: 1.6;
            border-top: 1px solid #f0f0f0;
        }
    </style>
</head>
<body>

    <!-- Widget 1 -->
    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-1">
            <span>What is an expand/collapse widget?</span>
            <span class="icon">▼</span>
        </button>
        <div id="content-1" class="details">
            <div class="content-inner">
                An expand/collapse widget, often called an accordion or disclosure widget, allows users to toggle the visibility of content. This helps in managing screen real estate and reducing cognitive load by hiding information until it is needed.
            </div>
        </div>
    </div>

    <!-- Widget 2 -->
    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-2">
            <span>Why use semantic HTML?</span>
            <span class="icon">▼</span>
        </button>
        <div id="content-2" class="details">
            <div class="content-inner">
                Semantic HTML provides meaning to the web page rather than just presentation. It improves accessibility for screen readers, helps with search engine optimization (SEO), and makes the code easier to maintain and understand for other developers.
            </div>
        </div>
    </div>

    <!-- Widget 3 -->
    <div class="example">
        <button class="toggle-btn" aria-expanded="false" aria-controls="content-3">
            <span>How does the animation work?</span>
            <span class="icon">▼</span>
        </button>
        <div id="content-3" class="details">
            <div class="content-inner">
                We use the <code>max-height</code> property. By default, it is set to 0. When opened, JavaScript calculates the <code>scrollHeight</code> of the inner content and applies it as an inline style. This allows CSS transitions to animate smoothly from 0 to the specific height of the content.
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const buttons = document.querySelectorAll('.toggle-btn');

            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    const expanded = button.getAttribute('aria-expanded') === 'true';
                    const contentId = button.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);

                    // Toggle Aria State
                    button.setAttribute('aria-expanded', !expanded);

                    // Toggle CSS Class
                    content.classList.toggle('open');

                    // Handle Max-Height Animation
                    if (content.classList.contains('open')) {
                        content.style.maxHeight = content.scrollHeight + "px";
                    } else {
                        content.style.maxHeight = null;
                    }
                });
            });
        });
    </script>
</body>
</html>