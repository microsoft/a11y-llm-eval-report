<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
        }
        h1 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 30px;
        }
        .example {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden; /* Ensures border-radius applies correctly to children */
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .toggle-button {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 15px 20px;
            text-align: left;
            font-size: 1.1em;
            cursor: pointer;
            outline: none;
            transition: background-color 0.3s ease;
            font-weight: bold;
        }
        .toggle-button:hover {
            background-color: #0056b3;
        }
        .toggle-button::after {
            content: '\2b'; /* Plus sign unicode */
            font-size: 1.2em;
            transition: transform 0.3s ease;
        }
        .toggle-button[aria-expanded="true"]::after {
            content: '\2212'; /* Minus sign unicode */
            transform: rotate(0deg); /* No rotation needed for minus */
        }
        .details {
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, opacity 0.5s ease-out, padding 0.5s ease-out;
            padding: 0 20px; /* Initially no padding */
        }
        .details.expanded {
            max-height: 9999px; /* A very large value to ensure all content fits */
            opacity: 1;
            padding: 15px 20px; /* Apply padding when expanded */
            border-top: 1px solid #eee;
        }
        .details p, .details ul {
            margin-top: 0;
            margin-bottom: 10px;
        }
        .details p:last-child, .details ul:last-child {
            margin-bottom: 0;
        }
        .details ul {
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widgets</h1>

    <div class="example">
        <button class="toggle-button" aria-expanded="false" aria-controls="content1">
            Section 1: What is this widget?
        </button>
        <div id="content1" class="details">
            <p>This is an example of an expand/collapse widget. Click the header to toggle the visibility of this content. It's commonly used for FAQs, accordions, or hiding less critical information until it's specifically requested by the user.</p>
            <p>The content within this area appears with a smooth transition effect when expanded, making the user experience more pleasant.</p>
        </div>
    </div>

    <div class="example">
        <button class="toggle-button" aria-expanded="false" aria-controls="content2">
            Section 2: How does it work?
        </button>
        <div id="content2" class="details">
            <p>This widget leverages a combination of standard web technologies:</p>
            <ul>
                <li><strong>HTML:</strong> Provides the semantic structure, including a button to trigger the action and a container (<code>div.details</code>) for the collapsible content.</li>
                <li><strong>CSS:</strong> Handles the styling and animation. By default, the content container has <code>max-height: 0</code> and <code>opacity: 0</code>, effectively hiding it. When an 'expanded' class is added (via JavaScript), CSS transitions these properties to a larger <code>max-height</code> and <code>opacity: 1</code>, revealing the content smoothly.</li>
                <li><strong>JavaScript:</strong> Listens for click events on the toggle button. Upon a click, it dynamically adds or removes the 'expanded' class from the content container and updates the ARIA attributes (<code>aria-expanded</code> and <code>aria-controls</code>) for enhanced accessibility.</li>
            </ul>
            <p>This approach offers a good balance between functionality, aesthetics, and accessibility.</p>
        </div>
    </div>

    <div class="example">
        <button class="toggle-button" aria-expanded="false" aria-controls="content3">
            Section 3: Another example with more text to test expansion limits.
        </button>
        <div id="content3" class="details">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            <p>This section is specifically designed to contain a larger amount of text to demonstrate that the <code>max-height</code> property in the CSS is set generously (e.g., <code>9999px</code>) to accommodate various content lengths without prematurely cutting off the text.</p>
            <p>While a very large fixed <code>max-height</code> works well for most cases, for extremely dynamic content where the exact height can vary wildly, more advanced JavaScript might be used to calculate the precise height of the content before setting <code>max-height</code>. However, for general purposes, a sufficiently large fixed value provides a good balance of simplicity and effectiveness for smooth transitions.</p>
            <p>This final paragraph ensures that there's enough content to really test the expansion.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggleButtons = document.querySelectorAll('.toggle-button');

            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    // Get the ID of the controlled content from aria-controls
                    const contentId = button.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);

                    if (content) {
                        // Check the current expanded state
                        const isExpanded = button.getAttribute('aria-expanded') === 'true';

                        // Toggle the 'expanded' class on the content div
                        content.classList.toggle('expanded');

                        // Update the aria-expanded attribute on the button for accessibility
                        button.setAttribute('aria-expanded', !isExpanded);
                    }
                });
            });
        });
    </script>
</body>
</html>