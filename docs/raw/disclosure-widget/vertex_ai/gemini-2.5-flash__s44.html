<html>
<head>
    <title>Expand/Collapse Widget</title>
    <style>
        body {
            font-family: sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }

        h1 {
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .example {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .toggle-button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin-bottom: 10px; /* Space below button */
            transition: background-color 0.2s ease;
        }

        .toggle-button:hover {
            background-color: #0056b3;
        }

        .toggle-button[aria-expanded="true"] {
            background-color: #28a745; /* Different color when expanded */
        }

        .toggle-button[aria-expanded="true"]:hover {
            background-color: #218838;
        }

        /* Styles for the collapsable content container */
        .details {
            max-height: 0;
            overflow: hidden;
            padding-top: 0;
            padding-bottom: 0;
            opacity: 0;
            transition: max-height 0.4s ease-out, padding 0.4s ease-out, opacity 0.4s ease-out;
        }

        .details.expanded {
            max-height: 1000px; /* A sufficiently large value for content */
            padding-top: 10px; /* Add padding when expanded */
            padding-bottom: 10px; /* Add padding when expanded */
            opacity: 1;
        }

        /* Basic styling for content inside .details */
        .details p, .details ul {
            margin: 0 0 10px 0;
        }

        .details p:last-child, .details ul:last-child {
            margin-bottom: 0; /* Remove bottom margin for last element in details */
        }

        .details ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        .details li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widgets</h1>

    <div class="example">
        <button class="toggle-button" aria-expanded="false" aria-controls="content1">Toggle Content 1</button>
        <div class="details" id="content1">
            <p>This is the content for Widget 1. It will expand and collapse.</p>
            <ul>
                <li>Item 1.1: First detail.</li>
                <li>Item 1.2: Second detail.</li>
                <li>Item 1.3: Third detail.</li>
            </ul>
        </div>
    </div>

    <div class="example">
        <button class="toggle-button" aria-expanded="false" aria-controls="content2">Toggle Content 2</button>
        <div class="details" id="content2">
            <p>This is the second widget's content. It's a bit longer to show how it works with more text.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            <p>Another paragraph demonstrating varied content length.</p>
        </div>
    </div>

    <div class="example">
        <button class="toggle-button" aria-expanded="false" aria-controls="content3">Toggle Content 3</button>
        <div class="details" id="content3">
            <p>This is the third widget's content. Just a short paragraph to show a minimal example.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toggleButtons = document.querySelectorAll('.toggle-button');

            toggleButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const detailsId = button.getAttribute('aria-controls');
                    const details = document.getElementById(detailsId);

                    if (details) {
                        const isExpanded = button.getAttribute('aria-expanded') === 'true';

                        details.classList.toggle('expanded');
                        button.setAttribute('aria-expanded', !isExpanded);
                    }
                });
            });
        });
    </script>
</body>
</html>