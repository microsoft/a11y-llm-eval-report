<html>
<head>
  <title>Expand/Collapse Widget</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 20px;
      background-color: #f8f8f8;
      color: #333;
      line-height: 1.6;
    }

    h1 {
      color: #0056b3;
      text-align: center;
      margin-bottom: 30px;
    }

    .example {
      margin-bottom: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background-color: #ffffff;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      overflow: hidden; /* Ensures border-radius applies nicely */
    }

    .summary {
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color: #eef7ff;
      border-bottom: 1px solid #e0e0e0;
      color: #0056b3;
      transition: background-color 0.2s ease-in-out;
    }

    .summary:hover {
      background-color: #e0f2ff;
    }

    .example.expanded .summary {
        border-bottom-color: transparent;
    }

    .summary h2 {
      margin: 0;
      font-size: 1.3em;
      font-weight: 600;
    }

    .toggle-icon {
      font-size: 1.8em;
      font-weight: bold;
      line-height: 1; /* Aligns text vertically */
      transition: transform 0.3s ease;
      color: #0056b3;
    }

    /* Example using transform for an icon that rotates */
    /* .example.expanded .toggle-icon {
        transform: rotate(45deg);
    } */

    .details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out, padding 0.3s ease-out;
      background-color: #ffffff;
      padding: 0 20px; /* Horizontal padding always present, vertical padding 0 */
      box-sizing: border-box; /* Include padding in element's total width and height */
    }

    .example.expanded .details {
      padding-top: 15px;
      padding-bottom: 20px;
    }

    .details p {
      margin-top: 0;
      margin-bottom: 15px;
    }

    .details p:last-child,
    .details ul:last-child,
    .details img:last-child {
      margin-bottom: 0;
    }

    .details ul {
      margin-top: 0;
      margin-bottom: 15px;
      padding-left: 25px;
    }

    .details li {
      margin-bottom: 8px;
    }

    .details img {
      max-width: 100%;
      height: auto;
      display: block; /* Remove extra space below image */
      margin: 15px 0;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  <h1>Expand/Collapse Widgets</h1>

  <!-- Widget 1 -->
  <div class="example">
    <div class="summary">
      <h2>Understanding Expandable Content</h2>
      <span class="toggle-icon">+</span>
    </div>
    <div class="details">
      <p>This is the content for the first expandable section. It can contain any HTML elements, such as text, images, or other widgets.</p>
      <p>When expanded, this text becomes visible, allowing users to delve deeper into specific topics without cluttering the initial view of the page.</p>
      <ul>
        <li>Organizes information effectively.</li>
        <li>Improves user experience by reducing visual noise.</li>
        <li>Saves screen space, especially on mobile devices.</li>
      </ul>
      <p>When collapsed, it is hidden again, providing a clean and organized layout for your page.</p>
    </div>
  </div>

  <!-- Widget 2 -->
  <div class="example">
    <div class="summary">
      <h2>Exploring More Features</h2>
      <span class="toggle-icon">+</span>
    </div>
    <div class="details">
      <p>This is the content for the second expandable section. It demonstrates that each widget operates independently, maintaining its own state.</p>
      <p>You can have multiple instances of this widget on the same page, and they will all function correctly without interfering with each other.</p>
      <p>This example has a bit more text to show how it handles larger content blocks and integrates different media types.</p>
      <img src="https://via.placeholder.com/400x150/007bff/ffffff?text=Dynamic+Content" alt="Dynamic Content Image">
      <p>The transition is smooth thanks to CSS <code>max-height</code> property combined with JavaScript to dynamically calculate the content's actual height.</p>
    </div>
  </div>

  <!-- Widget 3 -->
  <div class="example">
    <div class="summary">
      <h2>Quick FAQ: How to Use?</h2>
      <span class="toggle-icon">+</span>
    </div>
    <div class="details">
      <p><strong>Q: Can I put anything inside the details section?</strong></p>
      <p>A: Yes, you can include paragraphs, lists, images, videos, tables, or even other nested widgets. The JavaScript dynamically adjusts the height.</p>
      <p><strong>Q: Does it work on all browsers?</strong></p>
      <p>A: This implementation uses standard HTML, CSS, and JavaScript features that are widely supported by modern browsers.</p>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.example').forEach(example => {
        const summary = example.querySelector('.summary');
        const details = example.querySelector('.details');
        const toggleIcon = example.querySelector('.toggle-icon');

        // Initial state: ensure details are collapsed and icon is correct
        details.style.maxHeight = '0px';
        toggleIcon.textContent = '+';
        example.classList.remove('expanded');

        summary.addEventListener('click', () => {
          const isExpanded = example.classList.toggle('expanded');

          if (isExpanded) {
            // Set max-height to scrollHeight for smooth transition when expanding
            details.style.maxHeight = details.scrollHeight + 'px';
            toggleIcon.textContent = '-';
          } else {
            // Before collapsing, set max-height to current scrollHeight to ensure
            // the transition starts from the actual content height, not a fixed value.
            details.style.maxHeight = details.scrollHeight + 'px';

            // Force a reflow to ensure the browser registers the current max-height
            // before transitioning to '0px'.
            requestAnimationFrame(() => {
                details.style.maxHeight = '0px';
            });
            toggleIcon.textContent = '+';
          }
        });

        // Optional: Recalculate max-height on window resize if content can change dynamically
        // This handles cases where content might reflow and change height, or if the
        // window itself is resized while a panel is open.
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                if (example.classList.contains('expanded')) {
                    // Temporarily set max-height to 'none' to get the true scrollHeight
                    // after resize, then apply it back to max-height for animation.
                    details.style.maxHeight = 'none';
                    const newHeight = details.scrollHeight;
                    details.style.maxHeight = newHeight + 'px';
                }
            }, 100); // Debounce to prevent excessive recalculations
        });
      });
    });
  </script>
</body>
</html>