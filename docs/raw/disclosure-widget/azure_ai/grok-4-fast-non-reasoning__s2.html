<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .example {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
        }
        .example h3 {
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .example h3:hover {
            background-color: #e9e9e9;
        }
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #fff;
        }
        .details.expanded {
            max-height: 500px; /* Adjust based on content */
        }
        .details-content {
            padding: 20px;
        }
        .toggle-icon {
            font-size: 18px;
            transition: transform 0.3s ease;
        }
        .example h3[aria-expanded="true"] .toggle-icon {
            transform: rotate(180deg);
        }
        .details[aria-hidden="false"] {
            padding: 20px;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <div class="example">
        <h3 aria-expanded="false" tabindex="0" role="button">
            Basic Information
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="details1" aria-hidden="true">
            <div class="details-content">
                <p>This is the basic information section. It contains details about the topic that can be expanded or collapsed for better user experience. The content here can include text, lists, or any other HTML elements.</p>
                <ul>
                    <li>Item 1: First detail</li>
                    <li>Item 2: Second detail</li>
                    <li>Item 3: Third detail</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="example">
        <h3 aria-expanded="false" tabindex="0" role="button">
            Advanced Settings
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="details2" aria-hidden="true">
            <div class="details-content">
                <p>Advanced settings allow users to customize the behavior of the application. These options are typically hidden by default to avoid overwhelming new users.</p>
                <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                    <tr>
                        <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Option</th>
                        <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Auto-save</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">Automatically save changes every 30 seconds</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Notifications</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">Enable desktop notifications</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="example">
        <h3 aria-expanded="true" tabindex="0" role="button">
            FAQ Section
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details expanded" id="details3" aria-hidden="false">
            <div class="details-content">
                <h4>Common Questions</h4>
                <p>Here are some frequently asked questions about our service:</p>
                <dl>
                    <dt>What is your return policy?</dt>
                    <dd>We offer a 30-day money-back guarantee on all purchases.</dd>
                    <dt>How do I contact support?</dt>
                    <dd>You can reach our support team via email at support@example.com or by phone at 1-800-123-4567.</dd>
                    <dt>Do you ship internationally?</dt>
                    <dd>Yes, we ship to most countries worldwide. Shipping times and costs vary by destination.</dd>
                </dl>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const examples = document.querySelectorAll('.example h3');
            
            examples.forEach(header => {
                const details = header.nextElementSibling;
                const content = details.querySelector('.details-content');
                const icon = header.querySelector('.toggle-icon');
                
                // Set initial max-height for expanded state
                if (details.classList.contains('expanded')) {
                    details.style.maxHeight = content.scrollHeight + 'px';
                }
                
                header.addEventListener('click', toggleDetails);
                header.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleDetails();
                    }
                });
                
                function toggleDetails() {
                    const isExpanded = details.classList.contains('expanded');
                    const isHidden = details.getAttribute('aria-hidden') === 'true';
                    
                    if (isExpanded || !isHidden) {
                        // Collapse
                        details.style.maxHeight = content.scrollHeight + 'px';
                        details.classList.remove('expanded');
                        setTimeout(() => {
                            details.style.maxHeight = '0';
                        }, 10);
                        details.setAttribute('aria-hidden', 'true');
                        header.setAttribute('aria-expanded', 'false');
                    } else {
                        // Expand
                        details.style.maxHeight = content.scrollHeight + 'px';
                        details.classList.add('expanded');
                        details.setAttribute('aria-hidden', 'false');
                        header.setAttribute('aria-expanded', 'true');
                    }
                }
            });
        });
    </script>
</body>
</html>