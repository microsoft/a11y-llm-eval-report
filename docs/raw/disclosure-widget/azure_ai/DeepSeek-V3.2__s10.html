<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: sans-serif;
        }
        body {
            margin: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .example {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 800px;
        }
        .toggle-button {
            background-color: #4a6fa5;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .toggle-button:hover {
            background-color: #385d8a;
        }
        .details {
            border-left: 4px solid #4a6fa5;
            padding: 15px 20px;
            margin-top: 15px;
            background-color: #f9f9f9;
            border-radius: 0 4px 4px 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
        }
        .details.hidden {
            max-height: 0 !important;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
            margin-top: 0;
            border-width: 0;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <div class="example">
        <h2>Example 1: Programming Languages</h2>
        <button class="toggle-button" data-target="details1">Learn about JavaScript</button>
        <div id="details1" class="details hidden">
            <h3>JavaScript</h3>
            <p>JavaScript is a versatile programming language used primarily for creating interactive effects within web browsers. It is a core technology of the World Wide Web, alongside HTML and CSS.</p>
            <p>Modern JavaScript can also be used for server-side development (Node.js), mobile apps, and desktop applications.</p>
        </div>
    </div>

    <div class="example">
        <h2>Example 2: Travel Information</h2>
        <button class="toggle-button" data-target="details2">Show Travel Tips</button>
        <div id="details2" class="details hidden">
            <h3>Essential Travel Tips</h3>
            <ul>
                <li>Always carry a copy of your important documents.</li>
                <li>Research local customs and etiquette before you go.</li>
                <li>Pack a basic first-aid kit and any necessary medications.</li>
                <li>Notify your bank of your travel plans to avoid card issues.</li>
                <li>Stay hydrated and protect yourself from the sun.</li>
            </ul>
        </div>
    </div>

    <div class="example">
        <h2>Example 3: Recipe Instructions</h2>
        <button class="toggle-button" data-target="details3">View Cooking Steps</button>
        <div id="details3" class="details hidden">
            <h3>Classic Pancakes</h3>
            <ol>
                <li>Mix dry ingredients (flour, baking powder, salt, sugar) in a bowl.</li>
                <li>In another bowl, whisk together wet ingredients (milk, egg, melted butter).</li>
                <li>Combine wet and dry ingredients, stirring until just mixed (a few lumps are okay).</li>
                <li>Heat a lightly oiled griddle or frying pan over medium-high heat.</li>
                <li>Pour batter onto the griddle, using approximately 1/4 cup for each pancake.</li>
                <li>Cook until bubbles form and the edges are dry, then flip and cook until browned.</li>
            </ol>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('.toggle-button');

            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-target');
                    const detailsDiv = document.getElementById(targetId);

                    // Toggle the 'hidden' class
                    detailsDiv.classList.toggle('hidden');

                    // Manage the max-height transition smoothly
                    if (detailsDiv.classList.contains('hidden')) {
                        // If hiding, set max-height to current scrollHeight first, then to 0
                        detailsDiv.style.maxHeight = detailsDiv.scrollHeight + 'px';
                        setTimeout(() => {
                            detailsDiv.style.maxHeight = '0px';
                        }, 10); // Tiny delay to allow the initial value to be set
                    } else {
                        // If showing, set max-height to the scrollHeight
                        detailsDiv.style.maxHeight = '0px'; // Start collapsed
                        setTimeout(() => {
                            detailsDiv.style.maxHeight = detailsDiv.scrollHeight + 'px';
                        }, 10);
                        // After transition, remove max-height to allow natural resizing if content changes
                        setTimeout(() => {
                            if (!detailsDiv.classList.contains('hidden')) {
                                detailsDiv.style.maxHeight = 'none';
                            }
                        }, 350); // Match the CSS transition duration (300ms) plus a little buffer
                    }

                    // Update button text (optional enhancement)
                    const isHidden = detailsDiv.classList.contains('hidden');
                    const baseText = this.textContent.replace(/^(Show|Hide|Learn about|View) /, '');
                    if (this.textContent.includes('Learn about')) {
                        this.textContent = (isHidden ? 'Learn about ' : 'Hide ') + baseText;
                    } else if (this.textContent.includes('Show')) {
                        this.textContent = (isHidden ? 'Show ' : 'Hide ') + baseText;
                    } else if (this.textContent.includes('View')) {
                        this.textContent = (isHidden ? 'View ' : 'Hide ') + baseText;
                    }
                });
            });

            // Initialize all details to have a max-height of 0 if hidden
            document.querySelectorAll('.details.hidden').forEach(detail => {
                detail.style.maxHeight = '0px';
            });
        });
    </script>
</body>
</html>