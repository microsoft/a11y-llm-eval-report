<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .example {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        .example h3 {
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .example h3:hover {
            background-color: #e9e9e9;
        }
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #fff;
        }
        .details.expanded {
            max-height: 500px; /* Adjust based on content */
        }
        .details-content {
            padding: 20px;
        }
        .toggle-icon {
            font-size: 18px;
            transition: transform 0.3s ease;
        }
        .example h3[aria-expanded="true"] .toggle-icon {
            transform: rotate(180deg);
        }
        .example[aria-disabled="true"] h3 {
            background-color: #f0f0f0;
            cursor: not-allowed;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <!-- Example 1: Basic Expand/Collapse -->
    <div class="example" role="button" tabindex="0" aria-expanded="false" aria-controls="content1">
        <h3 onclick="toggleDetails(this.parentElement, 'content1')">
            Basic Expand/Collapse Widget
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="content1">
            <div class="details-content">
                <p>This is a basic expand/collapse widget. Click the header to toggle the content visibility. The animation provides smooth transitions between expanded and collapsed states.</p>
                <ul>
                    <li>Uses CSS transitions for smooth animation</li>
                    <li>Accessible with keyboard navigation</li>
                    <li>ARIA attributes for screen readers</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Example 2: Accordion Style with Multiple Items -->
    <div class="example" role="button" tabindex="0" aria-expanded="false" aria-controls="content2">
        <h3 onclick="toggleDetails(this.parentElement, 'content2')">
            Accordion Style Widget
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="content2">
            <div class="details-content">
                <p>This widget demonstrates an accordion-style expand/collapse. Only one section can be open at a time when using multiple widgets together.</p>
                <h4>Features:</h4>
                <ul>
                    <li>Smooth height transitions</li>
                    <li>Visual feedback on hover</li>
                    <li>Rotating arrow indicator</li>
                    <li>Content can include any HTML elements</li>
                </ul>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            </div>
        </div>
    </div>

    <!-- Example 3: Disabled State -->
    <div class="example" aria-disabled="true">
        <h3>
            Disabled Expand/Collapse Widget
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details">
            <div class="details-content">
                <p>This widget is disabled and cannot be expanded. The styling indicates it's not interactive.</p>
                <p>Disabled state styling includes reduced opacity and a "not-allowed" cursor.</p>
            </div>
        </div>
    </div>

    <!-- Example 4: Content with Images and Links -->
    <div class="example" role="button" tabindex="0" aria-expanded="false" aria-controls="content4">
        <h3 onclick="toggleDetails(this.parentElement, 'content4')">
            Rich Content Widget
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="content4">
            <div class="details-content">
                <p>This example shows how the widget handles rich content including images, links, and complex layouts.</p>
                
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIFBsYWNlaG9sZGVyPC90ZXh0Pjwvc3ZnPg==" alt="Placeholder image" style="max-width: 100%; height: auto; margin: 10px 0;">
                
                <p>Visit our <a href="#" onclick="return false;">documentation</a> for more information about using these widgets in your projects.</p>
                
                <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                    <thead>
                        <tr style="background-color: #f5f5f5;">
                            <th style="padding: 8px; border: 1px solid #ddd; text-align: left;">Feature</th>
                            <th style="padding: 8px; border: 1px solid #ddd; text-align: left;">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ddd;">Accessibility</td>
                            <td style="padding: 8px; border: 1px solid #ddd;">ARIA attributes and keyboard support</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ddd;">Animation</td>
                            <td style="padding: 8px; border: 1px solid #ddd;">Smooth CSS transitions</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        function toggleDetails(element, contentId) {
            if (element.getAttribute('aria-disabled') === 'true') {
                return; // Don't toggle if disabled
            }

            const details = element.querySelector('.details');
            const isExpanded = element.getAttribute('aria-expanded') === 'true';
            const header = element.querySelector('h3');

            if (isExpanded) {
                // Collapse
                details.classList.remove('expanded');
                element.setAttribute('aria-expanded', 'false');
                header.setAttribute('aria-expanded', 'false');
            } else {
                // Expand
                details.classList.add('expanded');
                element.setAttribute('aria-expanded', 'true');
                header.setAttribute('aria-expanded', 'true');
            }
        }

        // Keyboard accessibility
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                const example = event.target.closest('.example[role="button"]');
                if (example && !example.getAttribute('aria-disabled')) {
                    event.preventDefault();
                    toggleDetails(example, example.getAttribute('aria-controls'));
                }
            }
        });

        // Initialize all examples as collapsed
        document.querySelectorAll('.example[role="button"]').forEach(example => {
            example.setAttribute('aria-expanded', 'false');
        });
    </script>
</body>
</html>