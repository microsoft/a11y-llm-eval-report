<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .example {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        .example h3 {
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .example h3:hover {
            background-color: #e9e9e9;
        }
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #fff;
        }
        .details.expanded {
            max-height: 500px; /* Adjust based on content */
        }
        .details-content {
            padding: 20px;
        }
        .toggle-icon {
            font-size: 18px;
            transition: transform 0.3s ease;
        }
        .example h3[aria-expanded="true"] .toggle-icon {
            transform: rotate(180deg);
        }
        .example[aria-disabled="true"] {
            opacity: 0.6;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <div class="example" role="button" tabindex="0" aria-expanded="false" aria-label="Toggle first example">
        <h3 onclick="toggleDetails(this.parentElement)">
            First Example: Basic Information
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details">
            <div class="details-content">
                <p>This is the first expand/collapse widget. It demonstrates basic functionality with smooth transitions. Click the header to expand or collapse this content section. The widget uses CSS transitions for a smooth animation effect and includes accessibility features like ARIA attributes.</p>
                <ul>
                    <li>Uses max-height for smooth expansion</li>
                    <li>Includes keyboard navigation support</li>
                    <li>Rotating arrow icon for visual feedback</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="example" role="button" tabindex="0" aria-expanded="true" aria-label="Toggle second example">
        <h3 onclick="toggleDetails(this.parentElement)">
            Second Example: Detailed Content
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details expanded">
            <div class="details-content">
                <p>This second example starts in an expanded state. It contains more detailed content to demonstrate how the widget handles larger sections. The content can include various HTML elements like paragraphs, lists, tables, or even forms.</p>
                
                <h4>Features Included:</h4>
                <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                    <tr>
                        <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Feature</th>
                        <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Smooth Animation</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">CSS transitions provide fluid expand/collapse motion</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Accessibility</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">ARIA attributes and keyboard support</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Visual Feedback</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">Rotating icon indicates current state</td>
                    </tr>
                </table>
                
                <p>You can include any type of content within the expanded section, making this widget versatile for FAQs, accordions, or collapsible panels.</p>
            </div>
        </div>
    </div>

    <div class="example" role="button" tabindex="0" aria-expanded="false" aria-label="Toggle third example">
        <h3 onclick="toggleDetails(this.parentElement)">
            Third Example: Form Content
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details">
            <div class="details-content">
                <p>This example demonstrates using the expand/collapse widget with form elements. When expanded, users can access and interact with the form fields.</p>
                
                <form style="max-width: 400px;">
                    <div style="margin-bottom: 15px;">
                        <label for="name">Name:</label>
                        <input type="text" id="name" name="name" style="width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email" style="width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box;">
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label for="message">Message:</label>
                        <textarea id="message" name="message" rows="4" style="width: 100%; padding: 8px; margin-top: 5px; box-sizing: border-box;"></textarea>
                    </div>
                    <button type="submit" style="padding: 10px 20px; background-color: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer;">Submit</button>
                </form>
                
                <p style="margin-top: 15px; font-size: 14px; color: #666;">This form is fully functional within the collapsible container. Users must expand the widget to access and submit the form.</p>
            </div>
        </div>
    </div>

    <script>
        function toggleDetails(element) {
            const details = element.querySelector('.details');
            const header = element.querySelector('h3');
            const isExpanded = element.getAttribute('aria-expanded') === 'true';
            
            if (isExpanded) {
                details.classList.remove('expanded');
                element.setAttribute('aria-expanded', 'false');
                header.setAttribute('aria-expanded', 'false');
            } else {
                details.classList.add('expanded');
                element.setAttribute('aria-expanded', 'true');
                header.setAttribute('aria-expanded', 'true');
            }
        }

        // Keyboard support
        document.querySelectorAll('.example').forEach(example => {
            example.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleDetails(this);
                }
            });
        });

        // Close all on Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.querySelectorAll('.example[aria-expanded="true"]').forEach(example => {
                    if (example.getAttribute('aria-expanded') === 'true') {
                        toggleDetails(example);
                    }
                });
            }
        });
    </script>
</body>
</html>