<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .example {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        .example h3 {
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .example h3:hover {
            background-color: #e9e9e9;
        }
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #fff;
        }
        .details.expanded {
            max-height: 500px; /* Adjust based on content */
        }
        .details-content {
            padding: 20px;
        }
        .toggle-icon {
            font-size: 18px;
            transition: transform 0.3s ease;
        }
        .example h3[aria-expanded="true"] .toggle-icon {
            transform: rotate(180deg);
        }
        .details[aria-hidden="false"] {
            padding: 20px;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <div class="example">
        <h3 aria-expanded="false" tabindex="0" role="button">
            Basic Information
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="details1" aria-hidden="true">
            <div class="details-content">
                <p>This is the basic information section. It contains details about the topic that can be expanded or collapsed for better user experience. The content here can include text, lists, or any other HTML elements.</p>
                <ul>
                    <li>Item 1: First detail</li>
                    <li>Item 2: Second detail</li>
                    <li>Item 3: Third detail</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="example">
        <h3 aria-expanded="false" tabindex="0" role="button">
            Advanced Settings
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="details2" aria-hidden="true">
            <div class="details-content">
                <p>Advanced settings allow users to customize the behavior of the application. These options are typically hidden by default to avoid overwhelming new users.</p>
                <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                    <tr>
                        <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Option</th>
                        <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Auto-save</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">Automatically save changes every 30 seconds</td>
                    </tr>
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 8px;">Notifications</td>
                        <td style="border: 1px solid #ddd; padding: 8px;">Enable desktop notifications</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>

    <div class="example">
        <h3 aria-expanded="false" tabindex="0" role="button">
            FAQ Section
            <span class="toggle-icon" aria-hidden="true">▼</span>
        </h3>
        <div class="details" id="details3" aria-hidden="true">
            <div class="details-content">
                <h4>What is this widget?</h4>
                <p>This is an expand/collapse widget that allows users to show or hide content sections interactively.</p>
                
                <h4>How does it work?</h4>
                <p>The widget uses JavaScript to toggle the visibility of content by changing the max-height property with a smooth CSS transition. It also updates ARIA attributes for accessibility.</p>
                
                <h4>Is it accessible?</h4>
                <p>Yes, the widget includes proper ARIA attributes and keyboard navigation support to ensure it's accessible to screen reader users and keyboard-only navigation.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const examples = document.querySelectorAll('.example h3');
            
            examples.forEach(header => {
                const details = header.nextElementSibling;
                const content = details.querySelector('.details-content');
                const icon = header.querySelector('.toggle-icon');
                
                // Store original height for better transition
                const originalHeight = content.scrollHeight + 40; // padding included
                
                function toggleExpand() {
                    const isExpanded = header.getAttribute('aria-expanded') === 'true';
                    
                    if (isExpanded) {
                        // Collapse
                        header.setAttribute('aria-expanded', 'false');
                        details.setAttribute('aria-hidden', 'true');
                        details.classList.remove('expanded');
                        details.style.maxHeight = '0px';
                        icon.style.transform = 'rotate(0deg)';
                    } else {
                        // Expand
                        header.setAttribute('aria-expanded', 'true');
                        details.setAttribute('aria-hidden', 'false');
                        details.classList.add('expanded');
                        details.style.maxHeight = originalHeight + 'px';
                        icon.style.transform = 'rotate(180deg)';
                    }
                }
                
                // Click event
                header.addEventListener('click', toggleExpand);
                
                // Keyboard event
                header.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleExpand();
                    }
                });
                
                // Focus management
                header.addEventListener('focus', function() {
                    this.style.outline = '2px solid #007bff';
                });
                
                header.addEventListener('blur', function() {
                    this.style.outline = 'none';
                });
            });
        });
    </script>
</body>
</html>