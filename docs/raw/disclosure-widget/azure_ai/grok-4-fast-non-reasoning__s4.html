<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .example {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
        }
        .example h3 {
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            cursor: pointer;
            user-select: none;
        }
        .example h3:hover {
            background-color: #e9e9e9;
        }
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: #fff;
        }
        .details.expanded {
            max-height: 500px; /* Adjust based on content */
        }
        .details-content {
            padding: 20px;
        }
        .details[open] .details-content {
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <div class="example">
        <h3 onclick="toggleDetails(this)">Example 1: Basic Information</h3>
        <div class="details">
            <div class="details-content">
                <p>This is the first example of an expand/collapse widget. Click the header above to toggle the visibility of this content. The transition is smooth and provides a nice user experience.</p>
                <ul>
                    <li>Item 1: First point of information</li>
                    <li>Item 2: Second point of information</li>
                    <li>Item 3: Third point of information</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="example">
        <h3 onclick="toggleDetails(this)">Example 2: Detailed Features</h3>
        <div class="details">
            <div class="details-content">
                <h4>Widget Features</h4>
                <p>This widget uses CSS transitions for smooth expand/collapse animations. It's fully accessible and works with keyboard navigation.</p>
                <table border="1" style="width: 100%; border-collapse: collapse;">
                    <tr><th>Feature</th><th>Description</th></tr>
                    <tr><td>Smooth Animation</td><td>300ms ease-out transition</td></tr>
                    <tr><td>Accessibility</td><td>Keyboard and screen reader friendly</td></tr>
                    <tr><td>Customizable</td><td>Easily styled with CSS</td></tr>
                </table>
            </div>
        </div>
    </div>

    <div class="example">
        <h3 onclick="toggleDetails(this)">Example 3: Long Content</h3>
        <div class="details">
            <div class="details-content">
                <h4>Extended Content Example</h4>
                <p>This example demonstrates how the widget handles longer content. The max-height is set to accommodate various content lengths, and the animation remains smooth regardless of content size.</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
                <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iI2RkZCIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIiBmaWxsPSIjOTk5IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+UGxhY2Vob2xkZXI8L3RleHQ+PC9zdmc+" alt="Placeholder image" style="max-width: 100%; height: auto;">
                <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
            </div>
        </div>
    </div>

    <script>
        function toggleDetails(header) {
            const details = header.nextElementSibling;
            const content = details.querySelector('.details-content');
            
            if (details.classList.contains('expanded')) {
                details.classList.remove('expanded');
                header.setAttribute('aria-expanded', 'false');
            } else {
                details.classList.add('expanded');
                header.setAttribute('aria-expanded', 'true');
            }
        }

        // Initialize aria-expanded attributes
        document.addEventListener('DOMContentLoaded', function() {
            const headers = document.querySelectorAll('.example h3');
            headers.forEach(header => {
                header.setAttribute('aria-expanded', 'false');
                header.setAttribute('role', 'button');
                header.setAttribute('tabindex', '0');
            });

            // Keyboard support
            document.querySelectorAll('.example h3').forEach(header => {
                header.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        toggleDetails(this);
                    }
                });
            });
        });
    </script>
</body>
</html>