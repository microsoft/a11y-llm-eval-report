<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MarketSquare — Home</title>
  <meta name="description" content="MarketSquare — discover popular items, today's best deals and our latest blog posts." />
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0b74ff;
      --accent-2:#ff6b35;
      --success:#16a34a;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.7);
      --shadow: 0 6px 18px rgba(13, 18, 30, 0.08);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,var(--bg),#fff);
      color:#0f172a;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
      font-size:15px;
    }
    header{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.7));
      border-bottom:1px solid rgba(15,23,42,0.04);
    }
    .container{
      max-width:1120px;
      margin:0 auto;
      padding:18px;
    }
    .nav{
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      font-weight:700;
      color:var(--accent);
      text-decoration:none;
    }
    .brand .logo{
      width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#6c5ce7);
      display:flex;align-items:center;justify-content:center;color:white;font-weight:800;box-shadow:var(--shadow);
    }
    nav ul{display:flex;gap:14px;align-items:center;margin:0;padding:0;list-style:none}
    nav a{color:var(--muted);text-decoration:none;padding:8px 10px;border-radius:8px}
    nav a:hover{color:var(--accent)}
    .search{
      display:flex;align-items:center;gap:10px;background:var(--card);padding:10px;border-radius:12px;box-shadow:var(--shadow);
      width:420px;max-width:50%;
    }
    .search input{border:0;outline:none;background:transparent;width:100%;font-size:15px}
    .actions{display:flex;gap:8px;align-items:center}
    .btn{
      border:0;background:var(--accent);color:white;padding:10px 14px;border-radius:10px;font-weight:600;cursor:pointer;
    }
    .btn.secondary{background:transparent;border:1px solid rgba(15,23,42,0.06);color:var(--muted);font-weight:600}
    main{padding:24px 0}
    .hero{
      display:grid;grid-template-columns:1fr 380px;gap:20px;align-items:stretch;margin-bottom:22px;
    }
    .hero-card{
      background:linear-gradient(180deg, white, #fbfdff);
      border-radius:14px;padding:28px;box-shadow:var(--shadow);display:flex;flex-direction:column;justify-content:center;
    }
    .hero h1{margin:0 0 8px 0;font-size:28px;line-height:1.05}
    .hero p{margin:0 0 16px;color:var(--muted)}
    .hero .cta-row{display:flex;gap:10px;align-items:center}
    .hero .features{display:flex;gap:10px;margin-top:18px;color:var(--muted);font-size:13px}
    .promo{
      background:linear-gradient(135deg,#fff3e8,#fff);border-radius:14px;padding:18px;box-shadow:var(--shadow);
      display:flex;flex-direction:column;gap:10px;align-items:flex-start;justify-content:center;
    }
    .categories{display:flex;gap:10px;margin:18px 0 24px 0;flex-wrap:wrap}
    .cat{background:var(--card);padding:12px 14px;border-radius:12px;box-shadow:var(--shadow);display:flex;gap:12px;align-items:center}
    .cat img{width:44px;height:44px;border-radius:8px;object-fit:cover}
    section .section-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:14px}
    section h2{margin:0;font-size:18px}
    .grid{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:14px;
    }
    @media (max-width:1000px){
      .grid{grid-template-columns:repeat(2,1fr)}
      .hero{grid-template-columns:1fr}
      .search{width:100%}
    }
    @media (max-width:600px){
      header .container{padding:12px}
      .grid{grid-template-columns:1fr}
      .brand span{display:none}
    }
    .card{
      background:var(--card);border-radius:12px;padding:12px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:8px;
    }
    .thumb{width:100%;height:160px;border-radius:8px;object-fit:cover;background:#eef2ff}
    .meta{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .price{font-weight:700;color:#071B2C}
    .old{color:var(--muted);text-decoration:line-through;font-size:13px}
    .rating{display:flex;gap:6px;align-items:center;color:#f59e0b;font-weight:600}
    .tags{display:flex;gap:8px;flex-wrap:wrap}
    .tag{background:linear-gradient(90deg,#f4f6ff,#fff);padding:6px 8px;border-radius:999px;font-size:12px;color:var(--muted)}
    .card .actions{display:flex;gap:8px;margin-top:auto;align-items:center}
    .cart-pill{background:var(--accent);color:white;padding:6px 10px;border-radius:999px;font-weight:700;display:inline-flex;gap:8px;align-items:center}
    .mini-cart{
      position:fixed;right:18px;bottom:18px;background:var(--card);padding:12px;border-radius:12px;box-shadow:var(--shadow);width:280px;
      transition:transform .24s ease,opacity .24s ease;transform-origin:100% 100%;
    }
    .mini-cart.hidden{transform:translateY(16px) scale(.98);opacity:0;pointer-events:none}
    .deal{
      display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;background:linear-gradient(90deg,#fff7ed,#fff);box-shadow:var(--shadow)
    }
    .deal .savings{background:linear-gradient(90deg,var(--accent-2),#ff9f6b);color:white;padding:8px 10px;border-radius:8px;font-weight:700}
    .countdown{font-weight:700;color:var(--danger)}
    .blog{
      display:grid;grid-template-columns:repeat(3,1fr);gap:14px;
    }
    .post .excerpt{color:var(--muted);font-size:14px}
    footer{margin-top:36px;padding:24px 0;border-top:1px solid rgba(15,23,42,0.04);background:transparent}
    .newsletter{display:flex;gap:8px}
    .newsletter input{padding:12px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);outline:none;flex:1}
    .badge{background:#ecfeff;color:#064e3b;padding:6px 8px;border-radius:8px;font-weight:700;font-size:13px}
    small{color:var(--muted)}
    /* Simple utility */
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="container nav" role="navigation" aria-label="Main navigation">
      <a class="brand" href="#" aria-label="MarketSquare home">
        <span class="logo" aria-hidden="true">MS</span>
        <span>MarketSquare</span>
      </a>
      <nav aria-label="Primary">
        <ul>
          <li><a href="#" aria-current="page">Home</a></li>
          <li><a href="#">Shop</a></li>
          <li><a href="#">Categories</a></li>
          <li><a href="#">Deals</a></li>
          <li><a href="#">Blog</a></li>
        </ul>
      </nav>
      <div style="flex:1;margin:0 18px;">
        <div class="search" role="search" aria-label="Search products">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#94a3b8" stroke-width="1.6" stroke-linecap="round"/></svg>
          <input id="search" placeholder="Search for products, brands or categories" aria-label="Search input">
          <button class="btn secondary" id="filterBtn" title="Filters">Filters</button>
        </div>
      </div>
      <div class="actions">
        <button class="btn secondary" aria-label="User account">Sign in</button>
        <button class="btn" id="openCartBtn" aria-haspopup="dialog" aria-controls="miniCart">Cart <span id="cartCount" style="margin-left:8px;background:rgba(255,255,255,0.12);padding:4px 8px;border-radius:999px">0</span></button>
      </div>
    </div>
  </header>

  <main class="container" id="main">
    <section class="hero" aria-labelledby="hero-heading">
      <div class="hero-card" role="region" aria-label="Featured promotion">
        <span class="badge">Free shipping on orders over $50</span>
        <h1 id="hero-heading">Find what you love — fast.</h1>
        <p>Curated popular picks, limited-time deals, and helpful buying guides to help you shop smarter.</p>
        <div class="cta-row">
          <button class="btn" onclick="document.getElementById('popular').scrollIntoView({behavior:'smooth'})">Shop Popular</button>
          <button class="btn secondary" onclick="document.getElementById('deals').scrollIntoView({behavior:'smooth'})">View Deals</button>
        </div>
        <div class="features" aria-hidden="true">
          <span>30-day returns</span>
          <span>·</span>
          <span>Secure payments</span>
          <span>·</span>
          <span>24/7 support</span>
        </div>
      </div>

      <aside class="promo" aria-labelledby="promo-heading">
        <h3 id="promo-heading" style="margin:0">Weekend Mega Deal</h3>
        <p style="margin:0;color:var(--muted)">Up to 50% off on electronics and home essentials. Limited stock.</p>
        <div style="display:flex;justify-content:space-between;width:100%;align-items:center;margin-top:6px">
          <div class="countdown" id="promoCountdown" aria-live="polite">Ends in 02:13:45</div>
          <button class="btn" onclick="document.getElementById('deals').scrollIntoView({behavior:'smooth'})">Shop Deals</button>
        </div>
        <small class="muted">Hurry — deals update hourly</small>
      </aside>
    </section>

    <div class="categories" aria-label="Popular categories">
      <div class="cat" role="button" tabindex="0" onclick="filterCategory('All')">
        <img src="https://via.placeholder.com/88x88?text=All" alt="All categories">
        <div>
          <div style="font-weight:700">All</div>
          <small class="muted">Explore everything</small>
        </div>
      </div>
      <div class="cat" role="button" tabindex="0" onclick="filterCategory('Electronics')">
        <img src="https://via.placeholder.com/88x88?text=E" alt="Electronics">
        <div>
          <div style="font-weight:700">Electronics</div>
          <small class="muted">Headphones, phones & more</small>
        </div>
      </div>
      <div class="cat" role="button" tabindex="0" onclick="filterCategory('Home')">
        <img src="https://via.placeholder.com/88x88?text=H" alt="Home">
        <div>
          <div style="font-weight:700">Home</div>
          <small class="muted">Kitchen & decor</small>
        </div>
      </div>
      <div class="cat" role="button" tabindex="0" onclick="filterCategory('Fashion')">
        <img src="https://via.placeholder.com/88x88?text=F" alt="Fashion">
        <div>
          <div style="font-weight:700">Fashion</div>
          <small class="muted">New arrivals</small>
        </div>
      </div>
      <div class="cat" role="button" tabindex="0" onclick="filterCategory('Sports')">
        <img src="https://via.placeholder.com/88x88?text=S" alt="Sports">
        <div>
          <div style="font-weight:700">Sports</div>
          <small class="muted">Active gear</small>
        </div>
      </div>
    </div>

    <section id="popular" aria-labelledby="popular-heading" style="margin-bottom:18px">
      <div class="section-head">
        <h2 id="popular-heading">Popular Items</h2>
        <div class="tags" aria-hidden="true">
          <span class="tag">Best Sellers</span>
          <span class="tag">Trending</span>
          <span class="tag">Editor's Pick</span>
        </div>
      </div>

      <div class="grid" id="productsGrid" aria-live="polite">
        <!-- Product Cards (will be populated) -->
      </div>
    </section>

    <section id="deals" aria-labelledby="deals-heading" style="margin-bottom:18px">
      <div class="section-head">
        <h2 id="deals-heading">Today's Deals</h2>
        <small class="muted">Limited-time discounts</small>
      </div>

      <div style="display:flex;gap:12px;flex-wrap:wrap;">
        <div class="deal" style="flex:1;min-width:260px">
          <img src="https://via.placeholder.com/120x80?text=TV" alt="" style="width:120px;height:80px;border-radius:8px;object-fit:cover">
          <div style="flex:1">
            <div style="font-weight:700">UltraHD Smart TV 50"</div>
            <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
              <div class="price">$379</div>
              <div class="old">$599</div>
              <div class="savings" aria-hidden="true">Save 37%</div>
            </div>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
              <div class="muted">Was $599 • Ends in <span class="countdown" data-ends-in="7200">02:00:00</span></div>
              <button class="btn" onclick="addToCart(101,'UltraHD Smart TV 50\"',379)">Add</button>
            </div>
          </div>
        </div>

        <div class="deal" style="flex:1;min-width:260px">
          <img src="https://via.placeholder.com/120x80?text=Headphones" alt="" style="width:120px;height:80px;border-radius:8px;object-fit:cover">
          <div style="flex:1">
            <div style="font-weight:700">NoiseCancel Pro Headphones</div>
            <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
              <div class="price">$89</div>
              <div class="old">$149</div>
              <div class="savings" aria-hidden="true">Save 40%</div>
            </div>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
              <div class="muted">Limited stock • Ends in <span class="countdown" data-ends-in="10800">03:00:00</span></div>
              <button class="btn" onclick="addToCart(102,'NoiseCancel Pro Headphones',89)">Add</button>
            </div>
          </div>
        </div>

        <div class="deal" style="flex:1;min-width:260px">
          <img src="https://via.placeholder.com/120x80?text=Blender" alt="" style="width:120px;height:80px;border-radius:8px;object-fit:cover">
          <div style="flex:1">
            <div style="font-weight:700">UltraBlend Kitchen Pro</div>
            <div style="display:flex;gap:8px;align-items:center;margin-top:6px">
              <div class="price">$59</div>
              <div class="old">$99</div>
              <div class="savings" aria-hidden="true">Save 40%</div>
            </div>
            <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center">
              <div class="muted">Hurry • Ends in <span class="countdown" data-ends-in="3600">01:00:00</span></div>
              <button class="btn" onclick="addToCart(103,'UltraBlend Kitchen Pro',59)">Add</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section aria-labelledby="blog-heading" style="margin-bottom:18px">
      <div class="section-head">
        <h2 id="blog-heading">From the Blog</h2>
        <small class="muted">Tips, guides and stories</small>
      </div>

      <div class="blog" aria-live="polite">
        <article class="card post" aria-labelledby="post-1">
          <img src="https://via.placeholder.com/400x180?text=Guide" alt="" class="thumb">
          <div>
            <h3 id="post-1" style="margin:8px 0 4px 0;font-size:16px">How to choose the perfect TV for your room</h3>
            <p class="excerpt">A quick guide to screen types, size, and smart features so you get the best viewing experience.</p>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
              <small class="muted">Feb 12 • 5 min read</small>
              <a href="#" class="muted" style="text-decoration:none">Read →</a>
            </div>
          </div>
        </article>

        <article class="card post" aria-labelledby="post-2">
          <img src="https://via.placeholder.com/400x180?text=Style" alt="" class="thumb">
          <div>
            <h3 id="post-2" style="margin:8px 0 4px 0;font-size:16px">5 outfit ideas for a casual weekend</h3>
            <p class="excerpt">Simple combinations and trending colors to refresh your weekend wardrobe without the fuss.</p>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
              <small class="muted">Feb 7 • 3 min read</small>
              <a href="#" class="muted" style="text-decoration:none">Read →</a>
            </div>
          </div>
        </article>

        <article class="card post" aria-labelledby="post-3">
          <img src="https://via.placeholder.com/400x180?text=Kitchen" alt="" class="thumb">
          <div>
            <h3 id="post-3" style="margin:8px 0 4px 0;font-size:16px">Small kitchen hacks that save you time</h3>
            <p class="excerpt">Practical setup tips and tools that make cooking and cleaning faster and easier.</p>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
              <small class="muted">Jan 29 • 4 min read</small>
              <a href="#" class="muted" style="text-decoration:none">Read →</a>
            </div>
          </div>
        </article>
      </div>
    </section>

    <footer>
      <div style="display:flex;justify-content:space-between;align-items:center;gap:20px;flex-wrap:wrap">
        <div style="max-width:520px">
          <h3 style="margin:0 0 8px 0">Join our newsletter</h3>
          <small class="muted">Get exclusive deals and shopping tips — once a week.</small>
          <div class="newsletter" style="margin-top:12px">
            <input type="email" id="newsletterEmail" placeholder="Your email" aria-label="Email for newsletter">
            <button class="btn" onclick="subscribeNewsletter()">Subscribe</button>
          </div>
        </div>

        <div style="display:flex;gap:18px;align-items:center">
          <div>
            <strong>Customer Care</strong>
            <div class="muted">Help center · Shipping · Returns</div>
          </div>
          <div>
            <strong>Company</strong>
            <div class="muted">About · Careers · Press</div>
          </div>
        </div>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:18px;flex-wrap:wrap">
        <small class="muted">© 2026 MarketSquare. All rights reserved.</small>
        <small class="muted">Terms · Privacy</small>
      </div>
    </footer>
  </main>

  <!-- Mini cart -->
  <aside id="miniCart" class="mini-cart hidden" role="dialog" aria-label="Shopping cart" aria-hidden="true">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <strong>Your Cart</strong>
      <button class="btn secondary" onclick="closeCart()">Close</button>
    </div>
    <div id="cartItems" style="display:flex;flex-direction:column;gap:8px;max-height:260px;overflow:auto">
      <div class="muted">Your cart is empty</div>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
      <div>
        <small class="muted">Estimated total</small>
        <div style="font-weight:800" id="cartTotal">$0.00</div>
      </div>
      <button class="btn" onclick="checkout()">Checkout</button>
    </div>
  </aside>

  <script>
    // Sample product dataset
    const products = [
      {id:1,name:"Wireless Earbuds X20",category:"Electronics",price:79,old:129,rating:4.6,tag:"Best Seller",img:"https://via.placeholder.com/400x300?text=Earbuds"},
      {id:2,name:"Classic Hoodie",category:"Fashion",price:39,old:59,rating:4.4,tag:"Trending",img:"https://via.placeholder.com/400x300?text=Hoodie"},
      {id:3,name:"Stainless Steel Kettle",category:"Home",price:29,old:49,rating:4.5,tag:"Editor's Pick",img:"https://via.placeholder.com/400x300?text=Kettle"},
      {id:4,name:"Smart Fitness Watch",category:"Electronics",price:129,old:199,rating:4.3,tag:"New",img:"https://via.placeholder.com/400x300?text=Watch"},
      {id:5,name:"Running Shoes Pro",category:"Sports",price:89,old:129,rating:4.7,tag:"Best Seller",img:"https://via.placeholder.com/400x300?text=Shoes"},
      {id:6,name:"Ceramic Vase Set",category:"Home",price:24,old:39,rating:4.2,tag:"Decor",img:"https://via.placeholder.com/400x300?text=Vase"},
      {id:7,name:"Portable Charger 20k",category:"Electronics",price:49,old:69,rating:4.5,tag:"Trending",img:"https://via.placeholder.com/400x300?text=Charger"},
      {id:8,name:"Organic Cotton Tee",category:"Fashion",price:19,old:29,rating:4.1,tag:"New",img:"https://via.placeholder.com/400x300?text=Tee"},
    ];

    const cart = {
      items: [],
      add(product){
        const existing = this.items.find(i=>i.id===product.id);
        if(existing) existing.qty++;
        else this.items.push({...product,qty:1});
        renderCart();
      },
      remove(id){
        this.items = this.items.filter(i=>i.id!==id);
        renderCart();
      },
      total(){
        return this.items.reduce((s,i)=>s + i.price * i.qty, 0);
      }
    };

    function renderProducts(list = products) {
      const container = document.getElementById('productsGrid');
      container.innerHTML = '';
      if(list.length === 0){
        container.innerHTML = '<div class="card" style="grid-column:1/-1">No products match your search.</div>';
        return;
      }
      list.forEach(p=>{
        const el = document.createElement('article');
        el.className = 'card product';
        el.setAttribute('data-category', p.category);
        el.innerHTML = `
          <img class="thumb" src="${p.img}" alt="${p.name}">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:700">${p.name}</div>
            <div class="rating" aria-label="Rating">${p.rating} ★</div>
          </div>
          <div class="meta">
            <div>
              <div class="price">$${p.price}</div>
              <div class="old">$${p.old}</div>
            </div>
            <div style="text-align:right">
              <div class="tag" style="background:linear-gradient(90deg,#eef2ff,#fff);">${p.tag}</div>
            </div>
          </div>
          <div class="actions">
            <button class="btn secondary" onclick="viewDetails(${p.id})">View</button>
            <button class="btn" onclick="addToCart(${p.id}, ${escapeHtml(JSON.stringify(p.name))}, ${p.price})">Add to Cart</button>
          </div>
        `;
        container.appendChild(el);
      });
    }

    function escapeHtml(s){
      // helper for inline JS string content
      return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/'/g,"\\'").replace(/"/g,'&quot;');
    }

    function viewDetails(id){
      const p = products.find(x=>x.id===id);
      alert(p ? `${p.name}\n\nPrice: $${p.price}\n\nCategory: ${p.category}` : 'Product not found');
    }

    function addToCart(id, name, price){
      // If called with id that exists in sample deals, normalize
      let product = products.find(p=>p.id===id);
      if(!product){
        product = {id, name, price};
      }
      cart.add(product);
      openCart();
      const toast = document.createElement('div');
      toast.textContent = `${product.name} added to cart`;
      toast.style.position='fixed';
      toast.style.left='50%';
      toast.style.transform='translateX(-50%)';
      toast.style.bottom='18px';
      toast.style.background='rgba(2,6,23,0.9)';
      toast.style.color='white';
      toast.style.padding='10px 14px';
      toast.style.borderRadius='10px';
      toast.style.boxShadow='0 8px 24px rgba(2,6,23,0.16)';
      document.body.appendChild(toast);
      setTimeout(()=>toast.remove(),2000);
    }

    function renderCart(){
      const cartItems = document.getElementById('cartItems');
      cartItems.innerHTML = '';
      if(cart.items.length === 0){
        cartItems.innerHTML = '<div class="muted">Your cart is empty</div>';
      } else {
        cart.items.forEach(i=>{
          const item = document.createElement('div');
          item.style.display='flex';
          item.style.justifyContent='space-between';
          item.style.alignItems='center';
          item.innerHTML = `
            <div>
              <div style="font-weight:700">${i.name}</div>
              <small class="muted">${i.qty} × $${i.price}</small>
            </div>
            <div style="display:flex;flex-direction:column;align-items:flex-end;gap:6px">
              <div style="font-weight:700">$${(i.price*i.qty).toFixed(2)}</div>
              <div style="display:flex;gap:6px">
                <button class="btn secondary" onclick="decreaseQty(${i.id})">-</button>
                <button class="btn" onclick="removeItem(${i.id})">Remove</button>
              </div>
            </div>
          `;
          cartItems.appendChild(item);
        });
      }
      document.getElementById('cartTotal').textContent = `$${cart.total().toFixed(2)}`;
      document.getElementById('cartCount').textContent = cart.items.reduce((s,i)=>s+i.qty,0);
    }

    function decreaseQty(id){
      const item = cart.items.find(i=>i.id===id);
      if(!item) return;
      if(item.qty > 1) item.qty--;
      else cart.remove(id);
      renderCart();
    }

    function removeItem(id){
      cart.remove(id);
    }

    function checkout(){
      if(cart.items.length === 0){ alert('Your cart is empty'); return; }
      alert(`Proceeding to checkout — Total: $${cart.total().toFixed(2)}`);
      cart.items = [];
      renderCart();
      closeCart();
    }

    function openCart(){
      const mc = document.getElementById('miniCart');
      mc.classList.remove('hidden');
      mc.setAttribute('aria-hidden','false');
    }
    function closeCart(){
      const mc = document.getElementById('miniCart');
      mc.classList.add('hidden');
      mc.setAttribute('aria-hidden','true');
    }
    document.getElementById('openCartBtn').addEventListener('click', ()=> {
      const mc = document.getElementById('miniCart');
      if(mc.classList.contains('hidden')) openCart(); else closeCart();
    });

    // Search and filter
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', ()=> {
      const q = searchInput.value.trim().toLowerCase();
      const filtered = products.filter(p => p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q));
      renderProducts(filtered);
    });

    function filterCategory(cat){
      if(cat === 'All') renderProducts(products);
      else renderProducts(products.filter(p=>p.category === cat));
      document.getElementById('popular').scrollIntoView({behavior:'smooth'});
    }

    // Deals countdown timers (data-ends-in seconds)
    function startCountdowns(){
      const els = document.querySelectorAll('.countdown[data-ends-in]');
      els.forEach(el => {
        let secs = parseInt(el.getAttribute('data-ends-in'),10) || 0;
        function tick(){
          if(secs <= 0){
            el.textContent = 'Expired';
            return;
          }
          const h = String(Math.floor(secs/3600)).padStart(2,'0');
          const m = String(Math.floor((secs%3600)/60)).padStart(2,'0');
          const s = String(secs%60).padStart(2,'0');
          el.textContent = `${h}:${m}:${s}`;
          secs--;
          setTimeout(tick, 1000);
        }
        tick();
      });
      // Promo countdown
      const promo = document.getElementById('promoCountdown');
      if(promo){
        let secs = 2*3600 + 13*60 + 45; // sample
        function tickP(){
          if(secs <= 0){ promo.textContent='Ended'; return; }
          const h = String(Math.floor(secs/3600)).padStart(2,'0');
          const m = String(Math.floor((secs%3600)/60)).padStart(2,'0');
          const s = String(secs%60).padStart(2,'0');
          promo.textContent = `Ends in ${h}:${m}:${s}`;
          secs--;
          setTimeout(tickP,1000);
        }
        tickP();
      }
    }

    // Newsletter subscribe (simple)
    function subscribeNewsletter(){
      const email = document.getElementById('newsletterEmail').value.trim();
      if(!email || !email.includes('@')){ alert('Please enter a valid email'); return; }
      alert('Thanks! A confirmation has been sent to ' + email);
      document.getElementById('newsletterEmail').value = '';
    }

    // Render initial products
    renderProducts(products);
    renderCart();
    startCountdowns();

    // Accessibility: keyboard category activation
    document.querySelectorAll('.cat').forEach(el=>{
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          el.click();
        }
      });
    });

    // Basic focus outlines for keyboard users
    document.addEventListener('keyup', (e)=>{
      if(e.key === 'Tab') document.body.style.outline = 'auto';
    });
  </script>
</body>
</html>