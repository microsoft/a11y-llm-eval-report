<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Marketlane — Home</title>
  <meta name="description" content="Marketlane — curated deals, popular items, and shopping inspiration. Find products you love with fast shipping and great prices." />
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0f62fe;
      --accent-600:#0b53d6;
      --success:#16a34a;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.6);
      --radius:12px;
      --shadow: 0 6px 18px rgba(18,18,24,0.06);
      --shadow-sm: 0 4px 10px rgba(18,18,24,0.06);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg, #f7f8fc 0%, var(--bg) 100%);
      color:#0f1724;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
      font-size:15px;
    }
    header{
      position:sticky;
      top:0;
      z-index:40;
      backdrop-filter: blur(6px);
      background:rgba(255,255,255,0.7);
      border-bottom:1px solid rgba(16,24,40,0.04);
    }
    .container{
      max-width:1150px;
      margin:0 auto;
      padding:20px;
    }
    .nav{
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      font-weight:700;
      color:var(--accent-600);
      text-decoration:none;
    }
    .brand .logo{
      width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#6fb7ff);display:grid;place-items:center;color:white;font-weight:700;font-size:18px;
      box-shadow:var(--shadow-sm);
    }
    nav .links{display:flex;gap:12px;align-items:center}
    nav a{color:var(--muted);text-decoration:none;padding:10px;border-radius:8px;font-weight:600}
    nav a:hover{color:var(--accent-600);background:rgba(15,98,254,0.06)}
    .actions{display:flex;gap:8px;align-items:center}
    .search{
      display:flex;align-items:center;gap:8px;background:var(--card);padding:8px 12px;border-radius:12px;box-shadow:var(--shadow-sm);
      min-width:280px;
    }
    .search input{border:0;outline:none;background:transparent;font-size:14px;color:#0f1724;width:100%}
    .icon-btn{
      display:inline-grid;place-items:center;width:44px;height:44px;border-radius:10px;background:var(--card);border:1px solid rgba(15,23,42,0.04);cursor:pointer;
    }
    .badge{
      background:var(--danger);color:white;padding:4px 8px;border-radius:999px;font-weight:700;font-size:12px;
    }

    main{padding:28px 0}
    .hero{
      display:grid;
      grid-template-columns:1fr 360px;
      gap:20px;
      align-items:stretch;
    }
    .hero-card{
      background:linear-gradient(180deg,#fff 0%, #fbfdff 100%);
      border-radius:var(--radius);
      padding:28px;
      box-shadow:var(--shadow);
      display:flex;flex-direction:column;gap:12px;
    }
    .hero h1{margin:0;font-size:28px}
    .hero p{margin:0;color:var(--muted)}
    .hero .cta{margin-top:8px;display:flex;gap:10px;align-items:center}
    .btn{
      background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;font-weight:700;cursor:pointer;
      box-shadow:0 6px 18px rgba(16,98,254,0.14);
    }
    .btn.ghost{background:transparent;color:var(--accent-600);border:1px solid rgba(15,62,254,0.08)}
    .hero-aside{
      background:linear-gradient(180deg,#fff 0%, #f4fbff 100%);
      border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);
      display:flex;flex-direction:column;gap:10px;
    }
    .small-list{display:flex;flex-direction:column;gap:10px}
    .small-item{display:flex;gap:10px;align-items:center;background:var(--card);padding:8px;border-radius:10px}
    .small-item img{width:56px;height:56px;border-radius:8px;object-fit:cover}
    .small-item .meta{display:flex;flex-direction:column}
    .small-item .meta .title{font-weight:700}
    .grid{display:grid;gap:16px}
    .grid.cols-4{grid-template-columns:repeat(4,1fr)}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}
    .grid.cols-2{grid-template-columns:repeat(2,1fr)}
    @media (max-width:1000px){ .hero{grid-template-columns:1fr} .grid.cols-4{grid-template-columns:repeat(3,1fr)} }
    @media (max-width:760px){ .container{padding:14px} .grid.cols-4{grid-template-columns:repeat(2,1fr)} .hero-aside{order:2} header .nav{flex-direction:column;align-items:flex-start;gap:12px} .search{min-width:160px} }

    .product{
      background:var(--card);border-radius:14px;padding:14px;box-shadow:var(--shadow-sm);display:flex;flex-direction:column;gap:10px;
    }
    .product .img{background:linear-gradient(180deg,#f8fbff,#fff);border-radius:10px;display:grid;place-items:center;height:160px;overflow:hidden}
    .product .title{font-weight:700}
    .product .price{font-weight:800;color:#111827}
    .product .meta{display:flex;justify-content:space-between;align-items:center;gap:10px;font-size:13px;color:var(--muted)}
    .price-old{text-decoration:line-through;color:rgba(15,23,42,0.25);font-weight:600;font-size:13px}
    .product .row{display:flex;gap:8px;align-items:center;justify-content:space-between}
    .tag{background:rgba(15,98,254,0.06);color:var(--accent-600);padding:6px 8px;border-radius:999px;font-weight:700;font-size:12px}

    .deals{
      display:flex;gap:14px;flex-wrap:wrap;
    }
    .deal{
      flex:1 1 220px;
      background:linear-gradient(180deg,#fffefb,#fff);
      border-radius:14px;padding:12px;box-shadow:var(--shadow-sm);
      display:flex;gap:12px;align-items:center;
    }
    .deal .tile{width:78px;height:78px;border-radius:8px;display:grid;place-items:center;background:linear-gradient(135deg,#fff,#f3f9ff)}
    .countdown{font-weight:800;color:var(--danger);font-family:inherit}

    .blog-list{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:1000px){ .blog-list{grid-template-columns:repeat(2,1fr)} }
    @media (max-width:680px){ .blog-list{grid-template-columns:1fr} }

    footer{padding:28px 0;color:var(--muted)}
    footer .cols{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
    @media (max-width:700px){ footer .cols{grid-template-columns:1fr} }

    .modal{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(2,6,23,0.5);z-index:60;
    }
    .modal.open{display:flex}
    .modal .panel{background:white;border-radius:14px;padding:18px;max-width:920px;width:96%;box-shadow:var(--shadow);display:grid;grid-template-columns:360px 1fr;gap:18px}
    @media (max-width:900px){ .modal .panel{grid-template-columns:1fr} }

    .toast{
      position:fixed;right:20px;bottom:20px;background:#111827;color:white;padding:12px 16px;border-radius:10px;box-shadow:var(--shadow);
      display:none;z-index:70;
    }
    .toast.show{display:block}

    /* small helpers */
    .muted{color:var(--muted)}
    .center{display:grid;place-items:center}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="nav" role="navigation" aria-label="Main navigation">
        <a href="#" class="brand" aria-label="Marketlane home">
          <div class="logo">M</div>
          <div>
            <div style="font-size:14px">Marketlane</div>
            <div style="font-size:12px;color:var(--muted);font-weight:600">Everyday essentials</div>
          </div>
        </a>

        <nav style="flex:1" aria-label="Top links">
          <div class="links" style="justify-content:center">
            <a href="#" aria-current="page">Home</a>
            <a href="#">Shop</a>
            <a href="#">Deals</a>
            <a href="#">Blog</a>
            <a href="#">Support</a>
          </div>
        </nav>

        <div class="actions" aria-hidden="false">
          <div class="search" role="search" aria-label="Search products">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.35-4.35" stroke="#9CA3AF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="11" cy="11" r="6" stroke="#9CA3AF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <input id="search" placeholder="Search for products or categories" aria-label="Search for products or categories" />
          </div>
          <button class="icon-btn" id="btn-wishlist" title="Wishlist" aria-label="Wishlist">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z" stroke="#374151" stroke-width="0.6" fill="rgba(99,102,241,0.06)" /></svg>
          </button>
          <button class="icon-btn" id="cart-btn" aria-label="View cart" title="Cart">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 6h15l-1.4 7.2a2 2 0 0 1-2 1.6H9.4a2 2 0 0 1-2-1.6L5 2H2" stroke="#111827" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            <span id="cart-count" class="badge" style="margin-left:6px;display:none">0</span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <section class="hero" aria-labelledby="hero-heading">
        <div class="hero-card">
          <div style="display:flex;align-items:center;justify-content:space-between;gap:12px">
            <div>
              <h1 id="hero-heading">Find what you love — great prices, delivered.</h1>
              <p>Curated picks, daily deals, and articles to help you discover the best products.</p>
            </div>
            <div class="tag">Free shipping over $50</div>
          </div>

          <div style="display:flex;gap:12px;margin-top:6px;flex-wrap:wrap">
            <button class="btn" id="shop-now">Shop Now</button>
            <button class="btn ghost" id="explore">Explore Collections</button>
          </div>

          <div style="display:flex;gap:12px;margin-top:auto;align-items:center">
            <div style="display:flex;gap:8px;align-items:center;">
              <div style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#fff,#eaf6ff);display:grid;place-items:center;font-weight:700;color:var(--accent-600)">★</div>
              <div>
                <div style="font-weight:700">Top-rated sellers</div>
                <div class="muted" style="font-size:13px">Verified stores & buyer protection</div>
              </div>
            </div>
            <div style="display:flex;gap:8px;align-items:center;">
              <div style="width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#fff,#fff7ec);display:grid;place-items:center;font-weight:700;color:#f59e0b">⚡</div>
              <div>
                <div style="font-weight:700">Daily Deals</div>
                <div class="muted" style="font-size:13px">Limited-time savings</div>
              </div>
            </div>
          </div>
        </div>

        <aside class="hero-aside" aria-labelledby="trending-heading">
          <h3 id="trending-heading" style="margin:0;font-size:16px">Trending picks</h3>
          <div class="small-list" id="trending-list" aria-live="polite"></div>
          <div style="display:flex;gap:10px;margin-top:auto">
            <button class="btn" id="view-all">View all</button>
            <button class="btn ghost" id="gift-card">Gift cards</button>
          </div>
        </aside>
      </section>

      <section style="margin-top:26px">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <h2 style="margin:0">Popular Items</h2>
          <div style="display:flex;gap:8px;align-items:center">
            <label for="sort" class="muted" style="font-size:13px">Sort:</label>
            <select id="sort" aria-label="Sort products" style="padding:8px;border-radius:8px;border:1px solid rgba(2,6,23,0.06);background:white">
              <option value="featured">Featured</option>
              <option value="price-asc">Price: Low to High</option>
              <option value="price-desc">Price: High to Low</option>
              <option value="rating">Top Rated</option>
            </select>
          </div>
        </div>

        <div class="grid cols-4" id="product-grid" aria-live="polite"></div>
      </section>

      <section style="margin-top:28px" aria-labelledby="deals-heading">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <h2 id="deals-heading" style="margin:0">Hot Deals</h2>
          <div class="muted" style="font-size:13px">Limited time offers — while stocks last</div>
        </div>

        <div class="deals" id="deals-list"></div>
      </section>

      <section style="margin-top:28px">
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <h2 style="margin:0">Latest from the blog</h2>
          <a href="#" class="muted" style="font-weight:700;text-decoration:none">Read all posts →</a>
        </div>

        <div class="blog-list" id="blog-list"></div>
      </section>

      <section style="margin-top:28px;background:linear-gradient(180deg,#fff,#f8fbff);padding:18px;border-radius:12px;display:flex;align-items:center;gap:16px">
        <div style="flex:1">
          <h3 style="margin:0">Join the newsletter</h3>
          <div class="muted" style="font-size:13px">Get deals and inspirations in your inbox. No spam.</div>
        </div>
        <form id="newsletter" style="display:flex;gap:8px;align-items:center">
          <input id="email" type="email" required placeholder="you@domain.com" style="padding:12px;border-radius:10px;border:1px solid rgba(2,6,23,0.06)" />
          <button class="btn" type="submit">Subscribe</button>
        </form>
      </section>

    </div>
  </main>

  <footer>
    <div class="container">
      <div class="cols" aria-label="Footer">
        <div>
          <div style="display:flex;gap:8px;align-items:center;margin-bottom:12px">
            <div class="logo" style="width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#6fb7ff);">M</div>
            <div>
              <div style="font-weight:700">Marketlane</div>
              <div class="muted" style="font-size:13px">Trusted shopping since 2020</div>
            </div>
          </div>
          <div class="muted" style="font-size:13px">Secure payments • Fast delivery • Easy returns</div>
        </div>

        <div>
          <h4 style="margin:0 0 8px 0">Shop</h4>
          <ul style="list-style:none;padding:0;margin:0;line-height:2">
            <li><a href="#" class="muted" style="text-decoration:none">All products</a></li>
            <li><a href="#" class="muted" style="text-decoration:none">Gift cards</a></li>
            <li><a href="#" class="muted" style="text-decoration:none">Top sellers</a></li>
          </ul>
        </div>

        <div>
          <h4 style="margin:0 0 8px 0">Company</h4>
          <ul style="list-style:none;padding:0;margin:0;line-height:2">
            <li><a href="#" class="muted" style="text-decoration:none">About</a></li>
            <li><a href="#" class="muted" style="text-decoration:none">Careers</a></li>
            <li><a href="#" class="muted" style="text-decoration:none">Contact</a></li>
          </ul>
        </div>
      </div>

      <div style="display:flex;justify-content:space-between;align-items:center;margin-top:20px">
        <div class="muted">© <span id="year"></span> Marketlane. All rights reserved.</div>
        <div style="display:flex;gap:10px">
          <a href="#" class="muted">Privacy</a>
          <a href="#" class="muted">Terms</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Modal: Quick View -->
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="panel" role="document">
      <div style="display:flex;flex-direction:column;gap:12px">
        <div id="modal-image" style="border-radius:10px;overflow:hidden;height:320px;background:#f8fafc;display:grid;place-items:center"></div>
        <div style="display:flex;gap:8px">
          <img id="thumb1" style="width:64px;height:64px;border-radius:8px;object-fit:cover" alt="">
          <img id="thumb2" style="width:64px;height:64px;border-radius:8px;object-fit:cover" alt="">
          <img id="thumb3" style="width:64px;height:64px;border-radius:8px;object-fit:cover" alt="">
          <div style="flex:1"></div>
          <button id="close-modal" class="icon-btn" aria-label="Close">✕</button>
        </div>
      </div>
      <div style="display:flex;flex-direction:column;gap:10px">
        <div style="display:flex;justify-content:space-between;align-items:start">
          <div>
            <h3 id="modal-title" style="margin:0"></h3>
            <div class="muted" id="modal-seller" style="font-size:13px">by Seller</div>
          </div>
          <div style="text-align:right">
            <div id="modal-price" style="font-weight:900;font-size:18px"></div>
            <div id="modal-oldprice" class="muted price-old" style="font-size:13px"></div>
          </div>
        </div>
        <div id="modal-desc" class="muted" style="font-size:14px"></div>
        <div style="display:flex;gap:8px;margin-top:auto">
          <button class="btn" id="modal-add">Add to cart</button>
          <button class="btn ghost" id="modal-wishlist">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // Utilities
    function svgDataURI(text, bg = '#eef6ff', fg='#0f1724', w=480, h=320) {
      const svg = `<svg xmlns='http://www.w3.org/2000/svg' width='${w}' height='${h}' viewBox='0 0 ${w} ${h}'>
        <rect width='100%' height='100%' rx='12' fill='${bg}'/>
        <g text-anchor='middle' font-family='sans-serif' font-weight='700' fill='${fg}'>
          <text x='50%' y='52%' font-size='28'>${text}</text>
        </g>
      </svg>`;
      return 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
    }

    // Sample data
    const products = [
      { id:1, name:'Comfy Wireless Headphones', price:79.99, oldPrice:129.99, rating:4.7, seller:'Soundly', img: svgDataURI('Headphones','#eef7ff') },
      { id:2, name:'Classic Leather Wallet', price:34.00, oldPrice:null, rating:4.5, seller:'LedgerCo', img: svgDataURI('Wallet','#fff6f0') },
      { id:3, name:'Everyday Running Shoes', price:59.99, oldPrice:99.99, rating:4.6, seller:'Fleet', img: svgDataURI('Running','#f0fff4') },
      { id:4, name:'Smart Home Speaker', price:49.50, oldPrice:89.99, rating:4.4, seller:'Nestly', img: svgDataURI('Speaker','#fff7f9') },
      { id:5, name:'Stainless Steel Bottle', price:18.99, oldPrice:24.99, rating:4.8, seller:'Hydrate', img: svgDataURI('Bottle','#eefaf6') },
      { id:6, name:'Minimal Desk Lamp', price:29.99, oldPrice:39.99, rating:4.3, seller:'Glow', img: svgDataURI('Lamp','#fff8ee') },
      { id:7, name:'Organic Cotton Tee', price:22.00, oldPrice:null, rating:4.2, seller:'PureWear', img: svgDataURI('T‑Shirt','#fffef6') },
      { id:8, name:'Travel Backpack 25L', price:64.99, oldPrice:89.99, rating:4.6, seller:'Trail', img: svgDataURI('Backpack','#f5f9ff') }
    ];

    const trending = [
      {name:'Eco Tote Bag', seller:'Earthy', img: svgDataURI('Tote','#f0fff2')},
      {name:'Bluetooth Key Finder', seller:'FindIt', img: svgDataURI('Finder','#fff8f3')},
      {name:'Ceramic Mug — Blue', seller:'WarmCup', img: svgDataURI('Mug','#f4f7ff')}
    ];

    // Deals with end times (few hours ahead)
    const now = Date.now();
    const deals = [
      { id:101, name:'Noise Cancelling Headset', price:89.99, old:159.99, img: svgDataURI('NC Headset','#eef7ff'), endsAt: now + 1000*60*60*4 + 1000*60*15 }, // 4h15m
      { id:102, name:'4K Action Camera', price:129.00, old:199.99, img: svgDataURI('4K Cam','#fff6f0'), endsAt: now + 1000*60*60*2 + 1000*60*5 }, // 2h5m
      { id:103, name:'Smartwatch Series 4', price:149.99, old:249.99, img: svgDataURI('Smartwatch','#f0fff4'), endsAt: now + 1000*60*30 + 1000*20 }, // 30m20s
      { id:104, name:'Portable Espresso Maker', price:39.99, old:79.99, img: svgDataURI('Espresso','#fff9f0'), endsAt: now + 1000*60*60*12 } // 12h
    ];

    const posts = [
      {id:1, title:'5 Must-Have Travel Items for 2025', excerpt:'Packing smarter means traveling lighter. These essentials will save space and time on your next trip.', date:'Nov 2, 2025', img: svgDataURI('Travel','#fff7f3')},
      {id:2, title:'How to choose the right headphones', excerpt:'From drivers to noise cancellation — learn what matters when picking audio gear that fits your life.', date:'Oct 21, 2025', img: svgDataURI('Audio','#f4fbff')},
      {id:3, title:'Sustainable swaps for everyday living', excerpt:'Small swaps add up. Start with these easy, planet-friendly alternatives for the home.', date:'Sep 8, 2025', img: svgDataURI('Sustainable','#f0fff6')}
    ];

    // Render functions
    const productGrid = document.getElementById('product-grid');
    const trendingList = document.getElementById('trending-list');
    const dealsList = document.getElementById('deals-list');
    const blogList = document.getElementById('blog-list');
    const yearSpan = document.getElementById('year');
    yearSpan.textContent = new Date().getFullYear();

    function createProductCard(p){
      const el = document.createElement('article');
      el.className = 'product';
      el.setAttribute('data-id', p.id);
      el.innerHTML = `
        <div class="img center" role="img" aria-label="${p.name} image">
          <img src="${p.img}" alt="${p.name}" style="width:100%;height:100%;object-fit:cover"/>
        </div>
        <div style="display:flex;flex-direction:column;gap:6px">
          <div class="title">${p.name}</div>
          <div class="muted" style="font-size:13px">${p.seller}</div>
        </div>
        <div class="row">
          <div>
            <div class="price">$${p.price.toFixed(2)}</div>
            ${p.oldPrice ? `<div class="price-old">$${p.oldPrice.toFixed(2)}</div>` : ''}
          </div>
          <div style="display:flex;flex-direction:column;align-items:end;gap:8px">
            <div class="muted" style="font-size:13px">★ ${p.rating}</div>
            <div style="display:flex;gap:8px">
              <button class="btn small quick" data-id="${p.id}" aria-label="Quick view ${p.name}" style="padding:8px 10px;font-size:13px">Quick view</button>
              <button class="btn ghost add" data-id="${p.id}" aria-label="Add ${p.name} to cart" style="padding:8px 10px;font-size:13px">Add</button>
            </div>
          </div>
        </div>
      `;
      return el;
    }

    function renderProducts(list){
      productGrid.innerHTML = '';
      list.forEach(p => productGrid.appendChild(createProductCard(p)));
    }

    function renderTrending(){
      trendingList.innerHTML = '';
      trending.forEach(t => {
        const div = document.createElement('div');
        div.className = 'small-item';
        div.innerHTML = `<img src="${t.img}" alt="${t.name}"><div class="meta"><div class="title">${t.name}</div><div class="muted">${t.seller}</div></div>`;
        trendingList.appendChild(div);
      });
    }

    function renderDeals(){
      dealsList.innerHTML = '';
      deals.forEach(d => {
        const el = document.createElement('div');
        el.className = 'deal';
        el.innerHTML = `
          <div class="tile center"><img src="${d.img}" alt="${d.name}" style="width:64px;height:64px;object-fit:cover;border-radius:8px"></div>
          <div style="flex:1">
            <div style="display:flex;align-items:center;justify-content:space-between">
              <div style="font-weight:800">${d.name}</div>
              <div style="text-align:right"><div style="font-weight:900;color:#111827">$${d.price.toFixed(2)}</div><div class="muted price-old">$${d.old.toFixed(2)}</div></div>
            </div>
            <div style="margin-top:6px;display:flex;align-items:center;gap:8px">
              <div class="countdown" data-ends="${d.endsAt}" aria-live="polite">--:--:--</div>
              <div class="muted" style="font-size:13px">left</div>
            </div>
          </div>
        `;
        dealsList.appendChild(el);
      });
    }

    function renderBlog(){
      blogList.innerHTML = '';
      posts.forEach(p => {
        const el = document.createElement('article');
        el.style = 'background:var(--card);border-radius:12px;padding:12px;box-shadow:var(--shadow-sm);';
        el.innerHTML = `
          <div style="display:flex;gap:12px;align-items:center">
            <img src="${p.img}" alt="${p.title}" style="width:96px;height:72px;border-radius:8px;object-fit:cover" />
            <div style="flex:1">
              <div style="font-weight:800">${p.title}</div>
              <div class="muted" style="font-size:13px">${p.excerpt}</div>
            </div>
            <div class="muted" style="font-size:13px">${p.date}</div>
          </div>
        `;
        blogList.appendChild(el);
      });
    }

    // Initial render
    renderProducts(products);
    renderTrending();
    renderDeals();
    renderBlog();

    // Countdown
    function updateCountdowns(){
      const els = document.querySelectorAll('.countdown');
      els.forEach(el => {
        const ends = parseInt(el.getAttribute('data-ends'), 10);
        let delta = Math.max(0, ends - Date.now());
        const h = Math.floor(delta / (1000*60*60));
        delta -= h * (1000*60*60);
        const m = Math.floor(delta / (1000*60));
        delta -= m * (1000*60);
        const s = Math.floor(delta / 1000);
        el.textContent = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
      });
    }
    updateCountdowns();
    setInterval(updateCountdowns, 1000);

    // Sorting
    const sortSel = document.getElementById('sort');
    sortSel.addEventListener('change', () => {
      const val = sortSel.value;
      let list = [...products];
      if(val === 'price-asc') list.sort((a,b)=>a.price-b.price);
      else if(val === 'price-desc') list.sort((a,b)=>b.price-a.price);
      else if(val === 'rating') list.sort((a,b)=>b.rating-a.rating);
      else list = [...products];
      renderProducts(list);
    });

    // Search
    const searchInput = document.getElementById('search');
    let searchTimeout;
    searchInput.addEventListener('input', (e) => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(()=> {
        const q = e.target.value.trim().toLowerCase();
        if(!q){ renderProducts(products); return; }
        const filtered = products.filter(p => p.name.toLowerCase().includes(q) || p.seller.toLowerCase().includes(q));
        renderProducts(filtered);
      }, 250);
    });

    // Modal & Cart
    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modal-title');
    const modalSeller = document.getElementById('modal-seller');
    const modalPrice = document.getElementById('modal-price');
    const modalOldPrice = document.getElementById('modal-oldprice');
    const modalDesc = document.getElementById('modal-desc');
    const modalImage = document.getElementById('modal-image');
    const closeModalBtn = document.getElementById('close-modal');
    const modalAddBtn = document.getElementById('modal-add');
    const toast = document.getElementById('toast');
    const cartCount = document.getElementById('cart-count');
    const cartBtn = document.getElementById('cart-btn');

    let cart = [];
    function showToast(message){
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(()=> toast.classList.remove('show'), 2200);
    }

    function openModalFor(productId){
      const p = products.find(x => x.id == productId);
      if(!p) return;
      modalTitle.textContent = p.name;
      modalSeller.textContent = `by ${p.seller}`;
      modalPrice.textContent = `$${p.price.toFixed(2)}`;
      modalOldPrice.textContent = p.oldPrice ? `$${p.oldPrice.toFixed(2)}` : '';
      modalDesc.textContent = 'High quality and built to last — designed for everyday use with comfort and reliability in mind.';
      modalImage.innerHTML = `<img src="${p.img}" alt="${p.name}" style="width:100%;height:100%;object-fit:cover" />`;
      modal.setAttribute('aria-hidden','false');
      modal.classList.add('open');
      modalAddBtn.dataset.id = p.id;
    }

    document.body.addEventListener('click', (e) => {
      if(e.target.matches('.quick')) {
        const id = e.target.dataset.id;
        openModalFor(id);
      }
      if(e.target.matches('.add')) {
        const id = e.target.dataset.id;
        addToCart(parseInt(id,10));
      }
    });

    closeModalBtn.addEventListener('click', ()=> {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
    });
    modal.addEventListener('click', (e)=> { if(e.target === modal) { modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); } });

    modalAddBtn.addEventListener('click', (e)=> {
      const id = parseInt(e.target.dataset.id,10);
      addToCart(id);
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
    });

    function addToCart(id){
      const p = products.find(x=>x.id===id);
      if(!p) return;
      const existing = cart.find(i=>i.id===id);
      if(existing) existing.qty += 1; else cart.push({id:p.id,name:p.name,price:p.price,qty:1});
      updateCartBadge();
      showToast(`Added "${p.name}" to cart`);
    }

    function updateCartBadge(){
      const qty = cart.reduce((s,i)=>s+i.qty,0);
      if(qty>0){ cartCount.style.display = 'inline-block'; cartCount.textContent = qty; } else { cartCount.style.display = 'none'; }
    }

    cartBtn.addEventListener('click', ()=> {
      if(cart.length===0){ showToast('Your cart is empty'); return; }
      const summary = cart.map(i=>`${i.qty}× ${i.name}`).join(', ');
      showToast('Cart: ' + summary);
    });

    // Quick helpers: shop now and trending view all
    document.getElementById('shop-now').addEventListener('click', ()=> {
      window.scrollTo({top: document.getElementById('product-grid').offsetTop - 60, behavior:'smooth'});
    });
    document.getElementById('view-all').addEventListener('click', ()=> {
      window.location.href = '#';
    });

    // Newsletter
    document.getElementById('newsletter').addEventListener('submit', (e) => {
      e.preventDefault();
      const email = document.getElementById('email').value;
      document.getElementById('email').value = '';
      showToast('Thanks! ' + email + ' has been subscribed.');
    });

    // Accessibility: keyboard escape to close modal
    document.addEventListener('keydown', (e)=> {
      if(e.key === 'Escape' && modal.classList.contains('open')) {
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden','true');
      }
    });

    // Initial small UX: lazy load (fallback)
    if('loading' in HTMLImageElement.prototype) {
      document.querySelectorAll('img').forEach(img=>{ if(!img.hasAttribute('loading')) img.loading = 'lazy'; });
    }

    // Expose a few in console for quick testing
    window.Marketlane = { addToCart, products, deals, posts };
  </script>
</body>
</html>