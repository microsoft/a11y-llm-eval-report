<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopLocal — Home</title>
  <meta name="description" content="ShopLocal — Discover popular items, today's deals, and our latest blog posts." />
  <style>
    :root{
      --bg:#f7f8fb;
      --card:#ffffff;
      --accent:#ff6b35;
      --muted:#6b7280;
      --glass: rgba(255,255,255,0.6);
      --radius:12px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color-scheme: light;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:linear-gradient(180deg,var(--bg),#fff);
      color:#111827;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      font-size:16px;
      line-height:1.4;
    }
    header{
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0.4));
      position:sticky;
      top:0;
      z-index:50;
      border-bottom:1px solid rgba(15,23,42,0.05);
    }
    .container{max-width:1200px;margin:0 auto;padding:18px;}
    .topbar{display:flex;align-items:center;gap:16px;}
    .logo{display:flex;align-items:center;gap:10px;font-weight:700;font-size:1.15rem;}
    .logo svg{width:40px;height:40px}
    nav{margin-left:8px}
    .nav-list{display:flex;gap:12px;align-items:center;}
    .nav-list a{color:var(--muted);text-decoration:none;padding:8px;border-radius:8px;font-size:0.95rem}
    .nav-list a:hover{color:#111827;background:rgba(0,0,0,0.03)}
    .search-wrap{flex:1;display:flex;justify-content:center}
    .search{
      width:100%;
      max-width:640px;
      display:flex;
      gap:8px;
      background:var(--card);
      padding:8px;
      border-radius:999px;
      align-items:center;
      border:1px solid rgba(15,23,42,0.06);
    }
    .search input{
      border:0;outline:0;font-size:0.95rem;background:transparent;padding:8px 6px;flex:1;color:inherit;
    }
    .cta{display:flex;gap:8px;align-items:center}
    .icon-btn{
      background:var(--card);border:1px solid rgba(15,23,42,0.06);padding:8px;border-radius:10px;display:inline-flex;align-items:center;gap:8px;cursor:pointer;
    }
    .cart{
      position:relative;
    }
    .cart-count{
      position:absolute;right:-6px;top:-6px;background:var(--accent);color:#fff;border-radius:999px;padding:4px 7px;font-size:0.75rem;font-weight:600;
    }

    main{padding:28px 0;}
    .hero{
      border-radius:var(--radius);
      overflow:hidden;
      display:grid;
      grid-template-columns: 1fr 360px;
      gap:20px;
      margin-bottom:22px;
    }
    .hero .big{
      display:flex;flex-direction:column;justify-content:center;padding:34px;background:
      linear-gradient(180deg, rgba(255,107,53,0.07), rgba(255,255,255,0.02));
      border-radius:var(--radius);
    }
    .hero h1{margin:0;font-size:1.8rem;line-height:1.02}
    .hero p{color:var(--muted);margin:12px 0 18px}
    .hero .hero-actions{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      display:inline-flex;align-items:center;gap:10px;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600;
    }
    .btn-primary{background:var(--accent);color:white;box-shadow:0 6px 18px rgba(255,107,53,0.12)}
    .btn-ghost{background:transparent;border:1px solid rgba(15,23,42,0.06);color:inherit}
    .hero .aside{
      background:linear-gradient(180deg, #fff, #fff);
      border-radius:var(--radius);
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      border:1px solid rgba(15,23,42,0.04);
    }
    .price-tag{font-weight:700;font-size:1.25rem;color:var(--accent)}
    .small-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    /* Sections */
    section{margin-bottom:28px}
    .section-head{display:flex;justify-content:space-between;align-items:end;margin-bottom:16px}
    .section-head h2{margin:0;font-size:1.1rem}
    .section-head p{margin:0;color:var(--muted);font-size:0.95rem}
    .products-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
      gap:16px;
    }
    .card{
      background:var(--card);
      border-radius:14px;
      padding:12px;
      border:1px solid rgba(15,23,42,0.04);
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .media{position:relative;padding-top:64%;border-radius:10px;overflow:hidden;background:linear-gradient(180deg,#f3f4f6,#fff)}
    .media img{position:absolute;inset:0;object-fit:cover;width:100%;height:100%}
    .badge{position:absolute;left:8px;top:8px;background:var(--accent);color:#fff;padding:6px 8px;border-radius:8px;font-weight:700;font-size:0.8rem}
    .card .title{font-weight:600;font-size:0.98rem}
    .meta{display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:0.9rem}
    .price{font-weight:800;color:#0f172a}
    .card-actions{display:flex;gap:8px;align-items:center}
    .star{color:#f59e0b;margin-right:6px}
    .deal-card{display:flex;gap:12px;align-items:center;padding:12px;border-radius:12px;background:linear-gradient(90deg,#fff,#fff);border:1px solid rgba(15,23,42,0.04)}
    .deal-card .thumb{width:94px;height:78px;border-radius:8px;overflow:hidden;flex-shrink:0}
    .deal-card .info{flex:1}
    .countdown{font-weight:700;color:#ef4444}
    .blog-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}
    .blog{background:var(--card);border-radius:12px;padding:12px;border:1px solid rgba(15,23,42,0.04)}
    .blog img{width:100%;height:140px;object-fit:cover;border-radius:8px}
    footer{padding:28px 0;border-top:1px solid rgba(15,23,42,0.03);background:transparent}
    .footer-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
    .newsletter{display:flex;gap:8px;align-items:center}
    .newsletter input{padding:10px;border-radius:10px;border:1px solid rgba(15,23,42,0.06);flex:1}
    /* responsive */
    @media (max-width:900px){
      .hero{grid-template-columns:1fr;align-items:stretch}
      .topbar{flex-wrap:wrap;gap:12px}
      .nav-list{display:none}
      .footer-grid{grid-template-columns:repeat(2,1fr)}
      .small-grid{grid-template-columns:1fr 1fr}
    }
    @media (max-width:520px){
      .products-grid{grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
      .footer-grid{grid-template-columns:1fr}
      .small-grid{grid-template-columns:1fr}
    }
    /* subtle focus */
    a:focus,button:focus,input:focus{outline:3px solid rgba(99,102,241,0.12);outline-offset:2px}
  </style>
</head>
<body>
  <header>
    <div class="container topbar" role="banner">
      <div style="display:flex;align-items:center;gap:8px;">
        <div class="logo" aria-label="ShopLocal home">
          <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="4" y="10" width="40" height="28" rx="6" fill="#FF6B35"/>
            <path d="M12 20h24" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
            <path d="M12 26h24" stroke="white" stroke-width="2.5" stroke-linecap="round"/>
          </svg>
          ShopLocal
        </div>
        <nav aria-label="Primary">
          <div class="nav-list">
            <a href="#" aria-current="page">Home</a>
            <a href="#">Collections</a>
            <a href="#">Deals</a>
            <a href="#">Blog</a>
          </div>
        </nav>
      </div>

      <div class="search-wrap" role="search">
        <form class="search" onsubmit="event.preventDefault(); searchProducts();">
          <svg style="width:18px;height:18px;opacity:0.7" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path><circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2"></circle></svg>
          <input id="searchInput" type="search" placeholder="Search for products, brands, or categories" aria-label="Search products" />
          <select id="categorySelect" aria-label="Filter by category" style="border:0;background:transparent">
            <option value="">All categories</option>
            <option>Electronics</option>
            <option>Home</option>
            <option>Fashion</option>
            <option>Outdoors</option>
          </select>
          <button class="btn btn-ghost" type="submit">Search</button>
        </form>
      </div>

      <div class="cta">
        <button class="icon-btn" title="Wish List" aria-label="Wish list">
          <svg style="width:18px;height:18px" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M20.8 8.6c0 4.6-7.8 11.2-8.3 11.6-.5-.4-8.3-7-8.3-11.6C3.9 6.2 6.5 4 9.4 4c1.6 0 3 .7 4 1.9 1-1.2 2.4-1.9 4-1.9 2.9 0 5.5 2.2 5.5 4.6z" stroke="#0f172a" stroke-width="0.6" fill="none"/></svg>
        </button>
        <div class="icon-btn cart" role="button" aria-label="Shopping cart" tabindex="0" onclick="openCart()">
          <svg style="width:18px;height:18px" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M3 3h2l.4 2M7 13h10l3-8H6.4" stroke="#0f172a" stroke-width="1.1" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <span id="cartCount" class="cart-count" aria-live="polite">0</span>
        </div>
      </div>
    </div>
  </header>

  <main class="container" id="main">
    <div class="hero" aria-label="Featured deals">
      <div class="big" role="region" aria-labelledby="hero-title">
        <h1 id="hero-title">Fresh deals every day — Save up to 50%</h1>
        <p>Curated picks from trusted sellers. Fast delivery, easy returns, and secure checkout.</p>
        <div class="hero-actions">
          <button class="btn btn-primary" onclick="scrollToSection('popular')">Shop Popular</button>
          <button class="btn btn-ghost" onclick="scrollToSection('deals')">Today's Deals</button>
          <div style="margin-left:auto;display:flex;align-items:center;gap:8px;color:var(--muted)">
            <div style="text-align:right">
              <div style="font-size:0.85rem;color:var(--muted)">Top seller</div>
              <div class="price-tag">$129</div>
            </div>
            <img src="https://images.unsplash.com/photo-1512496015851-a90fb38ba796?q=80&w=160&auto=format&fit=crop&crop=entropy" alt="Top seller" style="width:78px;height:78px;border-radius:10px;object-fit:cover;border:1px solid rgba(15,23,42,0.04)">
          </div>
        </div>
      </div>
      <aside class="aside" role="complementary" aria-label="Limited time offers">
        <div style="font-weight:700">Limited time offers</div>
        <div style="display:flex;flex-direction:column;gap:8px">
          <div class="deal-card">
            <div class="thumb"><img src="https://images.unsplash.com/photo-1585238342021-6c5f5aa7a3f5?q=80&w=300&auto=format&fit=crop&crop=entropy" alt="Headphones" style="width:100%;height:100%;object-fit:cover"></div>
            <div class="info">
              <div style="font-weight:700">Wireless Headphones</div>
              <div style="display:flex;justify-content:space-between;color:var(--muted);margin-top:6px">
                <div><span class="price">$59</span> <span style="text-decoration:line-through;color:#9ca3af;font-size:0.9rem;margin-left:8px">$99</span></div>
                <div class="countdown" data-expires="" id="dealCountdown1">Ends soon</div>
              </div>
            </div>
          </div>

          <div class="deal-card">
            <div class="thumb"><img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=300&auto=format&fit=crop&crop=entropy" alt="Coffee maker" style="width:100%;height:100%;object-fit:cover"></div>
            <div class="info">
              <div style="font-weight:700">Smart Coffee Maker</div>
              <div style="display:flex;justify-content:space-between;color:var(--muted);margin-top:6px">
                <div><span class="price">$89</span> <span style="text-decoration:line-through;color:#9ca3af;font-size:0.9rem;margin-left:8px">$149</span></div>
                <div class="countdown" data-expires="" id="dealCountdown2">Ends soon</div>
              </div>
            </div>
          </div>

        </div>
      </aside>
    </div>

    <section id="popular" aria-labelledby="popularTitle">
      <div class="section-head">
        <div>
          <h2 id="popularTitle">Popular items</h2>
          <p>Trending this week — customer favorites you’ll love</p>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <label for="sortSelect" style="color:var(--muted);font-size:0.95rem">Sort</label>
          <select id="sortSelect" onchange="sortProducts()" aria-label="Sort products" style="padding:8px;border-radius:8px;border:1px solid rgba(15,23,42,0.06)">
            <option value="featured">Featured</option>
            <option value="price-asc">Price: Low to High</option>
            <option value="price-desc">Price: High to Low</option>
            <option value="rating">Top Rated</option>
          </select>
        </div>
      </div>

      <div class="products-grid" id="productsGrid" role="list">
        <!-- Product cards inserted by JS -->
      </div>
    </section>

    <section id="deals" aria-labelledby="dealsTitle">
      <div class="section-head">
        <div>
          <h2 id="dealsTitle">Flash deals</h2>
          <p>Limited-stock items at special prices. Grab them while they last.</p>
        </div>
        <div style="color:var(--muted);font-size:0.95rem">Free returns · Fast shipping</div>
      </div>

      <div style="display:grid;grid-template-columns:1fr 320px;gap:16px;align-items:start">
        <div style="display:flex;flex-direction:column;gap:12px">
          <div class="card" style="display:flex;gap:12px;align-items:center">
            <div style="width:120px;height:90px;border-radius:10px;overflow:hidden;background:#f3f4f6"><img src="https://images.unsplash.com/photo-1593642634367-d91a135587b5?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Laptop" style="width:100%;height:100%;object-fit:cover"></div>
            <div style="flex:1">
              <div style="display:flex;justify-content:space-between;align-items:start">
                <div>
                  <div style="font-weight:700">UltraBook Pro 2024</div>
                  <div style="color:var(--muted);font-size:0.9rem">Intel i7 · 16GB · 512GB SSD</div>
                </div>
                <div style="text-align:right">
                  <div class="price">$999</div>
                  <div style="color:var(--muted);font-size:0.9rem;text-decoration:line-through">$1,299</div>
                </div>
              </div>
              <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
                <button class="btn btn-primary" onclick="addToCart(101)">Add to cart</button>
                <button class="btn btn-ghost" onclick="quickView(101)">Quick view</button>
              </div>
            </div>
          </div>

          <div class="card" style="display:flex;gap:12px;align-items:center">
            <div style="width:120px;height:90px;border-radius:10px;overflow:hidden;background:#f3f4f6"><img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Kitchen" style="width:100%;height:100%;object-fit:cover"></div>
            <div style="flex:1">
              <div style="display:flex;justify-content:space-between;align-items:start">
                <div>
                  <div style="font-weight:700">Home Espresso</div>
                  <div style="color:var(--muted);font-size:0.9rem">Compact model · 20 bar pump</div>
                </div>
                <div style="text-align:right">
                  <div class="price">$79</div>
                  <div style="color:var(--muted);font-size:0.9rem;text-decoration:line-through">$129</div>
                </div>
              </div>
              <div style="display:flex;gap:8px;margin-top:10px;align-items:center">
                <button class="btn btn-primary" onclick="addToCart(102)">Add to cart</button>
                <button class="btn btn-ghost" onclick="quickView(102)">Quick view</button>
              </div>
            </div>
          </div>
        </div>

        <aside>
          <div class="card">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:700">Deal of the day</div>
              <div class="countdown" id="dealOfDay">00:00:00</div>
            </div>
            <div style="margin-top:10px;display:flex;gap:10px;align-items:center">
              <div style="width:92px;height:92px;border-radius:10px;overflow:hidden;background:#f3f4f6"><img src="https://images.unsplash.com/photo-1616628189162-9be3f5bbf4ac?q=80&w=600&auto=format&fit=crop&crop=entropy" alt="Smartwatch" style="width:100%;height:100%;object-fit:cover"></div>
              <div>
                <div style="font-weight:700">ActiveWatch Series 6</div>
                <div style="color:var(--muted);margin-top:6px">Heart rate monitor · GPS · 7-day battery</div>
                <div style="margin-top:10px">
                  <div style="font-weight:800;font-size:1.05rem;color:#0f172a">$139 <span style="text-decoration:line-through;color:#9ca3af;font-weight:600;margin-left:8px">$199</span></div>
                </div>
              </div>
            </div>
            <div style="display:flex;gap:8px;margin-top:12px">
              <button class="btn btn-primary" onclick="addToCart(201)">Buy now</button>
              <button class="btn btn-ghost" onclick="quickView(201)">Details</button>
            </div>
          </div>
        </aside>
      </div>
    </section>

    <section aria-labelledby="blogTitle">
      <div class="section-head">
        <div>
          <h2 id="blogTitle">From the blog</h2>
          <p>Guides, product stories, and shopping tips</p>
        </div>
        <a href="#" style="color:var(--accent);font-weight:700;text-decoration:none">See all posts →</a>
      </div>

      <div class="blog-grid">
        <article class="blog" aria-labelledby="post1">
          <img src="https://images.unsplash.com/photo-1525097487452-6278ff080c31?q=80&w=800&auto=format&fit=crop&crop=entropy" alt="Styling your home">
          <h3 id="post1" style="margin:10px 0 6px">5 Simple Ways to Refresh Your Home</h3>
          <p style="color:var(--muted);margin:0 0 10px;font-size:0.95rem">Small changes that make a big difference — décor tips that don’t break the bank.</p>
          <a href="#" style="color:var(--accent);font-weight:700;text-decoration:none">Read more →</a>
        </article>

        <article class="blog" aria-labelledby="post2">
          <img src="https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=800&auto=format&fit=crop&crop=entropy" alt="Gadget">
          <h3 id="post2" style="margin:10px 0 6px">Choosing the Right Laptop for Your Needs</h3>
          <p style="color:var(--muted);margin:0 0 10px;font-size:0.95rem">From creators to students — how to match specs to tasks.</p>
          <a href="#" style="color:var(--accent);font-weight:700;text-decoration:none">Read more →</a>
        </article>

        <article class="blog" aria-labelledby="post3">
          <img src="https://images.unsplash.com/photo-1512290923902-8a9f81dc236c?q=80&w=800&auto=format&fit=crop&crop=entropy" alt="Outdoors">
          <h3 id="post3" style="margin:10px 0 6px">Gear Guide: Top Picks for Weekend Hikes</h3>
          <p style="color:var(--muted);margin:0 0 10px;font-size:0.95rem">Lightweight gear that keeps you comfortable on the trail.</p>
          <a href="#" style="color:var(--accent);font-weight:700;text-decoration:none">Read more →</a>
        </article>
      </div>
    </section>

    <section aria-label="Newsletter signup">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px;background:linear-gradient(90deg,#fff,#fff);padding:18px;border-radius:12px;border:1px solid rgba(15,23,42,0.04)">
        <div>
          <div style="font-weight:800;font-size:1.05rem">Join our newsletter</div>
          <div style="color:var(--muted);margin-top:6px">Get exclusive deals and fresh picks delivered to your inbox.</div>
        </div>
        <form class="newsletter" onsubmit="event.preventDefault(); subscribe();">
          <input id="emailInput" type="email" placeholder="Your email address" aria-label="Email address" required>
          <button class="btn btn-primary" type="submit">Subscribe</button>
        </form>
      </div>
    </section>

  </main>

  <footer>
    <div class="container">
      <div class="footer-grid">
        <div>
          <div style="font-weight:800;margin-bottom:8px">ShopLocal</div>
          <div style="color:var(--muted)">Trustworthy products · Friendly support · Fast shipping</div>
        </div>
        <div>
          <div style="font-weight:700;margin-bottom:8px">Shop</div>
          <nav aria-label="Shop links" style="display:flex;flex-direction:column;gap:6px">
            <a href="#" style="color:var(--muted);text-decoration:none">New arrivals</a>
            <a href="#" style="color:var(--muted);text-decoration:none">Best sellers</a>
            <a href="#" style="color:var(--muted);text-decoration:none">Gift cards</a>
          </nav>
        </div>
        <div>
          <div style="font-weight:700;margin-bottom:8px">Support</div>
          <nav aria-label="Support links" style="display:flex;flex-direction:column;gap:6px">
            <a href="#" style="color:var(--muted);text-decoration:none">Help center</a>
            <a href="#" style="color:var(--muted);text-decoration:none">Returns</a>
            <a href="#" style="color:var(--muted);text-decoration:none">Shipping</a>
          </nav>
        </div>
        <div>
          <div style="font-weight:700;margin-bottom:8px">Legal</div>
          <nav aria-label="Legal" style="display:flex;flex-direction:column;gap:6px">
            <a href="#" style="color:var(--muted);text-decoration:none">Privacy</a>
            <a href="#" style="color:var(--muted);text-decoration:none">Terms</a>
            <a href="#" style="color:var(--muted);text-decoration:none">Sitemap</a>
          </nav>
        </div>
      </div>

      <div style="border-top:1px solid rgba(15,23,42,0.03);margin-top:18px;padding-top:14px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap">
        <div style="color:var(--muted)">© <span id="year"></span> ShopLocal. All rights reserved.</div>
        <div style="display:flex;gap:8px">
          <a href="#" style="color:var(--muted);text-decoration:none">Facebook</a>
          <a href="#" style="color:var(--muted);text-decoration:none">Instagram</a>
          <a href="#" style="color:var(--muted);text-decoration:none">Twitter</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Quick view modal -->
  <div id="quickModal" role="dialog" aria-modal="true" aria-hidden="true" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(3,7,18,0.4);z-index:80">
    <div style="width:min(920px,96%);background:var(--card);border-radius:12px;padding:18px;border:1px solid rgba(15,23,42,0.06);display:grid;grid-template-columns:320px 1fr;gap:18px;">
      <div id="quickImage" style="width:100%;height:320px;border-radius:10px;overflow:hidden;background:#f3f4f6">
        <img src="" alt="" style="width:100%;height:100%;object-fit:cover">
      </div>
      <div>
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <h3 id="quickTitle" style="margin:0">Product name</h3>
            <div id="quickMeta" style="color:var(--muted);margin-top:6px;font-size:0.95rem">Details</div>
          </div>
          <button onclick="closeQuickView()" aria-label="Close quick view" style="background:transparent;border:0;font-size:20px;cursor:pointer">✕</button>
        </div>
        <div id="quickPrice" style="margin-top:12px;font-weight:800;font-size:1.25rem"></div>
        <p id="quickDesc" style="color:var(--muted);margin-top:12px"></p>
        <div style="margin-top:16px;display:flex;gap:8px">
          <button class="btn btn-primary" id="quickAddBtn">Add to cart</button>
          <button class="btn btn-ghost" onclick="closeQuickView()">View details</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Sample product data
    const products = [
      { id:1, title:"Noise Cancelling Headphones", price:129, rating:4.7, reviews:1243, img:"https://images.unsplash.com/photo-1516707570266-4a5b2e5b5e91?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"Popular", category:"Electronics" },
      { id:2, title:"Classic Leather Wallet", price:49, rating:4.6, reviews:324, img:"https://images.unsplash.com/photo-1520975923163-6bb3e7da9e1d?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"Best seller", category:"Fashion" },
      { id:3, title:"Smart LED Lamp", price:39, rating:4.5, reviews:210, img:"https://images.unsplash.com/photo-1556228720-066d9b2d8b9b?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"New", category:"Home" },
      { id:4, title:"Trail Running Shoes", price:89, rating:4.4, reviews:542, img:"https://images.unsplash.com/photo-1528701800484-60b4d9a97e5d?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"Hot", category:"Outdoors" },
      { id:5, title:"4K Action Camera", price:159, rating:4.6, reviews:98, img:"https://images.unsplash.com/photo-1519183071298-a2962be90b0b?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"Trending", category:"Electronics" },
      { id:6, title:"Stainless Steel Kettle", price:34, rating:4.3, reviews:87, img:"https://images.unsplash.com/photo-1498804103079-a6351b050096?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"Value", category:"Home" },
      { id:7, title:"Cotton Summer Shirt", price:29, rating:4.1, reviews:410, img:"https://images.unsplash.com/photo-1520975917093-1cbbf66a5a15?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"Popular", category:"Fashion" },
      { id:8, title:"Portable Bluetooth Speaker", price:59, rating:4.5, reviews:632, img:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?q=80&w=800&auto=format&fit=crop&crop=entropy", badge:"Limited", category:"Electronics" }
    ];

    const cart = { count: 0, items: [] };

    function renderProducts(list = products) {
      const grid = document.getElementById('productsGrid');
      grid.innerHTML = '';
      list.forEach(p => {
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('role','listitem');
        card.innerHTML = `
          <div class="media" aria-hidden="true">
            <span class="badge">${p.badge}</span>
            <img src="${p.img}" alt="${escapeHtml(p.title)}">
          </div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <div class="title">${escapeHtml(p.title)}</div>
            <div class="meta">
              <div style="display:flex;align-items:center">
                <span class="star">★</span>
                <span style="font-weight:700">${p.rating.toFixed(1)}</span>
                <span style="color:var(--muted);margin-left:8px">${p.reviews} reviews</span>
              </div>
              <div class="price">$${p.price}</div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center" class="card-actions">
              <div style="color:var(--muted);font-size:0.9rem">${p.category}</div>
              <div style="display:flex;gap:8px">
                <button class="btn btn-primary" onclick="addToCart(${p.id})">Add</button>
                <button class="btn btn-ghost" onclick="quickView(${p.id})">View</button>
              </div>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    function addToCart(id){
      const product = products.find(p=>p.id===id) || {};
      cart.count += 1;
      cart.items.push({ id, title: product.title || ('Item ' + id) });
      document.getElementById('cartCount').textContent = cart.count;
      // small visual feedback
      const btn = document.activeElement;
      if(btn) btn.animate([{transform:'scale(1)'},{transform:'scale(0.98)'},{transform:'scale(1)'}],{duration:180});
      // simple toast
      showToast((product.title || 'Item') + ' added to cart');
    }

    function quickView(id){
      const product = products.find(p=>p.id===id) || {};
      const modal = document.getElementById('quickModal');
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden','false');
      document.getElementById('quickTitle').textContent = product.title || 'Product';
      document.getElementById('quickMeta').textContent = (product.category || '') + ' · ' + (product.rating ? (product.rating + ' ★') : '');
      document.getElementById('quickPrice').textContent = product.price ? ('$' + product.price) : '';
      document.getElementById('quickDesc').textContent = 'High-quality product with excellent reviews. Fast shipping and easy returns. Limited stock available.';
      document.querySelector('#quickImage img').src = product.img || '';
      document.querySelector('#quickImage img').alt = product.title || '';
      const addBtn = document.getElementById('quickAddBtn');
      addBtn.onclick = ()=>{ addToCart(id); closeQuickView(); };
    }

    function closeQuickView(){
      const modal = document.getElementById('quickModal');
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden','true');
    }

    // simple toast notification
    function showToast(message){
      const t = document.createElement('div');
      t.textContent = message;
      t.style.position = 'fixed';
      t.style.right = '18px';
      t.style.bottom = '18px';
      t.style.background = 'rgba(15,23,42,0.96)';
      t.style.color = '#fff';
      t.style.padding = '10px 14px';
      t.style.borderRadius = '10px';
      t.style.zIndex = 200;
      t.style.boxShadow = '0 8px 30px rgba(2,6,23,0.3)';
      document.body.appendChild(t);
      t.animate([{opacity:0,transform:'translateY(8px)'},{opacity:1,transform:'translateY(0)'}],{duration:220});
      setTimeout(()=>{ t.animate([{opacity:1},{opacity:0,transform:'translateY(12px)'}],{duration:260}); setTimeout(()=>t.remove(),260); },1800);
    }

    function openCart(){
      showToast('Cart: ' + cart.count + ' item(s)');
    }

    function searchProducts(){
      const q = document.getElementById('searchInput').value.toLowerCase().trim();
      const cat = document.getElementById('categorySelect').value;
      const filtered = products.filter(p=>{
        const matchQ = !q || p.title.toLowerCase().includes(q) || (p.category && p.category.toLowerCase().includes(q));
        const matchC = !cat || cat === '' || p.category === cat;
        return matchQ && matchC;
      });
      renderProducts(filtered);
    }

    function sortProducts(){
      const v = document.getElementById('sortSelect').value;
      const copy = [...products];
      if(v==='price-asc') copy.sort((a,b)=>a.price-b.price);
      if(v==='price-desc') copy.sort((a,b)=>b.price-a.price);
      if(v==='rating') copy.sort((a,b)=>b.rating-a.rating);
      renderProducts(copy);
    }

    function scrollToSection(id){
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth',block:'start'});
    }

    function subscribe(){
      const email = document.getElementById('emailInput').value;
      if(!email) return;
      document.getElementById('emailInput').value = '';
      showToast('Thanks! ' + email + ' subscribed.');
    }

    // countdown utilities
    function setCountdown(element, seconds){
      const end = Date.now() + seconds*1000;
      element.dataset.expires = end;
    }
    function updateCountdowns(){
      const els = document.querySelectorAll('.countdown');
      els.forEach(el=>{
        const end = parseInt(el.dataset.expires) || 0;
        let text = '';
        if(end && end > Date.now()){
          const diff = Math.max(0, Math.floor((end - Date.now())/1000));
          const h = Math.floor(diff/3600); const m = Math.floor((diff%3600)/60); const s = diff%60;
          text = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
        } else {
          text = '00:00:00';
        }
        el.textContent = text;
      });
    }

    function escapeHtml(s){
      return s ? s.replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; }) : '';
    }

    // Initialize
    document.getElementById('year').textContent = new Date().getFullYear();
    renderProducts();

    // Set some countdowns: deal of the day = 6 hours; two aside deals = 2h and 4h
    setCountdown(document.getElementById('dealOfDay'), 6*3600);
    setCountdown(document.getElementById('dealCountdown1'), 2*3600);
    setCountdown(document.getElementById('dealCountdown2'), 4*3600);
    updateCountdowns();
    setInterval(updateCountdowns, 1000);

    // Close quick view on escape or click outside
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeQuickView(); });
    document.getElementById('quickModal').addEventListener('click', (e)=>{
      if(e.target.id === 'quickModal') closeQuickView();
    });

    // small accessibility: trap focus when modal open (basic)
    (function trapFocus(){
      let lastActive = null;
      document.addEventListener('focusin', (e)=>{
        const modal = document.getElementById('quickModal');
        if(modal.style.display === 'flex'){
          if(!modal.contains(e.target)){
            e.stopPropagation();
            modal.querySelector('[onclick^="closeQuickView"]')?.focus();
          }
        }
      });
    })();
  </script>
</body>
</html>