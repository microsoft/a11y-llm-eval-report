<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ShopWave — Home</title>
  <meta name="description" content="ShopWave — curated popular items, hot deals, and our latest blog posts. Fast shipping, secure checkout." />
  <style>
    :root{
      --bg:#f5f7fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0ea5a4;
      --accent-dark:#0a7b78;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.7);
      --shadow: 0 6px 20px rgba(17,24,39,0.08);
      --radius:12px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: linear-gradient(180deg,var(--bg),#eef3f8);
      color:#0f1724;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
    }

    /* Header */
    header{
      background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.7));
      position:sticky;
      top:0;
      z-index:40;
      backdrop-filter: blur(6px);
      border-bottom:1px solid rgba(15,23,36,0.05);
    }
    .nav{
      max-width:1200px;
      margin:0 auto;
      display:flex;
      gap:18px;
      align-items:center;
      padding:14px 20px;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      text-decoration:none;
      color:inherit;
    }
    .logo{
      width:42px;
      height:42px;
      border-radius:10px;
      display:inline-grid;
      place-items:center;
      background:linear-gradient(135deg,var(--accent),var(--accent-dark));
      color:white;
      font-weight:700;
      box-shadow:var(--shadow);
      flex-shrink:0;
    }
    nav.primary{display:flex; gap:14px; margin-left:8px; align-items:center;}
    nav.primary a{
      color:var(--muted);
      text-decoration:none;
      padding:8px;
      border-radius:8px;
      font-size:14px;
    }
    nav.primary a:hover{background:var(--glass); color:var(--accent-dark)}
    .spacer{flex:1}
    .search{
      display:flex;
      align-items:center;
      gap:8px;
      background:var(--card);
      padding:8px;
      border-radius:999px;
      box-shadow:var(--shadow);
      min-width:220px;
      max-width:560px;
      width:36%;
    }
    .search input{
      border:0; outline:0; font-size:14px; background:transparent; width:100%;
    }
    .icons{display:flex; gap:12px; align-items:center;}
    .icon-btn{
      background:transparent;
      border:0;
      cursor:pointer;
      padding:8px;
      border-radius:10px;
      display:inline-grid;
      place-items:center;
    }
    .icon-btn:hover{background:var(--glass)}
    .cart{
      position:relative;
    }
    .cart-badge{
      position:absolute;
      top:-6px; right:-6px;
      background:var(--danger);
      color:white;
      font-size:12px;
      padding:4px 7px;
      border-radius:999px;
      box-shadow:0 4px 10px rgba(239,68,68,0.18);
    }

    /* Main layout */
    main{max-width:1200px;margin:22px auto;padding:0 20px 56px;}
    .hero{
      display:grid;
      grid-template-columns:1fr 360px;
      gap:18px;
      align-items:center;
    }
    .hero-card{
      background:linear-gradient(180deg, #fff, #fbfeff);
      padding:28px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
    }
    .hero h1{margin:0 0 12px;font-size:28px;}
    .hero p{margin:0 0 18px;color:var(--muted)}
    .hero-cta{display:flex; gap:12px; align-items:center;}
    .btn{
      background:var(--accent);
      color:white;
      border:0;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      box-shadow:0 8px 24px rgba(14,165,164,0.14);
    }
    .btn.ghost{background:transparent;color:var(--accent-dark);border:1px solid rgba(14,165,164,0.12); box-shadow:none}
    .hero-aside{
      padding:16px;
      border-radius:var(--radius);
      background:linear-gradient(180deg,#fefefe,#f7fbfc);
      box-shadow:var(--shadow);
      text-align:center;
    }
    .promo{
      font-size:14px;color:var(--muted);
    }
    .promo strong{color:var(--accent-dark)}

    /* Sections */
    section{margin-top:22px}
    .section-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }
    .section-title{font-weight:700;font-size:18px}
    .controls{display:flex; gap:8px; align-items:center;}
    .filter-list{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .chip{
      padding:8px 12px;
      background:var(--card);
      border-radius:999px;
      border:1px solid rgba(15,23,36,0.04);
      font-size:13px;
      cursor:pointer;
    }
    .chip.active{background:linear-gradient(90deg,var(--accent),var(--accent-dark)); color:white; border:0}

    /* Products grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:16px;
    }
    .card{
      background:var(--card);
      border-radius:14px;
      padding:12px;
      box-shadow:var(--shadow);
      display:flex;
      flex-direction:column;
      gap:10px;
      transition:transform .18s ease, box-shadow .18s ease;
    }
    .card:hover{transform:translateY(-6px)}
    .thumb{
      height:160px;
      border-radius:10px;
      overflow:hidden;
      display:block;
      background:#f3f6f8;
    }
    .thumb img{width:100%; height:100%; object-fit:cover; display:block}
    .card h3{margin:0;font-size:15px}
    .meta{display:flex; justify-content:space-between; align-items:center; color:var(--muted); font-size:13px}
    .price{font-weight:700; color:#06202a}
    .card-actions{display:flex; gap:8px; margin-top:auto; align-items:center}
    .small{padding:8px 10px; border-radius:9px; border:0; cursor:pointer;}
    .outline{background:transparent; border:1px solid rgba(15,23,36,0.06)}
    .sale-badge{background:linear-gradient(90deg,#ffecd1,#ffd28a); color:#7a3e00; padding:6px 8px; border-radius:8px; font-size:12px}

    /* Deals carousel */
    .carousel{
      position:relative;
      overflow:hidden;
      border-radius:14px;
      background:linear-gradient(90deg,#fff8f3,#fff);
      padding:14px;
      display:flex;
      gap:12px;
      align-items:center;
    }
    .slides{
      display:flex;
      gap:12px;
      transition:transform .45s cubic-bezier(.2,.9,.3,1);
    }
    .deal{
      min-width:300px;
      background:linear-gradient(180deg,#fff,#fffdf8);
      border-radius:12px;
      padding:12px;
      box-shadow:var(--shadow);
      display:flex;
      gap:12px;
      align-items:center;
    }
    .deal img{width:90px;height:90px; border-radius:8px; object-fit:cover}
    .deal strong{display:block}

    /* Blog list */
    .posts{
      display:grid;
      grid-template-columns: repeat(3,1fr);
      gap:16px;
    }
    .post{
      background:linear-gradient(180deg,#fff,#fcfeff);
      border-radius:12px;
      padding:12px;
      box-shadow:var(--shadow);
    }
    .post h4{margin:4px 0 8px}
    .post p{margin:0;color:var(--muted); font-size:14px}

    /* Footer */
    footer{
      margin-top:36px;
      padding:28px 20px;
      background:linear-gradient(180deg,#fff,#f8fbfd);
      border-top:1px solid rgba(15,23,36,0.03);
    }
    .footer-grid{
      max-width:1200px;
      margin:0 auto;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:18px;
      align-items:start;
    }
    .newsletter{display:flex; gap:8px; align-items:center}
    .newsletter input{
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(15,23,36,0.06);
      flex:1;
      font-size:14px;
    }
    .small-muted{color:var(--muted); font-size:13px}

    /* Responsive */
    @media (max-width:1024px){
      .grid{grid-template-columns: repeat(3,1fr)}
      .hero{grid-template-columns:1fr}
      .hero-aside{order:-1}
      .slides{gap:10px}
    }
    @media (max-width:720px){
      .search{display:none}
      .grid{grid-template-columns: repeat(2,1fr)}
      .posts{grid-template-columns:1fr}
      nav.primary{display:none}
      .nav{padding:12px 14px}
    }
    /* Modal & toast */
    .modal-backdrop{
      position:fixed; inset:0; background:rgba(2,6,23,0.5); display:none; align-items:center; justify-content:center; z-index:60;
    }
    .modal{
      width:min(880px,94%);
      background:white;
      border-radius:14px;
      padding:18px;
      box-shadow:0 32px 80px rgba(2,6,23,0.4);
      max-height:86vh;
      overflow:auto;
    }
    .toast{
      position:fixed;
      right:20px;
      bottom:20px;
      background:linear-gradient(90deg,var(--accent),var(--accent-dark));
      color:white;
      padding:12px 16px;
      border-radius:10px;
      box-shadow:0 10px 30px rgba(2,6,23,0.18);
      display:none;
      z-index:70;
    }
  </style>
</head>
<body>
  <header>
    <div class="nav" role="navigation" aria-label="Main navigation">
      <a class="brand" href="#" aria-label="ShopWave home">
        <div class="logo" aria-hidden="true">SW</div>
        <div>
          <div style="font-weight:700">ShopWave</div>
          <div style="font-size:12px;color:var(--muted)">Everyday finds · Fast shipping</div>
        </div>
      </a>

      <nav class="primary" aria-hidden="false">
        <a href="#popular">Popular</a>
        <a href="#deals">Deals</a>
        <a href="#blog">Blog</a>
        <a href="#contact">Contact</a>
      </nav>

      <div class="spacer" aria-hidden="true"></div>

      <div class="search" role="search" aria-label="Search products">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35" stroke="#94a3b8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="11" cy="11" r="6" stroke="#94a3b8" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input id="search" placeholder="Search items, brands..." aria-label="Search items">
        <button class="icon-btn" id="voiceBtn" title="Voice search" aria-label="Voice search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2v11" stroke="#6b7280" stroke-width="1.6" stroke-linecap="round"/><path d="M19 11a7 7 0 0 1-14 0" stroke="#6b7280" stroke-width="1.6" stroke-linecap="round"/><path d="M12 21v-2" stroke="#6b7280" stroke-width="1.6" stroke-linecap="round"/></svg>
        </button>
      </div>

      <div class="icons" role="group" aria-label="Header actions">
        <button class="icon-btn" title="Wishlist" aria-label="Wishlist">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M20.8 7.6a4.4 4.4 0 0 0-6.2-6.2L12 4l-2.6-2.6A4.4 4.4 0 0 0 3.2 7.6C3.2 13 11.2 18 12 18c.8 0 8.8-5 8.8-10.4z" stroke="#0f1724" stroke-width="0.6" fill="rgba(239,68,68,0.06)"/>
          </svg>
        </button>

        <button class="icon-btn cart" id="cartBtn" aria-label="Open cart">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M3 3h2l.9 2M7 13h10l4-8H5.1" stroke="#0f1724" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="10" cy="20" r="1" fill="#0f1724"/><circle cx="18" cy="20" r="1" fill="#0f1724"/>
          </svg>
          <div class="cart-badge" id="cartCount" aria-live="polite">0</div>
        </button>

        <button class="icon-btn" id="accountBtn" title="Account" aria-label="Open account menu">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="#0f1724" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="7" r="4" stroke="#0f1724" stroke-width="1.4"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero" aria-label="Featured">
      <div class="hero-card" role="region" aria-labelledby="hero-title">
        <h1 id="hero-title">Curated picks for your everyday life</h1>
        <p>Handpicked items, limited-time deals, and stories behind the products. Shop smart with fast shipping and secure checkout.</p>
        <div class="hero-cta">
          <button class="btn" id="shopNow">Shop Popular</button>
          <button class="btn ghost" id="learnMore">How it works</button>
        </div>
        <div style="display:flex; gap:8px; margin-top:14px; color:var(--muted); font-size:13px;">
          <div><strong>Free</strong> returns · 30 days</div>
          <div><strong>24/7</strong> support</div>
        </div>
      </div>

      <aside class="hero-aside" role="complementary" aria-label="Limited offer">
        <div class="promo">Limited time — Save <strong>25%</strong> on select home essentials</div>
        <img src="https://picsum.photos/seed/homepromo/360/180" alt="Promo" style="margin-top:12px; width:100%; border-radius:10px; display:block">
        <div style="margin-top:12px">
          <button class="btn" id="claimOffer">Claim Offer</button>
        </div>
      </aside>
    </section>

    <section id="popular" aria-labelledby="popular-title">
      <div class="section-head">
        <div>
          <div class="section-title" id="popular-title">Popular items</div>
          <div class="small-muted" style="margin-top:4px">Trending right now — chosen by thousands</div>
        </div>
        <div class="controls" aria-hidden="false">
          <div class="filter-list" role="list" aria-label="Filter categories" id="categoryFilters">
            <button class="chip active" data-cat="all" role="listitem">All</button>
            <button class="chip" data-cat="home" role="listitem">Home</button>
            <button class="chip" data-cat="tech" role="listitem">Tech</button>
            <button class="chip" data-cat="style" role="listitem">Style</button>
            <button class="chip" data-cat="outdoor" role="listitem">Outdoor</button>
          </div>
          <select id="sort" aria-label="Sort products" style="padding:8px;border-radius:10px;border:1px solid rgba(15,23,36,0.06);">
            <option value="popular">Sort: Popular</option>
            <option value="price-asc">Price: Low to high</option>
            <option value="price-desc">Price: High to low</option>
          </select>
        </div>
      </div>

      <div class="grid" id="productsGrid" aria-live="polite">
        <!-- Product cards inserted by JS -->
      </div>
    </section>

    <section id="deals" aria-labelledby="deals-title">
      <div class="section-head">
        <div>
          <div class="section-title" id="deals-title">Hot deals</div>
          <div class="small-muted">Flash sales & limited offers</div>
        </div>
        <div class="controls">
          <button class="chip" id="prevDeal" aria-label="Previous deal">Prev</button>
          <button class="chip" id="nextDeal" aria-label="Next deal">Next</button>
        </div>
      </div>

      <div class="carousel" aria-hidden="false" role="region" aria-label="Deals carousel">
        <div class="slides" id="dealsSlides">
          <!-- Deal slides inserted by JS -->
        </div>
      </div>
    </section>

    <section id="blog" aria-labelledby="blog-title">
      <div class="section-head">
        <div>
          <div class="section-title" id="blog-title">From our blog</div>
          <div class="small-muted">Tips, guides, and behind-the-scenes</div>
        </div>
        <div class="controls">
          <a href="#blog" class="chip">View all posts</a>
        </div>
      </div>

      <div class="posts" id="postsList">
        <!-- Posts inserted by JS -->
      </div>
    </section>
  </main>

  <footer id="contact">
    <div class="footer-grid" role="contentinfo">
      <div>
        <div style="font-weight:700">ShopWave</div>
        <div class="small-muted" style="margin-top:8px">Secure checkout · Fast shipping · 30-day returns</div>
        <div style="margin-top:12px; display:flex; gap:8px;">
          <a href="#" aria-label="Twitter" style="color:var(--muted)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M23 4.5a8.5 8.5 0 0 1-2.4.7 4.2 4.2 0 0 0-7.2 3v.6A11.7 11.7 0 0 1 3 3.6a4.2 4.2 0 0 0 1.3 5.6 4.1 4.1 0 0 1-1.9-.5v.1a4.2 4.2 0 0 0 3.4 4.1 4.2 4.2 0 0 1-1.9.1 4.2 4.2 0 0 0 3.9 2.9A8.5 8.5 0 0 1 1 19.5a11.9 11.9 0 0 0 6.4 1.9c7.7 0 11.9-6.3 11.9-11.9v-.5A8.6 8.6 0 0 0 23 4.5z" fill="currentColor"/></svg></a>
          <a href="#" aria-label="Instagram" style="color:var(--muted)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><rect x="3" y="3" width="18" height="18" rx="4" stroke="currentColor"/><circle cx="12" cy="12" r="3" stroke="currentColor"/><circle cx="17.5" cy="6.5" r="1" fill="currentColor"/></svg></a>
          <a href="#" aria-label="Facebook" style="color:var(--muted)"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M22 12.1C22 6.6 17.5 2 12 2S2 6.6 2 12.1C2 17.1 5.7 21.2 10.5 22v-7.7H7.8v-3.2h2.7V9.1c0-2.7 1.6-4.2 4-4.2 1.2 0 2.4.2 2.4.2v2.7h-1.4c-1.4 0-1.8.9-1.8 1.8v2.1h3l-.5 3.2h-2.5V22C18.3 21.2 22 17.1 22 12.1z" fill="currentColor"/></svg></a>
        </div>
      </div>

      <div>
        <div style="display:flex; justify-content:flex-end; gap:12px; align-items:center; margin-bottom:10px;">
          <div style="text-align:right">
            <div style="font-weight:700">Sign up for our newsletter</div>
            <div class="small-muted">Get exclusive deals & tips</div>
          </div>
        </div>
        <form id="newsletterForm" class="newsletter" onsubmit="return false;">
          <input id="newsletterEmail" type="email" placeholder="you@example.com" aria-label="Your email">
          <button class="btn" id="subscribeBtn">Subscribe</button>
        </form>
        <div style="margin-top:12px" class="small-muted">© <span id="year"></span> ShopWave. All rights reserved.</div>
      </div>
    </div>
  </footer>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal" role="document" aria-label="Product details" id="modalContent">
      <button class="icon-btn" id="modalClose" style="float:right" aria-label="Close">✕</button>
      <div id="modalBody">
        <!-- Filled by JS -->
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script>
    // Sample data
    const products = [
      {id:1,name:"Breezy Linen Shirt",price:39,cat:"style",img:"https://picsum.photos/seed/p1/600/400",desc:"Lightweight and breathable. Perfect for summer outings.",sale:false},
      {id:2,name:"Smart Home Speaker",price:129,cat:"tech",img:"https://picsum.photos/seed/p2/600/400",desc:"Crystal clear sound with voice assistant built in.",sale:true},
      {id:3,name:"Insulated Water Bottle",price:24,cat:"outdoor",img:"https://picsum.photos/seed/p3/600/400",desc:"Keeps drinks cold for 24 hours or hot for 12.",sale:false},
      {id:4,name:"Ceramic Planter Set",price:34,cat:"home",img:"https://picsum.photos/seed/p4/600/400",desc:"Hand-glazed planters — modern & minimal.",sale:true},
      {id:5,name:"Noise-Cancelling Earbuds",price:89,cat:"tech",img:"https://picsum.photos/seed/p5/600/400",desc:"Immersive sound and all-day battery life.",sale:false},
      {id:6,name:"Compact Camping Chair",price:49,cat:"outdoor",img:"https://picsum.photos/seed/p6/600/400",desc:"Lightweight, foldable, and durable.",sale:false},
      {id:7,name:"Wool Throw Blanket",price:59,cat:"home",img:"https://picsum.photos/seed/p7/600/400",desc:"Cozy and soft — perfect for chilly evenings.",sale:true},
      {id:8,name:"Minimalist Backpack",price:79,cat:"style",img:"https://picsum.photos/seed/p8/600/400",desc:"Stylish and functional with laptop pocket.",sale:false}
    ];

    const deals = [
      {id:"d1",title:"Wireless Charger + Stand",sub:"25% off — only today",img:"https://picsum.photos/seed/d1/240/160",price:"$29"},
      {id:"d2",title:"Outdoor Lantern Pack",sub:"Buy 2 get 1 free",img:"https://picsum.photos/seed/d2/240/160",price:"$45"},
      {id:"d3",title:"Limited Edition Mug",sub:"Special artist series",img:"https://picsum.photos/seed/d3/240/160",price:"$15"},
      {id:"d4",title:"Premium Bed Sheets",sub:"Flat 30% off",img:"https://picsum.photos/seed/d4/240/160",price:"$79"}
    ];

    const posts = [
      {id:"b1",title:"5 Ways to Style a Linen Shirt",excerpt:"From workdays to weekend trips — versatile looks that keep you cool.",img:"https://picsum.photos/seed/b1/720/420",content:"Full article: Tips and outfit inspirations for linen shirts..."},
      {id:"b2",title:"How to Choose the Right Water Bottle",excerpt:"Insulation, material, and capacity explained.",img:"https://picsum.photos/seed/b2/720/420",content:"Full article: Everything you need to know about bottles..."},
      {id:"b3",title:"Our Favorite Weekend Camping Spots",excerpt:"Getaway ideas for every skill level.",img:"https://picsum.photos/seed/b3/720/420",content:"Full article: Explore camps and what to bring..."}
    ];

    // Initial render
    const grid = document.getElementById('productsGrid');
    const slides = document.getElementById('dealsSlides');
    const postsList = document.getElementById('postsList');
    const cartCount = document.getElementById('cartCount');
    const toast = document.getElementById('toast');
    let cart = 0;

    function formatPrice(n){return '$' + n.toFixed(2)}

    function renderProducts(list){
      grid.innerHTML = '';
      list.forEach(p=>{
        const el = document.createElement('article');
        el.className='card';
        el.innerHTML = `
          <a class="thumb" href="#" data-id="${p.id}" aria-label="Quick view ${p.name}"><img src="${p.img}" alt="${p.name}"></a>
          <div>
            <h3>${p.name}</h3>
            <div class="meta"><span class="small-muted">${p.cat}</span><span class="price">${formatPrice(p.price)}</span></div>
            <div style="margin-top:8px;color:var(--muted);font-size:13px">${p.desc}</div>
          </div>
          <div class="card-actions">
            <button class="small outline" data-id="${p.id}" aria-label="Add ${p.name} to cart">Add</button>
            <button class="small" data-quick="${p.id}" aria-label="Quick view ${p.name}">Quick view</button>
            ${p.sale?'<div class="sale-badge" aria-hidden="true">Sale</div>':''}
          </div>
        `;
        grid.appendChild(el);
      });
    }

    function renderDeals(list){
      slides.innerHTML = '';
      list.forEach(d=>{
        const el = document.createElement('div');
        el.className='deal';
        el.innerHTML = `<img src="${d.img}" alt="${d.title}"><div><strong>${d.title}</strong><div class="small-muted" style="margin-top:6px">${d.sub}</div><div style="margin-top:8px;font-weight:700">${d.price}</div></div>`;
        slides.appendChild(el);
      });
    }

    function renderPosts(list){
      postsList.innerHTML = '';
      list.forEach(p=>{
        const el = document.createElement('article');
        el.className='post';
        el.innerHTML = `
          <img src="${p.img}" alt="${p.title}" style="width:100%; border-radius:8px; height:140px; object-fit:cover">
          <h4>${p.title}</h4>
          <p>${p.excerpt}</p>
          <div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center">
            <button class="chip" data-post="${p.id}">Read more</button>
            <div class="small-muted">2 min read</div>
          </div>
        `;
        postsList.appendChild(el);
      });
    }

    renderProducts(products);
    renderDeals(deals);
    renderPosts(posts);

    // Filters and search
    const filters = document.getElementById('categoryFilters');
    let activeCat = 'all';
    let currentSort = 'popular';
    const searchInput = document.getElementById('search');

    filters.addEventListener('click', e=>{
      const btn = e.target.closest('button');
      if(!btn) return;
      activeCat = btn.dataset.cat || 'all';
      Array.from(filters.querySelectorAll('.chip')).forEach(c=>c.classList.remove('active'));
      btn.classList.add('active');
      applyFilters();
    });

    document.getElementById('sort').addEventListener('change', e=>{
      currentSort = e.target.value;
      applyFilters();
    });

    searchInput.addEventListener('input', applyFilters);

    function applyFilters(){
      const q = searchInput.value.trim().toLowerCase();
      let filtered = products.filter(p=>{
        const matchCat = activeCat === 'all' ? true : p.cat === activeCat;
        const matchQ = !q || p.name.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q);
        return matchCat && matchQ;
      });
      if(currentSort === 'price-asc') filtered.sort((a,b)=>a.price-b.price);
      if(currentSort === 'price-desc') filtered.sort((a,b)=>b.price-a.price);
      renderProducts(filtered);
    }

    // Add to cart & quick view
    document.body.addEventListener('click', e=>{
      const addBtn = e.target.closest('button[data-id]');
      if(addBtn){
        const id = Number(addBtn.dataset.id);
        const prod = products.find(p=>p.id===id);
        cart++;
        cartCount.textContent = cart;
        showToast(`${prod.name} added to cart`);
        return;
      }

      const quick = e.target.closest('button[data-quick], a.thumb');
      if(quick){
        e.preventDefault();
        const id = Number(quick.dataset.quick || quick.dataset.id);
        openModalForProduct(id);
        return;
      }

      const postBtn = e.target.closest('button[data-post]');
      if(postBtn){
        const pid = postBtn.dataset.post;
        openModalForPost(pid);
        return;
      }
    });

    // Modal behavior
    const backdrop = document.getElementById('modalBackdrop');
    const modalBody = document.getElementById('modalBody');
    const modalClose = document.getElementById('modalClose');

    function openModalForProduct(id){
      const p = products.find(x=>x.id===Number(id));
      if(!p) return;
      modalBody.innerHTML = `
        <div style="display:flex; gap:18px; align-items:flex-start; flex-wrap:wrap">
          <img src="${p.img}" alt="${p.name}" style="width:320px; border-radius:12px; object-fit:cover; flex-shrink:0">
          <div style="flex:1">
            <h2 style="margin-top:0">${p.name}</h2>
            <div style="color:var(--muted);margin-bottom:12px">${p.cat} · ${p.sale?'<span style="color:var(--danger)">Sale</span>':''}</div>
            <div style="font-size:20px;font-weight:800">${formatPrice(p.price)}</div>
            <p style="color:var(--muted); margin-top:14px">${p.desc}</p>
            <div style="margin-top:18px; display:flex; gap:8px;">
              <button class="btn" id="modalAdd" data-id="${p.id}">Add to cart</button>
              <button class="btn ghost" id="modalCloseBtn">Close</button>
            </div>
          </div>
        </div>
      `;
      openModal();
      // attach actions
      document.getElementById('modalAdd').addEventListener('click', function(){
        cart++; cartCount.textContent = cart;
        showToast(`${p.name} added to cart`);
        closeModal();
      });
      document.getElementById('modalCloseBtn').addEventListener('click', closeModal);
    }

    function openModalForPost(id){
      const p = posts.find(x=>x.id===id);
      if(!p) return;
      modalBody.innerHTML = `<h2 style="margin-top:0">${p.title}</h2><img src="${p.img}" alt="${p.title}" style="width:100%; border-radius:12px; margin:12px 0; object-fit:cover"><p style="color:var(--muted)">${p.content}</p><div style="margin-top:12px"><button class="btn" id="closePost">Close</button></div>`;
      openModal();
      document.getElementById('closePost').addEventListener('click', closeModal);
    }

    function openModal(){
      backdrop.style.display='flex';
      backdrop.setAttribute('aria-hidden','false');
      setTimeout(()=>document.getElementById('modalContent').focus(),150);
      document.body.style.overflow='hidden';
    }
    function closeModal(){
      backdrop.style.display='none';
      backdrop.setAttribute('aria-hidden','true');
      document.body.style.overflow='';
    }
    modalClose.addEventListener('click', closeModal);
    backdrop.addEventListener('click', e=>{
      if(e.target === backdrop) closeModal();
    });
    document.addEventListener('keydown', e=>{
      if(e.key === 'Escape') closeModal();
    });

    // Deals carousel autoplay & controls
    let slideIndex = 0;
    const dealWidth = 324; // approx per slide with gap
    function updateSlide(){
      const x = -slideIndex * (dealWidth - 12);
      slides.style.transform = `translateX(${x}px)`;
    }
    document.getElementById('nextDeal').addEventListener('click', ()=>{
      slideIndex = Math.min(slideIndex+1, deals.length-1);
      updateSlide();
    });
    document.getElementById('prevDeal').addEventListener('click', ()=>{
      slideIndex = Math.max(slideIndex-1, 0);
      updateSlide();
    });
    setInterval(()=>{
      slideIndex = (slideIndex + 1) % deals.length;
      updateSlide();
    }, 4200);

    // Toast
    let toastTimer;
    function showToast(msg){
      toast.textContent = msg;
      toast.style.display = 'block';
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toast.style.display='none', 2200);
    }

    // Newsletter
    document.getElementById('subscribeBtn').addEventListener('click', ()=>{
      const email = document.getElementById('newsletterEmail').value.trim();
      if(!email || !email.includes('@')){
        showToast('Please enter a valid email');
        return;
      }
      showToast('Thanks for subscribing!');
      document.getElementById('newsletterEmail').value = '';
    });

    // Quick navigation buttons
    document.getElementById('shopNow').addEventListener('click', ()=>document.getElementById('popular').scrollIntoView({behavior:'smooth'}));
    document.getElementById('claimOffer').addEventListener('click', ()=>openModalForProduct(4));
    document.getElementById('learnMore').addEventListener('click', ()=>openModalForPost('b1'));

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Accessibility: ensure focusable modal content
    document.getElementById('modalContent').setAttribute('tabindex','-1');

    // Small enhancement: keyboard add-to-cart via Enter on product cards
    grid.addEventListener('keydown', e=>{
      if(e.key === 'Enter'){
        const btn = e.target.closest('button[data-id]');
        if(btn) btn.click();
      }
    });
  </script>
</body>
</html>