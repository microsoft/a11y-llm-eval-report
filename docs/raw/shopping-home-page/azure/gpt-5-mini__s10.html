<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MarketMingle — Popular Picks, Hot Deals & Stories</title>
  <meta name="description" content="Discover popular items, today's hottest deals, and fresh blog posts on MarketMingle — curated shopping for everyday needs." />
  <meta name="theme-color" content="#0a6cff" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='15' fill='%230a6cff'/><text x='50' y='57' font-size='52' text-anchor='middle' fill='white' font-family='Arial' font-weight='700'>M</text></svg>">
  <style>
    :root{
      --bg:#f6f8fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#0a6cff;
      --accent-2:#06b6d4;
      --radius:12px;
      --shadow: 0 6px 18px rgba(18,38,63,0.08);
      --glass: rgba(255,255,255,0.6);
      --max-width:1200px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,var(--bg),#eef3fb 60%);
      color:#0f1724;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.4;
      padding-bottom:48px;
    }

    .container{
      max-width:var(--max-width);
      margin:28px auto;
      padding:0 20px;
    }

    header.site-header{
      display:flex;
      gap:18px;
      align-items:center;
      padding:14px 20px;
      background:rgba(255,255,255,0.7);
      border-radius:14px;
      box-shadow:var(--shadow);
      backdrop-filter: blur(6px);
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      text-decoration:none;
      color:inherit;
      flex:0 0 auto;
    }
    .logo{
      width:44px;
      height:44px;
      border-radius:10px;
      background:linear-gradient(135deg,var(--accent),var(--accent-2));
      display:flex;
      align-items:center;
      justify-content:center;
      color:white;
      font-weight:700;
      font-size:20px;
      box-shadow: 0 6px 16px rgba(10,108,255,0.16);
      flex:0 0 44px;
    }
    .brand h1{
      margin:0;
      font-size:18px;
      letter-spacing:0.2px;
    }
    .brand p{margin:0;color:var(--muted);font-size:12px}

    .searchbar{
      flex:1;
      position:relative;
      display:flex;
      align-items:center;
      background:var(--card);
      border-radius:999px;
      padding:8px 12px;
      box-shadow:var(--shadow);
      margin-left:8px;
    }
    .searchbar input{
      border:0;
      outline:0;
      width:100%;
      font-size:15px;
      padding:10px;
      background:transparent;
    }
    .search-suggest{
      position:absolute;
      left:8px;
      top:44px;
      right:8px;
      background:var(--card);
      border-radius:10px;
      box-shadow:0 12px 30px rgba(10,20,40,0.06);
      display:none;
      overflow:hidden;
      z-index:20;
    }
    .search-suggest.open{display:block}
    .suggest-item{padding:10px 12px;border-bottom:1px solid #f1f3f5;color:var(--muted);font-size:14px}
    .search-actions{
      display:flex;
      gap:8px;
      align-items:center;
      margin-left:10px;
    }
    .icon-btn{
      height:44px;
      min-width:44px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:10px;
      background:transparent;
      border:none;
      cursor:pointer;
    }
    .cart{
      position:relative;
    }
    .cart-badge{
      position:absolute;
      top:-6px;
      right:-6px;
      background:crimson;
      color:white;
      min-width:20px;
      height:20px;
      font-size:12px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border-radius:999px;
      padding:0 6px;
    }

    main{margin-top:20px}

    .hero{
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:18px;
      margin-bottom:22px;
    }
    .hero-card{
      background:linear-gradient(180deg,#ffffff, #fbfdff);
      border-radius:var(--radius);
      padding:26px;
      box-shadow:var(--shadow);
      display:flex;
      gap:22px;
      align-items:center;
    }
    .hero-left h2{margin:0 0 8px 0;font-size:26px}
    .hero-left p{margin:0;color:var(--muted)}
    .cta-row{margin-top:14px;display:flex;gap:12px}
    .btn{
      padding:10px 16px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
    }
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid #e6eefc;color:var(--accent)}
    .hero-right{
      background:linear-gradient(135deg,#f0f8ff, #ffffff);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:var(--shadow);
    }
    .deal-highlight{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .deal-left{display:flex;gap:12px;align-items:center}
    .deal-thumb{width:72px;height:72px;border-radius:10px;flex:0 0 72px;background:#fff;overflow:hidden}
    .deal-thumb img{width:100%;height:100%;object-fit:cover;display:block}

    section.card{
      background:var(--card);
      margin-top:18px;
      border-radius:var(--radius);
      padding:18px;
      box-shadow:var(--shadow);
    }
    .section-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }
    .section-title{font-size:18px;margin:0}
    .section-sub{color:var(--muted);font-size:13px;margin:0}

    .grid{
      display:grid;
      gap:14px;
    }
    .products.grid{
      grid-template-columns: repeat(4, 1fr);
    }
    .deals.grid{
      grid-template-columns: repeat(3, 1fr);
    }
    .blog.grid{
      grid-template-columns: repeat(3, 1fr);
    }
    .product-card{
      background:linear-gradient(180deg,#ffffff,#fcfeff);
      border-radius:12px;
      padding:10px;
      display:flex;
      flex-direction:column;
      gap:10px;
      transition:transform .18s ease, box-shadow .18s ease;
      border:1px solid #f1f5f9;
    }
    .product-card:hover{transform:translateY(-6px);box-shadow:0 18px 40px rgba(10,20,40,0.06)}
    .thumb{width:100%;height:160px;border-radius:10px;overflow:hidden;background:#f8fafc}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .meta{display:flex;align-items:center;justify-content:space-between;gap:8px}
    .title{font-weight:600;font-size:15px;margin:0}
    .price{font-weight:700;color:var(--accent);font-size:15px}
    .muted{color:var(--muted);font-size:13px}
    .rating{color:#f59e0b;font-size:13px}
    .p-actions{display:flex;gap:8px;align-items:center}
    .small{font-size:13px;padding:8px 10px;border-radius:10px;border:1px solid #eef2ff;background:transparent;cursor:pointer}

    .deal-badge{background:linear-gradient(90deg,#ffe8e0,#fff7f3);padding:6px 8px;border-radius:8px;color:#b8392b;font-weight:700;font-size:13px}

    .blog-card{display:flex;flex-direction:column;gap:10px}
    .blog-card .thumb{height:140px}
    .blog-card h3{margin:0;font-size:16px}
    .blog-card p{margin:0;color:var(--muted);font-size:14px}

    footer.site-footer{
      margin-top:28px;
      padding:18px;
      border-radius:12px;
      background:linear-gradient(180deg,rgba(10,108,255,0.03),rgba(6,182,212,0.02));
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .newsletter{display:flex;gap:8px;align-items:center}
    .newsletter input{padding:10px 12px;border-radius:10px;border:1px solid #e6eefc;outline:0}
    .footer-links{display:flex;gap:12px;color:var(--muted);font-size:14px}

    @media (max-width:1000px){
      .products.grid{grid-template-columns: repeat(3, 1fr)}
      .deals.grid{grid-template-columns: repeat(2, 1fr)}
      .blog.grid{grid-template-columns: repeat(2, 1fr)}
      .hero{grid-template-columns: 1fr}
    }
    @media (max-width:640px){
      .products.grid{grid-template-columns: repeat(2, 1fr)}
      .deals.grid{grid-template-columns: 1fr}
      .blog.grid{grid-template-columns: 1fr}
      header.site-header{flex-direction:column;align-items:stretch;gap:10px}
      .search-actions{margin-left:0}
      .hero-card{flex-direction:column;align-items:flex-start}
      .hero-right{order:2}
    }

    /* modal */
    .modal{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(6,12,24,0.5);
      z-index:60;
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease;
    }
    .modal.open{opacity:1;pointer-events:auto}
    .modal-panel{
      width:92%;
      max-width:900px;
      background:var(--card);
      border-radius:14px;
      padding:18px;
      box-shadow:0 28px 80px rgba(5,12,28,0.5);
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .modal-close{position:absolute;top:18px;right:18px;background:transparent;border:0;color:white;font-size:20px}

    /* toast */
    .toast{
      position:fixed;
      right:20px;
      bottom:20px;
      background:linear-gradient(90deg,#0a6cff,#06b6d4);
      color:white;
      padding:12px 16px;
      border-radius:12px;
      box-shadow:0 10px 30px rgba(10,20,60,0.2);
      z-index:80;
      display:none;
      align-items:center;
      gap:10px;
    }
    .toast.show{display:flex}
    .countdown{font-weight:700;color:#b91c1c}
  </style>
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebSite",
    "name":"MarketMingle",
    "url":"https://www.marketmingle.example",
    "potentialAction":{
      "@type":"SearchAction",
      "target":"https://www.marketmingle.example/search?q={search_term_string}",
      "query-input":"required name=search_term_string"
    }
  }
  </script>
</head>
<body>
  <div class="container">
    <header class="site-header" role="banner" aria-label="Main header">
      <a class="brand" href="#" aria-label="MarketMingle home">
        <div class="logo" aria-hidden="true">M</div>
        <div>
          <h1>MarketMingle</h1>
          <p>Curated shopping for everyday life</p>
        </div>
      </a>

      <div class="searchbar" role="search" aria-label="Site search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="opacity:.6">
          <path d="M21 21l-4.35-4.35" stroke="#0f1724" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          <circle cx="11" cy="11" r="6" stroke="#0f1724" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input id="search" placeholder="Search products, brands, categories..." aria-label="Search products" />
        <div class="search-actions" aria-hidden="true">
          <button class="icon-btn" title="Scan"><svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 7v10a4 4 0 0 0 4 4h10" stroke="#0f1724" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg></button>
        </div>
        <div id="suggest" class="search-suggest" role="listbox" aria-label="Search suggestions"></div>
      </div>

      <div style="display:flex;align-items:center;gap:12px">
        <button class="icon-btn" aria-haspopup="true" aria-expanded="false" title="Account">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M20 21v-2a4 4 0 0 0-3-3.87" stroke="#0f1724" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" transform="translate(0 4)"/></svg>
        </button>
        <div class="cart">
          <button id="cartBtn" class="icon-btn" aria-label="View cart" title="Cart">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M6 6h15l-1.5 9h-12z" stroke="#0f1724" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><circle cx="10" cy="20" r="1" /><circle cx="19" cy="20" r="1" /></svg>
          </button>
          <div id="cartCount" class="cart-badge" aria-live="polite">0</div>
        </div>
      </div>
    </header>

    <main>
      <div class="hero" aria-label="Promotions">
        <div class="hero-card">
          <div class="hero-left">
            <h2>Welcome back! Find quality picks for your day</h2>
            <p>Free shipping on orders $50+. Handpicked collections and limited-time deals.</p>
            <div class="cta-row">
              <button class="btn btn-primary" id="shopNow">Shop popular</button>
              <button class="btn btn-ghost" id="viewDeals">View deals</button>
            </div>
            <div style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap">
              <div class="deal-badge">Fast delivery</div>
              <div class="deal-badge" style="background:linear-gradient(90deg,#e8f9ff,#f0fdff);color:#0369a1">Eco-friendly</div>
              <div class="deal-badge" style="background:linear-gradient(90deg,#fff7e6,#fffdf7);color:#92400e">Limited stock</div>
            </div>
          </div>
          <div style="flex:1">
            <img src="https://images.unsplash.com/photo-1542831371-d531d36971e6?q=80&w=900&auto=format&fit=crop&ixlib=rb-4.0.3&s=2c0bf8b0d29a876f9fe18b97b6b6b7b7" alt="Shopping picks" style="width:100%;border-radius:12px;object-fit:cover;height:180px" />
          </div>
        </div>

        <aside class="hero-right" aria-label="Deal highlight">
          <div class="deal-highlight">
            <div class="deal-left">
              <div class="deal-thumb"><img src="https://picsum.photos/seed/deal1/200/200" alt="Deal product" /></div>
              <div>
                <div style="font-weight:700">Noise-cancelling Headphones</div>
                <div class="muted" style="margin-top:6px">$129 <span class="muted">• Was $199</span></div>
              </div>
            </div>
            <div style="text-align:right">
              <div class="countdown" id="mainCount">Ends in 03:12:57</div>
              <div style="font-size:13px;color:var(--muted);margin-top:6px">Hurry — limited units</div>
            </div>
          </div>
          <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn btn-primary" onclick="openQuick(101)">Quick view</button>
            <button class="btn small" onclick="addToCart(101)">Add to cart</button>
          </div>
        </aside>
      </div>

      <!-- Popular items -->
      <section class="card" aria-labelledby="popularHeading">
        <div class="section-head">
          <div>
            <h3 id="popularHeading" class="section-title">Popular right now</h3>
            <p class="section-sub">Top-rated products our customers love</p>
          </div>
          <div style="display:flex;gap:8px;align-items:center">
            <label for="sort" class="muted" style="font-size:13px">Sort:</label>
            <select id="sort" style="padding:8px;border-radius:8px;border:1px solid #eef2ff">
              <option value="popular">Most popular</option>
              <option value="rating">Highest rating</option>
              <option value="price_low">Price: Low to high</option>
              <option value="price_high">Price: High to low</option>
            </select>
          </div>
        </div>

        <div id="popularGrid" class="products grid grid-responsive" role="list"></div>
      </section>

      <!-- Today's deals -->
      <section class="card" aria-labelledby="dealsHeading">
        <div class="section-head">
          <div>
            <h3 id="dealsHeading" class="section-title">Today's deals</h3>
            <p class="section-sub">Grab them before they're gone — limited time offers</p>
          </div>
          <div class="muted" aria-hidden="true">Ends tonight</div>
        </div>

        <div id="dealsGrid" class="deals grid" role="list"></div>
      </section>

      <!-- Blog posts -->
      <section class="card" aria-labelledby="blogHeading">
        <div class="section-head">
          <div>
            <h3 id="blogHeading" class="section-title">From the blog</h3>
            <p class="section-sub">Guides, trends, and stories to inspire your next buy</p>
          </div>
          <a href="#" class="muted" style="text-decoration:none">View all posts →</a>
        </div>

        <div id="blogGrid" class="blog grid"></div>
      </section>

      <footer class="site-footer" role="contentinfo">
        <div style="display:flex;gap:12px;align-items:center">
          <strong>MarketMingle</strong>
          <div class="footer-links">
            <a href="#" style="text-decoration:none;color:inherit">About</a>
            <a href="#" style="text-decoration:none;color:inherit">Help</a>
            <a href="#" style="text-decoration:none;color:inherit">Terms</a>
          </div>
        </div>

        <div class="newsletter" aria-label="Newsletter signup">
          <label for="nw" class="muted" style="font-size:13px">Stay in the loop</label>
          <input id="nw" placeholder="Email address" aria-label="Email address for newsletter" />
          <button class="btn btn-primary" id="subscribeBtn">Subscribe</button>
        </div>
      </footer>
    </main>
  </div>

  <!-- Quick view modal -->
  <div id="modal" class="modal" aria-hidden="true" role="dialog" aria-modal="true">
    <button class="modal-close" onclick="closeModal()" aria-label="Close dialog">✕</button>
    <div class="modal-panel" role="document" id="modalPanel">
      <!-- content injected -->
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite">Added to cart</div>

  <script>
    // Sample product data
    const PRODUCTS = [
      {id:101,title:"Noise-cancelling Headphones",price:129.00,old:199.00,rating:4.7,img:"https://picsum.photos/seed/p101/800/600",tag:"Popular",desc:"Immersive sound and comfortable fit."},
      {id:102,title:"Smart Water Bottle",price:39.99,old:59.99,rating:4.5,img:"https://picsum.photos/seed/p102/800/600",tag:"Trending",desc:"Keeps water at the perfect temperature."},
      {id:103,title:"Compact Air Fryer",price:89.00,old:null,rating:4.6,img:"https://picsum.photos/seed/p103/800/600",tag:"Kitchen",desc:"Crispy results with less oil."},
      {id:104,title:"Foldable Laptop Stand",price:24.50,old:null,rating:4.4,img:"https://picsum.photos/seed/p104/800/600",tag:"Home",desc:"Ergonomic and portable."},
      {id:105,title:"Organic Cotton Sheets",price:79.95,old:129.95,rating:4.8,img:"https://picsum.photos/seed/p105/800/600",tag:"Bedroom",desc:"Soft, breathable and eco-friendly."},
      {id:106,title:"Wireless Charging Pad",price:19.99,old:29.99,rating:4.3,img:"https://picsum.photos/seed/p106/800/600",tag:"Gadgets",desc:"Fast charging for Qi devices."},
      {id:107,title:"Fitness Tracker Watch",price:59.99,old:99.99,rating:4.2,img:"https://picsum.photos/seed/p107/800/600",tag:"Wearables",desc:"Track activity, heart rate, and sleep."},
      {id:108,title:"Chef's Knife 8-inch",price:49.00,old:69.00,rating:4.9,img:"https://picsum.photos/seed/p108/800/600",tag:"Kitchen",desc:"Precision forged steel blade."}
    ];

    const DEALS = [
      {id:201,title:"Portable Projector",price:149.99,old:229.99,img:"https://picsum.photos/seed/d201/800/600",endsIn:4*3600 + 4800,desc:"Movie nights anywhere."},
      {id:202,title:"Premium Backpack",price:69.00,old:119.00,img:"https://picsum.photos/seed/d202/800/600",endsIn:2*3600 + 120,desc:"Durable and stylish."},
      {id:203,title:"Bluetooth Speaker",price:29.99,old:59.99,img:"https://picsum.photos/seed/d203/800/600",endsIn:6*3600 + 2400,desc:"Big sound in a small package."}
    ];

    const BLOG = [
      {id:301,title:"How to choose the perfect headphones","date":"Feb 1, 2026",excerpt:"A simple guide to match sound signature with your listening style.",img:"https://picsum.photos/seed/b301/1200/800"},
      {id:302,title:"10 Small Kitchen Upgrades","date":"Jan 18, 2026",excerpt:"Small tweaks that make cooking faster and more enjoyable.",img:"https://picsum.photos/seed/b302/1200/800"},
      {id:303,title:"Sustainable shopping: what to look for","date":"Jan 12, 2026",excerpt:"Practical tips to make greener choices without sacrificing quality.",img:"https://picsum.photos/seed/b303/1200/800"}
    ];

    // Utility functions
    function $(s){return document.querySelector(s)}
    function $el(tag, attrs={}, children=[]){
      const el = document.createElement(tag);
      for(const k in attrs){
        if(k.startsWith('on') && typeof attrs[k]==='function') el.addEventListener(k.slice(2), attrs[k]);
        else if(k==='html') el.innerHTML = attrs[k];
        else el.setAttribute(k, attrs[k]);
      }
      children.forEach(c => el.appendChild(typeof c === 'string' ? document.createTextNode(c) : c));
      return el;
    }

    // Render popular products
    const popularGrid = $('#popularGrid');
    const dealsGrid = $('#dealsGrid');
    const blogGrid = $('#blogGrid');

    function renderProducts(list){
      popularGrid.innerHTML = '';
      list.forEach(p => {
        const card = document.createElement('article');
        card.className = 'product-card';
        card.setAttribute('role','listitem');
        card.innerHTML = `
          <div class="thumb"><img loading="lazy" alt="${escape(p.title)}" src="${p.img}"></div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h4 class="title">${escape(p.title)}</h4>
            <div class="rating" aria-label="rating">${p.rating} ★</div>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div class="price">$${p.price.toFixed(2)}</div>
              ${p.old? `<div class="muted" style="text-decoration:line-through;font-size:13px;">$${p.old.toFixed(2)}</div>` : ''}
            </div>
            <div class="p-actions">
              <button class="small" onclick="openQuick(${p.id})">Quick</button>
              <button class="small" onclick="addToCart(${p.id})">Add</button>
            </div>
          </div>
        `;
        popularGrid.appendChild(card);
      });
    }

    function renderDeals(list){
      dealsGrid.innerHTML = '';
      list.forEach(d => {
        const el = document.createElement('div');
        el.className = 'product-card';
        el.innerHTML = `
          <div style="display:flex;gap:10px;align-items:center">
            <div class="thumb" style="width:110px;height:90px;flex:0 0 110px"><img loading="lazy" alt="${escape(d.title)}" src="${d.img}"></div>
            <div style="flex:1">
              <h4 class="title" style="margin-bottom:6px">${escape(d.title)}</h4>
              <div class="muted">${escape(d.desc || '')}</div>
              <div style="margin-top:8px;display:flex;align-items:center;gap:8px">
                <div class="price">$${d.price.toFixed(2)}</div>
                ${d.old? `<div class="muted" style="text-decoration:line-through">$${d.old.toFixed(2)}</div>` : ''}
                <div style="margin-left:auto" class="countdown" data-ends="${d.endsIn}"></div>
              </div>
            </div>
          </div>
          <div style="display:flex;gap:8px;margin-top:8px">
            <button class="btn small" onclick="openQuick(${d.id})">View</button>
            <button class="btn btn-primary" onclick="addToCart(${d.id})">Buy now</button>
          </div>
        `;
        dealsGrid.appendChild(el);
      });
    }

    function renderBlog(list){
      blogGrid.innerHTML = '';
      list.forEach(b => {
        const c = document.createElement('article');
        c.className = 'blog-card';
        c.innerHTML = `
          <div class="thumb"><img loading="lazy" alt="${escape(b.title)}" src="${b.img}" style="width:100%;height:100%;object-fit:cover;border-radius:8px"></div>
          <div>
            <h3>${escape(b.title)}</h3>
            <div class="muted" style="margin:6px 0">${b.date}</div>
            <p class="muted">${escape(b.excerpt)}</p>
          </div>
          <div style="margin-top:auto;display:flex;gap:8px">
            <button class="btn small" onclick="alert('Open: ${escape(b.title)}')">Read</button>
            <a href="#" class="muted" style="align-self:center;text-decoration:none">Share</a>
          </div>
        `;
        blogGrid.appendChild(c);
      });
    }

    // Cart handling
    const CART_KEY = 'mm_cart_v1';
    function getCart(){ try{return JSON.parse(localStorage.getItem(CART_KEY))||{} }catch(e){return {}} }
    function setCart(c){ localStorage.setItem(CART_KEY,JSON.stringify(c)); updateCartCount(); }
    function addToCart(id, qty=1){
      const cart = getCart();
      cart[id] = (cart[id]||0)+qty;
      setCart(cart);
      showToast('Added to cart');
    }
    function updateCartCount(){
      const cart = getCart();
      const count = Object.values(cart).reduce((s,n)=>s+n,0);
      $('#cartCount').textContent = count;
    }

    // Quick view modal
    function openQuick(id){
      const all = [...PRODUCTS, ...DEALS];
      const p = all.find(x=>x.id===id);
      if(!p) return;
      const modal = $('#modal');
      const panel = $('#modalPanel');
      panel.innerHTML = `
        <div style="display:flex;flex-direction:column;gap:10px">
          <div style="font-weight:800">${escape(p.title)}</div>
          <div class="muted">${escape(p.desc || 'Product details')}</div>
          <div style="margin-top:8px;font-size:18px;color:var(--accent)">$${p.price.toFixed(2)} ${p.old? `<span style="text-decoration:line-through;color:var(--muted);font-size:14px;margin-left:8px">$${p.old.toFixed(2)}</span>`:''}</div>
          <div style="margin-top:8px;display:flex;gap:8px">
            <button class="btn btn-primary" onclick="addToCart(${p.id}); closeModal()">Add to cart</button>
            <button class="btn small" onclick="closeModal()">Close</button>
          </div>
          <div style="margin-top:12px;color:var(--muted)">Quick specs</div>
          <ul style="margin:8px 0 0 18px;color:var(--muted)">
            <li>Free returns within 30 days</li>
            <li>2-year limited warranty</li>
            <li>Customer support 24/7</li>
          </ul>
        </div>
        <div style="display:flex;align-items:center;justify-content:center">
          <img src="${p.img}" alt="${escape(p.title)}" style="width:100%;height:100%;max-height:420px;object-fit:cover;border-radius:10px">
        </div>
      `;
      modal.classList.add('open');
      modal.setAttribute('aria-hidden','false');
    }
    function closeModal(){
      const modal = $('#modal');
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden','true');
    }
    window.addEventListener('keydown', e => { if(e.key==='Escape') closeModal() });

    // Toast
    let toastTimer;
    function showToast(msg){
      const t = $('#toast');
      t.textContent = msg;
      t.classList.add('show');
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=> t.classList.remove('show'), 2200);
    }

    // Countdown helpers
    function startCountdowns(){
      // main hero countdown
      let mainSeconds = Math.floor((3*3600)+(12*60)+57);
      const mainEl = $('#mainCount');
      function tickMain(){
        const d = formatTime(mainSeconds);
        mainEl.textContent = `Ends in ${d}`;
        if(mainSeconds>0) mainSeconds--;
      }
      tickMain();
      setInterval(tickMain,1000);

      // deal cards
      const countdownEls = document.querySelectorAll('[data-ends]');
      countdownEls.forEach((el,i) => {
        let seconds = parseInt(el.getAttribute('data-ends'),10) || 0;
        function tick(){
          el.textContent = formatTime(seconds);
          if(seconds>0) seconds--;
          else el.textContent = 'Expired';
        }
        tick();
        setInterval(tick,1000);
      });
    }

    function formatTime(sec){
      const h = String(Math.floor(sec/3600)).padStart(2,'0');
      const m = String(Math.floor((sec%3600)/60)).padStart(2,'0');
      const s = String(sec%60).padStart(2,'0');
      return `${h}:${m}:${s}`;
    }

    // Search suggestions (very basic)
    const search = $('#search');
    const suggest = $('#suggest');
    search.addEventListener('input', e => {
      const q = (e.target.value||'').trim().toLowerCase();
      if(!q){ suggest.classList.remove('open'); return; }
      const results = PRODUCTS.concat(DEALS).filter(p => p.title.toLowerCase().includes(q)).slice(0,6);
      suggest.innerHTML = results.map(r => `<div class="suggest-item" role="option" onclick="openQuick(${r.id});suggest.classList.remove('open')">${escape(r.title)} <span style="float:right;color:var(--muted)">$${r.price?.toFixed(2)||''}</span></div>`).join('') || `<div class="suggest-item">No matches</div>`;
      suggest.classList.add('open');
    });
    document.addEventListener('click', e => {
      if(!search.contains(e.target) && !suggest.contains(e.target)) suggest.classList.remove('open');
    });

    // Sorting
    $('#sort').addEventListener('change', e => {
      const v = e.target.value;
      let list = [...PRODUCTS];
      if(v==='rating') list.sort((a,b)=>b.rating-a.rating);
      if(v==='price_low') list.sort((a,b)=>a.price-b.price);
      if(v==='price_high') list.sort((a,b)=>b.price-a.price);
      renderProducts(list);
    });

    // Simple escape for HTML content
    function escape(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;') }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderProducts(PRODUCTS);
      renderDeals(DEALS);
      renderBlog(BLOG);
      updateCartCount();
      startCountdowns();
      // hook shop and deals buttons
      $('#shopNow').addEventListener('click', ()=> window.scrollTo({top: popularGrid.closest('section').offsetTop - 20, behavior:'smooth'}));
      $('#viewDeals').addEventListener('click', ()=> window.scrollTo({top: dealsGrid.closest('section').offsetTop - 20, behavior:'smooth'}));
      $('#subscribeBtn').addEventListener('click', ()=> showToast('Subscribed — check your inbox'));
      $('#cartBtn').addEventListener('click', ()=> {
        const c = getCart();
        const items = Object.entries(c).map(([id,q])=>`• ${id}: ${q}`).join('\n') || 'Your cart is empty';
        alert('Cart contents:\\n' + items);
      });
    });
  </script>
</body>
</html>