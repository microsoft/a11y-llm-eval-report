<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modal Dialog Example</title>
<style>
:root {
  color-scheme: light dark;
}
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  margin: 0;
  min-height: 100vh;
  display: grid;
  place-items: center;
  background: linear-gradient(135deg, #eef2ff 0%, #fef9c3 100%);
}
button {
  cursor: pointer;
}
.trigger {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  border: none;
  border-radius: 999px;
  background: #2563eb;
  color: #fff;
  box-shadow: 0 10px 30px rgba(37, 99, 235, 0.2);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.trigger:hover {
  transform: translateY(-1px);
  box-shadow: 0 14px 34px rgba(37, 99, 235, 0.25);
}
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.4);
  display: grid;
  place-items: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  padding: 1.5rem;
}
.modal-overlay.active {
  opacity: 1;
  pointer-events: auto;
}
.modal {
  background: #fff;
  color: #111827;
  border-radius: 1rem;
  max-width: 450px;
  width: min(100%, 450px);
  padding: 2rem;
  box-shadow: 0 24px 50px rgba(15, 23, 42, 0.2);
  transform: translateY(20px);
  transition: transform 0.3s ease;
}
.modal-overlay.active .modal {
  transform: translateY(0);
}
.modal header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
}
.modal h2 {
  margin: 0;
  font-size: 1.5rem;
}
.modal button.close-btn {
  border: none;
  background: transparent;
  font-size: 1.25rem;
  line-height: 1;
  padding: 0.25rem;
  border-radius: 999px;
  color: #6b7280;
}
.modal button.close-btn:hover {
  background: rgba(15, 23, 42, 0.05);
  color: #111827;
}
.modal p {
  margin: 0 0 1.5rem;
  line-height: 1.6;
}
.modal footer {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
}
.modal footer button {
  padding: 0.65rem 1.25rem;
  border-radius: 0.75rem;
  border: none;
  font-size: 0.95rem;
}
.modal footer button.secondary {
  background: #e2e8f0;
  color: #1f2937;
}
.modal footer button.primary {
  background: #2563eb;
  color: #fff;
}
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
</style>
</head>
<body>
<button class="trigger" data-modal-target="demo-modal">Open modal dialog</button>

<div class="modal-overlay" id="demo-modal" role="dialog" aria-modal="true" aria-labelledby="demo-modal-title" aria-hidden="true">
  <div class="modal" role="document">
    <header>
      <h2 id="demo-modal-title">Stay in the loop</h2>
      <button class="close-btn" type="button" aria-label="Close dialog">&times;</button>
    </header>
    <p>Subscribe to receive the latest updates, announcements, and curated tips right in your inbox. Choose your preferences anytime.</p>
    <footer>
      <button type="button" class="secondary close-btn">Not now</button>
      <button type="button" class="primary">Subscribe</button>
    </footer>
  </div>
</div>

<script>
(() => {
  const openButtons = document.querySelectorAll('.trigger[data-modal-target]');
  const overlays = document.querySelectorAll('.modal-overlay');
  let activeModal = null;

  const focusableSelectors = [
    'a[href]',
    'button:not([disabled])',
    'textarea:not([disabled])',
    'input:not([type="hidden"]):not([disabled])',
    'select:not([disabled])',
    '[tabindex]:not([tabindex="-1"])'
  ];

  const getFocusable = (container) => Array.from(container.querySelectorAll(focusableSelectors.join(',')));

  const openModal = (overlay) => {
    overlay.classList.add('active');
    overlay.setAttribute('aria-hidden', 'false');
    activeModal = overlay;
    const focusable = getFocusable(overlay);
    if (focusable.length) {
      focusable[0].focus();
    }
    document.body.style.overflow = 'hidden';
  };

  const closeModal = (overlay) => {
    overlay.classList.remove('active');
    overlay.setAttribute('aria-hidden', 'true');
    activeModal = null;
    document.body.style.overflow = '';
  };

  openButtons.forEach((button) => {
    button.addEventListener('click', () => {
      const targetId = button.getAttribute('data-modal-target');
      const overlay = document.getElementById(targetId);
      if (overlay) {
        openModal(overlay);
      }
    });
  });

  overlays.forEach((overlay) => {
    overlay.addEventListener('click', (event) => {
      if (event.target === overlay) {
        closeModal(overlay);
      }
    });
    overlay.querySelectorAll('.close-btn').forEach((btn) => {
      btn.addEventListener('click', () => closeModal(overlay));
    });
  });

  document.addEventListener('keydown', (event) => {
    if (event.key === 'Escape' && activeModal) {
      closeModal(activeModal);
    }
    if (event.key === 'Tab' && activeModal) {
      const focusable = getFocusable(activeModal);
      if (!focusable.length) {
        event.preventDefault();
        return;
      }
      const first = focusable[0];
      const last = focusable[focusable.length - 1];
      if (event.shiftKey && document.activeElement === first) {
        event.preventDefault();
        last.focus();
      } else if (!event.shiftKey && document.activeElement === last) {
        event.preventDefault();
        first.focus();
      }
    }
  });
})();
</script>
</body>
</html>