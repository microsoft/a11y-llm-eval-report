<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root {
      --overlay: rgba(0, 0, 0, 0.5);
      --surface: #ffffff;
      --radius: 12px;
      --shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
      --text: #1f2937;
      --muted: #6b7280;
      --btn: #2563eb;
      --btnText: #fff;
    }

    *, *::before, *::after { box-sizing: border-box; }

    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color: var(--text);
      background: #f6f7fb;
    }

    /* Page content for demonstration */
    .wrap {
      min-height: 100vh;
      display: grid;
      place-items: start center;
      padding: 4rem 1rem;
    }

    .trigger {
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      color: #fff;
      background: var(--btn);
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.05s ease-in-out;
    }
    .trigger:hover { filter: brightness(1.05); }
    .trigger:active { transform: translateY(1px); }

    /* Modal base (hidden by default) */
    .modal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      display: none; /* closed by default */
      align-items: center;
      justify-content: center;
      background: var(--overlay);
      z-index: 1000;
    }

    /* When open, show as a flex container centered on screen */
    .modal.open {
      display: flex;
    }

    .modal-dialog {
      background: var(--surface);
      border-radius: var(--radius);
      width: min(92vw, 520px);
      box-shadow: var(--shadow);
      overflow: hidden;
      outline: none;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      border-bottom: 1px solid #e5e7eb;
    }

    .modal-title {
      margin: 0;
      font-size: 1.25rem;
    }

    .close {
      appearance: none;
      border: 0;
      background: transparent;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
      padding: 0.25rem 0.5rem;
      color: var(--muted);
    }
    .close:hover { color: #374151; }

    .modal-body {
      padding: 1rem;
    }

    .modal-footer {
      padding: 1rem;
      border-top: 1px solid #e5e7eb;
      display: flex;
      justify-content: flex-end;
      gap: 0.5rem;
    }

    .button {
      padding: 0.5rem 0.9rem;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      background: #fff;
      cursor: pointer;
      font-size: 0.95rem;
    }

    .button.primary {
      background: var(--btn);
      color: var(--btnText);
      border: 1px solid var(--btn);
    }

    /* Tiny helper to visually separate page content even when modal is closed */
    .note {
      margin-top: 1rem;
      color: var(--muted);
      font-size: 0.95rem;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <button class="trigger" data-target="#example-modal" type="button" aria-controls="example-modal" aria-expanded="false">
      Open modal
    </button>

    <p class="note">This page contains a modal dialog component. The dialog is closed by default. Use the button above to open it.</p>
  </div>

  <!-- Modal Dialog -->
  <div id="example-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc" tabindex="-1">
    <div class="modal-dialog" role="document">
      <header class="modal-header">
        <h2 id="modal-title" class="modal-title">Example Modal</h2>
        <button class="close" type="button" aria-label="Close" data-dismiss="modal">Ã—</button>
      </header>
      <section id="modal-desc" class="modal-body">
        <p>
          This is an example of a modal dialog component. It is hidden by default and becomes visible when you click the "Open modal" button.
          Click outside the dialog or press Escape to close it.
        </p>
      </section>
      <footer class="modal-footer">
        <button class="button" type="button" data-dismiss="modal">Close</button>
        <button class="button primary" type="button" data-dismiss="modal">Got it</button>
      </footer>
    </div>
  </div>

  <script>
    (function() {
      // Open modal when any .trigger is clicked
      const triggers = document.querySelectorAll('.trigger');
      triggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
          const targetSelector = trigger.getAttribute('data-target') || '#example-modal';
          const modal = document.querySelector(targetSelector);
          openModal(modal);
          // Update ARIA state
          trigger.setAttribute('aria-expanded', 'true');
        });
      });

      // Open modal helper
      function openModal(modal) {
        if (!modal) return;
        modal.classList.add('open');
        // Move focus to first focusable element inside modal
        const focusable = modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusable) focusable.focus();
        // Prevent background scroll
        document.body.style.overflow = 'hidden';
        modal.setAttribute('aria-hidden', 'false');
      }

      // Close modal helper
      function closeModal(modal) {
        if (!modal) return;
        modal.classList.remove('open');
        // Restore scroll
        document.body.style.overflow = '';
        // Restore trigger ARIA state (find related trigger if possible)
        const relatedTrigger = document.querySelector('.trigger[data-target="#' + modal.id + '"]');
        if (relatedTrigger) relatedTrigger.setAttribute('aria-expanded', 'false');
        // Return focus to trigger if possible
        if (relatedTrigger && typeof relatedTrigger.focus === 'function') relatedTrigger.focus();
        modal.setAttribute('aria-hidden', 'true');
      }

      // Overlay click to close (clicking on the backdrop)
      document.addEventListener('click', (e) => {
        const modal = e.target.closest('.modal.open');
        if (modal && e.target === modal) {
          closeModal(modal);
        }
      });

      // Close buttons (data-dismiss="modal")
      document.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-dismiss="modal"]');
        if (!btn) return;
        const modal = btn.closest('.modal.open');
        if (modal) closeModal(modal);
      });

      // Escape key to close any open modal
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' || e.key === 'Esc') {
          const openModalEl = document.querySelector('.modal.open');
          if (openModalEl) closeModal(openModalEl);
        }
      });

      // Optional: restore focus to trigger if user navigates back to page
      window.addEventListener('focusin', (e) => {
        const openModalEl = document.querySelector('.modal.open');
        // If focus moved outside the dialog while it's open, keep it inside
        if (openModalEl && !openModalEl.contains(e.target)) {
          const first = openModalEl.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
          if (first) first.focus();
        }
      });
    })();
  </script>
</body>
</html>