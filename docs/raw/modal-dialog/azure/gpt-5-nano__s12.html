<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root {
      --overlay: rgba(0, 0, 0, 0.5);
      --bg: #ffffff;
      --radius: 12px;
      --shadow: 0 20px 40px rgba(0, 0, 0, 0.25);
      --primary: #2a7ae2;
    }

    * { box-sizing: border-box; }

    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f5f7fb;
      color: #1e1e1e;
    }

    .page {
      min-height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    /* Trigger button to open modal (has the trigger class) */
    .trigger {
      background: var(--primary);
      color: #fff;
      border: 0;
      padding: 12px 20px;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
    }
    .trigger:hover { background: #1f6bd1; }
    .trigger:active { transform: translateY(1px); }

    /* Modal overlay and content */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      background: rgba(0,0,0,0); /* overlay sits on open via .modal.open */
      z-index: 1000;
    }
    .modal.open {
      display: flex;
      background: var(--overlay);
    }

    .modal-content {
      background: var(--bg);
      width: min(90vw, 520px);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      outline: none;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.25rem;
      border-bottom: 1px solid #eee;
    }

    .modal-title {
      margin: 0;
      font-size: 1.125rem;
    }

    .close-btn {
      background: transparent;
      border: 0;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
      color: #555;
    }
    .close-btn:hover { color: #000; }

    .modal-body {
      padding: 1rem 1.25rem;
      color: #333;
    }

    .modal-footer {
      padding: 1rem 1.25rem;
      display: flex;
      justify-content: flex-end;
      border-top: 1px solid #eee;
    }

    @media (prefers-reduced-motion: reduce) {
      .modal { transition: none; }
    }
  </style>
</head>
<body>
  <div class="page">
    <button class="trigger" id="openModal" aria-haspopup="dialog" aria-controls="exampleModal">
      Open modal
    </button>
  </div>

  <div class="modal" id="exampleModal" role="dialog" aria-labelledby="modalTitle" aria-hidden="true" aria-modal="true">
    <div class="modal-content" tabindex="-1">
      <div class="modal-header">
        <h2 class="modal-title" id="modalTitle">Example Modal</h2>
        <button class="close-btn" type="button" aria-label="Close modal">Ã—</button>
      </div>
      <div class="modal-body">
        <p>This modal is closed by default. Click the Open modal button to show it. You can close it by clicking the close button, pressing Escape, or clicking outside the content area.</p>
      </div>
      <div class="modal-footer">
        <button type="button" data-close>Close</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const openBtn = document.querySelector('.trigger#openModal');
      const modal = document.getElementById('exampleModal');
      const modalContent = modal.querySelector('.modal-content');
      const closeButtons = modal.querySelectorAll('[data-close], .close-btn');
      let lastFocused = null;

      const focusableSelector = 'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])';

      function openModal() {
        lastFocused = document.activeElement;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
        const focusables = modal.querySelectorAll(focusableSelector);
        const first = focusables.length ? focusables[0] : modalContent;
        first.focus();
        document.body.style.overflow = 'hidden';
        document.addEventListener('keydown', onKeyDown);
        modal.addEventListener('click', onOverlayClick);
      }

      function closeModal() {
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        document.removeEventListener('keydown', onKeyDown);
        modal.removeEventListener('click', onOverlayClick);
        if (lastFocused) lastFocused.focus();
      }

      function onOverlayClick(e) {
        if (e.target === modal) closeModal();
      }

      function onKeyDown(e) {
        if (e.key === 'Escape' || e.key === 'Esc') {
          closeModal();
          return;
        }
        if (e.key === 'Tab') {
          const focusables = modal.querySelectorAll(focusableSelector);
          if (focusables.length === 0) {
            e.preventDefault();
            return;
          }
          const first = focusables[0];
          const last = focusables[focusables.length - 1];
          const active = document.activeElement;
          if (e.shiftKey) {
            if (active === first) {
              e.preventDefault();
              last.focus();
            }
          } else {
            if (active === last) {
              e.preventDefault();
              first.focus();
            }
          }
        }
      }

      if (openBtn) {
        openBtn.addEventListener('click', openModal);
      }

      closeButtons.forEach(btn => btn.addEventListener('click', closeModal));

      // Ensure modal starts closed
      modal.setAttribute('aria-hidden', 'true');
    })();
  </script>
</body>
</html>