<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Modal Dialog Example</title>
<style>
  :root {
    --modal-width: 600px;
    --modal-padding: 1.25rem;
    --modal-radius: 12px;
    --overlay-bg: rgba(0,0,0,0.6);
    --transition: 200ms ease;
  }
  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    margin: 0;
    line-height: 1.5;
    color: #222;
    background: #f7f7f8;
  }
  .container {
    padding: 2rem;
    max-width: 900px;
    margin: 0 auto;
  }
  button {
    appearance: none;
    border: none;
    background: #2563eb;
    color: white;
    padding: 0.75rem 1rem;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    transition: background var(--transition), transform var(--transition);
  }
  button:hover { background: #1d4ed8; }
  button:active { transform: translateY(1px); }
  button.secondary {
    background: #e5e7eb;
    color: #111827;
  }
  button.secondary:hover { background: #d1d5db; }

  dialog {
    border: none;
    padding: 0;
    border-radius: var(--modal-radius);
    width: min(90vw, var(--modal-width));
    max-height: 85vh;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0,0,0,0.25);
  }
  dialog:not([open]) { display: none; }
  dialog .modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--modal-padding);
    border-bottom: 1px solid #e5e7eb;
    background: #fff;
  }
  dialog .modal-title {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 700;
  }
  dialog .modal-body {
    padding: var(--modal-padding);
    background: #fff;
  }
  dialog .modal-footer {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    padding: var(--modal-padding);
    border-top: 1px solid #e5e7eb;
    background: #fafafa;
  }
  dialog .close-btn {
    background: transparent;
    color: #374151;
    padding: 0.35rem;
    border-radius: 6px;
  }
  dialog .close-btn:hover { background: #f3f4f6; }
  dialog .close-x {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 6px;
    background: transparent;
    color: #374151;
  }
  dialog .close-x:hover { background: #f3f4f6; }

  dialog::backdrop {
    background: var(--overlay-bg);
    backdrop-filter: blur(2px);
    animation: fadeIn var(--transition);
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  body.modal-open {
    overflow: hidden;
  }

  .visually-hidden {
    position: absolute !important;
    height: 1px; width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space: nowrap;
    border: 0;
    padding: 0;
    margin: -1px;
  }
</style>
</head>
<body>
  <div class="container" id="mainContent">
    <h1>Modal Dialog Component Example</h1>
    <p>This is a demonstration of a modal dialog. Click the trigger button to open it.</p>
    <button class="trigger" id="openModalBtn" type="button" aria-haspopup="dialog" aria-controls="exampleModal">Open Modal</button>
    <p>Additional page content goes here to show that the backdrop prevents interaction while the modal is open.</p>
  </div>

  <dialog id="exampleModal" aria-labelledby="modalTitle" aria-describedby="modalDescription">
    <div class="modal-header">
      <h2 class="modal-title" id="modalTitle">Welcome to the Modal</h2>
      <button class="close-x" type="button" aria-label="Close modal" title="Close">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <p id="modalDescription">This modal uses the native HTML dialog element and is closed by default. You can close it by pressing Escape, clicking the close button, or clicking the backdrop area.</p>

      <form id="demoForm" method="dialog">
        <label for="nameInput">Your name</label>
        <input id="nameInput" name="name" type="text" placeholder="Type your name" style="display:block;width:100%;margin-top:0.25rem;margin-bottom:0.75rem;padding:0.5rem;border:1px solid #d1d5db;border-radius:6px;">
        <label for="choiceSelect">Choose an option</label>
        <select id="choiceSelect" name="choice" style="display:block;width:100%;margin-top:0.25rem;margin-bottom:0.75rem;padding:0.5rem;border:1px solid #d1d5db;border-radius:6px;">
          <option value="" disabled selected>Select one</option>
          <option>Option A</option>
          <option>Option B</option>
          <option>Option C</option>
        </select>
      </form>
    </div>
    <div class="modal-footer">
      <button class="secondary" type="button" id="cancelBtn">Cancel</button>
      <button type="button" id="saveBtn">Save</button>
    </div>
  </dialog>

  <script>
    (function () {
      const dialog = document.getElementById('exampleModal');
      const triggerBtn = document.getElementById('openModalBtn');
      const closeIconBtn = dialog.querySelector('.close-x');
      const cancelBtn = document.getElementById('cancelBtn');
      const saveBtn = document.getElementById('saveBtn');
      const mainContent = document.getElementById('mainContent');

      let lastFocused;

      function openModal() {
        lastFocused = document.activeElement;
        dialog.showModal();
        document.body.classList.add('modal-open');
        mainContent.setAttribute('aria-hidden', 'true');
        const focusable = getFocusableElements(dialog);
        if (focusable.length > 0) {
          focusable[0].focus();
        } else {
          dialog.focus();
        }
      }

      function closeModal(returnFocus = true) {
        if (dialog.open) dialog.close();
        document.body.classList.remove('modal-open');
        mainContent.removeAttribute('aria-hidden');
        if (returnFocus && lastFocused) lastFocused.focus();
      }

      function getFocusableElements(container) {
        const selectors = [
          'a[href]',
          'area[href]',
          'input:not([disabled]):not([type="hidden"])',
          'select:not([disabled])',
          'textarea:not([disabled])',
          'button:not([disabled])',
          'iframe',
          'object',
          'embed',
          '[contenteditable]',
          '[tabindex]:not([tabindex="-1"])'
        ];
        return Array.from(container.querySelectorAll(selectors.join(',')))
          .filter(el => el.offsetParent !== null || el === container);
      }

      triggerBtn.addEventListener('click', openModal);

      closeIconBtn.addEventListener('click', () => closeModal());
      cancelBtn.addEventListener('click', () => closeModal());
      saveBtn.addEventListener('click', () => {
        closeModal();
      });

      dialog.addEventListener('click', (event) => {
        const rect = dialog.getBoundingClientRect();
        const isInDialog =
          event.clientX >= rect.left &&
          event.clientX <= rect.right &&
          event.clientY >= rect.top &&
          event.clientY <= rect.bottom;
        if (!isInDialog) {
          closeModal();
        }
      });

      dialog.addEventListener('keydown', (event) => {
        if (event.key === 'Escape') {
          event.stopPropagation();
          closeModal();
        }
      });

      dialog.addEventListener('keydown', (event) => {
        if (event.key !== 'Tab') return;
        const focusable = getFocusableElements(dialog);
        if (focusable.length === 0) return;
        const first = focusable[0];
        const last = focusable[focusable.length - 1];
        if (event.shiftKey) {
          if (document.activeElement === first) {
            last.focus();
            event.preventDefault();
          }
        } else {
          if (document.activeElement === last) {
            first.focus();
            event.preventDefault();
          }
        }
      });

      dialog.addEventListener('close', () => {
        document.body.classList.remove('modal-open');
        mainContent.removeAttribute('aria-hidden');
        if (lastFocused) lastFocused.focus();
      });

      triggerBtn.addEventListener('keydown', (event) => {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          openModal();
        }
      });
    })();
  </script>
</body>
</html>