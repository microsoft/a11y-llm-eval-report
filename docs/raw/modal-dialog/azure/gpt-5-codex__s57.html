<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modal Dialog Example</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  color-scheme: light dark;
  font-family: "Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
  margin: 0;
  padding: 2rem;
  background: #f5f5f8;
  color: #1c1c1c;
  min-height: 100vh;
  display: grid;
  place-items: center;
}

button {
  font: inherit;
  border: none;
  border-radius: 0.5rem;
  padding: 0.75rem 1.5rem;
  cursor: pointer;
  background: #4c6ef5;
  color: white;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  box-shadow: 0 10px 20px -10px rgba(76, 110, 245, 0.6);
}

button:hover,
button:focus-visible {
  transform: translateY(-1px);
  box-shadow: 0 12px 24px -12px rgba(76, 110, 245, 0.7);
  outline: none;
}

.modal {
  position: fixed;
  inset: 0;
  padding: 2rem;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(28, 28, 28, 0.45);
  backdrop-filter: blur(6px);
  z-index: 999;
}

.modal[data-open="true"] {
  display: flex;
}

.modal__dialog {
  background: white;
  color: #222;
  border-radius: 1rem;
  width: min(90vw, 420px);
  box-shadow: 0 24px 48px -24px rgba(0, 0, 0, 0.3);
  overflow: hidden;
  transform: translateY(20px);
  opacity: 0;
  transition: transform 0.35s ease, opacity 0.35s ease;
}

.modal[data-open="true"] .modal__dialog {
  transform: translateY(0);
  opacity: 1;
}

.modal__header {
  padding: 1.5rem;
  background: linear-gradient(135deg, #4c6ef5, #82a0ff);
  color: white;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.modal__header h2 {
  margin: 0;
  font-size: 1.3rem;
}

.modal__close {
  background: rgba(255, 255, 255, 0.15);
  color: white;
  border-radius: 999px;
  padding: 0.35rem 0.7rem;
}

.modal__body {
  padding: 1.5rem;
  line-height: 1.6;
}

.modal__footer {
  padding: 1.25rem 1.5rem;
  background: #f0f3ff;
  text-align: right;
}

.modal__footer button {
  background: #e1e7ff;
  color: #1c1c1c;
  box-shadow: none;
}

.modal__footer button:hover,
.modal__footer button:focus-visible {
  background: #d1dcff;
}

@media (prefers-reduced-motion: reduce) {
  * {
    transition-duration: 0.001ms !important;
    animation-duration: 0.001ms !important;
  }
}
</style>
</head>
<body>
<button class="trigger" aria-haspopup="dialog" aria-controls="example-modal">Open Modal</button>

<div class="modal" id="example-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-hidden="true" data-open="false">
  <div class="modal__dialog">
    <div class="modal__header">
      <h2 id="modal-title">Modal Dialog</h2>
      <button class="modal__close" type="button" aria-label="Close dialog">&times;</button>
    </div>
    <div class="modal__body">
      <p>This is an example modal dialog component. It is initially hidden and can be opened using the trigger button. The dialog can be closed by using the close button, pressing the Escape key, or clicking outside the dialog.</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas ac volutpat nulla. Donec sollicitudin libero nec nibh vulputate, id interdum orci accumsan.</p>
    </div>
    <div class="modal__footer">
      <button type="button" class="modal__close">Close</button>
    </div>
  </div>
</div>

<script>
(function () {
  const modal = document.getElementById('example-modal');
  const dialog = modal.querySelector('.modal__dialog');
  const triggers = document.querySelectorAll('.trigger');
  const closeButtons = modal.querySelectorAll('.modal__close');
  let lastFocusedElement = null;

  function openModal() {
    if (modal.dataset.open === 'true') return;
    lastFocusedElement = document.activeElement;
    modal.dataset.open = 'true';
    modal.setAttribute('aria-hidden', 'false');
    const focusable = dialog.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
    (focusable || dialog).focus();
    document.addEventListener('keydown', handleKeydown);
  }

  function closeModal() {
    if (modal.dataset.open === 'false') return;
    modal.dataset.open = 'false';
    modal.setAttribute('aria-hidden', 'true');
    document.removeEventListener('keydown', handleKeydown);
    if (lastFocusedElement && typeof lastFocusedElement.focus === 'function') {
      lastFocusedElement.focus();
    }
  }

  function handleKeydown(event) {
    if (event.key === 'Escape') {
      closeModal();
    }
  }

  triggers.forEach(trigger => trigger.addEventListener('click', openModal));
  closeButtons.forEach(button => button.addEventListener('click', closeModal));

  modal.addEventListener('click', event => {
    if (!dialog.contains(event.target)) {
      closeModal();
    }
  });

  dialog.addEventListener('click', event => {
    event.stopPropagation();
  });

  // Ensure dialog is not focusable by default when hidden
  if (modal.dataset.open === 'false') {
    modal.setAttribute('aria-hidden', 'true');
  }
})();
</script>
</body>
</html>