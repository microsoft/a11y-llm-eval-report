<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modal Dialog Example</title>
<style>
  :root {
    color-scheme: light dark;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }
  body {
    margin: 0;
    min-height: 100vh;
    display: grid;
    place-items: center;
    background: radial-gradient(circle at top, rgba(140, 190, 255, 0.3), transparent 60%);
  }
  button {
    cursor: pointer;
    font: inherit;
    border: none;
    border-radius: 0.6rem;
    padding: 0.75rem 1.5rem;
    background: linear-gradient(135deg, #5c6cff, #8a64ff);
    color: white;
    box-shadow: 0 0.65rem 1.5rem rgba(96, 92, 255, 0.35);
    transition: transform 150ms ease, box-shadow 150ms ease;
  }
  button:hover {
    transform: translateY(-2px);
    box-shadow: 0 0.9rem 2rem rgba(96, 92, 255, 0.3);
  }
  .modal {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    background-color: rgba(13, 17, 23, 0.55);
    backdrop-filter: blur(6px);
    transition: opacity 200ms ease;
    z-index: 1000;
  }
  .modal.is-open {
    display: flex;
  }
  .modal__dialog {
    position: relative;
    max-width: 26rem;
    width: 100%;
    border-radius: 1rem;
    background: linear-gradient(145deg, #ffffff, #f5f7ff);
    color: #1f2937;
    padding: 2.5rem 2.75rem;
    box-shadow: 0 1.75rem 3.5rem rgba(31, 41, 55, 0.25);
  }
  @media (prefers-color-scheme: dark) {
    .modal__dialog {
      background: linear-gradient(145deg, #1a1f2e, #20273a);
      color: #e5e7eb;
      box-shadow: 0 1.75rem 3.5rem rgba(0, 0, 0, 0.55);
    }
  }
  .modal__title {
    margin: 0 0 0.75rem;
    font-size: 1.5rem;
    font-weight: 700;
  }
  .modal__content {
    margin: 0 0 1.5rem;
    line-height: 1.6;
  }
  .modal__actions {
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
  }
  .modal__button {
    background: #e5e7eb;
    color: #1f2937;
  }
  .modal__button--primary {
    background: linear-gradient(135deg, #6366f1, #8b5cf6);
    color: white;
  }
  .modal__close {
    position: absolute;
    top: 0.9rem;
    right: 0.9rem;
    width: 2.25rem;
    height: 2.25rem;
    border-radius: 50%;
    background: transparent;
    color: inherit;
    box-shadow: none;
    font-size: 1.35rem;
    line-height: 1;
  }
  .modal__close:hover {
    background: rgba(99, 102, 241, 0.1);
  }
</style>
</head>
<body>
<button class="trigger" aria-haspopup="dialog" aria-controls="example-modal">Open Modal</button>

<div class="modal" id="example-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal-title" aria-describedby="modal-content">
  <div class="modal__dialog">
    <button class="modal__close" type="button" data-close aria-label="Close dialog">&times;</button>
    <h2 class="modal__title" id="modal-title">Stay in the Loop</h2>
    <p class="modal__content" id="modal-content">
      Subscribe to our newsletter to get early access to product updates, design stories, and exclusive events.
    </p>
    <div class="modal__actions">
      <button class="modal__button" type="button" data-close>Maybe Later</button>
      <button class="modal__button modal__button--primary" type="button">Subscribe</button>
    </div>
  </div>
</div>

<script>
  (function () {
    const modal = document.getElementById('example-modal');
    const triggerButtons = document.querySelectorAll('.trigger');
    const closeButtons = modal.querySelectorAll('[data-close]');
    let lastFocusedElement = null;

    function openModal() {
      if (modal.classList.contains('is-open')) return;
      lastFocusedElement = document.activeElement;
      modal.classList.add('is-open');
      modal.removeAttribute('aria-hidden');
      const focusable = modal.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if (focusable) {
        focusable.focus();
      }
      document.addEventListener('keydown', handleKeydown);
    }

    function closeModal() {
      if (!modal.classList.contains('is-open')) return;
      modal.classList.remove('is-open');
      modal.setAttribute('aria-hidden', 'true');
      document.removeEventListener('keydown', handleKeydown);
      if (lastFocusedElement) {
        lastFocusedElement.focus();
      }
    }

    function handleKeydown(event) {
      if (event.key === 'Escape') {
        closeModal();
      }
      if (event.key === 'Tab') {
        trapFocus(event);
      }
    }

    function trapFocus(event) {
      const focusableElements = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
      if (!focusableElements.length) return;
      const first = focusableElements[0];
      const last = focusableElements[focusableElements.length - 1];
      if (event.shiftKey && document.activeElement === first) {
        event.preventDefault();
        last.focus();
      } else if (!event.shiftKey && document.activeElement === last) {
        event.preventDefault();
        first.focus();
      }
    }

    triggerButtons.forEach(button => {
      button.addEventListener('click', openModal);
    });

    closeButtons.forEach(button => {
      button.addEventListener('click', closeModal);
    });

    modal.addEventListener('click', event => {
      if (event.target === modal) {
        closeModal();
      }
    });
  })();
</script>
</body>
</html>