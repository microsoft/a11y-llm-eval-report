<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modal Dialog Component Example</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root {
    color-scheme: light dark;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  }

  body {
    margin: 0;
    min-height: 100vh;
    display: grid;
    place-items: center;
    padding: 2rem;
    background: radial-gradient(circle at top, rgba(100, 181, 246, 0.18), transparent 52%), #f2f5f9;
    color: #1f2933;
  }

  .card {
    background: rgba(255, 255, 255, 0.82);
    backdrop-filter: blur(10px);
    border-radius: 22px;
    padding: 2.5rem 3rem;
    box-shadow: 0 25px 45px rgba(15, 35, 95, 0.15);
    text-align: center;
    max-width: 420px;
  }

  .card h1 {
    margin-top: 0;
    font-size: 2rem;
    color: #163d77;
  }

  .card p {
    font-size: 1rem;
    line-height: 1.6;
    color: #445566;
  }

  .trigger {
    appearance: none;
    border: none;
    border-radius: 999px;
    padding: 0.85rem 2.4rem;
    font-size: 1rem;
    font-weight: 600;
    color: #fff;
    background: linear-gradient(135deg, #2563eb, #7c3aed);
    cursor: pointer;
    box-shadow: 0 18px 30px rgba(76, 110, 245, 0.35);
    transition: transform 120ms ease, box-shadow 120ms ease;
    margin-top: 1.5rem;
  }

  .trigger:hover,
  .trigger:focus-visible {
    transform: translateY(-1px);
    box-shadow: 0 22px 34px rgba(76, 110, 245, 0.45);
  }

  .trigger:active {
    transform: translateY(1px);
  }

  .modal-backdrop {
    position: fixed;
    inset: 0;
    display: grid;
    place-items: center;
    background: rgba(17, 24, 39, 0.55);
    backdrop-filter: blur(6px);
    padding: 1.5rem;
    opacity: 0;
    pointer-events: none;
    transition: opacity 200ms ease;
    z-index: 1000;
  }

  .modal-backdrop[aria-hidden="false"] {
    opacity: 1;
    pointer-events: auto;
  }

  .modal-dialog {
    background: #ffffff;
    border-radius: 18px;
    max-width: 520px;
    width: min(100%, 520px);
    position: relative;
    padding: 2.4rem 2.6rem 2rem;
    box-shadow: 0 35px 70px rgba(15, 23, 42, 0.35);
  }

  .modal-dialog:focus {
    outline: none;
  }

  .modal-top-icon {
    width: 64px;
    height: 64px;
    border-radius: 22px;
    background: linear-gradient(145deg, #60a5fa, #c084fc);
    display: grid;
    place-items: center;
    color: white;
    font-size: 1.8rem;
    margin-bottom: 1.6rem;
  }

  .modal-title {
    font-size: 1.55rem;
    margin: 0 0 0.75rem;
    color: #0f172a;
  }

  .modal-body {
    font-size: 1rem;
    line-height: 1.7;
    color: #475569;
  }

  .modal-actions {
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
    margin-top: 2rem;
  }

  .modal-actions button {
    appearance: none;
    border: none;
    border-radius: 12px;
    padding: 0.75rem 1.35rem;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: transform 120ms ease, box-shadow 120ms ease;
  }

  .modal-actions button:hover,
  .modal-actions button:focus-visible {
    transform: translateY(-1px);
    box-shadow: 0 16px 24px rgba(30, 64, 175, 0.25);
  }

  .modal-actions button:active {
    transform: translateY(1px);
  }

  .modal-actions .confirm {
    background: linear-gradient(135deg, #2563eb, #7c3aed);
    color: #fff;
  }

  .modal-actions .dismiss {
    background: #e2e8f0;
    color: #1e293b;
  }

  .modal-close {
    position: absolute;
    top: 0.95rem;
    right: 0.95rem;
    border: none;
    background: transparent;
    font-size: 1.6rem;
    color: #64748b;
    cursor: pointer;
    padding: 0.35rem;
    border-radius: 50%;
    line-height: 1;
    transition: background 160ms ease, color 160ms ease;
  }

  .modal-close:hover,
  .modal-close:focus-visible {
    background: #e2e8f0;
    color: #0f172a;
  }

  @media (max-width: 540px) {
    .card {
      padding: 2rem;
    }

    .modal-dialog {
      padding: 2rem 1.75rem 1.75rem;
    }

    .modal-actions {
      flex-direction: column;
      align-items: stretch;
    }

    .modal-actions button {
      width: 100%;
    }
  }
</style>
</head>
<body>
  <div class="card">
    <h1>Modal Dialog Demo</h1>
    <p>Use the button below to open a modal dialog. The dialog can be closed by selecting an action, pressing the escape key, or clicking outside its bounds.</p>
    <button type="button" class="trigger" aria-haspopup="dialog" aria-controls="profile-modal">Open Profile Modal</button>
  </div>

  <div class="modal-backdrop" id="profile-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal-title" aria-describedby="modal-description">
    <div class="modal-dialog" tabindex="-1">
      <button type="button" class="modal-close" aria-label="Close dialog">&times;</button>
      <div class="modal-top-icon" aria-hidden="true">ðŸ‘¤</div>
      <h2 id="modal-title" class="modal-title">Complete Your Profile</h2>
      <p id="modal-description" class="modal-body">
        Share a bit more about yourself to help the community get to know you better. Adding a profile photo and a short bio increases your visibility and helps you build trust.
      </p>
      <div class="modal-actions">
        <button type="button" class="dismiss">Remind Me Later</button>
        <button type="button" class="confirm">Update Profile</button>
      </div>
    </div>
  </div>

<script>
  (function () {
    const modal = document.getElementById('profile-modal');
    const modalDialog = modal.querySelector('.modal-dialog');
    const openTrigger = document.querySelector('.trigger');
    const closeButton = modal.querySelector('.modal-close');
    const dismissButton = modal.querySelector('.dismiss');
    const confirmButton = modal.querySelector('.confirm');
    let lastFocusedElement = null;

    const focusableSelectors = [
      'a[href]',
      'area[href]',
      'button:not([disabled])',
      'input:not([disabled]):not([type="hidden"])',
      'select:not([disabled])',
      'textarea:not([disabled])',
      'iframe',
      'object',
      'embed',
      '[contenteditable]',
      '[tabindex]:not([tabindex="-1"])'
    ];

    function getFocusableElements() {
      return Array.from(modal.querySelectorAll(focusableSelectors.join(','))).filter(el => el.offsetParent !== null || el === document.activeElement);
    }

    function openModal() {
      if (modal.getAttribute('aria-hidden') === 'false') {
        return;
      }
      lastFocusedElement = document.activeElement;
      modal.setAttribute('aria-hidden', 'false');
      document.documentElement.style.overflow = 'hidden';
      const focusable = getFocusableElements();
      const firstElement = focusable[0] || modalDialog;
      requestAnimationFrame(() => firstElement.focus({ preventScroll: true }));
      document.addEventListener('keydown', trapTabKey);
      document.addEventListener('keydown', handleEscape, { once: true });
    }

    function closeModal() {
      if (modal.getAttribute('aria-hidden') === 'true') {
        return;
      }
      modal.setAttribute('aria-hidden', 'true');
      document.documentElement.style.overflow = '';
      document.removeEventListener('keydown', trapTabKey);
      if (lastFocusedElement) {
        lastFocusedElement.focus({ preventScroll: true });
      }
    }

    function handleEscape(event) {
      if (event.key === 'Escape') {
        closeModal();
      } else {
        document.addEventListener('keydown', handleEscape, { once: true });
      }
    }

    function trapTabKey(event) {
      if (event.key !== 'Tab') return;
      const focusable = getFocusableElements();
      if (focusable.length === 0) {
        event.preventDefault();
        modalDialog.focus({ preventScroll: true });
        return;
      }
      const first = focusable[0];
      const last = focusable[focusable.length - 1];
      if (event.shiftKey) {
        if (document.activeElement === first) {
          event.preventDefault();
          last.focus({ preventScroll: true });
        }
      } else {
        if (document.activeElement === last) {
          event.preventDefault();
          first.focus({ preventScroll: true });
        }
      }
    }

    openTrigger.addEventListener('click', openModal);
    closeButton.addEventListener('click', closeModal);
    dismissButton.addEventListener('click', closeModal);
    confirmButton.addEventListener('click', () => {
      closeModal();
      alert('Thanks! Your profile update has been queued.');
    });

    modal.addEventListener('mousedown', (event) => {
      if (!modalDialog.contains(event.target)) {
        closeModal();
      }
    });

    modalDialog.addEventListener('mousedown', (event) => {
      event.stopPropagation();
    });

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Enter' && document.activeElement === openTrigger) {
        openModal();
      }
    });
  })();
</script>
</body>
</html>