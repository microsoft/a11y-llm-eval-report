<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root {
      --overlay-bg: rgba(0,0,0,0.6);
      --modal-bg: #fff;
      --radius: 8px;
      --max-width: 520px;
      --spacing: 1rem;
      --transition: 180ms cubic-bezier(.2,.9,.2,1);
    }

    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      line-height: 1.4;
      margin: 0;
      padding: 2rem;
      background: #f7f8fa;
      color: #111;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    /* Trigger button */
    .trigger {
      display: inline-block;
      padding: 0.6rem 1rem;
      border-radius: 6px;
      border: 1px solid rgba(0,0,0,0.08);
      background: linear-gradient(#fff,#f2f4f7);
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    }
    .trigger:focus {
      outline: 3px solid rgba(59,130,246,0.25);
      outline-offset: 2px;
    }

    /* Modal overlay */
    .modal-overlay {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--overlay-bg);
      opacity: 0;
      visibility: hidden;
      transition: opacity var(--transition), visibility var(--transition);
      z-index: 1000;
      pointer-events: none;
      -webkit-tap-highlight-color: transparent;
    }
    .modal-overlay.open {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }

    /* Modal panel */
    .modal {
      background: var(--modal-bg);
      border-radius: var(--radius);
      width: calc(100% - 2rem);
      max-width: var(--max-width);
      box-shadow: 0 10px 30px rgba(2,6,23,0.15);
      transform: translateY(6px) scale(.98);
      opacity: 0;
      transition: transform var(--transition), opacity var(--transition);
      max-height: 85vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }
    .modal-overlay.open .modal {
      transform: translateY(0) scale(1);
      opacity: 1;
    }

    .modal-header {
      padding: var(--spacing);
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #eef1f5;
    }
    .modal-title {
      margin: 0;
      font-size: 1.05rem;
      font-weight: 700;
    }

    .modal-body {
      padding: var(--spacing);
      padding-top: 0.75rem;
      overflow: auto;
    }

    .modal-footer {
      padding: var(--spacing);
      border-top: 1px solid #eef1f5;
      display: flex;
      gap: 0.5rem;
      justify-content: flex-end;
    }

    .button {
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      border: 1px solid rgba(0,0,0,0.08);
      background: #fff;
      cursor: pointer;
    }
    .button.primary {
      background: linear-gradient(#2563eb,#1d4ed8);
      color: white;
      border: none;
    }

    .close {
      background: transparent;
      border: none;
      padding: 0.35rem;
      margin-left: 0.5rem;
      cursor: pointer;
      font-size: 1rem;
    }
    .close:focus {
      outline: 3px solid rgba(59,130,246,0.25);
      outline-offset: 2px;
    }

    /* Visually hidden helper */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0 0 0 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</head>
<body>
  <div class="container" id="mainContent">
    <h1>Modal Dialog Component</h1>
    <p>This demonstrates a modal dialog that is closed by default. The button below has the <code>trigger</code> class and opens the modal.</p>

    <button class="trigger" type="button">Open Modal</button>

    <p style="margin-top: 1.5rem;">Try keyboard interaction: Tab to the trigger and press Enter or Space to open. While open, Tab is trapped inside the modal. Press Escape to close. Click outside the panel (on the overlay) to close as well.</p>
  </div>

  <!-- Modal overlay (hidden by default) -->
  <div class="modal-overlay" id="modalOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc" tabindex="-1">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title">Example Modal</h2>
        <button class="close" type="button" aria-label="Close modal" id="closeBtn">&times;</button>
      </div>
      <div class="modal-body" id="modalDesc">
        <p>This modal is an accessible example with focus management and keyboard support.</p>
        <p>It traps focus while open, closes on Escape, and clicking the overlay will also close it. Focus returns to the triggering element after closing.</p>

        <label for="sampleInput">Sample input</label>
        <input id="sampleInput" type="text" placeholder="Type something..." style="display:block;margin-top:0.5rem;padding:0.5rem;border-radius:6px;border:1px solid #d7dde6;width:100%;box-sizing:border-box;">
      </div>
      <div class="modal-footer">
        <button class="button" type="button" id="cancelBtn">Cancel</button>
        <button class="button primary" type="button" id="confirmBtn">Confirm</button>
      </div>
    </div>
  </div>

  <script>
    (function () {
      const triggers = Array.from(document.querySelectorAll('.trigger'));
      const overlay = document.getElementById('modalOverlay');
      const modal = overlay.querySelector('.modal');
      const closeBtn = document.getElementById('closeBtn');
      const cancelBtn = document.getElementById('cancelBtn');
      const mainContent = document.getElementById('mainContent');
      let lastFocused = null;

      // utility: find focusable elements inside modal
      function getFocusableElements(container) {
        const focusSelectors = [
          'a[href]',
          'area[href]',
          'input:not([disabled]):not([type="hidden"])',
          'select:not([disabled])',
          'textarea:not([disabled])',
          'button:not([disabled])',
          'iframe',
          'object',
          'embed',
          '[tabindex]:not([tabindex="-1"])',
          '[contenteditable]',
        ];
        return Array.from(container.querySelectorAll(focusSelectors.join(',')))
          .filter(el => el.offsetWidth > 0 || el.offsetHeight > 0 || el === document.activeElement);
      }

      function openModal(triggerEl) {
        lastFocused = triggerEl || document.activeElement;
        overlay.classList.add('open');
        overlay.setAttribute('aria-hidden', 'false');
        modal.setAttribute('tabindex', '-1');
        // hide main content from assistive tech
        mainContent.setAttribute('aria-hidden', 'true');
        // focus first focusable element or modal itself
        const focusables = getFocusableElements(modal);
        const first = focusables.length ? focusables[0] : modal;
        setTimeout(() => first.focus(), 10);
        // add document listeners
        document.addEventListener('keydown', onKeyDown);
      }

      function closeModal() {
        overlay.classList.remove('open');
        overlay.setAttribute('aria-hidden', 'true');
        mainContent.removeAttribute('aria-hidden');
        document.removeEventListener('keydown', onKeyDown);
        // return focus to last focused element
        if (lastFocused && typeof lastFocused.focus === 'function') {
          setTimeout(() => lastFocused.focus(), 10);
        }
      }

      function onKeyDown(e) {
        if (e.key === 'Escape' || e.key === 'Esc') {
          e.preventDefault();
          closeModal();
          return;
        }
        if (e.key === 'Tab') {
          // trap focus inside modal
          const focusables = getFocusableElements(modal);
          if (focusables.length === 0) {
            e.preventDefault();
            return;
          }
          const first = focusables[0];
          const last = focusables[focusables.length - 1];
          if (e.shiftKey) {
            if (document.activeElement === first || document.activeElement === modal) {
              e.preventDefault();
              last.focus();
            }
          } else {
            if (document.activeElement === last) {
              e.preventDefault();
              first.focus();
            }
          }
        }
      }

      // click on overlay to close (only when clicking outside modal content)
      overlay.addEventListener('pointerdown', (event) => {
        // If the click started on the overlay (not on the modal), close.
        if (event.target === overlay) {
          // use pointerup to avoid accidental drags closing immediately
          const onPointerUp = (ev) => {
            if (ev.target === overlay) closeModal();
            overlay.removeEventListener('pointerup', onPointerUp);
          };
          overlay.addEventListener('pointerup', onPointerUp);
        }
      });

      // attach openers
      triggers.forEach(btn => {
        btn.addEventListener('click', (e) => {
          openModal(btn);
        });
        btn.addEventListener('keydown', (e) => {
          // support Space/Enter to open when focused on non-button triggers
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            openModal(btn);
          }
        });
      });

      // close controls
      closeBtn.addEventListener('click', closeModal);
      cancelBtn.addEventListener('click', closeModal);

      // confirm action just closes for this demo
      document.getElementById('confirmBtn').addEventListener('click', () => {
        // perform action here...
        closeModal();
      });

      // ensure modal is closed on load
      overlay.classList.remove('open');
      overlay.setAttribute('aria-hidden', 'true');

    })();
  </script>
</body>
</html>