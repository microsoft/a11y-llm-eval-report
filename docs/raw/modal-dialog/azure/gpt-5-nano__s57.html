<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root {
      --overlay: rgba(0, 0, 0, 0.6);
      --panel: #fff;
      --radius: 8px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      background: #f5f5f7;
    }

    /* Trigger button (open modal) */
    .trigger {
      padding: 0.6rem 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      background: #2563eb;
      color: white;
      cursor: pointer;
    }

    /* Modal overlay (hidden by default) */
    .modal-overlay {
      position: fixed;
      inset: 0;
      display: none; /* closed by default */
      align-items: center;
      justify-content: center;
      background: var(--overlay);
      padding: 1rem;
    }
    .modal-overlay.open {
      display: flex;
    }

    /* Modal panel */
    .modal {
      background: var(--panel);
      width: min(92vw, 520px);
      border-radius: var(--radius);
      box-shadow: 0 20px 40px rgba(0,0,0,.25);
      padding: 1rem;
      outline: none;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #e5e7eb;
    }

    .modal-title {
      font-size: 1.25rem;
      font-weight: 600;
      margin: 0;
    }

    .modal-close {
      background: transparent;
      border: none;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
      padding: 0.25rem 0.5rem;
    }

    .modal-content {
      padding: 0.75rem 0.25rem;
    }

    .modal-actions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      justify-content: flex-end;
      padding-top: 0.75rem;
      border-top: 1px solid #e5e7eb;
      margin-top: 0.25rem;
    }

    /* Simple form styling inside modal */
    label {
      display: block;
      font-size: 0.9rem;
      margin: 0.25rem 0 0.25rem;
    }
    input {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <button class="trigger" id="openModal" aria-controls="exampleModal" aria-expanded="false">
    Open Modal
  </button>

  <div class="modal-overlay" id="modalOverlay" aria-hidden="true" role="presentation">
    <section class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" id="exampleModal" tabindex="-1">
      <header class="modal-header">
        <h2 class="modal-title" id="modalTitle">Modal Dialog</h2>
        <button class="modal-close" id="modalClose" aria-label="Close modal">âœ•</button>
      </header>

      <div class="modal-content">
        <p>This is an example of a modal dialog component. It is closed by default. Use the Open Modal button to display it. You can close by clicking the close button, pressing Escape, or clicking outside the dialog.</p>

        <form aria-label="Sample form inside modal">
          <label for="name">Name</label>
          <input type="text" id="name" name="name" placeholder="Your name" />

          <label for="email" style="margin-top:0.75rem;">Email</label>
          <input type="email" id="email" name="email" placeholder="you@example.com" />
        </form>
      </div>

      <div class="modal-actions">
        <button type="button" id="modalSecondary" aria-label="Cancel" class="secondary" style="padding:0.5rem 1rem; border:1px solid #d1d5db; border-radius:6px; background:#f3f4f6; cursor:pointer;">Cancel</button>
        <button type="button" id="modalPrimary" aria-label="Submit" class="primary" style="padding:0.5rem 1rem; border: none; border-radius:6px; background:#2563eb; color:white; cursor:pointer;">Submit</button>
      </div>
    </section>
  </div>

  <script>
    (function(){
      const openBtn = document.querySelector('#openModal');
      const overlay = document.getElementById('modalOverlay');
      const modal = document.getElementById('exampleModal');
      const closeBtn = document.getElementById('modalClose');
      const secondaryBtn = document.getElementById('modalSecondary');
      const primaryBtn = document.getElementById('modalPrimary');
      let lastFocused = null;

      const FOCUSABLE_SELECTOR = 'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])';

      function openModal() {
        lastFocused = document.activeElement;
        overlay.classList.add('open');
        overlay.setAttribute('aria-hidden', 'false');
        if (openBtn) openBtn.setAttribute('aria-expanded', 'true');
        // Focus first focusable element inside modal
        setTimeout(() => {
          const focusables = modal.querySelectorAll(FOCUSABLE_SELECTOR);
          if (focusables.length) focusables[0].focus();
          else modal.focus();
        }, 0);
        // Trap focus
        document.addEventListener('keydown', trapFocus);
        overlay.addEventListener('click', overlayClick);
      }

      function closeModal() {
        overlay.classList.remove('open');
        overlay.setAttribute('aria-hidden', 'true');
        if (openBtn) openBtn.setAttribute('aria-expanded', 'false');
        document.removeEventListener('keydown', trapFocus);
        overlay.removeEventListener('click', overlayClick);
        // Restore focus
        if (lastFocused && typeof lastFocused.focus === 'function') lastFocused.focus();
      }

      function overlayClick(e) {
        if (e.target === overlay) {
          closeModal();
        }
      }

      function trapFocus(e) {
        if (e.key === 'Escape') {
          closeModal();
          return;
        }
        if (e.key !== 'Tab') return;

        const focusables = modal.querySelectorAll(FOCUSABLE_SELECTOR);
        if (focusables.length === 0) {
          e.preventDefault();
          return;
        }
        const first = focusables[0];
        const last = focusables[focusables.length - 1];
        if (e.shiftKey) {
          if (document.activeElement === first) {
            last.focus();
            e.preventDefault();
          }
        } else {
          if (document.activeElement === last) {
            first.focus();
            e.preventDefault();
          }
        }
      }

      // Event bindings
      openBtn.addEventListener('click', openModal);
      closeBtn.addEventListener('click', closeModal);
      secondaryBtn.addEventListener('click', closeModal);

      // Ensure modal closes when clicking outside or pressing Escape
      // (Escape handled in trapFocus)
    })();
  </script>
</body>
</html>