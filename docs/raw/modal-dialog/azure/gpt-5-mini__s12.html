<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root{
      --overlay-bg: rgba(0,0,0,0.5);
      --modal-bg: #fff;
      --radius: 10px;
      --max-width: 640px;
      --accent: #0b74de;
    }
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
    .container{padding:48px;max-width:900px;margin:0 auto;}
    .trigger{padding:10px 16px;background:var(--accent);color:#fff;border:0;border-radius:6px;cursor:pointer;font-weight:600;}
    /* Overlay & modal (hidden by default) */
    .modal-overlay{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--overlay-bg);
      opacity:0;
      pointer-events:none;
      transition:opacity .18s ease;
      z-index:1000;
    }
    .modal-overlay[aria-hidden="false"]{
      opacity:1;
      pointer-events:auto;
    }
    .modal{
      background:var(--modal-bg);
      width:min(92%, var(--max-width));
      border-radius:var(--radius);
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
      transform:translateY(-10px) scale(.995);
      transition:transform .18s ease;
      max-height:85vh;
      overflow:auto;
      padding:20px;
      outline:0;
    }
    .modal-overlay[aria-hidden="false"] .modal{
      transform:translateY(0) scale(1);
    }
    .modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px;}
    .modal h2{margin:0;font-size:1.125rem;}
    .close-btn{
      background:transparent;border:0;padding:6px 8px;border-radius:6px;color:#333;cursor:pointer;font-size:16px;
    }
    .close-btn:focus{box-shadow:0 0 0 3px rgba(11,116,222,0.18);}
    .modal-content{font-size:0.96rem;color:#222;line-height:1.45;}
    .modal-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:16px;}
    .btn{padding:8px 12px;border-radius:6px;border:0;cursor:pointer;}
    .btn.primary{background:var(--accent);color:#fff;}
    .btn.ghost{background:#f1f3f5;color:#111;}
    /* prevent background scroll when modal open */
    .no-scroll{overflow:hidden;height:100%;}
    /* small focus styles */
    button:focus, a:focus{outline:3px solid rgba(11,116,222,0.18);outline-offset:2px;}
    /* Visually hidden helper */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;}
  </style>
</head>
<body>
  <div class="container">
    <h1>Modal Dialog Component</h1>
    <p>This example shows a modal dialog that is closed by default. Click the button to open it.</p>

    <button class="trigger" type="button" aria-haspopup="dialog" aria-controls="example-modal">Open Modal</button>

    <!-- Modal overlay (closed by default via aria-hidden="true") -->
    <div id="modal-overlay" class="modal-overlay" role="presentation" aria-hidden="true">
      <div id="example-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc" tabindex="-1">
        <div class="modal-header">
          <h2 id="modal-title">Example Modal</h2>
          <button class="close-btn" type="button" aria-label="Close dialog">&times;</button>
        </div>
        <div id="modal-desc" class="modal-content">
          <p>This modal is meant to demonstrate accessible modal behavior: focus trapping, Escape to close, click outside to close, and returning focus to the trigger.</p>
          <p>Try tabbing through the controls and closing the dialog.</p>
        </div>

        <div class="modal-actions">
          <button class="btn ghost" type="button">Cancel</button>
          <button class="btn primary" type="button">Confirm</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const triggers = document.querySelectorAll('.trigger');
      const overlay = document.getElementById('modal-overlay');
      const modal = document.getElementById('example-modal');
      const closeBtn = modal.querySelector('.close-btn');
      const focusableSelector = 'a[href], area[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])';
      let lastFocused = null;

      function openModal(triggerEl){
        lastFocused = triggerEl || document.activeElement;
        overlay.setAttribute('aria-hidden','false');
        document.body.classList.add('no-scroll');
        // Wait for overlay to become visible before focusing
        window.requestAnimationFrame(() => {
          // focus first focusable in the modal or the modal container itself
          const first = modal.querySelector(focusableSelector);
          if(first){
            first.focus();
          } else {
            modal.focus();
          }
          // attach listeners
          document.addEventListener('keydown', onKeyDown);
        });
      }

      function closeModal(){
        overlay.setAttribute('aria-hidden','true');
        document.body.classList.remove('no-scroll');
        // remove key listener
        document.removeEventListener('keydown', onKeyDown);
        // return focus
        if(lastFocused && typeof lastFocused.focus === 'function'){
          lastFocused.focus();
        }
      }

      function onOverlayClick(e){
        // close when clicking on overlay background (not the modal)
        if(e.target === overlay){
          closeModal();
        }
      }

      function onKeyDown(e){
        if(e.key === 'Escape'){
          e.preventDefault();
          closeModal();
          return;
        }
        if(e.key === 'Tab'){
          // focus trap
          const focusables = Array.from(modal.querySelectorAll(focusableSelector)).filter(el => el.offsetParent !== null);
          if(focusables.length === 0){
            // nothing focusable, keep focus on modal
            e.preventDefault();
            modal.focus();
            return;
          }
          const first = focusables[0];
          const last = focusables[focusables.length - 1];
          if(e.shiftKey){
            if(document.activeElement === first || document.activeElement === modal){
              e.preventDefault();
              last.focus();
            }
          } else {
            if(document.activeElement === last){
              e.preventDefault();
              first.focus();
            }
          }
        }
      }

      // Wire up triggers
      triggers.forEach(t => {
        t.addEventListener('click', () => openModal(t));
      });

      // Close buttons and overlay click
      closeBtn.addEventListener('click', closeModal);
      overlay.addEventListener('click', onOverlayClick);

      // Also make Cancel button close (demonstration)
      modal.querySelectorAll('.btn.ghost').forEach(btn => btn.addEventListener('click', closeModal));

      // Initially hidden
      overlay.setAttribute('aria-hidden','true');
    })();
  </script>
</body>
</html>