<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modal Dialog Example</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    * {
        box-sizing: border-box;
    }
    body {
        margin: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #f5f7fb;
        color: #333;
        line-height: 1.6;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
    }
    .trigger {
        padding: 0.75rem 1.5rem;
        font-size: 1rem;
        border: none;
        border-radius: 999px;
        background: linear-gradient(135deg, #5783f2, #7a5cf5);
        color: white;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 10px 30px rgba(87, 131, 242, 0.35);
    }
    .trigger:focus-visible {
        outline: 3px solid #222;
        outline-offset: 4px;
    }
    .trigger:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 34px rgba(87, 131, 242, 0.45);
    }
    .modal {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(23, 32, 58, 0.55);
        backdrop-filter: blur(2px);
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
        transition: opacity 0.25s ease, visibility 0.25s ease;
        padding: 2rem;
        z-index: 1000;
    }
    .modal.open {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
    }
    .modal-dialog {
        width: min(500px, 100%);
        background: #ffffff;
        border-radius: 16px;
        box-shadow: 0 28px 60px rgba(30, 40, 70, 0.35);
        padding: 2.5rem;
        position: relative;
        transform: translateY(-18px) scale(0.98);
        transition: transform 0.25s ease;
    }
    .modal.open .modal-dialog {
        transform: translateY(0) scale(1);
    }
    .modal h2 {
        margin-top: 0;
        margin-bottom: 0.75rem;
        font-size: 1.6rem;
        color: #1e2a4a;
    }
    .modal p {
        margin-bottom: 1.5rem;
        color: #4d5f83;
    }
    .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 0.75rem;
    }
    .modal button {
        font-size: 0.95rem;
        border: none;
        border-radius: 10px;
        padding: 0.6rem 1.2rem;
        cursor: pointer;
    }
    .primary-action {
        background: #4f7df3;
        color: #fff;
        box-shadow: 0 12px 24px rgba(79, 125, 243, 0.4);
    }
    .primary-action:hover {
        background: #416ad6;
    }
    .secondary-action {
        background: #eef1f9;
        color: #3c4a6b;
    }
    .secondary-action:hover {
        background: #dbe2f6;
    }
    .close-btn {
        position: absolute;
        inset: 16px 16px auto auto;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: none;
        background: rgba(90, 110, 150, 0.15);
        color: #1e2a4a;
        font-size: 1.25rem;
        line-height: 1;
        cursor: pointer;
        transition: background 0.2s ease;
    }
    .close-btn:hover {
        background: rgba(90, 110, 150, 0.25);
    }
    .close-btn:focus-visible {
        outline: 3px solid #4f7df3;
        outline-offset: 3px;
    }
    @media (prefers-reduced-motion: reduce) {
        .modal,
        .modal-dialog,
        .trigger {
            transition: none !important;
        }
    }
</style>
</head>
<body>
<button type="button" class="trigger" aria-haspopup="dialog" aria-controls="exampleModal">
    Open Modal
</button>

<div class="modal" id="exampleModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDescription" aria-hidden="true">
    <div class="modal-dialog">
        <button type="button" class="close-btn" aria-label="Close modal">Ã—</button>
        <h2 id="modalTitle">Stay in the Loop</h2>
        <p id="modalDescription">
            Subscribe to our newsletter to receive curated tips, exclusive resources, and early access to new features.
        </p>
        <div class="modal-actions">
            <button type="button" class="secondary-action">Maybe later</button>
            <button type="button" class="primary-action">Subscribe</button>
        </div>
    </div>
</div>

<script>
    const modal = document.getElementById('exampleModal');
    const trigger = document.querySelector('.trigger');
    const closeBtn = modal.querySelector('.close-btn');
    const secondaryAction = modal.querySelector('.secondary-action');
    const focusableSelectors = [
        'button',
        '[href]',
        'input',
        'select',
        'textarea',
        '[tabindex]:not([tabindex="-1"])'
    ];
    let previouslyFocusedElement = null;

    function openModal() {
        if (modal.classList.contains('open')) return;
        previouslyFocusedElement = document.activeElement;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
        const firstFocusable = modal.querySelector(focusableSelectors.join(','));
        if (firstFocusable) firstFocusable.focus();
    }

    function closeModal() {
        if (!modal.classList.contains('open')) return;
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        if (previouslyFocusedElement) previouslyFocusedElement.focus();
    }

    function handleKeyDown(event) {
        if (!modal.classList.contains('open')) return;

        if (event.key === 'Escape') {
            event.preventDefault();
            closeModal();
        }

        if (event.key === 'Tab') {
            const focusableElements = Array.from(modal.querySelectorAll(focusableSelectors.join(',')))
                .filter(el => !el.hasAttribute('disabled') && el.getAttribute('tabindex') !== '-1');
            if (focusableElements.length === 0) {
                event.preventDefault();
                return;
            }
            const first = focusableElements[0];
            const last = focusableElements[focusableElements.length - 1];
            if (event.shiftKey && document.activeElement === first) {
                event.preventDefault();
                last.focus();
            } else if (!event.shiftKey && document.activeElement === last) {
                event.preventDefault();
                first.focus();
            }
        }
    }

    trigger.addEventListener('click', openModal);
    closeBtn.addEventListener('click', closeModal);
    secondaryAction.addEventListener('click', closeModal);
    modal.addEventListener('mousedown', (event) => {
        if (event.target === modal) {
            closeModal();
        }
    });
    document.addEventListener('keydown', handleKeyDown);
</script>
</body>
</html>