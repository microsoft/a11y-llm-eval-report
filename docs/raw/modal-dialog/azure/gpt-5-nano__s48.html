<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root {
      --overlay: rgba(0, 0, 0, 0.5);
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --primary: #2563eb;
      --primary-dark: #1e40af;
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: var(--text);
      background: #f7f7fb;
    }

    main { padding: 48px; max-width: 800px; margin: 0 auto; }

    h1 { font-size: 1.75rem; margin-bottom: 0.5rem; }
    p { color: var(--muted); }

    /* Trigger button (must have class "trigger") */
    .trigger {
      padding: 12px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: var(--primary);
      color: white;
    }
    .trigger:hover { background: var(--primary-dark); }

    /* Modal overlay and content */
    .modal {
      display: none;              /* Closed by default */
      position: fixed;
      inset: 0;
      align-items: center;
      justify-content: center;
      background: var(--overlay);
      z-index: 1000;
    }
    .modal.open {
      display: flex;
    }

    .modal-content {
      background: var(--card);
      border-radius: 12px;
      width: min(90%, 520px);
      padding: 20px 20px 16px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.25);
      outline: none;
    }

    .modal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      padding-bottom: 6px;
      border-bottom: 1px solid #e5e7eb;
    }

    .modal-title {
      margin: 0;
      font-size: 1.25rem;
    }

    .modal-close {
      background: transparent;
      border: none;
      font-size: 1.25rem;
      line-height: 1;
      cursor: pointer;
      padding: 6px;
      border-radius: 6px;
    }
    .modal-close:hover, .modal-close:focus {
      background: #f3f4f6;
    }

    .modal-body {
      margin-top: 12px;
      color: #374151;
    }

    .modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 8px;
      padding-top: 12px;
      border-top: 1px solid #e5e7eb;
    }

    .btn {
      padding: 9px 14px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      background: #f3f4f6;
      color: #111827;
      cursor: pointer;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      border: 1px solid var(--primary);
    }
    .btn-primary:hover { background: var(--primary-dark); border-color: var(--primary-dark); }

    input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      font-size: 14px;
    }

    @media (prefers-reduced-motion: reduce) {
      .modal-content { transition: none; }
    }
  </style>
</head>
<body>
  <main>
    <h1>Modal Dialog Component</h1>
    <p>This modal dialog is closed by default. Click the button below that has the class "trigger" to open it.</p>
    <button class="trigger" data-modal="myModal">Open modal</button>
  </main>

  <!-- Modal -->
  <div id="myModal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="modalTitle" aria-modal="true">
    <div class="modal-content" role="document" tabindex="-1">
      <div class="modal-header">
        <h2 id="modalTitle" class="modal-title">Example Modal</h2>
        <button class="modal-close" aria-label="Close modal" title="Close">Ã—</button>
      </div>

      <div class="modal-body">
        <p>This is a simple accessible modal dialog. It is hidden by default and can be opened by clicking the trigger button.</p>
        <div style="margin-top: 8px;">
          <label for="nameInput" style="display:block; margin-bottom:6px;">Name</label>
          <input id="nameInput" type="text" placeholder="Your name" />
        </div>
      </div>

      <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-label="Close">Close</button>
        <button class="btn btn-primary" id="saveModal" aria-label="Save changes">Save</button>
      </div>
    </div>
  </div>

  <script>
    (function () {
      // Open modal when a trigger is clicked
      const triggers = document.querySelectorAll('.trigger[data-modal]');

      function openModal(id) {
        const modal = document.getElementById(id);
        if (!modal) return;
        modal.classList.add('open');
        modal.setAttribute('aria-hidden', 'false');
        // Move focus to first focusable element inside the modal
        const modalContent = modal.querySelector('.modal-content');
        const focusables = modalContent.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        if (focusables.length > 0) {
          focusables[0].focus();
        }
        document.body.style.overflow = 'hidden';
      }

      function closeModal(modal) {
        if (!modal) return;
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');
        document.body.style.overflow = '';
        // Return focus to the trigger if possible
        const id = modal.id;
        const openers = document.querySelector('.trigger[data-modal="' + id + '"]');
        if (openers) openers.focus();
      }

      triggers.forEach(function (t) {
        t.addEventListener('click', function () {
          const id = t.getAttribute('data-modal');
          openModal(id);
        });
      });

      // Close when clicking on the overlay (outside the modal-content)
      document.addEventListener('click', function (e) {
        const modal = e.target.closest('.modal');
        if (modal && e.target === modal) {
          closeModal(modal);
        }
      });

      // Close buttons inside the modal
      document.querySelectorAll('.modal .modal-close').forEach(function (btn) {
        btn.addEventListener('click', function () {
          const modal = btn.closest('.modal');
          closeModal(modal);
        });
      });

      // Generic dismiss buttons in modal footer
      document.querySelectorAll('[data-dismiss="modal"]').forEach(function (btn) {
        btn.addEventListener('click', function () {
          const modal = btn.closest('.modal');
          closeModal(modal);
        });
      });

      // Escape key to close
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape' || e.key === 'Esc') {
          const openModal = document.querySelector('.modal.open');
          if (openModal) closeModal(openModal);
        }
      });

      // Simple Save action to demonstrate interaction inside modal
      document.getElementById('saveModal')?.addEventListener('click', function () {
        // Example action: close modal after saving
        const modal = document.getElementById('myModal');
        closeModal(modal);
      });

    })();
  </script>
</body>
</html>