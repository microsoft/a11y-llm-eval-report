<html lang="en">
<head>
<meta charset="UTF-8">
<title>Modal Dialog Example</title>
<style>
    :root {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        color: #1f2933;
        background-color: #f8fafc;
    }

    body {
        margin: 0;
        padding: 2rem;
    }

    button {
        font-size: 1rem;
        padding: 0.6rem 1.2rem;
        border-radius: 0.4rem;
        border: none;
        cursor: pointer;
        background-color: #2563eb;
        color: white;
        transition: background-color 0.2s ease;
    }

    button:hover {
        background-color: #1d4ed8;
    }

    .modal-overlay {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 1.5rem;
        background-color: rgba(15, 23, 42, 0.55);
        backdrop-filter: blur(2px);
        z-index: 1000;
    }

    .modal-overlay.active {
        display: flex;
    }

    .modal {
        width: min(500px, 100%);
        background-color: white;
        border-radius: 0.75rem;
        box-shadow: 0 25px 50px -12px rgba(15, 23, 42, 0.25);
        overflow: hidden;
        animation: fade-in 0.3s ease;
    }

    .modal header {
        padding: 1.2rem 1.5rem;
        background-color: #eff6ff;
        border-bottom: 1px solid #dce7f7;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal header h2 {
        margin: 0;
        font-size: 1.25rem;
    }

    .modal header button {
        background: none;
        border: none;
        color: #475569;
        font-size: 1.5rem;
        padding: 0;
        width: 2rem;
        height: 2rem;
        border-radius: 0.4rem;
    }

    .modal header button:hover {
        background-color: rgba(71, 85, 105, 0.1);
    }

    .modal .content {
        padding: 1.5rem;
        line-height: 1.6;
    }

    .modal footer {
        padding: 1rem 1.5rem;
        background-color: #f8fafc;
        border-top: 1px solid #e2e8f0;
        text-align: right;
    }

    .modal footer button.secondary {
        background-color: #e2e8f0;
        color: #1f2937;
        margin-right: 0.5rem;
    }

    .modal footer button.secondary:hover {
        background-color: #cbd5f5;
    }

    @keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>
</head>
<body>
<button class="trigger" aria-haspopup="dialog" aria-controls="example-modal">Open Modal</button>

<div class="modal-overlay" id="modal-overlay" role="presentation" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <header>
            <h2 id="modal-title">Modal Dialog</h2>
            <button type="button" class="close" aria-label="Close modal">&times;</button>
        </header>
        <div class="content">
            <p>This is a sample modal dialog component. It demonstrates how to show and hide a modal using JavaScript while keeping accessibility in mind.</p>
            <p>Use the buttons below to dismiss the dialog, or press the Escape key.</p>
        </div>
        <footer>
            <button type="button" class="secondary">Secondary Action</button>
            <button type="button" class="primary close">Close</button>
        </footer>
    </div>
</div>

<script>
    const triggerButton = document.querySelector('.trigger');
    const modalOverlay = document.getElementById('modal-overlay');
    const closeButtons = modalOverlay.querySelectorAll('.close');
    const focusableSelectors = [
        'a[href]',
        'button:not([disabled])',
        'textarea:not([disabled])',
        'input:not([disabled])',
        'select:not([disabled])',
        '[tabindex]:not([tabindex="-1"])'
    ];
    let lastFocusedElement = null;

    function openModal() {
        lastFocusedElement = document.activeElement;
        modalOverlay.classList.add('active');
        modalOverlay.setAttribute('aria-hidden', 'false');
        const focusableElements = modalOverlay.querySelectorAll(focusableSelectors.join(','));
        if (focusableElements.length) {
            focusableElements[0].focus();
        }
        document.addEventListener('keydown', handleKeydown);
        trapFocus();
    }

    function closeModal() {
        modalOverlay.classList.remove('active');
        modalOverlay.setAttribute('aria-hidden', 'true');
        document.removeEventListener('keydown', handleKeydown);
        if (lastFocusedElement) {
            lastFocusedElement.focus();
        }
    }

    function handleKeydown(event) {
        if (event.key === 'Escape') {
            closeModal();
        }
        if (event.key === 'Tab') {
            trapFocus(event);
        }
    }

    function trapFocus(event) {
        const focusableElements = Array.from(modalOverlay.querySelectorAll(focusableSelectors.join(',')));
        if (!focusableElements.length) return;
        if (!event) return;

        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];

        if (event.shiftKey && document.activeElement === firstElement) {
            event.preventDefault();
            lastElement.focus();
        } else if (!event.shiftKey && document.activeElement === lastElement) {
            event.preventDefault();
            firstElement.focus();
        }
    }

    triggerButton.addEventListener('click', openModal);

    closeButtons.forEach(button => {
        button.addEventListener('click', closeModal);
    });

    modalOverlay.addEventListener('click', event => {
        if (event.target === modalOverlay) {
            closeModal();
        }
    });
</script>
</body>
</html>