<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Modal Dialog Example</title>
  <style>
    :root{
      --overlay-bg: rgba(0,0,0,0.6);
      --modal-bg: #fff;
      --radius: 8px;
      --max-width: 540px;
      --padding: 1.25rem;
      --transition: 180ms ease;
    }

    body{
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      margin:0;
      padding:2rem;
      background: #f7f7fb;
      color:#111;
    }

    .trigger {
      display:inline-block;
      padding:0.6rem 1rem;
      border-radius:6px;
      border:1px solid #2b6cb0;
      background:#3182ce;
      color:white;
      cursor:pointer;
      font-weight:600;
    }

    /* Overlay & modal container */
    .modal-overlay {
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--overlay-bg);
      opacity:0;
      pointer-events:none;
      transition:opacity var(--transition);
      z-index:1000;
    }

    .modal-overlay.is-open{
      opacity:1;
      pointer-events:auto;
    }

    .modal {
      width:clamp(280px, 90%, var(--max-width));
      background:var(--modal-bg);
      border-radius:var(--radius);
      box-shadow:0 10px 30px rgba(0,0,0,0.2);
      transform:translateY(12px) scale(0.995);
      opacity:0;
      transition:opacity var(--transition), transform var(--transition);
      max-height:80vh;
      overflow:auto;
      outline: none;
    }

    .modal-overlay.is-open .modal{
      transform:translateY(0) scale(1);
      opacity:1;
    }

    .modal-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:var(--padding);
      border-bottom:1px solid #eef2f7;
    }

    .modal-title{
      margin:0;
      font-size:1.05rem;
      font-weight:700;
    }

    .modal-close{
      background:transparent;
      border:0;
      padding:0.25rem;
      cursor:pointer;
      border-radius:6px;
      color:#374151;
      font-size:1rem;
    }
    .modal-close:focus{
      outline:2px solid #BEE3F8;
      outline-offset:2px;
    }

    .modal-body{
      padding:var(--padding);
      color:#334155;
      font-size:0.98rem;
      line-height:1.45;
    }

    .modal-footer{
      padding:var(--padding);
      border-top:1px solid #eef2f7;
      display:flex;
      gap:0.5rem;
      justify-content:flex-end;
    }

    .btn{
      padding:0.5rem 0.9rem;
      border-radius:6px;
      border:1px solid #cbd5e1;
      background:white;
      cursor:pointer;
    }

    .btn.primary{
      background:#2563eb;
      color:white;
      border-color:transparent;
    }

    /* Visually hide when closed, but keep available to assistive tech if needed */
    .sr-only{
      position:absolute;
      width:1px;
      height:1px;
      padding:0;
      margin:-1px;
      overflow:hidden;
      clip:rect(0,0,0,0);
      white-space:nowrap;
      border:0;
    }

    @media (prefers-reduced-motion: reduce){
      .modal, .modal-overlay { transition:none; }
    }
  </style>
</head>
<body>
  <h1>Modal Dialog Component</h1>
  <p>Click the button to open the modal.</p>

  <button class="trigger" aria-haspopup="dialog" aria-controls="example-modal">Open modal</button>

  <!-- Modal overlay and dialog -->
  <div id="example-modal-overlay" class="modal-overlay" aria-hidden="true">
    <div id="example-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc" tabindex="-1">
      <header class="modal-header">
        <h2 id="modal-title" class="modal-title">Example Modal</h2>
        <button class="modal-close" aria-label="Close dialog">&times;</button>
      </header>
      <div class="modal-body" id="modal-desc">
        <p>This is an example modal dialog. It is closed by default.</p>
        <p>Focus is trapped inside while open. You can close it with the Escape key, the close button, or by clicking the shaded overlay.</p>
        <label>
          Your name: <input type="text" placeholder="Type your name" />
        </label>
      </div>
      <footer class="modal-footer">
        <button class="btn" data-action="cancel">Cancel</button>
        <button class="btn primary" data-action="submit">Save</button>
      </footer>
    </div>
  </div>

  <script>
    (function(){
      const overlay = document.getElementById('example-modal-overlay');
      const dialog = document.getElementById('example-modal');
      const triggers = Array.from(document.querySelectorAll('.trigger'));
      const closeButtons = Array.from(dialog.querySelectorAll('.modal-close, [data-action="cancel"]'));
      const submitBtn = dialog.querySelector('[data-action="submit"]');

      let lastFocused = null;

      // focusable selector
      const FOCUSABLE = 'a[href], area[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, [tabindex]:not([tabindex="-1"]), [contenteditable]';

      function getFocusable(container){
        return Array.from(container.querySelectorAll(FOCUSABLE)).filter(el => {
          return el.offsetWidth > 0 || el.offsetHeight > 0 || el.getClientRects().length;
        });
      }

      function openModal(){
        lastFocused = document.activeElement;
        overlay.classList.add('is-open');
        overlay.setAttribute('aria-hidden','false');
        // prevent background scroll
        document.documentElement.style.overflow = 'hidden';
        // small timeout to ensure transitions and layout
        window.setTimeout(() => {
          // focus first focusable element or dialog itself
          const focusable = getFocusable(dialog);
          if (focusable.length) {
            focusable[0].focus();
          } else {
            dialog.focus();
          }
        }, 50);
        document.addEventListener('keydown', onKeyDown);
      }

      function closeModal(returnFocus = true){
        overlay.classList.remove('is-open');
        overlay.setAttribute('aria-hidden','true');
        document.documentElement.style.overflow = '';
        document.removeEventListener('keydown', onKeyDown);
        if (returnFocus && lastFocused && typeof lastFocused.focus === 'function') {
          lastFocused.focus();
        }
      }

      // Click triggers
      triggers.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          openModal();
        });
      });

      // Close buttons inside dialog
      closeButtons.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          closeModal();
        });
      });

      // Example submit action (closes modal)
      if (submitBtn){
        submitBtn.addEventListener('click', (e) => {
          e.preventDefault();
          // perform any submit actions here...
          closeModal();
        });
      }

      // Clicking on overlay (outside dialog) closes it
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          closeModal();
        }
      });

      // Keyboard handling: Esc to close, Tab to trap focus
      function onKeyDown(e){
        if (e.key === 'Escape' || e.key === 'Esc') {
          e.preventDefault();
          closeModal();
          return;
        }
        if (e.key === 'Tab') {
          // focus trap
          const focusable = getFocusable(dialog);
          if (focusable.length === 0) {
            // nothing to trap
            e.preventDefault();
            return;
          }
          const first = focusable[0];
          const last = focusable[focusable.length - 1];
          if (e.shiftKey) {
            if (document.activeElement === first || document.activeElement === dialog) {
              e.preventDefault();
              last.focus();
            }
          } else {
            if (document.activeElement === last) {
              e.preventDefault();
              first.focus();
            }
          }
        }
      }

      // Ensure modal is hidden on init (closed by default)
      overlay.setAttribute('aria-hidden','true');
      overlay.classList.remove('is-open');
    })();
  </script>
</body>
</html>