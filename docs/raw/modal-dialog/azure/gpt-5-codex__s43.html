<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Modal Dialog Example</title>
  <style>
    :root {
      color-scheme: light dark;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      background: linear-gradient(135deg, #c9d6ff, #e2e2e2);
    }

    .trigger {
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      border: none;
      border-radius: 999px;
      cursor: pointer;
      color: #fff;
      background: linear-gradient(135deg, #667eea, #764ba2);
      box-shadow: 0 12px 24px 0 rgba(118, 75, 162, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .trigger:focus-visible {
      outline: 3px solid rgba(102, 126, 234, 0.8);
      outline-offset: 4px;
    }

    .trigger:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 32px 0 rgba(118, 75, 162, 0.45);
    }

    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(15, 23, 42, 0.55);
      backdrop-filter: blur(3px);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      z-index: 1000;
    }

    .modal-overlay.is-open {
      display: flex;
    }

    .modal {
      max-width: 28rem;
      width: 100%;
      background: rgba(255, 255, 255, 0.95);
      color: #0f172a;
      border-radius: 1.25rem;
      box-shadow: 0 24px 48px rgba(15, 23, 42, 0.25);
      transform: translateY(20px) scale(0.98);
      opacity: 0;
      transition: transform 0.3s cubic-bezier(0.22, 0.61, 0.36, 1), opacity 0.25s ease;
      overflow: hidden;
    }

    .modal-overlay.is-open .modal {
      transform: translateY(0) scale(1);
      opacity: 1;
    }

    .modal-header {
      padding: 1.75rem 2rem 1rem;
      border-bottom: 1px solid rgba(15, 23, 42, 0.08);
    }

    .modal-title {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .modal-body {
      padding: 1.5rem 2rem 2rem;
      line-height: 1.6;
      font-size: 1rem;
    }

    .modal-actions {
      padding: 1.5rem 2rem 2rem;
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      border-top: 1px solid rgba(15, 23, 42, 0.08);
    }

    .modal button {
      font: inherit;
      padding: 0.65rem 1.25rem;
      border-radius: 0.75rem;
      cursor: pointer;
      border: none;
      transition: background 0.2s ease, transform 0.15s ease;
    }

    .modal button:focus-visible {
      outline: 3px solid rgba(102, 126, 234, 0.8);
      outline-offset: 3px;
    }

    .btn-secondary {
      background: rgba(102, 126, 234, 0.12);
      color: #4c1d95;
    }

    .btn-secondary:hover {
      background: rgba(102, 126, 234, 0.2);
      transform: translateY(-1px);
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 24px rgba(118, 75, 162, 0.35);
    }

    @media (max-width: 480px) {
      .modal {
        border-radius: 1rem;
      }

      .modal-header,
      .modal-body,
      .modal-actions {
        padding-left: 1.25rem;
        padding-right: 1.25rem;
      }
    }
  </style>
</head>
<body>
  <button class="trigger" aria-haspopup="dialog" aria-controls="example-modal" aria-expanded="false">
    Launch Modal Dialog
  </button>

  <div class="modal-overlay" id="modal-overlay" hidden>
    <section class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-description" id="example-modal">
      <header class="modal-header">
        <h2 class="modal-title" id="modal-title">Stay in the loop</h2>
      </header>
      <div class="modal-body" id="modal-description">
        <p>Subscribe to receive curated UI tips, design inspiration, and release notes straight to your inbox every other week.</p>
        <label for="email-input" style="display: block; margin-top: 1rem; font-weight: 600;">Email address</label>
        <input id="email-input" type="email" placeholder="you@example.com" required style="width: 100%; margin-top: 0.5rem; padding: 0.65rem 0.85rem; border-radius: 0.75rem; border: 1px solid rgba(15, 23, 42, 0.2); font: inherit;" />
      </div>
      <div class="modal-actions">
        <button type="button" class="btn-secondary" data-close>Not now</button>
        <button type="button" class="btn-primary">Subscribe</button>
      </div>
    </section>
  </div>

  <script>
    (function () {
      const trigger = document.querySelector('.trigger');
      const overlay = document.getElementById('modal-overlay');
      const modal = document.getElementById('example-modal');
      const closeBtns = modal.querySelectorAll('[data-close]');
      const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
      let previouslyFocused = null;

      function trapFocus(event) {
        const focusable = modal.querySelectorAll(focusableSelectors);
        if (!focusable.length) return;
        const first = focusable[0];
        const last = focusable[focusable.length - 1];
        if (event.key === 'Tab') {
          if (event.shiftKey) {
            if (document.activeElement === first) {
              event.preventDefault();
              last.focus();
            }
          } else {
            if (document.activeElement === last) {
              event.preventDefault();
              first.focus();
            }
          }
        }
      }

      function openModal() {
        previouslyFocused = document.activeElement;
        overlay.hidden = false;
        overlay.classList.add('is-open');
        modal.addEventListener('keydown', trapFocus);
        trigger.setAttribute('aria-expanded', 'true');
        requestAnimationFrame(() => {
          const focusable = modal.querySelectorAll(focusableSelectors);
          (focusable[0] || modal).focus();
        });
        document.addEventListener('keydown', handleEscape, { once: false });
      }

      function closeModal() {
        overlay.classList.remove('is-open');
        modal.removeEventListener('keydown', trapFocus);
        trigger.setAttribute('aria-expanded', 'false');
        document.removeEventListener('keydown', handleEscape);
        setTimeout(() => {
          overlay.hidden = true;
          if (previouslyFocused) previouslyFocused.focus();
        }, 200);
      }

      function handleEscape(event) {
        if (event.key === 'Escape') {
          closeModal();
        }
      }

      trigger.addEventListener('click', openModal);

      overlay.addEventListener('click', (event) => {
        if (event.target === overlay) {
          closeModal();
        }
      });

      closeBtns.forEach((btn) => btn.addEventListener('click', closeModal));

      window.addEventListener('keydown', (event) => {
        if (event.key === 'Escape' && overlay.classList.contains('is-open')) {
          closeModal();
        }
      });
    })();
  </script>
</body>
</html>