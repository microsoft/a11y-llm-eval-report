<html lang="en">
<head>
<meta charset="utf-8">
<title>Modal Dialog Example</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root {
  color-scheme: light dark;
  font-family: system-ui, sans-serif;
  background-color: #f7f7f9;
}
body {
  margin: 0;
  padding: 2rem;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  min-height: 100vh;
  background: linear-gradient(135deg, #f8f9ff, #e8ecff);
}
.trigger {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 600;
  color: #fff;
  background: #3c5afe;
  border: none;
  border-radius: 0.75rem;
  cursor: pointer;
  box-shadow: 0 10px 20px rgba(60, 90, 254, 0.25);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.trigger:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 24px rgba(60, 90, 254, 0.35);
}
.trigger:active {
  transform: translateY(1px);
  box-shadow: 0 6px 12px rgba(60, 90, 254, 0.25);
}
.modal {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 2rem;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease;
}
.modal[data-state="open"] {
  opacity: 1;
  pointer-events: all;
}
.modal__backdrop {
  position: absolute;
  inset: 0;
  background: rgba(18, 24, 38, 0.55);
  backdrop-filter: blur(6px);
  transition: opacity 0.25s ease;
}
.modal__dialog {
  position: relative;
  max-width: 420px;
  width: min(420px, 100%);
  background: #fff;
  color: #24273a;
  border-radius: 1.25rem;
  padding: 2rem;
  box-shadow: 0 24px 50px rgba(18, 24, 38, 0.28);
  display: grid;
  gap: 1.25rem;
  transform: translateY(15px);
  transition: transform 0.25s ease;
}
.modal[data-state="open"] .modal__dialog {
  transform: translateY(0);
}
.modal__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.modal__title {
  margin: 0;
  font-size: 1.5rem;
  font-weight: 700;
}
.modal__close {
  background: rgba(60, 90, 254, 0.1);
  border: none;
  color: #3c5afe;
  width: 2.25rem;
  height: 2.25rem;
  border-radius: 999px;
  font-size: 1.1rem;
  cursor: pointer;
  display: grid;
  place-items: center;
  transition: background 0.2s ease, transform 0.2s ease;
}
.modal__close:hover {
  background: rgba(60, 90, 254, 0.2);
  transform: rotate(6deg);
}
.modal__body {
  font-size: 0.975rem;
  line-height: 1.6;
  color: #4a4e68;
}
.modal__footer {
  display: flex;
  gap: 0.75rem;
  justify-content: flex-end;
}
.modal__button {
  padding: 0.6rem 1.2rem;
  border-radius: 0.75rem;
  font-weight: 600;
  border: none;
  cursor: pointer;
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}
.modal__button--primary {
  background: #3c5afe;
  color: #fff;
  box-shadow: 0 8px 18px rgba(60, 90, 254, 0.28);
}
.modal__button--primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 22px rgba(60, 90, 254, 0.35);
}
.modal__button--outline {
  background: transparent;
  color: #3c5afe;
  border: 1px solid rgba(60, 90, 254, 0.35);
}
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    transition: none !important;
    animation-duration: 0.001s !important;
  }
}
</style>
</head>
<body>
<button class="trigger" type="button">Open Modal</button>

<div class="modal" id="modal" data-state="closed" aria-hidden="true">
  <div class="modal__backdrop" data-close></div>
  <div class="modal__dialog" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-description">
    <div class="modal__header">
      <h2 class="modal__title" id="modal-title">Stay in the loop</h2>
      <button class="modal__close" type="button" aria-label="Close dialog" data-close>&times;</button>
    </div>
    <div class="modal__body" id="modal-description">
      <p>Subscribe to our newsletter and be the first to receive updates on new features, curated resources, and exclusive offers tailored for you.</p>
    </div>
    <div class="modal__footer">
      <button class="modal__button modal__button--outline" type="button" data-close>Maybe later</button>
      <button class="modal__button modal__button--primary" type="button">Subscribe</button>
    </div>
  </div>
</div>

<script>
(function () {
  const openButton = document.querySelector('.trigger');
  const modal = document.getElementById('modal');
  const closeElements = modal.querySelectorAll('[data-close]');
  const focusableSelectors = [
    'a[href]',
    'area[href]',
    'button:not([disabled])',
    'input:not([disabled]):not([type="hidden"])',
    'select:not([disabled])',
    'textarea:not([disabled])',
    '[tabindex]:not([tabindex="-1"])'
  ];
  let lastFocusedElement = null;

  function getFocusableElements() {
    return [...modal.querySelectorAll(focusableSelectors.join(','))].filter(el => el.offsetParent !== null);
  }

  function openModal() {
    if (modal.dataset.state === 'open') return;
    lastFocusedElement = document.activeElement;
    modal.dataset.state = 'open';
    modal.setAttribute('aria-hidden', 'false');
    const focusables = getFocusableElements();
    if (focusables.length) {
      focusables[0].focus();
    }
    document.addEventListener('keydown', handleKeyDown);
  }

  function closeModal() {
    if (modal.dataset.state === 'closed') return;
    modal.dataset.state = 'closed';
    modal.setAttribute('aria-hidden', 'true');
    document.removeEventListener('keydown', handleKeyDown);
    if (lastFocusedElement && typeof lastFocusedElement.focus === 'function') {
      lastFocusedElement.focus();
    }
  }

  function handleKeyDown(event) {
    if (event.key === 'Escape') {
      event.preventDefault();
      closeModal();
    }
    if (event.key === 'Tab') {
      trapFocus(event);
    }
  }

  function trapFocus(event) {
    const focusables = getFocusableElements();
    if (focusables.length === 0) {
      event.preventDefault();
      return;
    }
    const first = focusables[0];
    const last = focusables[focusables.length - 1];
    if (event.shiftKey && document.activeElement === first) {
      event.preventDefault();
      last.focus();
    } else if (!event.shiftKey && document.activeElement === last) {
      event.preventDefault();
      first.focus();
    }
  }

  openButton.addEventListener('click', openModal);
  closeElements.forEach(el => el.addEventListener('click', closeModal));
})();
</script>
</body>
</html>