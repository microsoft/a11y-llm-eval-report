<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Expand/Collapse Widget Example</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.5;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            color: #333;
            background-color: #f9f9f9;
        }

        h1 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .example {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .accordion-trigger {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: none;
            border: none;
            font-size: 1.125rem;
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            text-align: left;
        }

        .accordion-trigger:hover {
            background-color: #f0f4f8;
        }

        .accordion-trigger:focus-visible {
            outline: 2px solid #0056b3;
            outline-offset: -2px;
            background-color: #f0f4f8;
        }

        /* Icon rotation */
        .icon {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-right: 2px solid #666;
            border-bottom: 2px solid #666;
            transform: rotate(45deg);
            transition: transform 0.2s ease;
            margin-left: 1rem;
        }

        .accordion-trigger[aria-expanded="true"] .icon {
            transform: rotate(-135deg);
        }

        .details {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease-out;
            visibility: hidden;
        }

        /* When the content is expanded */
        .details:not([hidden]) {
            padding-bottom: 1.5rem;
            max-height: 500px; /* Arbitrary large height for animation */
            visibility: visible;
        }
    </style>
</head>
<body>

    <main>
        <h1>Accessible Accordion Widgets</h1>

        <!-- Widget 1 -->
        <div class="example">
            <h3>
                <button type="button" 
                        class="accordion-trigger" 
                        aria-expanded="false" 
                        aria-controls="sect1" 
                        id="accordion1id">
                    <span>What is accessibility?</span>
                    <span class="icon" aria-hidden="true"></span>
                </button>
            </h3>
            <div id="sect1" 
                 role="region" 
                 aria-labelledby="accordion1id" 
                 class="details"
                 hidden>
                <p>Web accessibility means that websites, tools, and technologies are designed and developed so that people with disabilities can use them. More specifically, people can perceive, understand, navigate, and interact with the Web.</p>
            </div>
        </div>

        <!-- Widget 2 -->
        <div class="example">
            <h3>
                <button type="button" 
                        class="accordion-trigger" 
                        aria-expanded="false" 
                        aria-controls="sect2" 
                        id="accordion2id">
                    <span>Why is semantic HTML important?</span>
                    <span class="icon" aria-hidden="true"></span>
                </button>
            </h3>
            <div id="sect2" 
                 role="region" 
                 aria-labelledby="accordion2id" 
                 class="details"
                 hidden>
                <p>Semantic HTML provides meaning to the web page rather than just presentation. It helps screen readers and other assistive technologies understand the structure and content of your page, improving navigation for all users.</p>
                <p>It also offers SEO benefits and makes code easier to maintain.</p>
            </div>
        </div>

        <!-- Widget 3 -->
        <div class="example">
            <h3>
                <button type="button" 
                        class="accordion-trigger" 
                        aria-expanded="false" 
                        aria-controls="sect3" 
                        id="accordion3id">
                    <span>How does this widget work?</span>
                    <span class="icon" aria-hidden="true"></span>
                </button>
            </h3>
            <div id="sect3" 
                 role="region" 
                 aria-labelledby="accordion3id" 
                 class="details"
                 hidden>
                <p>This widget uses standard HTML buttons with ARIA attributes. The <code>aria-expanded</code> attribute tells screen readers if the content is open or closed. The <code>aria-controls</code> attribute links the button to the content div.</p>
            </div>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const triggers = document.querySelectorAll('.accordion-trigger');

            triggers.forEach(trigger => {
                trigger.addEventListener('click', () => {
                    const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
                    const contentId = trigger.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);

                    // Toggle the trigger state
                    trigger.setAttribute('aria-expanded', !isExpanded);

                    // Toggle the content visibility using the hidden attribute
                    if (isExpanded) {
                        content.setAttribute('hidden', '');
                    } else {
                        content.removeAttribute('hidden');
                    }
                });
            });
        });
    </script>
</body>
</html>