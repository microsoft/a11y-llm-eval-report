<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Expand/Collapse Widget Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 2rem;
            background-color: #f4f4f9;
            color: #333;
        }

        h1 {
            text-align: center;
            margin-bottom: 2rem;
        }

        .example {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            max-width: 600px;
            margin: 0 auto 1.5rem auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            overflow: hidden;
        }

        .accordion-trigger {
            width: 100%;
            background: none;
            border: none;
            text-align: left;
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #2c3e50;
            transition: background-color 0.2s;
        }

        .accordion-trigger:hover,
        .accordion-trigger:focus {
            background-color: #eef2f7;
            outline: none;
        }

        .accordion-trigger:focus-visible {
            outline: 2px solid #0056b3;
            outline-offset: -2px;
            background-color: #eef2f7;
        }

        .accordion-trigger[aria-expanded="true"] {
            border-bottom: 1px solid #eee;
            background-color: #f8f9fa;
        }

        /* SVG Icon rotation */
        .accordion-icon {
            width: 24px;
            height: 24px;
            transition: transform 0.3s ease;
            fill: #555;
        }

        .accordion-trigger[aria-expanded="true"] .accordion-icon {
            transform: rotate(180deg);
        }

        .details {
            padding: 0 1.5rem;
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.3s ease-out, padding 0.3s ease;
            visibility: hidden; /* Hides content from screen readers when collapsed */
        }

        .details > div {
            overflow: hidden;
        }

        .details.open {
            grid-template-rows: 1fr;
            padding: 1rem 1.5rem;
            visibility: visible;
        }
    </style>
</head>
<body>

    <h1>Expand/Collapse Examples</h1>

    <!-- Example 1 -->
    <div class="example">
        <h3>
            <button type="button" aria-expanded="false" class="accordion-trigger" aria-controls="sect1" id="accordion1id">
                <span>Section 1: Introduction</span>
                <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path>
                </svg>
            </button>
        </h3>
        <div id="sect1" role="region" aria-labelledby="accordion1id" class="details">
            <div>
                <p>This is the content for the first section. It is hidden by default. The implementation uses semantic HTML buttons and ARIA attributes to ensure screen readers understand the relationship between the trigger and the content.</p>
                <p>The transition effect is achieved using CSS Grid to animate height from 0 to auto seamlessly.</p>
            </div>
        </div>
    </div>

    <!-- Example 2 -->
    <div class="example">
        <h3>
            <button type="button" aria-expanded="false" class="accordion-trigger" aria-controls="sect2" id="accordion2id">
                <span>Section 2: Accessibility Features</span>
                <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path>
                </svg>
            </button>
        </h3>
        <div id="sect2" role="region" aria-labelledby="accordion2id" class="details">
            <div>
                <ul>
                    <li><strong>Button element:</strong> Used for keyboard focus and native click handling.</li>
                    <li><strong>aria-expanded:</strong> Indicates the state (open/closed) to assistive technology.</li>
                    <li><strong>aria-controls:</strong> Connects the button to the content panel ID.</li>
                    <li><strong>aria-labelledby:</strong> Connects the panel back to the button title.</li>
                    <li><strong>role="region":</strong> Defines the content area as a landmark.</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Example 3 -->
    <div class="example">
        <h3>
            <button type="button" aria-expanded="false" class="accordion-trigger" aria-controls="sect3" id="accordion3id">
                <span>Section 3: Customization</span>
                <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path>
                </svg>
            </button>
        </h3>
        <div id="sect3" role="region" aria-labelledby="accordion3id" class="details">
            <div>
                <p>You can customize the styling of the trigger and the content panel easily. The JavaScript is generic and relies on data attributes or class names rather than specific IDs for logic.</p>
                <a href="#">Focusable link inside content</a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const triggers = document.querySelectorAll('.accordion-trigger');

            triggers.forEach(trigger => {
                trigger.addEventListener('click', () => {
                    const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
                    const contentId = trigger.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);

                    // Toggle Aria-expanded on the button
                    trigger.setAttribute('aria-expanded', !isExpanded);

                    // Toggle visual state on the content panel
                    if (content) {
                        content.classList.toggle('open');
                        
                        // Handle visibility for accessibility tools that might ignore CSS visibility
                        if (!isExpanded) {
                            // Opening
                            content.removeAttribute('hidden');
                        } else {
                            // Closing - wait for animation if desired, or set immediately
                            // Using a timeout equal to transition time for 'hidden' attribute is a common pattern,
                            // but CSS visibility:hidden handles accessibilty tree removal instantly.
                            // We rely on the CSS class 'open' toggling visibility.
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>