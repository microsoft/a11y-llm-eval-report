<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .example {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        button:hover, button:focus {
            background-color: #0056b3;
            outline: 3px solid rgba(0, 123, 255, 0.4);
        }
        button:active {
            background-color: #004085;
        }
        button[aria-expanded="true"] {
            background-color: #0056b3;
        }
        button[aria-expanded="true"] .toggle-icon::after {
            content: " \25B2";
        }
        button[aria-expanded="false"] .toggle-icon::after {
            content: " \25BC";
        }
        .details {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            max-height: 0;
        }
        .details.open {
            max-height: 500px;
        }
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Examples</h1>

    <div class="example">
        <button id="toggle1" aria-expanded="false" aria-controls="content1">
            <span class="toggle-icon">How does an expand/collapse widget work?</span>
        </button>
        <div id="content1" class="details" role="region" aria-labelledby="toggle1">
            <p>This is a simple implementation using HTML, CSS, and JavaScript. The button toggles the visibility of the content section below it. The content is initially hidden (collapsed) and expands when the button is clicked, using CSS transitions for a smooth effect.</p>
            <p>Accessibility features include ARIA attributes like <code>aria-expanded</code> and <code>aria-controls</code> to communicate the state and relationship to assistive technologies.</p>
        </div>
    </div>

    <div class="example">
        <button id="toggle2" aria-expanded="false" aria-controls="content2">
            <span class="toggle-icon">What are the benefits?</span>
        </button>
        <div id="content2" class="details" role="region" aria-labelledby="toggle2">
            <ul>
                <li>Save screen space by hiding detailed content until needed.</li>
                <li>Improve user focus by presenting information progressively.</li>
                <li>Can enhance performance on content-heavy pages by reducing initial DOM size.</li>
                <li>When implemented accessibly, they are usable by everyone, including keyboard and screen reader users.</li>
            </ul>
        </div>
    </div>

    <div class="example">
        <button id="toggle3" aria-expanded="false" aria-controls="content3">
            <span class="toggle-icon">Technical Notes</span>
        </button>
        <div id="content3" class="details" role="region" aria-labelledby="toggle3">
            <p>The widget uses a <code>max-height</code> CSS transition for the smooth open/close animation. The JavaScript toggles a CSS class to trigger the animation and updates the <code>aria-expanded</code> attribute.</p>
            <p>For better accessibility, focus management is handled naturally by the button element, and the content area has a <code>role="region"</code> to denote a landmark when expanded.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const toggleButtons = document.querySelectorAll('button[aria-expanded][aria-controls]');
            toggleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const isExpanded = this.getAttribute('aria-expanded') === 'true';
                    const contentId = this.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);

                    this.setAttribute('aria-expanded', !isExpanded);
                    content.classList.toggle('open');
                });
            });
        });
    </script>
</body>
</html>