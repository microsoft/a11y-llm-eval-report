<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Accessible Expand/Collapse Widget</title>
  <style>
    :root{
      --accent: #0b6efd;
      --bg: #ffffff;
      --muted: #6b7280;
      --radius: 8px;
      --transition: 200ms ease;
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      line-height:1.4;
      background:#f7f8fb;
      color:#0f172a;
      padding:2rem;
    }

    h1{font-size:1.25rem;margin:0 0 1rem 0}
    p.lead{margin:0 0 1.25rem 0;color:var(--muted)}

    .example{
      background:var(--bg);
      border:1px solid #e6e9ee;
      border-radius:var(--radius);
      padding:1rem;
      margin-bottom:1rem;
      box-shadow: 0 1px 2px rgba(15,23,42,0.03);
      max-width:720px;
    }

    /* Button styling */
    .expander {
      display:flex;
      align-items:center;
      justify-content:space-between;
      width:100%;
      background:transparent;
      border:1px solid transparent;
      padding:0.5rem 0.75rem;
      border-radius:6px;
      cursor:pointer;
      font-size:1rem;
      text-align:left;
      gap:0.5rem;
    }
    .expander:focus{
      outline:3px solid rgba(11,110,253,0.12);
      box-shadow:0 0 0 4px rgba(11,110,253,0.06);
    }
    .expander:hover{
      background:#fbfdff;
    }
    .expander .label{
      display:flex;
      gap:0.5rem;
      align-items:center;
      flex:1 1 auto;
    }
    .expander .title{
      font-weight:600;
    }
    .expander .hint{
      color:var(--muted);
      font-size:0.9rem;
    }

    /* Chevron */
    .chev{
      width:1.25rem;
      height:1.25rem;
      display:inline-block;
      transition:transform var(--transition);
      color:var(--accent);
      flex:0 0 auto;
    }
    .expanded .chev{ transform:rotate(180deg); }

    /* Controlled content */
    .details{
      margin-top:0.75rem;
      padding:0.75rem;
      border-radius:6px;
      background:#fbfdff;
      border:1px solid #eef2ff;
    }

    /* Hidden state for JS toggle: when [hidden] browsers remove from flow; we keep consistent visuals */
    /* We also set [data-anim] class to allow simple CSS animation when toggled via JS (not relying on hidden attribute). */
    .details[data-state="collapsed"]{
      display:none;
    }

    /* Small utility */
    .meta{font-size:0.85rem;color:var(--muted);margin-top:0.5rem}
    a{color:var(--accent)}
    .sr-only{
      border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;
    }
  </style>
</head>
<body>
  <main>
    <h1>Accessible Expand/Collapse Widget</h1>
    <p class="lead">Each widget is wrapped with a container that has the <code>example</code> class. The controlled content container uses the <code>details</code> class.</p>

    <!-- Example widget (wrapped in .example) -->
    <div class="example" id="example-1">
      <button
        class="expander"
        id="toggle-1"
        aria-expanded="false"
        aria-controls="content-1"
        aria-describedby="desc-1"
        type="button"
      >
        <span class="label">
          <span class="title">Show more information</span>
          <span id="desc-1" class="hint">Additional details about the topic</span>
        </span>
        <svg class="chev" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
          <path fill="currentColor" d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"/>
        </svg>
      </button>

      <div
        id="content-1"
        class="details"
        role="region"
        aria-labelledby="toggle-1"
        data-state="collapsed"
      >
        <p><strong>Overview:</strong> This section contains supplementary information. Use the button above to expand or collapse this area. The button reflects the current state with <code>aria-expanded</code> and controls this region through <code>aria-controls</code>.</p>
        <p class="meta">Tip: You can navigate to the expand/collapse button using the Tab key, and activate it with Enter or Space.</p>
        <p>Learn more: <a href="https://www.w3.org/WAI/ARIA/apg/patterns/Disclosure/" target="_blank" rel="noopener noreferrer">WAI-ARIA disclosure pattern</a>.</p>
      </div>
    </div>

    <!-- Another example to show multiple widgets -->
    <div class="example" id="example-2">
      <button
        class="expander"
        id="toggle-2"
        aria-expanded="false"
        aria-controls="content-2"
        type="button"
      >
        <span class="label">
          <span class="title">Release notes</span>
          <span class="hint">View the latest changes</span>
        </span>
        <svg class="chev" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
          <path fill="currentColor" d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"/>
        </svg>
      </button>

      <div
        id="content-2"
        class="details"
        role="region"
        aria-labelledby="toggle-2"
        data-state="collapsed"
      >
        <ul>
          <li>Version 2.3.1 - Bug fixes and performance improvements.</li>
          <li>Version 2.3.0 - New export feature for reports.</li>
          <li>Version 2.2.0 - Improved accessibility and keyboard support.</li>
        </ul>
      </div>
    </div>
  </main>

  <script>
    (function(){
      // Initialize all expander widgets within .example containers
      const examples = document.querySelectorAll('.example');
      examples.forEach(example => {
        const button = example.querySelector('.expander');
        const contentId = button.getAttribute('aria-controls');
        const content = document.getElementById(contentId);

        // Ensure initial state is collapsed in ARIA and DOM
        if (!content) return;
        content.setAttribute('data-state', 'collapsed');
        button.classList.remove('expanded');

        function open() {
          button.setAttribute('aria-expanded', 'true');
          content.setAttribute('data-state', 'open');
          button.classList.add('expanded');
        }
        function close() {
          button.setAttribute('aria-expanded', 'false');
          content.setAttribute('data-state', 'collapsed');
          button.classList.remove('expanded');
        }
        function toggle(){
          const expanded = button.getAttribute('aria-expanded') === 'true';
          if (expanded) {
            close();
            // Move focus back to button for keyboard users if desired (keeps context)
            button.focus();
          } else {
            open();
          }
        }

        // Click toggles
        button.addEventListener('click', toggle);

        // Spacebar on button: native button handles Enter/Space, but ensure Space doesn't scroll page
        button.addEventListener('keydown', (e) => {
          if (e.code === 'Space' || e.key === ' '){
            // Let the click event handle toggling on keyup; prevent page scroll
            e.preventDefault();
          }
        });

        // Allow closing the panel with Escape when open
        content.addEventListener('keydown', function(e){
          if (e.key === 'Escape' || e.code === 'Escape') {
            close();
            button.focus();
          }
        });
      });
    })();
  </script>
</body>
</html>