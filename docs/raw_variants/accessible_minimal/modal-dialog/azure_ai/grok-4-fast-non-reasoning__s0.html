<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Dialog Example</title>
    <style>
        /* Reset and base styles for accessibility */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.5;
            color: #333;
            padding: 20px;
            background-color: #f5f5f5;
        }

        /* Button styles */
        .trigger {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .trigger:hover {
            background-color: #0056b3;
        }

        .trigger:focus {
            outline: 2px solid #007bff;
            outline-offset: 2px;
        }

        /* Modal overlay */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-overlay[open] {
            display: flex;
        }

        /* Modal dialog */
        .modal-dialog {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Modal header */
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25em;
            font-weight: bold;
        }

        /* Close button */
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }

        .modal-close:hover {
            background-color: #f0f0f0;
            color: #000;
        }

        .modal-close:focus {
            outline: 2px solid #007bff;
            outline-offset: 2px;
        }

        /* Modal body */
        .modal-body {
            padding: 20px;
        }

        /* Modal footer */
        .modal-footer {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .modal-btn {
            padding: 10px 20px;
            border: 1px solid #ccc;
            background-color: #f8f9fa;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.2s ease;
        }

        .modal-btn:hover {
            background-color: #e9ecef;
        }

        .modal-btn:focus {
            outline: 2px solid #007bff;
            outline-offset: 2px;
        }

        .modal-btn-primary {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

        .modal-btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        /* Focus management for accessibility */
        .modal-overlay[open] .modal-dialog {
            outline: none;
        }

        /* Screen reader only text */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Responsive design */
        @media (max-width: 600px) {
            .modal-dialog {
                width: 95%;
                margin: 20px;
            }

            .modal-header,
            .modal-body,
            .modal-footer {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <main>
        <h1>Modal Dialog Example</h1>
        <p>This page demonstrates an accessible modal dialog component. Click the button below to open the modal.</p>
        
        <button class="trigger" aria-describedby="modal-description">
            Open Modal Dialog
        </button>
    </main>

    <!-- Modal Dialog -->
    <div class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-description" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-header">
                <h2 id="modal-title" class="modal-title">Welcome to Our Modal</h2>
                <button class="modal-close" aria-label="Close modal dialog">
                    Ã—
                </button>
            </div>
            
            <div class="modal-body">
                <p id="modal-description">This is an example of an accessible modal dialog. It includes proper ARIA attributes, keyboard navigation, and focus management. The modal is closed by default and opens when the trigger button is activated.</p>
                
                <p>You can navigate through the modal using the Tab key. Press Escape to close the modal or use the close button.</p>
                
                <form>
                    <label for="user-name">Name:</label>
                    <input type="text" id="user-name" name="name" placeholder="Enter your name">
                    
                    <label for="user-email">Email:</label>
                    <input type="email" id="user-email" name="email" placeholder="Enter your email">
                </form>
            </div>
            
            <div class="modal-footer">
                <button class="modal-btn" type="button">Cancel</button>
                <button class="modal-btn modal-btn-primary" type="button">Save Changes</button>
            </div>
        </div>
    </div>

    <script>
        // Modal functionality
        (function() {
            const triggerBtn = document.querySelector('.trigger');
            const modalOverlay = document.querySelector('.modal-overlay');
            const closeBtn = document.querySelector('.modal-close');
            const cancelBtn = document.querySelector('.modal-footer .modal-btn:not(.modal-btn-primary)');
            const modalDialog = document.querySelector('.modal-dialog');
            
            // Form elements for focus management
            const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            let focusableContent = modalDialog.querySelectorAll(focusableElements);
            let firstFocusableElement = modalDialog.querySelector(focusableElements);
            let lastFocusableElement = modalDialog.querySelectorAll(focusableElements)[focusableContent.length - 1];

            // Open modal
            function openModal() {
                modalOverlay.setAttribute('open', '');
                modalOverlay.focus();
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
                
                // Set initial focus to first focusable element
                setTimeout(() => firstFocusableElement.focus(), 100);
                
                // Trap focus within modal
                modalOverlay.addEventListener('keydown', trapFocus);
            }

            // Close modal
            function closeModal() {
                modalOverlay.removeAttribute('open');
                document.body.style.overflow = ''; // Restore scrolling
                
                // Return focus to trigger button
                triggerBtn.focus();
                
                // Remove focus trap
                modalOverlay.removeEventListener('keydown', trapFocus);
            }

            // Trap focus within modal
            function trapFocus(e) {
                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        // Shift + Tab
                        if (document.activeElement === firstFocusableElement) {
                            e.preventDefault();
                            lastFocusableElement.focus();
                        }
                    } else {
                        // Tab
                        if (document.activeElement === lastFocusableElement) {
                            e.preventDefault();
                            firstFocusableElement.focus();
                        }
                    }
                }
            }

            // Event listeners
            triggerBtn.addEventListener('click', openModal);
            
            closeBtn.addEventListener('click', closeModal);
            cancelBtn.addEventListener('click', closeModal);
            
            // Close on Escape key
            modalOverlay.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });

            // Close when clicking outside modal (but not on modal content)
            modalOverlay.addEventListener('click', function(e) {
                if (e.target === modalOverlay) {
                    closeModal();
                }
            });

            // Update focusable elements when modal opens
            function updateFocusableElements() {
                focusableContent = modalDialog.querySelectorAll(focusableElements);
                firstFocusableElement = modalDialog.querySelector(focusableElements);
                lastFocusableElement = modalDialog.querySelectorAll(focusableElements)[focusableContent.length - 1];
            }

            // Re-calculate focusable elements when modal opens
            const originalOpenModal = openModal;
            openModal = function() {
                originalOpenModal();
                setTimeout(updateFocusableElements, 50);
            };
        })();
    </script>
</body>
</html>