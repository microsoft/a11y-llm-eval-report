<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Dialog Example</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .trigger {
            background-color: #0066cc;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .trigger:hover {
            background-color: #0052a3;
        }

        .trigger:focus {
            outline: 2px solid #0066cc;
            outline-offset: 2px;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 10px 20px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            margin: 0;
            font-size: 1.5rem;
            color: #333;
        }

        .modal-close {
            background: transparent;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            padding: 0.25rem 0.5rem;
            line-height: 1;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .modal-close:hover {
            background-color: #f0f0f0;
            color: #333;
        }

        .modal-close:focus {
            outline: 2px solid #0066cc;
            outline-offset: 2px;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .modal-footer {
            padding: 1.5rem;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn-secondary {
            background-color: #e0e0e0;
            color: #333;
        }

        .btn-secondary:hover {
            background-color: #d0d0d0;
        }

        .btn-secondary:focus {
            outline: 2px solid #666;
            outline-offset: 2px;
        }

        .btn-primary {
            background-color: #0066cc;
            color: white;
        }

        .btn-primary:hover {
            background-color: #0052a3;
        }

        .btn-primary:focus {
            outline: 2px solid #0066cc;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <h1>Modal Dialog Component</h1>
    <p>Click the button below to open the modal dialog.</p>
    
    <button class="trigger" id="openModal" aria-haspopup="dialog">
        Open Modal
    </button>

    <div class="modal-overlay" id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDescription">
        <div class="modal" role="document">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Example Modal Dialog</h2>
                <button class="modal-close" id="closeModal" aria-label="Close modal">
                    Ã—
                </button>
            </div>
            <div class="modal-body">
                <p id="modalDescription">
                    This is an accessible modal dialog component. It traps focus within the modal when open, 
                    can be closed with the Escape key, and returns focus to the trigger button when closed.
                </p>
                <p>
                    Modal dialogs are useful for displaying important information or requiring user input 
                    without navigating away from the current page.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelButton">Cancel</button>
                <button class="btn btn-primary" id="confirmButton">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        const openModalBtn = document.getElementById('openModal');
        const modalOverlay = document.getElementById('modalOverlay');
        const closeModalBtn = document.getElementById('closeModal');
        const cancelBtn = document.getElementById('cancelButton');
        const confirmBtn = document.getElementById('confirmButton');
        const modal = modalOverlay.querySelector('.modal');

        let previouslyFocusedElement = null;

        const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';

        function getFocusableElements() {
            return modal.querySelectorAll(focusableSelectors);
        }

        function openModal() {
            previouslyFocusedElement = document.activeElement;
            modalOverlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            const focusableElements = getFocusableElements();
            if (focusableElements.length > 0) {
                focusableElements[0].focus();
            }
        }

        function closeModal() {
            modalOverlay.classList.remove('active');
            document.body.style.overflow = '';
            
            if (previouslyFocusedElement) {
                previouslyFocusedElement.focus();
            }
        }

        openModalBtn.addEventListener('click', openModal);
        closeModalBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        confirmBtn.addEventListener('click', () => {
            alert('Confirmed!');
            closeModal();
        });

        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) {
                closeModal();
            }
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modalOverlay.classList.contains('active')) {
                closeModal();
            }

            if (e.key === 'Tab' && modalOverlay.classList.contains('active')) {
                const focusableElements = Array.from(getFocusableElements());
                const firstElement = focusableElements[0];
                const lastElement = focusableElements[focusableElements.length - 1];

                if (e.shiftKey) {
                    if (document.activeElement === firstElement) {
                        e.preventDefault();
                        lastElement.focus();
                    }
                } else {
                    if (document.activeElement === lastElement) {
                        e.preventDefault();
                        firstElement.focus();
                    }
                }
            }
        });
    </script>
</body>
</html>