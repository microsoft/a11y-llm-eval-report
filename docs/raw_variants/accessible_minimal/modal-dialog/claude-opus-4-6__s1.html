<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Dialog Example</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f0f2f5;
        }

        .trigger {
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 600;
            color: #fff;
            background-color: #4a6cf7;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .trigger:hover {
            background-color: #3a5ce5;
        }

        .trigger:focus-visible {
            outline: 3px solid #4a6cf7;
            outline-offset: 2px;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-overlay.open {
            display: flex;
        }

        .modal {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(-10px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #e5e7eb;
        }

        .modal-header h2 {
            font-size: 20px;
            color: #1a1a2e;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #6b7280;
            cursor: pointer;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            transition: background-color 0.2s ease, color 0.2s ease;
        }

        .modal-close:hover {
            background-color: #f3f4f6;
            color: #1a1a2e;
        }

        .modal-close:focus-visible {
            outline: 3px solid #4a6cf7;
            outline-offset: 2px;
        }

        .modal-body {
            padding: 24px;
            color: #4b5563;
            line-height: 1.6;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 16px 24px;
            border-top: 1px solid #e5e7eb;
        }

        .btn-cancel {
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .btn-cancel:hover {
            background-color: #e5e7eb;
        }

        .btn-cancel:focus-visible {
            outline: 3px solid #4a6cf7;
            outline-offset: 2px;
        }

        .btn-confirm {
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 600;
            color: #fff;
            background-color: #4a6cf7;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .btn-confirm:hover {
            background-color: #3a5ce5;
        }

        .btn-confirm:focus-visible {
            outline: 3px solid #4a6cf7;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <button class="trigger" id="openModal">Open Modal</button>

    <div class="modal-overlay" id="modalOverlay" role="presentation">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDescription" id="modalDialog">
            <div class="modal-header">
                <h2 id="modalTitle">Modal Title</h2>
                <button class="modal-close" id="closeModal" aria-label="Close modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalDescription">This is an example modal dialog. It can contain any content you need, such as forms, information, or confirmation messages. Click outside the modal, press the Escape key, or use the buttons below to close it.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-cancel" id="cancelModal">Cancel</button>
                <button class="btn-confirm" id="confirmModal">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        const openBtn = document.getElementById('openModal');
        const overlay = document.getElementById('modalOverlay');
        const closeBtn = document.getElementById('closeModal');
        const cancelBtn = document.getElementById('cancelModal');
        const confirmBtn = document.getElementById('confirmModal');
        const modalDialog = document.getElementById('modalDialog');

        let previouslyFocusedElement = null;

        function openModal() {
            previouslyFocusedElement = document.activeElement;
            overlay.classList.add('open');
            closeBtn.focus();
            trapFocus(modalDialog);
        }

        function closeModal() {
            overlay.classList.remove('open');
            if (previouslyFocusedElement) {
                previouslyFocusedElement.focus();
            }
        }

        function trapFocus(element) {
            const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
            const focusableElements = element.querySelectorAll(focusableSelectors);
            const firstFocusable = focusableElements[0];
            const lastFocusable = focusableElements[focusableElements.length - 1];

            element.addEventListener('keydown', function handler(e) {
                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === firstFocusable) {
                            e.preventDefault();
                            lastFocusable.focus();
                        }
                    } else {
                        if (document.activeElement === lastFocusable) {
                            e.preventDefault();
                            firstFocusable.focus();
                        }
                    }
                }
            });
        }

        openBtn.addEventListener('click', openModal);
        closeBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        confirmBtn.addEventListener('click', closeModal);

        overlay.addEventListener('click', function (e) {
            if (e.target === overlay) {
                closeModal();
            }
        });

        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape' && overlay.classList.contains('open')) {
                closeModal();
            }
        });
    </script>
</body>
</html>