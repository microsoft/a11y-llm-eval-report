<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact form - Support - Example</title>

  <style>
    /* Design tokens (use these only) */
    :root{
      --color-bg: #ffffff;
      --color-text: #0b0b0b;
      --color-muted-text: #4b5563; /* meets contrast on white */
      --color-border: #d1d5db;
      --color-focus: #1e90ff; /* DodgerBlue - high contrast */
      --color-danger: #b91c1c; /* red-700 */
      --color-success: #059669; /* green-600 */
      --color-input-bg: #ffffff;
      --radius: 6px;
      --max-width: 680px;
      --gap: 16px;
      --font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      --font-size: 16px;
    }

    /* Basic reset and layout */
    html,body{
      height:100%;
      background:var(--color-bg);
      color:var(--color-text);
      font-family:var(--font-family);
      font-size:var(--font-size);
      line-height:1.4;
      margin:0;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .container{
      max-width:var(--max-width);
      margin:28px auto;
      padding:20px;
    }

    header{
      padding:12px 0;
      border-bottom:1px solid var(--color-border);
    }

    /* Skip link */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      border: 0;
      white-space: nowrap;
    }
    /* Make skip link visible when focused */
    .skip-link:focus {
      position: static;
      width: auto;
      height: auto;
      margin: 0 0 12px 0;
      padding: 8px 12px;
      display: inline-block;
      background: var(--color-focus);
      color: white;
      border-radius: 4px;
      text-decoration: none;
      z-index: 1000;
    }

    main{
      padding:20px 0;
    }

    h1{
      font-size:1.5rem;
      margin:0 0 12px 0;
    }

    form {
      display:flex;
      flex-direction:column;
      gap:var(--gap);
    }

    /* Each field wrapper */
    .form-field {
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    label{
      font-weight:600;
      color:var(--color-text);
      display:inline-flex;
      align-items:center;
      gap:8px;
    }

    /* Required star */
    .required-star{
      color:var(--color-danger);
      font-weight:700;
      margin-left:4px;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"]{
      appearance:none;
      -webkit-appearance:none;
      background:var(--color-input-bg);
      border:1px solid var(--color-border);
      padding:10px 12px;
      border-radius:var(--radius);
      font:inherit;
      color:var(--color-text);
      min-height:44px;
      width:100%;
      box-sizing:border-box;
    }

    input:focus{
      outline:3px solid color-mix(in srgb, var(--color-focus) 80%, #fff 0%); /* ensures visible */
      outline-offset:2px;
      border-color:var(--color-focus);
    }

    /* Helper text */
    .field-help{
      font-size:0.95rem;
      color:var(--color-muted-text);
    }

    /* Error text */
    .field-error{
      font-size:0.95rem;
      color:var(--color-danger);
    }

    .visually-hidden {
      position: absolute;
      left: -9999px;
      width: 1px;
      height: 1px;
      top: auto;
      overflow: hidden;
    }

    .actions {
      display:flex;
      gap:12px;
      align-items:center;
    }

    button[type="submit"]{
      background:var(--color-focus);
      color:#fff;
      border:1px solid transparent;
      padding:10px 16px;
      border-radius:6px;
      font-weight:600;
      cursor:pointer;
      min-height:44px;
    }

    button[type="submit"]:hover{
      filter:brightness(.95);
    }

    button[type="submit"]:focus{
      outline:3px solid color-mix(in srgb, var(--color-focus) 80%, #fff 0%);
      outline-offset:2px;
    }

    /* Success message */
    .form-status {
      padding:10px 12px;
      border-radius:6px;
      background: color-mix(in srgb, var(--color-success) 10%, white 90%);
      border:1px solid color-mix(in srgb, var(--color-success) 40%, white 60%);
      color:var(--color-success);
      display:none;
    }
    .form-status[aria-hidden="false"]{ display:block; }

    /* Responsive: ensure reflow at 320px */
    @media (max-width:420px) {
      .container{ padding:12px; margin:16px auto; }
      h1{ font-size:1.25rem; }
    }

    /* Handle long strings */
    input, label {
      overflow-wrap:anywhere;
      word-break:break-word;
    }

    /* Forced colors mode support */
    @media (forced-colors: active){
      :root {
        /* Do not override user colors here; system color keywords used below where needed */
      }
      input:focus, button:focus {
        outline: 2px solid Highlight; /* system color */
      }
      button[type="submit"]{
        background: ButtonFace;
        color: ButtonText;
        border: 2px solid ButtonBorder;
      }
      .field-error {
        color: ButtonText;
        background: Field;
      }
    }

    /* Make error icons or visuals not rely on color only */
    .field-error::before{
      content: "⚠ ";
      font-weight:700;
      aria-hidden:true;
    }
  </style>
</head>
<body>
  <header class="container" role="banner">
    <a href="#maincontent" class="skip-link sr-only">Skip to main content</a>
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <div>
        <strong>Example Support</strong>
        <div style="font-size:0.9rem;color:var(--color-muted-text);">Contact us</div>
      </div>
      <nav aria-label="Top" style="font-size:0.9rem;">
        <ul style="list-style:none;padding:0;margin:0;display:flex;gap:12px;">
          <li><a href="#" style="color:var(--color-focus);text-decoration:none;">Help</a></li>
          <li><a href="#" style="color:var(--color-muted-text);text-decoration:none;">Privacy</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="maincontent" tabindex="-1" class="container" role="main">
    <h1>Contact us</h1>

    <form id="contactForm" novalidate aria-describedby="form-note" autocomplete="on" >
      <p id="form-note" class="field-help" style="margin:0 0 8px 0;">
        We will respond within 3 business days. Fields marked with <span aria-hidden="true" class="required-star">*</span> are required.
      </p>

      <div class="form-field">
        <label for="full-name">Full Name <span aria-hidden="true" class="required-star">*</span></label>
        <input
          id="full-name"
          name="fullName"
          type="text"
          autocomplete="name"
          required
          aria-required="true"
          aria-describedby="full-name-help"
          />
        <div id="full-name-help" class="field-help">Enter your full name as you would like us to address you.</div>
        <div id="full-name-error" class="field-error" role="alert" aria-live="assertive" hidden></div>
      </div>

      <div class="form-field">
        <label for="email">Email Address <span aria-hidden="true" class="required-star">*</span></label>
        <input
          id="email"
          name="email"
          type="email"
          autocomplete="email"
          required
          aria-required="true"
          aria-describedby="email-help"
          />
        <div id="email-help" class="field-help">Please use a valid email like name@example.com. We use this to contact you about your request.</div>
        <div id="email-error" class="field-error" role="alert" aria-live="assertive" hidden></div>
      </div>

      <div class="form-field">
        <label for="phone">Phone Number <span class="visually-hidden">optional</span></label>
        <input
          id="phone"
          name="phone"
          type="tel"
          inputmode="tel"
          autocomplete="tel"
          aria-describedby="phone-help"
          />
        <div id="phone-help" class="field-help">Optional. Preferred format: +1 (555) 555-5555. Do not include letters.</div>
        <div id="phone-error" class="field-error" role="alert" aria-live="assertive" hidden></div>
      </div>

      <div class="actions">
        <button type="submit" id="submitBtn">Submit</button>
        <div id="form-status" class="form-status" role="status" aria-hidden="true"></div>
      </div>
    </form>
  </main>

  <footer class="container" role="contentinfo" style="font-size:0.9rem;color:var(--color-muted-text);border-top:1px solid var(--color-border);padding-top:12px;">
    <p style="margin:8px 0 0 0;">© Example Support</p>
  </footer>

  <script>
    (function(){
      // Final verification checklist (programmatic checks):
      // - Landmarks present: header, main, footer
      // - Skip link is first focusable element -> present
      // - One h1 within main -> present
      // - Inputs have labels, aria-describedby helpers, required & aria-required set
      // - Visible focus styles are defined
      // - Contrast tokens used via CSS variables

      const form = document.getElementById('contactForm');
      const fullName = document.getElementById('full-name');
      const email = document.getElementById('email');
      const phone = document.getElementById('phone');

      const status = document.getElementById('form-status');

      const fields = [
        { input: fullName, errorEl: document.getElementById('full-name-error'), helpId: 'full-name-help' },
        { input: email, errorEl: document.getElementById('email-error'), helpId: 'email-help' },
        { input: phone, errorEl: document.getElementById('phone-error'), helpId: 'phone-help' }
      ];

      // Utility to set error for a field
      function setError(field, message) {
        const { input, errorEl, helpId } = field;
        errorEl.textContent = message;
        errorEl.hidden = false;
        input.setAttribute('aria-invalid', 'true');

        // Ensure aria-describedby includes both help and error (do not duplicate)
        const described = new Set((input.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean));
        described.add(helpId);
        described.add(errorEl.id);
        input.setAttribute('aria-describedby', Array.from(described).join(' '));
      }

      function clearError(field) {
        const { input, errorEl, helpId } = field;
        errorEl.textContent = '';
        errorEl.hidden = true;
        input.removeAttribute('aria-invalid');

        // Restore aria-describedby to only include the help text (if present)
        input.setAttribute('aria-describedby', helpId);
      }

      // Initialize aria-describedby for all fields to refer to help text
      fields.forEach(f => {
        const { input, helpId } = f;
        input.setAttribute('aria-describedby', helpId);
        // Ensure helper exists
      });

      function validate() {
        // Clear previous errors
        fields.forEach(clearError);
        status.setAttribute('aria-hidden', 'true');
        status.textContent = '';

        let firstInvalid = null;

        // Full name: required and not just whitespace
        if (!fullName.value || !fullName.value.trim()) {
          setError(fields[0], 'Full name is required. Enter your full name.');
          firstInvalid = firstInvalid || fullName;
        }

        // Email: required and must be a valid email per browser validation
        if (!email.value) {
          setError(fields[1], 'Email address is required.');
          firstInvalid = firstInvalid || email;
        } else {
          // Use HTML5 validation details for typeMismatch
          if (!email.checkValidity()) {
            // Distinguish typeMismatch
            if (email.validity.typeMismatch) {
              setError(fields[1], 'Enter a valid email address like name@example.com.');
            } else {
              setError(fields[1], 'Enter a valid email address.');
            }
            firstInvalid = firstInvalid || email;
          }
        }

        // Phone: optional. If present, do a gentle format check (digits, spaces, +, parentheses, dashes)
        if (phone.value && phone.value.trim()) {
          const cleaned = phone.value.trim();
          const allowed = /^[0-9+\s().-]{6,}$/;
          if (!allowed.test(cleaned)) {
            setError(fields[2], 'Phone number contains unexpected characters. Use digits, spaces, +, parentheses, or dashes.');
            firstInvalid = firstInvalid || phone;
          }
        }

        return firstInvalid;
      }

      form.addEventListener('submit', function(evt){
        evt.preventDefault();

        const firstInvalid = validate();

        if (firstInvalid) {
          // Focus the first invalid control and ensure it's visible
          firstInvalid.focus();
          // Move focus to the input; also ensure main has tabindex -1 to allow focus
          return;
        }

        // If valid, simulate submission
        status.textContent = 'Thank you — your message has been submitted.';
        status.setAttribute('aria-hidden', 'false');

        // Clear errors and reset fields as a simulated success (in real life, you'd send)
        fields.forEach(f => {
          clearError(f);
          // We won't clear inputs to avoid surprise. But could be cleared if desired.
        });
      });

      // Real-time validation: remove error when user corrects input
      fields.forEach(field => {
        const { input, errorEl } = field;
        input.addEventListener('input', function(){
          if (input.hasAttribute('aria-invalid')) {
            // Re-validate this single field
            if (input === fullName) {
              if (input.value && input.value.trim()) clearError(field);
            } else if (input === email) {
              if (input.value && input.checkValidity()) clearError(field);
            } else if (input === phone) {
              if (!input.value.trim()) {
                clearError(field);
              } else {
                const allowed = /^[0-9+\s().-]{6,}$/;
                if (allowed.test(input.value.trim())) clearError(field);
              }
            }
          }
        });

        // Ensure hidden error elements are not focusable
        errorEl.setAttribute('tabindex', '-1');
      });

      // Accessibility: allow Escape to clear status message and remove focus from it
      document.addEventListener('keydown', function(e){
        if (e.key === 'Escape') {
          if (status.getAttribute('aria-hidden') === 'false') {
            status.setAttribute('aria-hidden', 'true');
            status.textContent = '';
          }
        }
      });

      // Ensure skip link works: when activated main gets focus
      const skip = document.querySelector('.skip-link');
      if (skip) {
        skip.addEventListener('click', function(e){
          // Allow default navigation then focus maincontent for screen readers
          const main = document.getElementById('maincontent');
          setTimeout(() => main.focus(), 0);
        });
      }

      // Ensure no element other than interactive elements is tabbable
      // (We didn't add tabindex on static elements, except main which is -1 by requirement.)

    })();
  </script>
</body>
</html>