<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact - Support - Example</title>

  <style>
    /* Design tokens (use these for all colors) */
    :root{
      --color-bg: #ffffff;
      --color-text: #0b1220; /* very dark blue/near black */
      --color-muted-text: #4a5568; /* dark gray, still meets contrast */
      --color-link: #0b66ff;
      --color-border: #cbd5e1;
      --color-focus: #ffb020; /* warm high-contrast focus color */
      --color-danger: #9b1c1c; /* dark red for sufficient contrast */
      --color-success: #0a7a3f;
      --radius: 6px;
      --max-width: 760px;
      --field-padding: 0.6rem 0.75rem;
      --font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* Basic reset and layout */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: var(--font-family);
      background:var(--color-bg);
      color:var(--color-text);
      line-height:1.4;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:1rem;
    }

    /* Skip link (accessible) */
    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }
    a.skip-link {
      position: absolute;
      left: 1rem;
      top: 1rem;
      background: var(--color-link);
      color: white;
      padding: 0.5rem 0.75rem;
      border-radius: 4px;
      z-index: 999;
      text-decoration: none;
      font-weight:600;
    }
    a.skip-link:focus {
      outline: 3px solid var(--color-focus);
      outline-offset: 2px;
      clip: auto;
      clip-path: none;
      height: auto;
      width: auto;
      position: static;
      margin-bottom: 0.5rem;
    }

    header, nav, main, footer {max-width: var(--max-width); margin-left:auto; margin-right:auto;}

    header {padding: 0.25rem 0 1rem 0}
    .site-brand {font-weight:700; font-size:1.125rem; color:var(--color-text)}

    nav {margin-bottom:1rem;}
    nav ul{list-style:none;padding:0;margin:0;display:flex;gap:0.75rem}
    nav a{color:var(--color-link); text-decoration:none}
    nav a:focus{outline:3px solid var(--color-focus); outline-offset:2px; border-radius:4px; padding:0.15rem 0.25rem}

    main {
      background: #fbfdff;
      border: 1px solid var(--color-border);
      border-radius: 10px;
      padding: 1.25rem;
      box-shadow: 0 2px 4px rgba(12,20,40,0.04);
    }

    h1 {font-size:1.25rem; margin:0 0 0.75rem 0}
    p.lead {margin:0 0 1rem 0;color:var(--color-muted-text)}

    /* Form layout */
    form {display:flex; flex-direction:column; gap:1rem;}
    .form-field {display:flex; flex-direction:column; gap:0.375rem;}
    label {font-weight:600; color:var(--color-text); font-size:0.95rem; display:inline-flex; align-items:baseline; gap:0.4rem;}
    .required-indicator {color:var(--color-danger); font-weight:700; font-size:0.85rem;}
    .hint {color:var(--color-muted-text); font-size:0.875rem;}
    .hint small {display:block}

    input[type="text"],
    input[type="email"],
    input[type="tel"] {
      font:inherit;
      padding: var(--field-padding);
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      background: #fff;
      color: var(--color-text);
      width:100%;
      min-height:42px;
    }
    input:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(255,176,32,0.12);
      border-color: var(--color-focus);
    }
    input[aria-invalid="true"] {
      border-color: var(--color-danger);
      box-shadow: 0 0 0 4px rgba(155,28,28,0.08);
    }

    .helper-and-error {display:flex; gap:0.75rem; align-items:flex-start; flex-wrap:wrap;}
    .error {
      color:var(--color-danger);
      font-size:0.875rem;
    }
    .visually-hidden {position:absolute !important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px;}

    .actions {display:flex; gap:0.5rem; align-items:center;}
    button[type="submit"]{
      background:var(--color-link);
      color: white;
      border: none;
      padding: 0.6rem 0.85rem;
      border-radius: 8px;
      font-weight:600;
      cursor:pointer;
    }
    button[type="submit"]:focus{
      outline: 3px solid var(--color-focus);
      outline-offset: 2px;
    }
    button[type="submit"]:hover{filter:brightness(0.98)}
    /* Disabled state (if we choose to use) */
    button[disabled]{
      background:#9fb7ff;
      cursor:not-allowed;
      opacity:0.9;
    }

    /* Responsive rules: ensure reflow at 320px */
    @media (max-width:420px){
      body{padding:0.5rem}
      main{padding:0.9rem;border-radius:8px}
      .actions{flex-direction:column; align-items:stretch}
      button[type="submit"]{width:100%}
    }

    /* Ensure long strings wrap and don't cause horizontal scroll */
    input {min-width:0; overflow-wrap:anywhere}

    /* Forced colors (high contrast) support */
    @media (forced-colors: active) {
      a.skip-link { background: ButtonFace; color: ButtonText; border:2px solid ButtonText; }
      input { forced-color-adjust: auto; background: Canvas; color: CanvasText; border-color: ButtonBorder; }
      input:focus { outline: 3px solid Highlight; outline-offset: 2px; box-shadow: none; }
      button[type="submit"] { background: ButtonFace; color: ButtonText; border: 2px solid ButtonText; }
      .error { color: CanvasText; border-color: ButtonText; }
    }

    /* Small utilities */
    .field-row {display:flex; gap:1rem; align-items:center}
    /* keep it simple: avoid multiple columns so at 320px it stacks */
  </style>
</head>
<body>
  <header>
    <a href="#maincontent" class="skip-link sr-only">Skip to main content</a>
    <div class="site-brand">Example Support</div>
  </header>

  <nav aria-label="Primary navigation">
    <ul>
      <li><a href="#contact">Contact</a></li>
      <li><a href="#help">Help</a></li>
      <li><a href="#status">Status</a></li>
    </ul>
  </nav>

  <main id="maincontent" tabindex="-1">
    <h1>Contact us</h1>
    <p class="lead">We aim to respond within 2 business days. Please provide the best way to reach you.</p>

    <form id="contactForm" novalidate aria-describedby="form-help">
      <!-- Accessible form-level help -->
      <div id="form-help" class="visually-hidden">All fields marked "* Required" are required. Email must be a working email address such as name@example.com.</div>

      <!-- Full Name -->
      <div class="form-field">
        <label for="fullName">Full Name
          <span class="required-indicator" aria-hidden="false">* Required</span>
        </label>
        <input id="fullName" name="fullName" type="text" autocomplete="name"
               aria-required="true" aria-invalid="false" />
        <!-- No helper text for name; error placeholder -->
        <div class="helper-and-error" aria-live="polite">
          <div id="fullName-error" class="error" hidden></div>
        </div>
      </div>

      <!-- Email Address -->
      <div class="form-field">
        <label for="email">Email Address
          <span class="required-indicator" aria-hidden="false">* Required</span>
        </label>

        <input id="email" name="email" type="email" autocomplete="email"
               aria-required="true" aria-invalid="false"
               aria-describedby="email-help" />

        <div class="helper-and-error">
          <div id="email-help" class="hint">Format: name@example.com. We'll send a confirmation to this address.</div>
          <div id="email-error" class="error" hidden></div>
        </div>
      </div>

      <!-- Phone Number -->
      <div class="form-field">
        <label for="phone">Phone Number
          <span class="hint" style="font-weight:600;color:var(--color-muted-text);font-size:0.9rem">Optional</span>
        </label>

        <input id="phone" name="phone" type="tel" autocomplete="tel"
               aria-required="false" aria-invalid="false"
               aria-describedby="phone-help" />

        <div class="helper-and-error">
          <div id="phone-help" class="hint">Preferred format: +1 555-555-0123 or (555) 555-0123. Include country code if outside the U.S.</div>
          <div id="phone-error" class="error" hidden></div>
        </div>
      </div>

      <div class="actions">
        <button type="submit" id="submitBtn">Submit</button>
        <div id="form-status" aria-live="polite" class="hint" style="align-self:center"></div>
      </div>
    </form>
  </main>

  <footer style="max-width:var(--max-width);margin:1rem auto 2rem auto;color:var(--color-muted-text);font-size:0.875rem">
    <p>© Example Support</p>
  </footer>

  <script>
    (function(){
      const form = document.getElementById('contactForm');
      const fullName = document.getElementById('fullName');
      const email = document.getElementById('email');
      const phone = document.getElementById('phone');

      // Error elements
      const errors = {
        fullName: document.getElementById('fullName-error'),
        email: document.getElementById('email-error'),
        phone: document.getElementById('phone-error')
      };

      const formStatus = document.getElementById('form-status');

      // Utility: show error text for a control
      function showError(inputEl, errorEl, message) {
        if (!message) {
          hideError(inputEl, errorEl);
          return;
        }
        errorEl.textContent = message;
        errorEl.hidden = false;
        inputEl.setAttribute('aria-invalid', 'true');

        // Ensure aria-describedby includes the error id (append if needed)
        const describedBy = (inputEl.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean);
        if (!describedBy.includes(errorEl.id)) {
          describedBy.push(errorEl.id);
          inputEl.setAttribute('aria-describedby', describedBy.join(' '));
        }
      }

      // Hide the error and remove aria-invalid
      function hideError(inputEl, errorEl) {
        errorEl.textContent = '';
        errorEl.hidden = true;
        inputEl.setAttribute('aria-invalid', 'false');

        // remove error id from aria-describedby but keep helper ids
        const desc = (inputEl.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean).filter(id => id !== errorEl.id);
        if (desc.length) inputEl.setAttribute('aria-describedby', desc.join(' '));
        else inputEl.removeAttribute('aria-describedby');
      }

      // Validation rules
      function validateFullName() {
        const value = fullName.value.trim();
        if (!value) return 'Please enter your full name.';
        if (value.length < 2) return 'Please provide your full name (at least 2 characters).';
        return '';
      }

      function validateEmail() {
        const value = email.value.trim();
        if (!value) return 'Please enter your email address.';
        // Use a conservative regex for emails; we also rely on input[type=email] validity check
        // This pattern allows common addresses but avoids exotic validation pitfalls.
        const simpleEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!simpleEmail.test(value)) return 'Please use the format name@example.com.';
        return '';
      }

      function validatePhone() {
        const value = phone.value.trim();
        if (!value) return ''; // optional
        // Accept digits, spaces, parentheses, + and - . Minimum length of 7 digits.
        const digits = value.replace(/\D/g, '');
        if (digits.length < 7) return 'If you include a phone number, please provide at least 7 digits.';
        // Basic allowed characters check
        const allowed = /^[0-9+\s().-]+$/;
        if (!allowed.test(value)) return 'Phone number contains unexpected characters.';
        return '';
      }

      // Focus the first invalid control and set form status
      function focusFirstInvalid(invalidEls) {
        if (!invalidEls || invalidEls.length === 0) return;
        // Focus the first visible invalid element
        const first = invalidEls[0];
        first.focus();
      }

      // On input, validate each field and remove error when fixed
      fullName.addEventListener('input', () => {
        const msg = validateFullName();
        if (msg) showError(fullName, errors.fullName, msg);
        else hideError(fullName, errors.fullName);
      });

      email.addEventListener('input', () => {
        const msg = validateEmail();
        if (msg) showError(email, errors.email, msg);
        else hideError(email, errors.email);
      });

      phone.addEventListener('input', () => {
        const msg = validatePhone();
        if (msg) showError(phone, errors.phone, msg);
        else hideError(phone, errors.phone);
      });

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        formStatus.textContent = ''; // clear previous status

        const validations = [
          {el: fullName, validator: validateFullName, errorEl: errors.fullName},
          {el: email, validator: validateEmail, errorEl: errors.email},
          {el: phone, validator: validatePhone, errorEl: errors.phone}
        ];

        const invalids = [];

        validations.forEach(item => {
          const msg = item.validator();
          if (msg) {
            showError(item.el, item.errorEl, msg);
            invalids.push(item.el);
          } else {
            hideError(item.el, item.errorEl);
          }
        });

        if (invalids.length) {
          // Focus first invalid and set helpful status text
          focusFirstInvalid(invalids);
          formStatus.textContent = 'Please fix the highlighted fields.';
          return;
        }

        // If all valid, simulate form submission success.
        // In a real app, submit via fetch/XHR here.
        formStatus.textContent = 'Sending…';
        // Disable the submit button briefly to prevent duplicate submits
        const submitBtn = document.getElementById('submitBtn');
        submitBtn.disabled = true;
        setTimeout(() => {
          submitBtn.disabled = false;
          formStatus.textContent = 'Thank you — your message has been received.';
          // Optionally, reset form while keeping focus on status for screen reader
          form.reset();
          // Remove any aria-describedby error references that might remain
          Object.values(errors).forEach(errEl => { errEl.hidden = true; errEl.textContent = ''; });
          [fullName, email, phone].forEach(input => {
            input.setAttribute('aria-invalid','false');
            // Restore helper descriptions for email and phone
            if (input === email) input.setAttribute('aria-describedby','email-help');
            if (input === phone) input.setAttribute('aria-describedby','phone-help');
            if (input === fullName) input.removeAttribute('aria-describedby');
          });
          // Move focus to status so screen reader announces success
          formStatus.focus?.();
        }, 700);
      });

      // Ensure form-status is focusable for success announcements (but not tabbable)
      formStatus.setAttribute('tabindex','-1');

      // Keyboard behavior: Escape clears errors (useful)
      document.addEventListener('keydown', (ev) => {
        if (ev.key === 'Escape') {
          Object.values(errors).forEach(errEl => {
            errEl.hidden = true;
            errEl.textContent = '';
          });
          [fullName, email, phone].forEach(input => input.setAttribute('aria-invalid','false'));
          formStatus.textContent = '';
        }
      });

      // Initial association of helper texts
      email.setAttribute('aria-describedby','email-help');
      phone.setAttribute('aria-describedby','phone-help');

      // Safety: prevent hidden elements from being focusable.
      // (All our hidden messages are using [hidden] which makes them unfocusable by default.)

    })();
  </script>
</body>
</html>