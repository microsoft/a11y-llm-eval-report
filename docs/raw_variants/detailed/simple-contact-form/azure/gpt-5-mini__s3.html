<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact - Support - Example</title>

  <style>
    /* Design tokens (minimal palette) */
    :root{
      --color-bg: #ffffff;
      --color-text: #0b0b0b;
      --color-muted-text: #3a3a3a;
      --color-border: #d1d5db;
      --color-focus: #0b5fff;
      --color-danger: #b91c1c;
      --color-success: #047857;
      --color-link: #0b5fff;

      --radius: 6px;
      --gap: 1rem;
      --max-width: 720px;
      --field-padding: 0.6rem 0.75rem;
      --font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* Basic reset & layout */
    html,body{
      height:100%;
      margin:0;
      background:var(--color-bg);
      color:var(--color-text);
      font-family:var(--font-family);
      line-height:1.4;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    a { color: var(--color-link); }
    a:focus { outline: 3px solid var(--color-focus); outline-offset: 2px; }

    header, nav, main, footer { display:block; }

    .container{
      margin: 0 auto;
      padding: 1rem;
      max-width: var(--max-width);
    }

    /* Skip link (visible on focus) */
    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }
    .skip-link {
      position: absolute;
      left: 1rem;
      top: 0.75rem;
      background: #000;
      color: #fff;
      padding: 0.5rem 0.75rem;
      border-radius: 4px;
      z-index: 9999;
    }

    /* Page header */
    header {
      border-bottom: 1px solid var(--color-border);
      background: transparent;
      margin-bottom: 1rem;
    }
    .brand {
      padding: 1rem 0;
    }
    .brand h2 {
      margin:0;
      font-size:1rem;
      color:var(--color-muted-text);
      font-weight:600;
    }

    /* Form area */
    main {
      padding: 1rem 0;
    }
    .card {
      background: #fff;
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      padding: 1rem;
      box-shadow: 0 1px 0 rgba(10,10,10,0.02);
    }

    h1 {
      margin: 0 0 0.5rem 0;
      font-size: 1.25rem;
    }
    p.lead {
      margin: 0 0 1rem 0;
      color: var(--color-muted-text);
      font-size: 0.95rem;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: var(--gap);
    }

    .form-field {
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
      min-width: 0; /* allow flex children to shrink properly */
    }

    label {
      font-weight: 600;
      font-size: 0.95rem;
    }

    .required-indicator {
      color: var(--color-danger);
      margin-left: 0.25rem;
      font-weight: 700;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"] {
      padding: var(--field-padding);
      border: 1px solid var(--color-border);
      border-radius: 6px;
      font-size: 1rem;
      color: var(--color-text);
      background: transparent;
    }

    input::placeholder { color: var(--color-muted-text); }

    input:focus {
      outline: none;
      box-shadow: 0 0 0 4px rgba(11,95,255,0.12);
      border-color: var(--color-focus);
    }

    /* Visible focus for keyboard users (outline fallback) */
    :focus {
      outline-offset: 2px;
    }

    .helper-text {
      color: var(--color-muted-text);
      font-size: 0.9rem;
    }

    .helper-text .example {
      display:block;
      color: var(--color-muted-text);
      font-size: 0.9rem;
    }

    .error {
      color: var(--color-danger);
      font-size: 0.95rem;
      display:none;
    }
    .error[aria-hidden="false"] {
      display:block;
    }

    .actions {
      display:flex;
      gap: 0.75rem;
      align-items:center;
      margin-top: 0.25rem;
      flex-wrap:wrap;
    }

    button[type="submit"]{
      background: var(--color-focus);
      color: #fff;
      border: none;
      padding: 0.6rem 0.9rem;
      border-radius: 6px;
      font-weight: 600;
      cursor: pointer;
    }
    button[type="submit"]:focus {
      outline: 3px solid var(--color-focus);
      outline-offset: 2px;
    }
    button[type="submit"]:disabled{
      opacity: 0.6;
      cursor: not-allowed;
    }

    .status {
      font-size: 0.95rem;
    }
    .status.success {
      color: var(--color-success);
    }

    footer {
      margin-top: 1.5rem;
      padding-top: 1rem;
      border-top: 1px solid var(--color-border);
      color: var(--color-muted-text);
      font-size: 0.9rem;
    }

    /* Responsive: stack at narrow widths and ensure reflow at 320px */
    @media (max-width: 520px) {
      .container { padding: 0.75rem; }
      .card { padding: 0.75rem; }
    }

    /* Handle forced-colors (High Contrast / Windows) */
    @media (forced-colors: active) {
      :root {
        /* let system colors prevail; don't override */
      }
      input:focus {
        box-shadow: none;
        outline: 2px solid Highlight;
      }
      button[type="submit"] {
        border: 2px solid ButtonBorder;
        background: ButtonFace;
        color: ButtonText;
      }
    }

    /* Prevent long strings from breaking layout */
    .form-field, input {
      overflow-wrap: anywhere;
      word-break: break-word;
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <!-- Skip link as first focusable element -->
      <a href="#maincontent" class="skip-link sr-only">Skip to main content</a>

      <div class="brand" aria-hidden="false">
        <h2>Example Support</h2>
      </div>
      <nav aria-label="Main navigation">
        <!-- Simple nav for semantics; not a menu -->
        <ul style="list-style:none;padding:0;margin:0;display:flex;gap:1rem;">
          <li><a href="#" tabindex="0">Home</a></li>
          <li><a href="#" tabindex="0">Support</a></li>
          <li><a href="#" tabindex="0">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="maincontent" tabindex="-1">
    <div class="container">
      <div class="card" role="region" aria-labelledby="contact-heading">
        <h1 id="contact-heading">Contact us</h1>
        <p class="lead">We’ll get back to you within 2 business days. All fields are accessible and keyboard-navigable.</p>

        <form id="contact-form" novalidate>
          <!-- Full Name (required) -->
          <div class="form-field">
            <label for="fullName">Full Name <span class="required-indicator" aria-hidden="true">*</span></label>
            <input
              id="fullName"
              name="fullName"
              type="text"
              required
              aria-required="true"
              aria-describedby="fullName-help"
              autocomplete="name"
              placeholder="First Last"
            />
            <div id="fullName-help" class="helper-text">Please provide your full name as you would like us to address you.</div>
            <div id="fullName-error" class="error" role="alert" aria-live="assertive" aria-hidden="true"></div>
          </div>

          <!-- Email Address (required, helper text explaining expected format) -->
          <div class="form-field">
            <label for="email">Email Address <span class="required-indicator" aria-hidden="true">*</span></label>
            <input
              id="email"
              name="email"
              type="email"
              required
              aria-required="true"
              aria-describedby="email-help"
              placeholder="you@example.com"
              autocomplete="email"
            />
            <div id="email-help" class="helper-text">Enter a valid email address in the format name@domain.tld (e.g., <span class="example">you@example.com</span>).</div>
            <div id="email-error" class="error" role="alert" aria-live="assertive" aria-hidden="true"></div>
          </div>

          <!-- Phone Number (optional, helper text about preferred format) -->
          <div class="form-field">
            <label for="phone">Phone Number <span style="font-weight:600;color:var(--color-muted-text);font-size:0.9rem">(optional)</span></label>
            <input
              id="phone"
              name="phone"
              type="tel"
              inputmode="tel"
              aria-describedby="phone-help"
              placeholder="+1 555-555-5555"
              pattern="^[0-9+\s().-]{7,25}$"
              autocomplete="tel"
            />
            <div id="phone-help" class="helper-text">Preferred format: country code + number (e.g., <span class="example">+1 555-555-5555</span>). We accept numbers, spaces, parentheses, dots, and dashes.</div>
            <div id="phone-error" class="error" role="alert" aria-live="assertive" aria-hidden="true"></div>
          </div>

          <div class="actions">
            <button type="submit" id="submitBtn">Submit</button>
            <div id="form-status" class="status" role="status" aria-live="polite" tabindex="-1"></div>
          </div>
        </form>
      </div>

      <footer>
        <p>Contact form — accessible example. For urgent issues, call our support line.</p>
      </footer>
    </div>
  </main>

  <script>
    (function () {
      const form = document.getElementById('contact-form');
      const submitBtn = document.getElementById('submitBtn');
      const status = document.getElementById('form-status');

      const fields = [
        {
          id: 'fullName',
          input: document.getElementById('fullName'),
          errorEl: document.getElementById('fullName-error'),
          helpId: 'fullName-help',
          validate: (el) => {
            const value = el.value.trim();
            if (!value) return 'Full name is required.';
            if (value.length < 2) return 'Please enter your full name.';
            return '';
          }
        },
        {
          id: 'email',
          input: document.getElementById('email'),
          errorEl: document.getElementById('email-error'),
          helpId: 'email-help',
          validate: (el) => {
            const value = el.value.trim();
            if (!value) return 'Email address is required.';
            // Let browser's email validity check help, but also a basic regex check
            if (el.validity && el.validity.typeMismatch) {
              return 'Please enter a valid email address (e.g., you@example.com).';
            }
            // additional basic pattern to catch malformed emails if browser doesn't
            const simpleEmail = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!simpleEmail.test(value)) {
              return 'Please enter a valid email address (e.g., you@example.com).';
            }
            return '';
          }
        },
        {
          id: 'phone',
          input: document.getElementById('phone'),
          errorEl: document.getElementById('phone-error'),
          helpId: 'phone-help',
          validate: (el) => {
            const value = el.value.trim();
            if (!value) return ''; // optional
            // Pattern defined in HTML: allow digits and common separators
            const pattern = /^[0-9+\s().-]{7,25}$/;
            if (!pattern.test(value)) {
              return 'Phone number contains invalid characters. Use digits, spaces, parentheses, plus, dots or dashes.';
            }
            return '';
          }
        }
      ];

      // Associate aria-describedby to include helper text and (when present) error id.
      fields.forEach(f => {
        const describedBy = [f.helpId].filter(Boolean).join(' ');
        f.input.setAttribute('aria-describedby', describedBy);
      });

      function clearError(field) {
        field.errorEl.textContent = '';
        field.errorEl.setAttribute('aria-hidden', 'true');
        field.input.removeAttribute('aria-invalid');
        // ensure aria-describedby at least references helper
        const describedBy = field.helpId;
        field.input.setAttribute('aria-describedby', describedBy);
      }

      function setError(field, message) {
        field.errorEl.textContent = message;
        field.errorEl.setAttribute('aria-hidden', 'false');
        field.input.setAttribute('aria-invalid', 'true');
        // include error id in aria-describedby for screen readers
        const describedBy = [field.helpId, field.errorEl.id].filter(Boolean).join(' ');
        field.input.setAttribute('aria-describedby', describedBy);
      }

      // Real-time validation on blur for better UX
      fields.forEach(f => {
        f.input.addEventListener('blur', () => {
          const err = f.validate(f.input);
          if (err) setError(f, err);
          else clearError(f);
        });

        // Clear error when user starts typing
        f.input.addEventListener('input', () => {
          if (f.input.getAttribute('aria-invalid') === 'true') {
            const err = f.validate(f.input);
            if (!err) clearError(f);
          }
        });
      });

      form.addEventListener('submit', function (e) {
        e.preventDefault();

        // Clear previous status
        status.textContent = '';
        status.className = 'status';
        status.setAttribute('aria-hidden', 'false');

        // Validate fields
        const errors = [];
        fields.forEach(f => {
          const err = f.validate(f.input);
          if (err) {
            setError(f, err);
            errors.push({ field: f, message: err });
          } else {
            clearError(f);
          }
        });

        if (errors.length > 0) {
          // Focus first invalid control
          const first = errors[0].field.input;
          first.focus();
          status.textContent = 'There are errors in the form. The first invalid field has been focused.';
          status.setAttribute('aria-hidden', 'false');
          status.classList.add('error');
          return;
        }

        // At this point the form is valid. Simulate submission.
        submitBtn.disabled = true;
        submitBtn.setAttribute('aria-busy', 'true');
        status.textContent = 'Submitting...';
        status.setAttribute('aria-hidden', 'false');

        // Simulated async submission
        setTimeout(() => {
          submitBtn.disabled = false;
          submitBtn.removeAttribute('aria-busy');

          // Clear form fields
          form.reset();
          fields.forEach(f => clearError(f));

          status.textContent = 'Thank you — your message has been sent.';
          status.className = 'status success';
          // Move focus to the status message so screen reader announces it
          status.focus();
        }, 700);
      });

      // Ensure skip link works in all browsers: when activated, focus main
      const skipLink = document.querySelector('.skip-link');
      if (skipLink) {
        skipLink.addEventListener('click', function(e){
          // default anchor behavior will scroll, but ensure keyboard focus lands in main
          const main = document.getElementById('maincontent');
          if (main) {
            main.focus();
          }
        });
      }

      // Final verification checks (console warnings for devs; not user-facing)
      // Note: These are helpful reminders during development but do not affect UI.
      (function finalChecks(){
        // 1. Landmarks and h1
        const main = document.querySelector('main');
        const h1 = main ? main.querySelector('h1') : null;
        if (!main || !h1) {
          console.warn('Accessibility check: main landmark or h1 is missing.');
        }
        // 2. Ensure all interactive elements are keyboard operable (simple check)
        const tabbables = form.querySelectorAll('input, button, a, textarea, select');
        if (tabbables.length === 0) {
          console.warn('Accessibility check: no tabbable elements found in form.');
        }
      })();

    })();
  </script>
</body>
</html>