<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Modal dialog example - Components - Demo site</title>
<style>
  :root {
    --color-bg: #ffffff;
    --color-surface: #f7f7f8;
    --color-text: #1a1a1a;
    --color-muted-text: #3a3a3a;
    --color-link: #0b57d0;
    --color-border: #8a8a8a;
    --color-focus: #1b66d1;
    --color-danger: #b42318;
    --color-success: #1e7f31;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", Arial, sans-serif;
    color: var(--color-text);
    background: var(--color-bg);
    line-height: 1.5;
  }

  a {
    color: var(--color-link);
  }

  a:focus, button:focus, input:focus, textarea:focus, select:focus, summary:focus {
    outline: 3px solid var(--color-focus);
    outline-offset: 2px;
  }

  header, nav, main, footer {
    padding: 1rem;
  }

  header {
    background: var(--color-surface);
    border-bottom: 1px solid var(--color-border);
  }

  nav ul {
    list-style: none;
    padding: 0;
    margin: 0.5rem 0 0 0;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  nav a {
    text-decoration: none;
  }

  .container {
    max-width: 960px;
    margin: 0 auto;
  }

  .sr-only:not(:focus):not(:active) {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }

  .button {
    background: var(--color-link);
    color: #ffffff;
    border: 2px solid var(--color-link);
    padding: 0.6rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
  }

  .button.secondary {
    background: var(--color-bg);
    color: var(--color-text);
    border-color: var(--color-border);
  }

  .button:focus {
    outline: 3px solid var(--color-focus);
    outline-offset: 2px;
  }

  .content-section {
    margin-top: 1rem;
  }

  dialog {
    width: min(92vw, 520px);
    border: 2px solid var(--color-border);
    border-radius: 6px;
    padding: 1rem 1.25rem;
    color: var(--color-text);
    background: var(--color-bg);
  }

  dialog::backdrop {
    background: #000000;
    opacity: 0.6;
  }

  .dialog-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    margin-top: 1rem;
  }

  .field {
    margin-top: 0.75rem;
  }

  label {
    display: block;
    font-weight: 600;
  }

  input[type="text"] {
    width: 100%;
    padding: 0.5rem;
    border: 1px solid var(--color-border);
    border-radius: 4px;
    font-size: 1rem;
    color: var(--color-text);
    background: var(--color-bg);
  }

  .help-text {
    color: var(--color-muted-text);
    font-size: 0.95rem;
  }

  footer {
    border-top: 1px solid var(--color-border);
    background: var(--color-surface);
  }

  @media (max-width: 600px) {
    nav ul {
      gap: 0.5rem;
    }
  }

  @media (forced-colors: active) {
    .button {
      border: 2px solid ButtonBorder;
      color: ButtonText;
      background: ButtonFace;
    }
    dialog {
      border: 2px solid CanvasText;
      background: Canvas;
      color: CanvasText;
    }
    dialog::backdrop {
      background: Canvas;
    }
  }
</style>
</head>
<body>
  <header>
    <div class="container">
      <a href="#maincontent" class="sr-only">Skip to main content</a>
      <h1>Modal dialog example</h1>
      <p>Simple, clear dialog pattern with keyboard support.</p>
    </div>
  </header>

  <nav class="container" aria-label="Primary">
    <ul>
      <li><a href="#maincontent">Overview</a></li>
      <li><a href="#usage">How it works</a></li>
      <li><a href="#dialog-example">Dialog example</a></li>
    </ul>
  </nav>

  <main id="maincontent" tabindex="-1">
    <div class="container">
      <section id="usage" class="content-section">
        <h2>How it works</h2>
        <p>This example uses the native dialog element to provide a modal experience.</p>
      </section>

      <section id="dialog-example" class="content-section">
        <h2>Dialog example</h2>
        <p>Activate the button to open the modal dialog.</p>
        <button class="button trigger" type="button">Open dialog</button>
      </section>
    </div>
  </main>

  <dialog id="sampleDialog" aria-labelledby="dialog-title" aria-describedby="dialog-desc">
    <h2 id="dialog-title">Update your preferences</h2>
    <p id="dialog-desc">Provide a short label so we can personalize future messages.</p>

    <div class="field">
      <label for="preference">Preference label</label>
      <input id="preference" name="preference" type="text" autocomplete="off">
      <p class="help-text" id="preference-help">Example: Weekly updates.</p>
    </div>

    <div class="dialog-actions">
      <button class="button" type="button">Save changes</button>
      <button class="button secondary" type="button" data-dialog-close>Close</button>
    </div>
  </dialog>

  <footer>
    <div class="container">
      <p>Thanks for reviewing the modal dialog example.</p>
    </div>
  </footer>

<script>
  (function () {
    const trigger = document.querySelector('.trigger');
    const dialog = document.getElementById('sampleDialog');
    const closeButton = dialog.querySelector('[data-dialog-close]');
    const focusableSelector = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
    let lastFocused = null;

    function openDialog() {
      lastFocused = document.activeElement;
      dialog.showModal();
      const firstFocusable = dialog.querySelector(focusableSelector);
      if (firstFocusable) {
        firstFocusable.focus();
      }
    }

    function closeDialog() {
      dialog.close();
    }

    trigger.addEventListener('click', openDialog);
    closeButton.addEventListener('click', closeDialog);

    dialog.addEventListener('close', function () {
      if (lastFocused && typeof lastFocused.focus === 'function') {
        lastFocused.focus();
      }
    });

    dialog.addEventListener('cancel', function (event) {
      event.preventDefault();
      closeDialog();
    });
  })();
</script>
</body>
</html>