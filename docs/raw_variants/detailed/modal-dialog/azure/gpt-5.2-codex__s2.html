<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Example modal dialog - Components - Accessible UI</title>
<style>
  :root {
    --color-bg: #ffffff;
    --color-surface: #f6f7f9;
    --color-text: #111111;
    --color-muted-text: #2b2b2b;
    --color-link: #0b4fb3;
    --color-link-visited: #5a2d91;
    --color-border: #404040;
    --color-focus: #0b4fb3;
    --color-danger: #b00020;
    --color-success: #0a6d2f;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
    background: var(--color-bg);
    color: var(--color-text);
    line-height: 1.5;
  }

  a {
    color: var(--color-link);
  }

  a:visited {
    color: var(--color-link-visited);
  }

  a:focus, button:focus, input:focus, textarea:focus, select:focus, dialog:focus {
    outline: 3px solid var(--color-focus);
    outline-offset: 2px;
  }

  header, nav, main, footer {
    padding: 1rem;
  }

  header {
    background: var(--color-surface);
    border-bottom: 2px solid var(--color-border);
  }

  nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  nav a {
    text-decoration: none;
  }

  .container {
    max-width: 72rem;
    margin: 0 auto;
  }

  .content {
    display: grid;
    gap: 1rem;
  }

  .trigger, .btn {
    font-size: 1rem;
    padding: 0.6rem 1rem;
    background: var(--color-link);
    color: #ffffff;
    border: 2px solid var(--color-link);
    border-radius: 0.4rem;
    cursor: pointer;
  }

  .btn-secondary {
    background: transparent;
    color: var(--color-text);
    border: 2px solid var(--color-border);
  }

  .trigger:hover, .btn:hover {
    filter: brightness(0.95);
  }

  .sr-only:not(:focus):not(:active) {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }

  dialog {
    border: 2px solid var(--color-border);
    border-radius: 0.5rem;
    padding: 1.25rem;
    max-width: 32rem;
    width: calc(100% - 2rem);
  }

  dialog::backdrop {
    background: #000000;
  }

  .dialog-header {
    display: flex;
    justify-content: space-between;
    gap: 1rem;
    align-items: flex-start;
  }

  .dialog-actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    margin-top: 1rem;
  }

  .helper-text {
    color: var(--color-muted-text);
  }

  .long-text {
    overflow-wrap: anywhere;
  }

  @media (max-width: 600px) {
    nav ul {
      flex-direction: column;
      align-items: flex-start;
    }
  }

  @media (forced-colors: active) {
    a {
      color: LinkText;
    }
    .trigger, .btn {
      border: 2px solid ButtonBorder;
      background: ButtonFace;
      color: ButtonText;
    }
    dialog {
      border: 2px solid ButtonBorder;
      background: Canvas;
      color: CanvasText;
    }
  }
</style>
</head>
<body>
<header>
  <a href="#maincontent" class="sr-only">Skip to main content</a>
  <div class="container">
    <p class="helper-text">Accessible UI examples</p>
  </div>
</header>

<nav aria-label="Primary">
  <div class="container">
    <ul>
      <li><a href="#components">Components</a></li>
      <li><a href="#guidance">Guidance</a></li>
      <li><a href="#support">Support</a></li>
    </ul>
  </div>
</nav>

<main id="maincontent" tabindex="-1">
  <div class="container content">
    <h1 id="components">Modal dialog example</h1>
    <p>This example uses a native dialog element. The dialog is closed by default and can be opened with the button below.</p>

    <button class="trigger" type="button">Open dialog</button>

    <p id="guidance" class="long-text helper-text">Tip: Press Escape to close the dialog after it opens. The focus will return to the button that opened it.</p>

    <dialog id="exampleDialog" aria-labelledby="dialogTitle" aria-describedby="dialogDescription">
      <div class="dialog-header">
        <h2 id="dialogTitle">Confirm your choice</h2>
      </div>
      <p id="dialogDescription">Please review your selection. You can continue or go back to make changes.</p>
      <div class="dialog-actions">
        <button class="btn" type="button" id="confirmAction">Continue</button>
        <button class="btn btn-secondary" type="button" id="closeDialog">Close dialog</button>
      </div>
    </dialog>

    <section id="support">
      <h2>Support</h2>
      <p>If you need help, contact the support team in a way that works best for you.</p>
      <a href="mailto:support@example.com">Email support@example.com</a>
    </section>
  </div>
</main>

<footer>
  <div class="container">
    <p class="helper-text">Â© 2024 Accessible UI Examples</p>
  </div>
</footer>

<script>
  const dialog = document.getElementById('exampleDialog');
  const triggerButton = document.querySelector('.trigger');
  const closeButton = document.getElementById('closeDialog');
  const confirmAction = document.getElementById('confirmAction');
  let lastFocusedElement = null;

  function openDialog() {
    lastFocusedElement = document.activeElement;
    if (typeof dialog.showModal === 'function') {
      dialog.showModal();
      closeButton.focus();
    }
  }

  function closeDialog() {
    dialog.close();
  }

  triggerButton.addEventListener('click', openDialog);
  closeButton.addEventListener('click', closeDialog);
  confirmAction.addEventListener('click', closeDialog);

  dialog.addEventListener('close', () => {
    if (lastFocusedElement && typeof lastFocusedElement.focus === 'function') {
      lastFocusedElement.focus();
    }
  });

  dialog.addEventListener('cancel', (event) => {
    event.preventDefault();
    closeDialog();
  });
</script>
</body>
</html>