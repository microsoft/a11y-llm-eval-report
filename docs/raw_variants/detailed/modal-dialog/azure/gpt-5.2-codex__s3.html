<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Modal dialog example - Components - Demo Site</title>
<style>
  :root {
    --color-bg: #ffffff;
    --color-text: #111827;
    --color-muted-text: #374151;
    --color-link: #0b4cc2;
    --color-link-visited: #5a2ca0;
    --color-border: #1f2937;
    --color-focus: #1d4ed8;
    --color-surface: #f9fafb;
    --color-danger: #b00020;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background: var(--color-bg);
    color: var(--color-text);
    line-height: 1.5;
  }

  a {
    color: var(--color-link);
  }
  a:visited {
    color: var(--color-link-visited);
  }
  a:focus,
  button:focus,
  input:focus,
  textarea:focus,
  select:focus,
  dialog:focus {
    outline: 3px solid var(--color-focus);
    outline-offset: 2px;
  }

  .sr-only:not(:focus):not(:active) {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }

  header, nav, main, footer {
    padding: 1rem;
  }

  nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .container {
    max-width: 72rem;
    margin: 0 auto;
  }

  .panel {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    padding: 1rem;
  }

  .button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    border: 2px solid var(--color-border);
    background: var(--color-bg);
    color: var(--color-text);
    padding: 0.65rem 1rem;
    border-radius: 0.5rem;
    font-size: 1rem;
    cursor: pointer;
  }
  .button:hover {
    background: var(--color-surface);
  }

  dialog {
    border: 2px solid var(--color-border);
    border-radius: 0.75rem;
    padding: 0;
    max-width: 32rem;
    width: calc(100% - 2rem);
    color: var(--color-text);
  }

  dialog::backdrop {
    background: #111827;
  }

  .dialog-header,
  .dialog-body,
  .dialog-footer {
    padding: 1rem;
  }

  .dialog-header {
    border-bottom: 1px solid var(--color-border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
  }

  .dialog-footer {
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
  }

  .dialog-close {
    border: 2px solid var(--color-border);
    background: var(--color-bg);
    color: var(--color-text);
    padding: 0.4rem 0.6rem;
    border-radius: 0.4rem;
    cursor: pointer;
  }

  .note {
    color: var(--color-muted-text);
  }

  @media (forced-colors: active) {
    dialog {
      border: 2px solid ButtonText;
    }
    dialog::backdrop {
      background: Canvas;
    }
    .button,
    .dialog-close {
      border: 2px solid ButtonText;
      background: Canvas;
      color: ButtonText;
    }
    a {
      color: LinkText;
    }
  }
</style>
</head>
<body>
<header class="container">
  <a href="#maincontent" class="sr-only">Skip to main content</a>
  <h2>Demo Site</h2>
</header>

<nav class="container" aria-label="Primary">
  <ul>
    <li><a href="#components">Components</a></li>
    <li><a href="#usage">Usage notes</a></li>
  </ul>
</nav>

<main id="maincontent" class="container" tabindex="-1">
  <h1>Modal dialog example</h1>

  <section id="components" class="panel">
    <h2>Component</h2>
    <p class="note">The dialog is closed by default. Select the button to open it.</p>
    <button type="button" class="button trigger" id="openDialog">Open dialog</button>
  </section>

  <section id="usage" class="panel" style="margin-top: 1rem;">
    <h2>Usage notes</h2>
    <ul>
      <li>Focus moves into the dialog when it opens.</li>
      <li>Focus returns to the trigger button when it closes.</li>
      <li>Press Escape to close the dialog.</li>
    </ul>
  </section>

  <dialog id="exampleDialog" aria-labelledby="dialogTitle" aria-describedby="dialogDesc" aria-modal="true">
    <div class="dialog-header">
      <h2 id="dialogTitle">Confirm your action</h2>
      <button type="button" class="dialog-close" id="closeDialog" aria-label="Close dialog">Close</button>
    </div>
    <div class="dialog-body">
      <p id="dialogDesc">This is an example modal dialog. It includes a title, description, and action buttons.</p>
      <p class="note">Choose “Continue” to proceed or “Cancel” to close the dialog.</p>
    </div>
    <div class="dialog-footer">
      <button type="button" class="button" id="confirmAction">Continue</button>
      <button type="button" class="button" id="cancelAction">Cancel</button>
    </div>
  </dialog>
</main>

<footer class="container">
  <p>&copy; 2025 Demo Site</p>
</footer>

<script>
  (function () {
    const dialog = document.getElementById('exampleDialog');
    const openButton = document.getElementById('openDialog');
    const closeButton = document.getElementById('closeDialog');
    const cancelButton = document.getElementById('cancelAction');
    const confirmButton = document.getElementById('confirmAction');
    let lastFocusedElement = null;

    function openDialog() {
      lastFocusedElement = document.activeElement;
      if (typeof dialog.showModal === 'function') {
        dialog.showModal();
      } else {
        dialog.setAttribute('open', '');
      }
      closeButton.focus();
    }

    function closeDialog() {
      if (dialog.open) {
        dialog.close();
      } else {
        dialog.removeAttribute('open');
      }
      if (lastFocusedElement) {
        lastFocusedElement.focus();
      }
    }

    openButton.addEventListener('click', openDialog);
    closeButton.addEventListener('click', closeDialog);
    cancelButton.addEventListener('click', closeDialog);

    confirmButton.addEventListener('click', function () {
      closeDialog();
    });

    dialog.addEventListener('cancel', function (event) {
      event.preventDefault();
      closeDialog();
    });

    document.addEventListener('keydown', function (event) {
      if (event.key === 'Escape' && dialog.open) {
        event.preventDefault();
        closeDialog();
      }
    });
  })();
</script>
</body>
</html>