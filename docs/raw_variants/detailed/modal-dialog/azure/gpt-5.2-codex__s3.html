<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Modal dialog example - Components - Inclusive UI</title>
<style>
  :root {
    --color-bg: #ffffff;
    --color-text: #111111;
    --color-muted-text: #2f2f2f;
    --color-link: #0b57d0;
    --color-border: #3a3a3a;
    --color-focus: #1b5e20;
    --color-danger: #8b1d1d;
    --color-success: #0b5d1e;
  }

  * {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    line-height: 1.5;
    background: var(--color-bg);
    color: var(--color-text);
  }

  a {
    color: var(--color-link);
  }

  header, nav, main, footer {
    padding: 1rem;
  }

  header {
    border-bottom: 2px solid var(--color-border);
  }

  nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
  }

  nav a {
    text-decoration: underline;
  }

  .sr-only:not(:focus):not(:active) {
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    height: 1px;
    overflow: hidden;
    position: absolute;
    white-space: nowrap;
    width: 1px;
  }

  .content {
    max-width: 70ch;
  }

  button {
    font: inherit;
  }

  .button {
    border: 2px solid var(--color-border);
    background: var(--color-bg);
    color: var(--color-text);
    padding: 0.6rem 1rem;
    border-radius: 6px;
    cursor: pointer;
  }

  .button:hover {
    background: #f2f2f2;
  }

  .button:focus-visible {
    outline: 3px solid var(--color-focus);
    outline-offset: 2px;
  }

  .button.primary {
    background: #111111;
    color: #ffffff;
  }

  .button.primary:hover {
    background: #1c1c1c;
  }

  dialog {
    border: 2px solid var(--color-border);
    border-radius: 8px;
    padding: 0;
    max-width: 36rem;
    width: calc(100% - 2rem);
    color: var(--color-text);
    background: var(--color-bg);
  }

  dialog::backdrop {
    background: rgba(0, 0, 0, 0.55);
  }

  .modal-header, .modal-body, .modal-footer {
    padding: 1rem;
  }

  .modal-header {
    border-bottom: 1px solid var(--color-border);
  }

  .modal-footer {
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    flex-wrap: wrap;
  }

  .field {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    margin-top: 1rem;
  }

  input[type="text"] {
    border: 2px solid var(--color-border);
    border-radius: 6px;
    padding: 0.5rem;
    font: inherit;
  }

  input[type="text"]:focus-visible {
    outline: 3px solid var(--color-focus);
    outline-offset: 2px;
  }

  .required {
    color: var(--color-danger);
    font-weight: 700;
  }

  .help {
    color: var(--color-muted-text);
  }

  @media (max-width: 600px) {
    nav ul {
      flex-direction: column;
    }
    .modal-footer {
      flex-direction: column;
      align-items: stretch;
    }
  }

  @media (forced-colors: active) {
    body, dialog {
      background: Canvas;
      color: CanvasText;
    }
    .button {
      border: 2px solid ButtonBorder;
      background: ButtonFace;
      color: ButtonText;
    }
    .button.primary {
      background: ButtonFace;
      color: ButtonText;
    }
    dialog::backdrop {
      background: Canvas;
    }
  }
</style>
</head>
<body>
<header>
  <a href="#maincontent" class="sr-only">Skip to main content</a>
  <div class="content">
    <h2>Inclusive UI</h2>
    <p>Examples of accessible components built with native elements.</p>
  </div>
</header>

<nav aria-label="Primary">
  <ul>
    <li><a href="#example">Modal example</a></li>
    <li><a href="#usage">Usage notes</a></li>
  </ul>
</nav>

<main id="maincontent" tabindex="-1">
  <h1 id="example">Modal dialog example</h1>
  <div class="content">
    <p>This example uses a native dialog element that opens with a button and returns focus on close.</p>
    <button type="button" class="button primary trigger" id="openDialog">Open dialog</button>
  </div>

  <section id="usage" class="content" aria-labelledby="usage-heading">
    <h2 id="usage-heading">Usage notes</h2>
    <ul>
      <li>Focus moves into the dialog when it opens.</li>
      <li>Press Escape to close.</li>
      <li>Focus returns to the open button after closing.</li>
    </ul>
  </section>
</main>

<dialog id="exampleDialog" aria-labelledby="dialogTitle" aria-describedby="dialogDesc">
  <div class="modal-header">
    <h2 id="dialogTitle">Invite a person</h2>
  </div>
  <div class="modal-body">
    <p id="dialogDesc">Enter a name to send an invitation.</p>
    <form id="inviteForm" novalidate>
      <div class="field">
        <label for="personName">Personâ€™s name <span class="required" aria-hidden="true">*</span></label>
        <input type="text" id="personName" name="personName" aria-required="true" required aria-describedby="nameHelp">
        <div class="help" id="nameHelp">Required field.</div>
      </div>
    </form>
  </div>
  <div class="modal-footer">
    <button type="button" class="button" id="cancelDialog">Cancel</button>
    <button type="submit" class="button primary" form="inviteForm" id="sendInvite">Send invite</button>
  </div>
</dialog>

<footer>
  <div class="content">
    <p>Thank you for exploring inclusive patterns.</p>
  </div>
</footer>

<script>
  const dialog = document.getElementById('exampleDialog');
  const openButton = document.getElementById('openDialog');
  const cancelButton = document.getElementById('cancelDialog');
  const form = document.getElementById('inviteForm');
  const nameInput = document.getElementById('personName');

  function openDialog() {
    if (!dialog.open) {
      dialog.showModal();
      nameInput.focus();
    }
  }

  function closeDialog() {
    if (dialog.open) {
      dialog.close();
      openButton.focus();
    }
  }

  openButton.addEventListener('click', openDialog);
  cancelButton.addEventListener('click', closeDialog);

  dialog.addEventListener('close', () => {
    if (document.activeElement !== openButton) {
      openButton.focus();
    }
  });

  form.addEventListener('submit', (event) => {
    if (!nameInput.value.trim()) {
      event.preventDefault();
      nameInput.setAttribute('aria-invalid', 'true');
      nameInput.focus();
      return;
    }
    nameInput.removeAttribute('aria-invalid');
    closeDialog();
  });
</script>
</body>
</html>