<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expand/Collapse Widget - Demonstration</title>
<style>
:root {
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-muted-text: #4a4a4a;
  --color-link: #0066cc;
  --color-border: #cccccc;
  --color-focus: #0066cc;
  --color-button-bg: #f5f5f5;
  --color-button-hover: #e8e8e8;
  --color-button-active: #d9d9d9;
}

* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  line-height: 1.6;
  margin: 0;
  padding: 20px;
  background-color: var(--color-bg);
  color: var(--color-text);
  max-width: 800px;
  margin: 0 auto;
}

.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

header {
  margin-bottom: 2rem;
}

h1 {
  font-size: 2rem;
  margin: 0 0 0.5rem 0;
}

main {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.example {
  border: 1px solid var(--color-border);
  padding: 1.5rem;
  border-radius: 4px;
}

.example h2 {
  margin-top: 0;
  font-size: 1.25rem;
  margin-bottom: 1rem;
}

.expand-button {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: var(--color-button-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  text-align: left;
  transition: background-color 0.2s;
}

.expand-button:hover {
  background-color: var(--color-button-hover);
}

.expand-button:active {
  background-color: var(--color-button-active);
}

.expand-button:focus {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px var(--color-bg), 0 0 0 4px var(--color-focus);
}

@media (forced-colors: active) {
  .expand-button:focus {
    outline: 2px solid ButtonBorder;
  }
}

.expand-icon {
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 8px solid currentColor;
  transition: transform 0.2s;
  flex-shrink: 0;
}

.expand-button[aria-expanded="true"] .expand-icon {
  transform: rotate(180deg);
}

.details {
  margin-top: 1rem;
  padding: 1rem;
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.details[hidden] {
  display: none;
}

.details p {
  margin: 0 0 1rem 0;
}

.details p:last-child {
  margin-bottom: 0;
}

.details ul {
  margin: 0;
  padding-left: 1.5rem;
}

.details li {
  margin-bottom: 0.5rem;
}

.details li:last-child {
  margin-bottom: 0;
}

@media (max-width: 320px) {
  body {
    padding: 10px;
  }

  .example {
    padding: 1rem;
  }

  .expand-button {
    padding: 0.5rem 0.75rem;
    font-size: 0.9375rem;
  }

  .details {
    padding: 0.75rem;
  }
}
</style>
</head>
<body>
<header>
  <a href="#maincontent" class="sr-only">Skip to main content</a>
  <h1>Expand/Collapse Widget Examples</h1>
  <p>Demonstrations of accessible expand/collapse patterns using buttons with <code>aria-expanded</code>.</p>
</header>

<main id="maincontent" tabindex="-1">
  <section class="example">
    <h2>Basic Expand/Collapse</h2>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="details1">
      <span class="expand-icon" aria-hidden="true"></span>
      <span>Show more information</span>
    </button>
    <div id="details1" class="details" hidden>
      <p>This is additional content that can be shown or hidden. The button uses <code>aria-expanded</code> to indicate its state to assistive technologies.</p>
      <p>When collapsed, the content is hidden using the <code>hidden</code> attribute, which removes it from the accessibility tree and prevents keyboard focus.</p>
    </div>
  </section>

  <section class="example">
    <h2>FAQ Item</h2>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="details2">
      <span class="expand-icon" aria-hidden="true"></span>
      <span>What are the accessibility requirements for expand/collapse widgets?</span>
    </button>
    <div id="details2" class="details" hidden>
      <p>Expand/collapse widgets must meet several accessibility requirements:</p>
      <ul>
        <li>Use a button element for the toggle control</li>
        <li>Include <code>aria-expanded</code> to indicate the current state (true or false)</li>
        <li>Use <code>aria-controls</code> to associate the button with the controlled content</li>
        <li>Ensure the button has a visible label that describes what will be shown/hidden</li>
        <li>Hide collapsed content from assistive technologies using <code>hidden</code> attribute</li>
        <li>Provide clear visual indication of the expanded/collapsed state</li>
        <li>Ensure keyboard operability with standard button behavior</li>
      </ul>
    </div>
  </section>

  <section class="example">
    <h2>Product Details</h2>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="details3">
      <span class="expand-icon" aria-hidden="true"></span>
      <span>View product specifications</span>
    </button>
    <div id="details3" class="details" hidden>
      <p><strong>Dimensions:</strong> 10" x 8" x 2"</p>
      <p><strong>Weight:</strong> 1.5 lbs</p>
      <p><strong>Materials:</strong> Recycled aluminum and sustainable bamboo</p>
      <p><strong>Color options:</strong> Silver, Space Gray, Rose Gold</p>
      <p><strong>Warranty:</strong> 2 years limited warranty</p>
    </div>
  </section>

  <section class="example">
    <h2>Terms and Conditions</h2>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="details4">
      <span class="expand-icon" aria-hidden="true"></span>
      <span>Read full terms and conditions</span>
    </button>
    <div id="details4" class="details" hidden>
      <p>By using this service, you agree to the following terms:</p>
      <p>1. You must be at least 18 years of age to use this service.</p>
      <p>2. You are responsible for maintaining the confidentiality of your account credentials.</p>
      <p>3. You agree not to use the service for any unlawful purpose.</p>
      <p>4. We reserve the right to modify these terms at any time with notice.</p>
      <p>5. Your continued use of the service constitutes acceptance of any changes to these terms.</p>
    </div>
  </section>
</main>

<script>
(function() {
  const buttons = document.querySelectorAll('.expand-button');
  
  buttons.forEach(button => {
    button.addEventListener('click', function() {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      const controlsId = this.getAttribute('aria-controls');
      const details = document.getElementById(controlsId);
      
      if (!details) return;
      
      if (expanded) {
        this.setAttribute('aria-expanded', 'false');
        details.hidden = true;
      } else {
        this.setAttribute('aria-expanded', 'true');
        details.hidden = false;
      }
    });
  });
})();
</script>
</body>
</html>