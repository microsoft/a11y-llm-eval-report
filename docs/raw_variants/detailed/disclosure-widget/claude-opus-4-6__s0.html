<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expand/Collapse Widget Demo - Accessible Components</title>
<style>
:root {
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-muted-text: #555555;
  --color-link: #0056b3;
  --color-border: #cccccc;
  --color-focus: #1a56db;
  --color-btn-bg: #f0f0f0;
  --color-btn-bg-hover: #e0e0e0;
  --color-btn-bg-active: #d0d0d0;
  --color-details-bg: #fafafa;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  font-size: 1rem;
  line-height: 1.5;
  color: var(--color-text);
  background-color: var(--color-bg);
}

.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

header {
  border-bottom: 2px solid var(--color-border);
  padding: 0.75rem 1rem;
}

header a.skip-link {
  color: var(--color-bg);
  background-color: var(--color-text);
  padding: 0.5rem 1rem;
  text-decoration: none;
  font-weight: bold;
  z-index: 1000;
}

main {
  max-width: 40rem;
  margin: 0 auto;
  padding: 1.5rem 1rem;
}

main:focus {
  outline: none;
}

h1 {
  font-size: 1.75rem;
  margin: 0 0 0.5rem;
}

p {
  margin: 0 0 1rem;
}

h2 {
  font-size: 1.35rem;
  margin: 1.5rem 0 0.75rem;
}

.example {
  border: 2px solid var(--color-border);
  border-radius: 0.5rem;
  margin-bottom: 1.5rem;
  overflow: hidden;
}

.example .toggle-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem 1rem;
  border: none;
  background-color: var(--color-btn-bg);
  color: var(--color-text);
  font-size: 1rem;
  font-weight: 600;
  line-height: 1.5;
  cursor: pointer;
  text-align: left;
}

.example .toggle-btn:hover {
  background-color: var(--color-btn-bg-hover);
}

.example .toggle-btn:active {
  background-color: var(--color-btn-bg-active);
}

.example .toggle-btn:focus-visible {
  outline: 3px solid var(--color-focus);
  outline-offset: -3px;
}

.example .toggle-btn .icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  flex-shrink: 0;
  transition: transform 0.2s ease;
}

.example .toggle-btn[aria-expanded="true"] .icon {
  transform: rotate(90deg);
}

.example .toggle-btn .icon svg {
  display: block;
  width: 100%;
  height: 100%;
  fill: currentColor;
  stroke: currentColor;
}

.example .details {
  padding: 1rem;
  background-color: var(--color-details-bg);
  border-top: 1px solid var(--color-border);
}

.example .details[hidden] {
  display: none;
}

.example .details p:last-child {
  margin-bottom: 0;
}

.example .details ul {
  margin: 0 0 1rem;
  padding-left: 1.5rem;
}

.example .details ul:last-child {
  margin-bottom: 0;
}

footer {
  border-top: 2px solid var(--color-border);
  padding: 1rem;
  text-align: center;
  color: var(--color-muted-text);
  font-size: 0.875rem;
}

@media (forced-colors: active) {
  .example {
    border: 2px solid ButtonBorder;
  }

  .example .toggle-btn {
    border: 1px solid ButtonBorder;
    background-color: ButtonFace;
    color: ButtonText;
  }

  .example .toggle-btn:focus-visible {
    outline: 3px solid Highlight;
    outline-offset: -3px;
  }

  .example .details {
    border-top: 1px solid ButtonBorder;
  }
}
</style>
</head>
<body>

<header>
  <a href="#maincontent" class="skip-link sr-only">Skip to main content</a>
  <p><strong>Accessible Expand/Collapse Widget Demo</strong></p>
</header>

<nav aria-label="Main">
  <ul style="list-style: none; padding: 0.5rem 1rem; margin: 0;">
    <li><a href="#examples" style="color: var(--color-link);">Examples</a></li>
  </ul>
</nav>

<main id="maincontent" tabindex="-1">
  <h1>Expand/Collapse Widget</h1>
  <p>The following examples demonstrate accessible disclosure (expand/collapse) widgets. Each uses a <code>&lt;button&gt;</code> element with <code>aria-expanded</code> to indicate the current state and <code>aria-controls</code> to associate the button with the content it controls.</p>

  <h2 id="examples">Examples</h2>

  <div class="example">
    <h3 style="margin: 0;">
      <button
        type="button"
        class="toggle-btn"
        aria-expanded="false"
        aria-controls="details-1"
      >
        <span class="icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" focusable="false">
            <polygon points="8,4 20,12 8,20" />
          </svg>
        </span>
        What is an expand/collapse widget?
      </button>
    </h3>
    <div id="details-1" class="details" role="region" aria-labelledby="details-1-label" hidden>
      <span id="details-1-label" hidden>What is an expand/collapse widget?</span>
      <p>An expand/collapse widget, also known as a disclosure widget, lets users show or hide a section of content. It is commonly used for FAQs, settings panels, and progressive disclosure of information.</p>
      <p>The button that controls the visibility uses <code>aria-expanded</code> to communicate the current state (expanded or collapsed) to assistive technologies.</p>
    </div>
  </div>

  <div class="example">
    <h3 style="margin: 0;">
      <button
        type="button"
        class="toggle-btn"
        aria-expanded="false"
        aria-controls="details-2"
      >
        <span class="icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" focusable="false">
            <polygon points="8,4 20,12 8,20" />
          </svg>
        </span>
        Keyboard interaction
      </button>
    </h3>
    <div id="details-2" class="details" role="region" aria-labelledby="details-2-label" hidden>
      <span id="details-2-label" hidden>Keyboard interaction</span>
      <ul>
        <li><strong>Enter</strong> or <strong>Space</strong> — Toggles the content between expanded and collapsed states.</li>
        <li><strong>Tab</strong> — Moves focus to the next focusable element.</li>
        <li><strong>Shift + Tab</strong> — Moves focus to the previous focusable element.</li>
      </ul>
      <p>When content is collapsed, it is hidden from all users, including assistive technology users, using the <code>hidden</code> attribute.</p>
    </div>
  </div>

  <div class="example">
    <h3 style="margin: 0;">
      <button
        type="button"
        class="toggle-btn"
        aria-expanded="false"
        aria-controls="details-3"
      >
        <span class="icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" focusable="false">
            <polygon points="8,4 20,12 8,20" />
          </svg>
        </span>
        Accessibility considerations
      </button>
    </h3>
    <div id="details-3" class="details" role="region" aria-labelledby="details-3-label" hidden>
      <span id="details-3-label" hidden>Accessibility considerations</span>
      <ul>
        <li>Use a native <code>&lt;button&gt;</code> element for the toggle control so that it is keyboard accessible and has the correct role.</li>
        <li>Set <code>aria-expanded="false"</code> when the content is collapsed and <code>aria-expanded="true"</code> when it is expanded.</li>
        <li>Use <code>aria-controls</code> to establish a programmatic relationship between the button and the controlled content.</li>
        <li>Use the <code>hidden</code> attribute (or <code>display: none</code>) to ensure collapsed content is not reachable by keyboard or assistive technology.</li>
        <li>The visual indicator (such as a triangle icon) should be decorative and hidden from assistive technology with <code>aria-hidden="true"</code>.</li>
      </ul>
    </div>
  </div>

</main>

<footer>
  <p>Expand/Collapse Widget Demo — For demonstration purposes only. Manual accessibility testing is recommended.</p>
</footer>

<script>
(function () {
  const toggleButtons = document.querySelectorAll('.toggle-btn');

  toggleButtons.forEach(function (button) {
    button.addEventListener('click', function () {
      const expanded = button.getAttribute('aria-expanded') === 'true';
      const controlledId = button.getAttribute('aria-controls');
      const controlledElement = document.getElementById(controlledId);

      if (!controlledElement) return;

      if (expanded) {
        button.setAttribute('aria-expanded', 'false');
        controlledElement.setAttribute('hidden', '');
      } else {
        button.setAttribute('aria-expanded', 'true');
        controlledElement.removeAttribute('hidden');
      }
    });
  });
})();
</script>

</body>
</html>