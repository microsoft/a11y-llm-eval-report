<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Example - Accessibility Demo</title>
    <style>
        /* 
         * Design Tokens & Color Palette
         * Ensuring high contrast ratios (AA/AAA)
         */
        :root {
            --color-bg: #ffffff;
            --color-text: #222222; /* Very dark gray for text (Ratio > 7:1) */
            --color-primary: #005a9c; /* Accessible link/action color */
            --color-primary-dark: #003d6b;
            --color-border: #757575; /* Mid-gray for boundaries (Ratio > 3:1) */
            --color-bg-subtle: #f4f4f4;
            --color-focus: #005a9c;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --spacing-unit: 1rem;
        }

        /* Basic Reset & Reflow Support */
        * {
            box-sizing: border-box;
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: var(--font-family);
            line-height: 1.5;
            margin: 0;
            padding: 0;
        }

        /* 
         * Skip Link (Bypass Block)
         * Visible only on focus
         */
        .sr-only:not(:focus):not(:active) {
            clip: rect(0 0 0 0);
            clip-path: inset(50%);
            height: 1px;
            overflow: hidden;
            position: absolute;
            white-space: nowrap;
            width: 1px;
        }

        .skip-link {
            background: var(--color-bg);
            border: 2px solid var(--color-primary);
            color: var(--color-primary);
            padding: 0.5rem 1rem;
            position: absolute;
            top: 1rem;
            left: 1rem;
            z-index: 100;
        }

        /* Layout & Landmarks */
        .page-header {
            border-bottom: 1px solid var(--color-border);
            padding: var(--spacing-unit);
        }

        .main-content {
            margin: 0 auto;
            max-width: 60rem; /* Prevents long lines, readable length */
            padding: var(--spacing-unit);
            width: 100%;
        }

        .page-footer {
            border-top: 1px solid var(--color-border);
            margin-top: 2rem;
            padding: var(--spacing-unit);
            text-align: center;
        }

        /* 
         * Component: Expand/Collapse Widget 
         */
        .example {
            border: 1px solid var(--color-border);
            border-radius: 4px;
            margin-bottom: 1.5rem;
            max-width: 40rem; /* Component level constraint */
        }

        .disclosure-btn {
            align-items: center;
            background-color: transparent;
            border: none; /* We use the wrapper border */
            border-radius: 4px; /* For focus ring */
            color: var(--color-text);
            cursor: pointer;
            display: flex;
            font-size: 1rem;
            font-weight: 700;
            justify-content: space-between;
            padding: 1rem;
            text-align: left;
            width: 100%;
        }

        .disclosure-btn:hover {
            background-color: var(--color-bg-subtle);
        }

        /* 
         * Visible Focus Indicators 
         * Uses outline for high contrast and offset for clarity
         */
        .disclosure-btn:focus-visible {
            outline: 3px solid var(--color-focus);
            outline-offset: -3px; /* Draws inside to prevent cutoff */
        }

        /* Icon rotation based on state */
        .disclosure-icon {
            flex-shrink: 0;
            height: 1.5rem;
            margin-left: 0.5rem;
            transition: transform 0.2s ease-in-out;
            width: 1.5rem;
        }

        /* Select icon when button[aria-expanded="true"] */
        .disclosure-btn[aria-expanded="true"] .disclosure-icon {
            transform: rotate(180deg);
        }

        .details {
            border-top: 1px solid var(--color-border);
            padding: 1rem;
        }

        /* Hiding content robustly */
        .details[hidden] {
            display: none;
        }

        /* 
         * Forced Colors / High Contrast Mode Support 
         */
        @media (forced-colors: active) {
            .disclosure-btn:focus-visible {
                outline: 2px solid ButtonText;
            }
            
            .example {
                border: 2px solid CanvasText;
            }
            
            .details {
                border-top: 2px solid CanvasText;
            }
        }

        /* Icons inheriting color */
        svg {
            fill: currentColor;
            stroke: currentColor;
        }
    </style>
</head>
<body>

    <header class="page-header">
        <a href="#maincontent" class="skip-link sr-only">Skip to main content</a>
        <div style="max-width: 60rem; margin: 0 auto;">
            <span>Acme Corp Accessibility Demos</span>
        </div>
    </header>

    <main id="maincontent" class="main-content" tabindex="-1">
        
        <h1>Frequently Asked Questions</h1>
        <p>Use the buttons below to reveal answers to common questions.</p>

        <!-- Widget 1 -->
        <div class="example">
            <h3>
                <button type="button" class="disclosure-btn" aria-expanded="false" aria-controls="faq1-content">
                    <span>What is your return policy?</span>
                    <svg class="disclosure-icon" aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </h3>
            <div id="faq1-content" class="details" hidden>
                <p>We offer a 30-day return policy for all unused items in their original packaging. Please retain your receipt for proof of purchase.</p>
                <p><a href="#" style="color: var(--color-primary);">Read full return policy</a></p>
            </div>
        </div>

        <!-- Widget 2 -->
        <div class="example">
            <h3>
                <button type="button" class="disclosure-btn" aria-expanded="false" aria-controls="faq2-content">
                    <span>How do I track my order?</span>
                    <svg class="disclosure-icon" aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </h3>
            <div id="faq2-content" class="details" hidden>
                <p>Once your order ships, you will receive an email with a tracking number. You can also view your order status in your account dashboard.</p>
            </div>
        </div>

    </main>

    <footer class="page-footer">
        <p>&copy; 2023 Acme Corp. All rights reserved.</p>
    </footer>

    <script>
        /**
         * Simple progressive enhancement script for Disclosure widgets.
         * Handles aria-expanded toggling and content visibility.
         */
        document.addEventListener('DOMContentLoaded', () => {
            const disclosureButtons = document.querySelectorAll('.disclosure-btn');

            disclosureButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';
                    const controlsId = button.getAttribute('aria-controls');
                    const content = document.getElementById(controlsId);

                    if (!content) return;

                    // Toggle State
                    button.setAttribute('aria-expanded', !isExpanded);
                    
                    // Toggle Visibility
                    if (isExpanded) {
                        content.setAttribute('hidden', '');
                    } else {
                        content.removeAttribute('hidden');
                    }
                });
            });
        });
    </script>
</body>
</html>