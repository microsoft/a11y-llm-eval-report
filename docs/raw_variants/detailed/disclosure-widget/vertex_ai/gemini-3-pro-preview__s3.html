<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Example - Accessibility Demo</title>
    <style>
        /* Design Tokens */
        :root {
            --color-bg: #ffffff;
            --color-text: #2d2d2d;
            --color-muted-text: #595959;
            --color-link: #005a9c;
            --color-border: #767676;
            --color-focus: #004d40;
            --color-focus-outline: #2b2b2b;
            --color-button-bg: #f0f0f0;
            --color-button-hover: #e0e0e0;
        }

        /* Base styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.5;
            color: var(--color-text);
            background-color: var(--color-bg);
            margin: 0;
            padding: 0;
        }

        /* Skip link */
        .sr-only {
            clip: rect(0 0 0 0);
            clip-path: inset(50%);
            height: 1px;
            overflow: hidden;
            position: absolute;
            white-space: nowrap;
            width: 1px;
        }

        .skip-link {
            position: absolute;
            top: 0;
            left: 0;
            background: var(--color-bg);
            color: var(--color-link);
            padding: 0.5rem 1rem;
            z-index: 100;
            text-decoration: underline;
            transform: translateY(-100%);
            transition: transform 0.2s;
        }

        .skip-link:focus {
            transform: translateY(0);
            outline: 3px solid var(--color-focus);
            outline-offset: 2px;
        }

        /* Layout */
        .container {
            max-width: 48rem; /* approx 768px */
            margin: 0 auto;
            padding: 1rem;
        }

        header {
            border-bottom: 1px solid var(--color-border);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
        }

        h1 {
            margin: 0;
            font-size: 2rem;
        }

        /* Example Wrapper */
        .example {
            border: 1px solid var(--color-border);
            border-radius: 4px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .example h2 {
            margin-top: 0;
            font-size: 1.25rem;
        }

        /* Expand/Collapse Widget Styles */
        .disclosure-button {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            font-weight: 600;
            text-align: left;
            background-color: var(--color-button-bg);
            border: 1px solid var(--color-border);
            border-radius: 4px;
            cursor: pointer;
            color: var(--color-text);
        }

        .disclosure-button:hover {
            background-color: var(--color-button-hover);
        }

        .disclosure-button:focus-visible {
            outline: 3px solid var(--color-focus);
            outline-offset: 2px;
            /* Ensure outline is visible in forced colors */
            border-color: transparent; 
        }

        .disclosure-button svg {
            width: 1.5rem;
            height: 1.5rem;
            fill: currentColor;
            transition: transform 0.2s ease-in-out;
            /* Prevent icon from shrinking on small screens */
            flex-shrink: 0; 
            margin-left: 0.5rem;
        }

        .disclosure-button[aria-expanded="true"] svg {
            transform: rotate(180deg);
        }

        .details {
            padding: 1rem;
            border: 1px solid var(--color-border);
            border-top: none;
            border-radius: 0 0 4px 4px;
            margin-top: -4px; /* Slight overlap to merge borders */
            display: none;
        }

        /* Utility class to show content */
        .details:not([hidden]) {
            display: block;
        }

        /* High Contrast / Forced Colors Mode Support */
        @media (forced-colors: active) {
            .disclosure-button {
                border: 2px solid ButtonBorder;
            }
            
            .disclosure-button:focus-visible {
                outline: 2px solid CanvasText;
                outline-offset: 4px;
            }

            .details {
                border: 2px solid ButtonBorder;
                border-top: none;
            }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <a href="#maincontent" class="skip-link">Skip to main content</a>
            <nav aria-label="Main">
                <!-- Navigation would go here -->
            </nav>
        </div>
    </header>

    <main id="maincontent" class="container" tabindex="-1">
        <h1>Expand/Collapse Widget Examples</h1>
        <p>This page demonstrates accessible disclosure patterns (expand/collapse) using native HTML buttons and ARIA attributes.</p>

        <!-- Example 1: Basic Disclosure -->
        <div class="example">
            <h2>Example 1: Basic Disclosure</h2>
            
            <!-- 
              We use a <button> for keyboard accessibility and native click handling.
              aria-expanded indicates state.
              aria-controls connects the button to the content it controls.
            -->
            <button type="button" 
                    class="disclosure-button" 
                    aria-expanded="false" 
                    aria-controls="content-1"
                    id="btn-1">
                <span>Shipping Information</span>
                <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                </svg>
            </button>
            
            <div id="content-1" class="details" hidden>
                <p>Standard shipping is free for orders over $50. Expedited shipping options are available at checkout. Please allow 1-2 business days for processing.</p>
                <p><a href="#" style="color: var(--color-link);">View full shipping policy</a></p>
            </div>
        </div>

        <!-- Example 2: Initially Expanded -->
        <div class="example">
            <h2>Example 2: Initially Expanded</h2>
            
            <button type="button" 
                    class="disclosure-button" 
                    aria-expanded="true" 
                    aria-controls="content-2"
                    id="btn-2">
                <span>Product Details</span>
                <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
                    <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                </svg>
            </button>
            
            <!-- Note: No 'hidden' attribute initially -->
            <div id="content-2" class="details">
                <ul>
                    <li><strong>Material:</strong> 100% Organic Cotton</li>
                    <li><strong>Care:</strong> Machine wash cold, tumble dry low</li>
                    <li><strong>Origin:</strong> Made in Portugal</li>
                </ul>
            </div>
        </div>

    </main>

    <script>
        // Use event delegation for efficiency and robustness
        document.addEventListener('click', function (event) {
            // Check if the clicked element or its parent is a disclosure button
            const button = event.target.closest('button[aria-expanded][aria-controls]');
            
            if (!button) return;

            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            const contentId = button.getAttribute('aria-controls');
            const content = document.getElementById(contentId);

            if (!content) return;

            // Toggle the state
            button.setAttribute('aria-expanded', !isExpanded);
            
            // Toggle visibility using the hidden attribute
            if (isExpanded) {
                content.setAttribute('hidden', '');
            } else {
                content.removeAttribute('hidden');
            }
        });
    </script>
</body>
</html>