<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Example - Accessible Components - Demo Site</title>
    <style>
        /* 
         * DESIGN TOKENS 
         * Centralized color palette for consistency and easy updates.
         */
        :root {
            /* Core colors */
            --color-bg: #ffffff;
            --color-text: #2d2d2d;
            --color-muted-text: #595959;
            --color-primary: #005a9c;
            --color-primary-hover: #004475;
            --color-border: #767676;
            --color-focus: #005a9c;
            --color-bg-secondary: #f4f4f4;
            --color-error: #d32f2f;
            
            /* Spacing & Layout */
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --border-radius: 4px;
        }

        /* 
         * RESET & BASE STYLES 
         */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.5;
            color: var(--color-text);
            background-color: var(--color-bg);
            margin: 0;
            padding: 0;
        }

        /* 
         * UTILITIES 
         */
        /* Skip link for keyboard users */
        .sr-only:not(:focus):not(:active) {
            clip: rect(0 0 0 0);
            clip-path: inset(50%);
            height: 1px;
            overflow: hidden;
            position: absolute;
            white-space: nowrap;
            width: 1px;
        }

        .skip-link {
            background: var(--color-bg);
            color: var(--color-primary);
            padding: var(--spacing-sm);
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
            text-decoration: underline;
            font-weight: bold;
        }

        /* 
         * LAYOUT LANDMARKS 
         */
        header {
            border-bottom: 1px solid var(--color-border);
            padding: var(--spacing-md);
        }

        main {
            max-width: 800px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        h1 {
            font-size: 2rem;
            margin-bottom: var(--spacing-lg);
            color: var(--color-text);
        }

        h2 {
            font-size: 1.5rem;
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            color: var(--color-text);
        }

        /* 
         * COMPONENT: Expand/Collapse (Accordion) 
         * 
         * While the <details> and <summary> elements are the native HTML way 
         * to do this, the prompt specifically asks for a widget structure with specific classes.
         * To demonstrate a robust pattern often needed when styling requirements exceed
         * native element capabilities, or for animated interactions, this example uses
         * button + aria-expanded + aria-controls.
         * 
         * However, relying on native <details> is usually preferred if simple styling suffices.
         * I will provide a native HTML version as the primary example because the instructions 
         * state: "Prefer native HTML elements/attributes over ARIA."
         */

        .example {
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-md);
            overflow: hidden; /* Ensures content stays within rounded corners */
        }

        /* 
         * Styling the native <details> element 
         */
        details.example {
            /* Resetting default styles implies we take control */
        }

        summary {
            cursor: pointer;
            padding: var(--spacing-md);
            background-color: var(--color-bg-secondary);
            font-weight: bold;
            list-style: none; /* Hide default triangle in some browsers */
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: var(--color-primary);
        }

        /* Custom marker using SVG to ensure high contrast and scaling */
        summary::after {
            content: '';
            width: 1rem;
            height: 1rem;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23005a9c' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
            transition: transform 0.2s ease-in-out;
        }

        details[open] summary::after {
            transform: rotate(180deg);
        }

        /* Hide default marker in Webkit */
        summary::-webkit-details-marker {
            display: none;
        }

        summary:hover {
            background-color: #e0e0e0;
            color: var(--color-primary-hover);
        }

        /* Focus styles - High contrast outline */
        summary:focus-visible {
            outline: 3px solid var(--color-focus);
            outline-offset: -3px; /* Ensure outline is visible inside */
            background-color: #e0e0e0;
        }

        /* Content container */
        .details {
            padding: var(--spacing-md);
            border-top: 1px solid var(--color-border);
            background-color: var(--color-bg);
        }

        /* 
         * COMPONENT: Button-controlled Expand/Collapse 
         * (Alternative pattern when not using <details>)
         */
        .accordion-button {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-md);
            background-color: var(--color-bg-secondary);
            border: none;
            border-bottom: 1px solid transparent; /* Placeholder for open state */
            color: var(--color-primary);
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            text-align: left;
            font-family: inherit;
        }
        
        .accordion-button:hover {
            background-color: #e0e0e0;
            color: var(--color-primary-hover);
            text-decoration: underline;
        }

        .accordion-button:focus-visible {
            outline: 3px solid var(--color-focus);
            outline-offset: -3px;
            z-index: 1; /* Bring to front so outline isn't cut off */
        }

        .accordion-button[aria-expanded="true"] {
            border-bottom: 1px solid var(--color-border);
        }

        /* Icon for button version */
        .icon-chevron {
            width: 1.5rem;
            height: 1.5rem;
            transition: transform 0.2s ease;
            pointer-events: none; /* Icon is decorative, clicks pass to button */
        }
        
        .accordion-button[aria-expanded="true"] .icon-chevron {
            transform: rotate(180deg);
        }

        /* 
         * HIGH CONTRAST / FORCED COLORS MODE 
         */
        @media (forced-colors: active) {
            .example {
                border: 2px solid CanvasText;
            }
            summary, .accordion-button {
                border: 2px solid ButtonBorder;
            }
            summary:focus-visible, .accordion-button:focus-visible {
                outline: 2px dashed CanvasText;
                outline-offset: 2px;
            }
            /* Ensure icons are visible */
            .icon-chevron {
                stroke: ButtonText;
            }
            summary::after {
                 /* Switch to CSS border arrow for forced colors if SVG fails to adapt, 
                    though currentColor SVGs usually work well. */
                background-image: none; 
                width: 0;
                height: 0;
                border-left: 6px solid transparent;
                border-right: 6px solid transparent;
                border-top: 6px solid ButtonText;
            }
            details[open] summary::after {
                transform: rotate(180deg);
            }
        }

        /* 
         * REFLOW 
         * Ensure text wraps and doesn't overflow
         */
        p {
            overflow-wrap: break-word;
            word-wrap: break-word;
            hyphens: auto;
            max-width: 100%;
        }

    </style>
</head>
<body>

    <header>
        <a href="#maincontent" class="skip-link">Skip to main content</a>
        <nav aria-label="Main Navigation">
            <!-- Simple placeholder nav -->
            <ul style="list-style: none; padding: 0; margin: 0;">
                <li><a href="#" style="color: var(--color-primary); font-weight: bold; text-decoration: none;">Demo Home</a></li>
            </ul>
        </nav>
    </header>

    <main id="maincontent" tabindex="-1">
        <h1>Expand/Collapse Examples</h1>
        
        <p>This page demonstrates two accessible patterns for expanding and collapsing content. The first uses the native HTML <code>&lt;details&gt;</code> element, which is the preferred method. The second uses ARIA attributes for cases where custom behavior is required.</p>

        <h2>Native HTML Pattern (Preferred)</h2>
        <p>This implementation uses the native <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> elements. It works without JavaScript and provides built-in accessibility semantics.</p>

        <!-- 
            Example 1: Native <details> 
            - summary acts as the button.
            - The content inside automatically toggles.
            - "example" class wraps the widget.
            - "details" class styles the content container (div inside).
        -->
        <details class="example">
            <summary>
                Shipping Information
            </summary>
            <div class="details">
                <p>Standard shipping takes 3-5 business days. Expedited shipping options are available at checkout. We currently ship to all 50 states and select international destinations.</p>
                <p><a href="#" style="color: var(--color-primary);">View full shipping policy</a></p>
            </div>
        </details>

        <details class="example">
            <summary>
                Return Policy
            </summary>
            <div class="details">
                <p>Items can be returned within 30 days of receipt. Products must be in original packaging and unused condition. A restocking fee may apply for open box electronics.</p>
            </div>
        </details>

        <h2>ARIA Pattern (Custom)</h2>
        <p>This implementation uses a <code>&lt;button&gt;</code> with <code>aria-expanded</code> and <code>aria-controls</code>. This pattern requires JavaScript to function but offers more control over animations and state management.</p>

        <!-- 
            Example 2: ARIA Controlled 
            - Button needs explicit aria-expanded state.
            - Button controls the ID of the content region.
            - Content region needs an ID.
            - Content region should utilize `hidden` attribute when closed.
        -->
        <div class="example">
            <h3>
                <button type="button" 
                        class="accordion-button" 
                        aria-expanded="false" 
                        aria-controls="sect-warranty" 
                        id="btn-warranty">
                    <span>Warranty Information</span>
                    <svg aria-hidden="true" class="icon-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </h3>
            <div id="sect-warranty" 
                 class="details" 
                 role="region" 
                 aria-labelledby="btn-warranty"
                 hidden>
                <p>All products come with a limited 1-year manufacturer warranty covering defects in materials and workmanship. Extended protection plans can be purchased separately.</p>
            </div>
        </div>

        <div class="example">
            <h3>
                <button type="button" 
                        class="accordion-button" 
                        aria-expanded="false" 
                        aria-controls="sect-support" 
                        id="btn-support">
                    <span>Technical Support</span>
                    <svg aria-hidden="true" class="icon-chevron" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </button>
            </h3>
            <div id="sect-support" 
                 class="details" 
                 role="region" 
                 aria-labelledby="btn-support"
                 hidden>
                <p>Our support team is available 24/7 via chat, email, or phone. Please have your product serial number ready when contacting support to expedite your request.</p>
            </div>
        </div>

    </main>

    <script>
        /**
         * Script for the ARIA Pattern (Custom Accordion)
         * 
         * Note: The native <details> elements do not require this script.
         */
        document.addEventListener('DOMContentLoaded', () => {
            const accordionButtons = document.querySelectorAll('.accordion-button');

            accordionButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';
                    const controlsId = button.getAttribute('aria-controls');
                    const content = document.getElementById(controlsId);

                    if (!content) return;

                    // Toggle State
                    // 1. Update button state
                    button.setAttribute('aria-expanded', !isExpanded);
                    
                    // 2. Update visibility
                    if (isExpanded) {
                        content.hidden = true;
                    } else {
                        content.hidden = false;
                    }
                });
            });
        });
    </script>
</body>
</html>