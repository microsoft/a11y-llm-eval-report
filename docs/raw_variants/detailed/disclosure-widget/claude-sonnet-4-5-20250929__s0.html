<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expand/Collapse Widget - Accessibility Demo</title>
<style>
:root {
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-muted-text: #4a4a4a;
  --color-link: #0066cc;
  --color-border: #cccccc;
  --color-focus: #0066cc;
  --color-button-bg: #f5f5f5;
  --color-button-border: #999999;
  --color-button-text: #1a1a1a;
}

* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  line-height: 1.6;
  color: var(--color-text);
  background-color: var(--color-bg);
  margin: 0;
  padding: 20px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

header {
  margin-bottom: 2rem;
}

h1 {
  font-size: 2rem;
  margin-bottom: 0.5rem;
}

main {
  outline: none;
}

.example {
  margin-bottom: 3rem;
  padding: 1.5rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.example h2 {
  margin-top: 0;
  font-size: 1.5rem;
  margin-bottom: 1rem;
}

.expand-button {
  background-color: var(--color-button-bg);
  border: 2px solid var(--color-button-border);
  color: var(--color-button-text);
  padding: 0.5rem 1rem;
  font-size: 1rem;
  cursor: pointer;
  border-radius: 4px;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-family: inherit;
  line-height: 1.5;
}

.expand-button:hover {
  background-color: #e8e8e8;
  border-color: #666666;
}

.expand-button:active {
  background-color: #d8d8d8;
}

.expand-button:focus {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
  box-shadow: 0 0 4px 3px rgba(0, 102, 204, 0.3);
}

@media (forced-colors: active) {
  .expand-button:focus {
    outline: 2px solid ButtonBorder;
  }
}

.expand-icon {
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 6px solid currentColor;
  transition: transform 0.2s ease;
}

.expand-button[aria-expanded="true"] .expand-icon {
  transform: rotate(180deg);
}

.details {
  margin-top: 1rem;
  padding: 1rem;
  background-color: #f9f9f9;
  border: 1px solid var(--color-border);
  border-radius: 4px;
  overflow-wrap: anywhere;
}

.details[hidden] {
  display: none;
}

.details p:first-child {
  margin-top: 0;
}

.details p:last-child {
  margin-bottom: 0;
}

@media (max-width: 320px) {
  body {
    padding: 10px;
  }
  
  .example {
    padding: 1rem;
  }
  
  .expand-button {
    width: 100%;
    justify-content: center;
  }
}

@media (forced-colors: active) {
  .expand-button {
    border: 2px solid ButtonBorder;
    background-color: ButtonFace;
    color: ButtonText;
  }
  
  .expand-button:focus {
    outline: 2px solid ButtonBorder;
  }
  
  .details {
    border: 1px solid CanvasText;
  }
  
  .expand-icon {
    border-top-color: currentColor;
  }
}
</style>
</head>
<body>
<header>
  <a href="#maincontent" class="sr-only">Skip to main content</a>
  <h1>Expand/Collapse Widget Examples</h1>
  <p>Demonstrating accessible expand/collapse patterns with proper keyboard support and ARIA attributes.</p>
</header>

<main id="maincontent" tabindex="-1">
  <div class="example">
    <h2>Basic Expand/Collapse</h2>
    <p>Click the button below to show or hide additional content.</p>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="details1">
      <span class="expand-icon" aria-hidden="true"></span>
      Show Details
    </button>
    <div id="details1" class="details" hidden>
      <p>This is the expanded content. It contains additional information that was initially hidden from view.</p>
      <p>Users can collapse this section by clicking the button again.</p>
    </div>
  </div>

  <div class="example">
    <h2>FAQ Item</h2>
    <p>A common use case for expand/collapse widgets is in FAQ sections.</p>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="details2">
      <span class="expand-icon" aria-hidden="true"></span>
      What are the accessibility requirements for expand/collapse widgets?
    </button>
    <div id="details2" class="details" hidden>
      <p>Expand/collapse widgets must meet several accessibility requirements:</p>
      <ul>
        <li>Use a button element for the toggle control</li>
        <li>Include aria-expanded to indicate the current state</li>
        <li>Use aria-controls to associate the button with the controlled content</li>
        <li>Ensure keyboard operability (Space and Enter keys)</li>
        <li>Provide clear visual focus indicators</li>
        <li>Use appropriate color contrast for all states</li>
        <li>Ensure the widget works in High Contrast mode</li>
      </ul>
    </div>
  </div>

  <div class="example">
    <h2>Product Information</h2>
    <p>Expand to view detailed product specifications.</p>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="details3">
      <span class="expand-icon" aria-hidden="true"></span>
      Technical Specifications
    </button>
    <div id="details3" class="details" hidden>
      <h3>Specifications</h3>
      <dl>
        <dt>Dimensions:</dt>
        <dd>10" x 8" x 2"</dd>
        <dt>Weight:</dt>
        <dd>1.5 lbs</dd>
        <dt>Material:</dt>
        <dd>Recycled aluminum and plastic</dd>
        <dt>Color Options:</dt>
        <dd>Silver, Black, Blue</dd>
        <dt>Warranty:</dt>
        <dd>2 years limited warranty</dd>
      </dl>
    </div>
  </div>

  <div class="example">
    <h2>Initially Expanded</h2>
    <p>This example starts in the expanded state.</p>
    <button type="button" class="expand-button" aria-expanded="true" aria-controls="details4">
      <span class="expand-icon" aria-hidden="true"></span>
      Hide Additional Information
    </button>
    <div id="details4" class="details">
      <p>This content is visible by default. The button's aria-expanded attribute is set to "true" and the content does not have the hidden attribute.</p>
      <p>This pattern is useful when you want to show important information by default but still allow users to collapse it to reduce visual clutter.</p>
    </div>
  </div>
</main>

<script>
(function() {
  'use strict';
  
  const buttons = document.querySelectorAll('.expand-button');
  
  buttons.forEach(button => {
    button.addEventListener('click', function() {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      const controlsId = this.getAttribute('aria-controls');
      const details = document.getElementById(controlsId);
      
      if (!details) return;
      
      // Toggle state
      this.setAttribute('aria-expanded', !expanded);
      
      if (expanded) {
        details.hidden = true;
        // Update button text if it contains "Hide"
        if (this.textContent.includes('Hide')) {
          this.innerHTML = this.innerHTML.replace('Hide', 'Show');
        }
      } else {
        details.hidden = false;
        // Update button text if it contains "Show"
        if (this.textContent.includes('Show')) {
          this.innerHTML = this.innerHTML.replace('Show', 'Hide');
        }
      }
    });
  });
})();
</script>
</body>
</html>