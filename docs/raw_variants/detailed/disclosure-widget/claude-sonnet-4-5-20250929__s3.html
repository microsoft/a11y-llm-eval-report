<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expand/Collapse Widget - Demonstration</title>
<style>
:root {
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-muted-text: #595959;
  --color-border: #cccccc;
  --color-focus: #0066cc;
  --color-button-bg: #f5f5f5;
  --color-button-hover: #e8e8e8;
  --color-button-active: #d9d9d9;
}

* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  line-height: 1.6;
  color: var(--color-text);
  background-color: var(--color-bg);
  margin: 0;
  padding: 20px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

h1 {
  font-size: 2rem;
  margin-bottom: 1.5rem;
}

h2 {
  font-size: 1.5rem;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.example {
  margin-bottom: 3rem;
  padding: 1.5rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.expand-button {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-text);
  background-color: var(--color-button-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  cursor: pointer;
  text-align: left;
  transition: background-color 0.2s;
}

.expand-button:hover {
  background-color: var(--color-button-hover);
}

.expand-button:active {
  background-color: var(--color-button-active);
}

.expand-button:focus {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
}

.expand-icon {
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 8px solid currentColor;
  transition: transform 0.2s;
  flex-shrink: 0;
}

.expand-button[aria-expanded="false"] .expand-icon {
  transform: rotate(-90deg);
}

.details {
  margin-top: 1rem;
  padding: 1rem;
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.details[hidden] {
  display: none;
}

.details p:first-child {
  margin-top: 0;
}

.details p:last-child {
  margin-bottom: 0;
}

@media (forced-colors: active) {
  .expand-button {
    border: 2px solid ButtonBorder;
  }
  
  .expand-button:focus {
    outline: 2px solid ButtonText;
  }
  
  .expand-icon {
    border-top-color: ButtonText;
  }
  
  .details {
    border: 1px solid CanvasText;
  }
}

@media (max-width: 320px) {
  body {
    padding: 10px;
  }
  
  .example {
    padding: 1rem;
  }
  
  .expand-button {
    padding: 0.5rem 0.75rem;
    font-size: 0.9375rem;
  }
  
  h1 {
    font-size: 1.5rem;
  }
  
  h2 {
    font-size: 1.25rem;
  }
}
</style>
</head>
<body>
<a href="#maincontent" class="sr-only">Skip to main content</a>

<header>
  <h1>Expand/Collapse Widget Demonstration</h1>
</header>

<main id="maincontent" tabindex="-1">
  <p>This page demonstrates accessible expand/collapse widgets. Each widget uses a button to toggle the visibility of associated content.</p>

  <section>
    <h2>Example 1: Basic Expand/Collapse</h2>
    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="content1">
        <span class="expand-icon" aria-hidden="true"></span>
        <span>What is an expand/collapse widget?</span>
      </button>
      <div id="content1" class="details" hidden>
        <p>An expand/collapse widget (also known as a disclosure widget) is an interactive component that shows or hides content when activated. It consists of a button that controls the visibility of associated content.</p>
        <p>This pattern is useful for progressive disclosure, allowing users to access additional information on demand without cluttering the interface.</p>
      </div>
    </div>
  </section>

  <section>
    <h2>Example 2: Multiple Widgets</h2>
    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="content2">
        <span class="expand-icon" aria-hidden="true"></span>
        <span>How do I use keyboard navigation?</span>
      </button>
      <div id="content2" class="details" hidden>
        <p>To navigate and use this widget with a keyboard:</p>
        <ul>
          <li>Press <kbd>Tab</kbd> to move focus to the expand/collapse button</li>
          <li>Press <kbd>Enter</kbd> or <kbd>Space</kbd> to toggle the content visibility</li>
          <li>Press <kbd>Tab</kbd> again to move to the next focusable element</li>
        </ul>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="content3">
        <span class="expand-icon" aria-hidden="true"></span>
        <span>What accessibility features are included?</span>
      </button>
      <div id="content3" class="details" hidden>
        <p>This widget includes several accessibility features:</p>
        <ul>
          <li><strong>Semantic HTML:</strong> Uses a native button element for keyboard and screen reader support</li>
          <li><strong>ARIA attributes:</strong> <code>aria-expanded</code> indicates the current state, and <code>aria-controls</code> associates the button with its content</li>
          <li><strong>Visible focus indicator:</strong> A clear outline appears when the button receives keyboard focus</li>
          <li><strong>Sufficient contrast:</strong> Text and interactive elements meet WCAG contrast requirements</li>
          <li><strong>Forced colors support:</strong> Adapts to high contrast and forced colors modes</li>
        </ul>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="content4">
        <span class="expand-icon" aria-hidden="true"></span>
        <span>Can I have multiple widgets on one page?</span>
      </button>
      <div id="content4" class="details" hidden>
        <p>Yes! You can have as many expand/collapse widgets as needed on a single page. Each widget operates independently, and users can expand or collapse them in any order.</p>
        <p>Each widget must have unique IDs for the content region to ensure proper association between buttons and their controlled content.</p>
      </div>
    </div>
  </section>

  <section>
    <h2>Example 3: Initially Expanded</h2>
    <div class="example">
      <button type="button" class="expand-button" aria-expanded="true" aria-controls="content5">
        <span class="expand-icon" aria-hidden="true"></span>
        <span>Important information (expanded by default)</span>
      </button>
      <div id="content5" class="details">
        <p>This widget starts in an expanded state. This can be useful for content that is important or frequently accessed, while still allowing users to collapse it if desired.</p>
        <p>The <code>aria-expanded</code> attribute is set to <code>true</code>, and the <code>hidden</code> attribute is not present on the content region.</p>
      </div>
    </div>
  </section>
</main>

<script>
(function() {
  const buttons = document.querySelectorAll('.expand-button');
  
  buttons.forEach(button => {
    button.addEventListener('click', function() {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      const contentId = this.getAttribute('aria-controls');
      const content = document.getElementById(contentId);
      
      if (!content) return;
      
      this.setAttribute('aria-expanded', !expanded);
      
      if (expanded) {
        content.hidden = true;
      } else {
        content.hidden = false;
      }
    });
  });
})();
</script>
</body>
</html>