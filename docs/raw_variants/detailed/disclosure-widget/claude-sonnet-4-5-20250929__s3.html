<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expand/Collapse Widget - Demonstration</title>
<style>
:root {
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-muted-text: #595959;
  --color-border: #cccccc;
  --color-focus: #0066cc;
  --color-button-bg: #f5f5f5;
  --color-button-hover: #e8e8e8;
  --color-button-active: #d9d9d9;
}

* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  line-height: 1.6;
  color: var(--color-text);
  background-color: var(--color-bg);
  margin: 0;
  padding: 20px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

h1 {
  font-size: 2rem;
  margin-top: 0;
  margin-bottom: 1.5rem;
}

h2 {
  font-size: 1.5rem;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.example {
  margin-bottom: 3rem;
  padding: 1.5rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.expand-button {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: var(--color-button-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  font-size: 1rem;
  font-weight: 600;
  color: var(--color-text);
  cursor: pointer;
  text-align: left;
  transition: background-color 0.15s ease;
}

.expand-button:hover {
  background-color: var(--color-button-hover);
}

.expand-button:active {
  background-color: var(--color-button-active);
}

.expand-button:focus {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
  box-shadow: 0 0 0 2px var(--color-bg), 0 0 0 4px var(--color-focus);
}

@media (forced-colors: active) {
  .expand-button:focus {
    outline: 2px solid ButtonBorder;
    outline-offset: 2px;
  }
}

.expand-icon {
  width: 1rem;
  height: 1rem;
  fill: currentColor;
  stroke: currentColor;
  transition: transform 0.2s ease;
  flex-shrink: 0;
}

.expand-button[aria-expanded="true"] .expand-icon {
  transform: rotate(90deg);
}

.details {
  margin-top: 1rem;
  padding: 1rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
  background-color: var(--color-bg);
}

.details[hidden] {
  display: none;
}

.details p {
  margin-top: 0;
  margin-bottom: 1rem;
}

.details p:last-child {
  margin-bottom: 0;
}

@media (max-width: 320px) {
  body {
    padding: 10px;
  }
  
  .example {
    padding: 1rem;
  }
  
  .expand-button {
    padding: 0.5rem 0.75rem;
    font-size: 0.9375rem;
  }
}
</style>
</head>
<body>

<a href="#maincontent" class="sr-only">Skip to main content</a>

<header>
  <h1>Expand/Collapse Widget Demonstration</h1>
</header>

<main id="maincontent" tabindex="-1">
  
  <section>
    <h2>Basic Expand/Collapse</h2>
    
    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="details1">
        <svg class="expand-icon" aria-hidden="true" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 4l4 4-4 4" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>What is an expand/collapse widget?</span>
      </button>
      
      <div id="details1" class="details" hidden>
        <p>An expand/collapse widget (also known as a disclosure widget or accordion) allows users to show and hide sections of content. This pattern helps manage screen real estate and cognitive load by letting users focus on content relevant to their current task.</p>
        <p>The widget consists of a button that controls the visibility of associated content. When collapsed, the content is hidden. When expanded, the content becomes visible.</p>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="details2">
        <svg class="expand-icon" aria-hidden="true" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 4l4 4-4 4" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>How does keyboard interaction work?</span>
      </button>
      
      <div id="details2" class="details" hidden>
        <p><strong>Space or Enter:</strong> When focus is on the button, activates the button and toggles the visibility of the content.</p>
        <p><strong>Tab:</strong> Moves focus to the next focusable element. When the content is expanded, all focusable elements within the content are included in the page Tab sequence.</p>
        <p><strong>Shift + Tab:</strong> Moves focus to the previous focusable element.</p>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="details3">
        <svg class="expand-icon" aria-hidden="true" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 4l4 4-4 4" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>What ARIA attributes are required?</span>
      </button>
      
      <div id="details3" class="details" hidden>
        <p><strong>aria-expanded:</strong> Set to "true" when the content is visible, and "false" when hidden. This attribute is placed on the button element.</p>
        <p><strong>aria-controls:</strong> References the ID of the element containing the content that is shown or hidden. This attribute is placed on the button element.</p>
        <p>The content container uses the <code>hidden</code> attribute when collapsed to ensure it is properly hidden from all users, including those using assistive technologies.</p>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="true" aria-controls="details4">
        <svg class="expand-icon" aria-hidden="true" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
          <path d="M6 4l4 4-4 4" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Example: Initially Expanded</span>
      </button>
      
      <div id="details4" class="details">
        <p>This expand/collapse widget is initially in the expanded state. The button has <code>aria-expanded="true"</code> and the content does not have the <code>hidden</code> attribute.</p>
        <p>Users can collapse this content by activating the button with Space, Enter, or a click.</p>
      </div>
    </div>

  </section>

</main>

<script>
(function() {
  'use strict';
  
  // Get all expand buttons
  const expandButtons = document.querySelectorAll('.expand-button');
  
  expandButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Get the current state
      const isExpanded = this.getAttribute('aria-expanded') === 'true';
      
      // Get the controlled element
      const controlsId = this.getAttribute('aria-controls');
      const contentElement = document.getElementById(controlsId);
      
      if (!contentElement) {
        return;
      }
      
      // Toggle the state
      if (isExpanded) {
        this.setAttribute('aria-expanded', 'false');
        contentElement.hidden = true;
      } else {
        this.setAttribute('aria-expanded', 'true');
        contentElement.hidden = false;
      }
    });
  });
})();
</script>

</body>
</html>