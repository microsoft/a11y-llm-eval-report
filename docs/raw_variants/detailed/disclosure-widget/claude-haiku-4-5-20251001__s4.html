<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expand/Collapse Widget - Accessible Examples</title>
  <style>
    :root {
      --color-bg: #ffffff;
      --color-text: #1a1a1a;
      --color-border: #cccccc;
      --color-focus: #0066cc;
      --color-focus-bg: #e6f2ff;
      --color-muted-text: #666666;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color: var(--color-bg);
      color: var(--color-text);
      line-height: 1.6;
      margin: 0;
      padding: 20px;
    }

    header {
      margin-bottom: 40px;
    }

    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }

    h1 {
      font-size: 2em;
      margin: 0 0 10px 0;
    }

    main {
      max-width: 800px;
      margin: 0 auto;
    }

    .example {
      margin-bottom: 40px;
      padding: 20px;
      border: 1px solid var(--color-border);
      border-radius: 8px;
      background-color: #f9f9f9;
    }

    .example h2 {
      font-size: 1.3em;
      margin: 0 0 15px 0;
    }

    .example p {
      margin: 0 0 15px 0;
      color: var(--color-muted-text);
      font-size: 0.95em;
    }

    /* Native details/summary styling */
    details {
      border: 1px solid var(--color-border);
      border-radius: 4px;
      padding: 0;
      margin-bottom: 15px;
    }

    summary {
      padding: 12px 16px;
      background-color: #f0f0f0;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
      border-radius: 4px;
    }

    summary:hover {
      background-color: #e6e6e6;
    }

    summary:focus {
      outline: 2px solid var(--color-focus);
      outline-offset: -2px;
    }

    summary::marker {
      color: var(--color-focus);
    }

    .details {
      padding: 16px;
      background-color: var(--color-bg);
      border-top: 1px solid var(--color-border);
    }

    /* Custom button-based expand/collapse */
    .custom-toggle {
      background-color: #f0f0f0;
      border: 1px solid var(--color-border);
      padding: 12px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1em;
      color: var(--color-text);
      display: flex;
      align-items: center;
      gap: 8px;
      width: 100%;
      text-align: left;
    }

    .custom-toggle:hover {
      background-color: #e6e6e6;
    }

    .custom-toggle:focus {
      outline: 2px solid var(--color-focus);
      outline-offset: -2px;
    }

    .custom-toggle:active {
      background-color: #d9d9d9;
    }

    .toggle-icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      transition: transform 0.2s ease;
    }

    .custom-toggle[aria-expanded="true"] .toggle-icon {
      transform: rotate(180deg);
    }

    .custom-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .custom-toggle[aria-expanded="true"] + .custom-content {
      max-height: 500px;
    }

    .custom-content .details {
      border: none;
      padding: 16px 0;
      background-color: transparent;
      border-top: 1px solid var(--color-border);
      margin-top: 0;
    }

    @media (forced-colors: active) {
      summary {
        border: 1px solid ButtonBorder;
      }

      summary:focus {
        outline: 2px solid Highlight;
        outline-offset: -2px;
      }

      .custom-toggle {
        border: 1px solid ButtonBorder;
      }

      .custom-toggle:focus {
        outline: 2px solid Highlight;
        outline-offset: -2px;
      }
    }

    @media (max-width: 320px) {
      body {
        padding: 12px;
      }

      .example {
        padding: 12px;
      }

      summary,
      .custom-toggle {
        padding: 10px 12px;
        font-size: 0.95em;
      }

      .details {
        padding: 12px;
      }
    }
  </style>
</head>
<body>
  <header>
    <a href="#maincontent" class="sr-only">Skip to main content</a>
    <h1>Expand/Collapse Widget Examples</h1>
  </header>

  <main id="maincontent" tabindex="-1">
    <div class="example">
      <h2>Native HTML Details/Summary</h2>
      <p>This example uses the semantic HTML <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> elements, which provide built-in keyboard support and accessibility features.</p>
      
      <details class="details">
        <summary>Click to expand: What is accessibility?</summary>
        <p>Accessibility is the practice of making digital content and applications usable by everyone, including people with disabilities. This includes considerations for visual, auditory, motor, and cognitive disabilities.</p>
        <p>Web accessibility ensures that all users can perceive, understand, navigate, and interact with web content effectively, regardless of their abilities or the assistive technologies they use.</p>
      </details>

      <details class="details">
        <summary>Click to expand: Why is it important?</summary>
        <p>Accessible design benefits everyone. It improves usability for all users, supports people using assistive technologies, and often aligns with legal requirements such as the Americans with Disabilities Act (ADA) and WCAG guidelines.</p>
      </details>
    </div>

    <div class="example">
      <h2>Custom Button-Based Expand/Collapse</h2>
      <p>This example uses a custom button with <code>aria-expanded</code> and JavaScript to manage the expanded/collapsed state. The button includes a visual indicator icon.</p>

      <button class="custom-toggle" aria-expanded="false" aria-controls="custom-panel-1">
        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
        Click to expand: Best practices for accessible forms
      </button>
      <div class="custom-content">
        <div class="details" id="custom-panel-1">
          <p>When creating accessible forms, ensure that:</p>
          <ul>
            <li>Every form control has a visible, associated label</li>
            <li>Required fields are marked both visually and programmatically</li>
            <li>Error messages are clear and linked to the invalid field</li>
            <li>The form is fully keyboard navigable</li>
            <li>Focus is managed appropriately throughout the form</li>
          </ul>
        </div>
      </div>

      <button class="custom-toggle" aria-expanded="false" aria-controls="custom-panel-2">
        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <polyline points="6 9 12 15 18 9"></polyline>
        </svg>
        Click to expand: Testing for accessibility
      </button>
      <div class="custom-content">
        <div class="details" id="custom-panel-2">
          <p>Accessibility testing should include:</p>
          <ul>
            <li>Automated testing tools to catch common issues</li>
            <li>Manual keyboard navigation testing</li>
            <li>Screen reader testing with real assistive technology</li>
            <li>Testing with users who have disabilities</li>
            <li>Contrast and color testing for low vision users</li>
            <li>Testing in high contrast and forced colors modes</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="example">
      <h2>Multiple Expandable Sections</h2>
      <p>You can have multiple expand/collapse sections on the same page. Each maintains its own state independently.</p>

      <details class="details">
        <summary>Section 1: Getting Started</summary>
        <p>To get started with web accessibility, begin by learning the WCAG 2.2 guidelines. These provide a comprehensive framework for making web content accessible to people with disabilities.</p>
      </details>

      <details class="details">
        <summary>Section 2: Common Issues</summary>
        <p>Common accessibility issues include missing alt text on images, poor color contrast, keyboard navigation problems, and missing form labels. These can be identified and fixed with proper testing and review.</p>
      </details>

      <details class="details">
        <summary>Section 3: Tools and Resources</summary>
        <p>There are many tools available to help with accessibility testing, including automated checkers, screen readers, and browser extensions. Combine automated testing with manual review and user testing for best results.</p>
      </details>
    </div>
  </main>

  <script>
    // Handle custom toggle buttons
    document.querySelectorAll('.custom-toggle').forEach(button => {
      button.addEventListener('click', function() {
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !isExpanded);
      });

      // Keyboard support: Enter and Space to toggle
      button.addEventListener('keydown', function(event) {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          this.click();
        }
      });
    });
  </script>
</body>
</html>