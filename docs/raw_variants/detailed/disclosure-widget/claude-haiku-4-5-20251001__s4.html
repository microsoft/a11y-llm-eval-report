<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expand/Collapse Widget - Accessibility Example</title>
  <style>
    /* Color tokens */
    :root {
      --color-bg: #ffffff;
      --color-text: #1a1a1a;
      --color-border: #cccccc;
      --color-focus: #0066cc;
      --color-focus-outline: #003d99;
      --color-hover-bg: #f5f5f5;
      --color-icon: #1a1a1a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
        Ubuntu, Cantarell, sans-serif;
      font-size: 16px;
      line-height: 1.5;
    }

    body {
      background-color: var(--color-bg);
      color: var(--color-text);
      padding: 2rem 1rem;
    }

    header {
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    main {
      max-width: 600px;
      margin: 0 auto;
    }

    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }

    .example {
      margin-bottom: 2rem;
    }

    .example h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      margin-top: 1.5rem;
    }

    /* Expand/Collapse Widget Styles */
    .expand-collapse-button {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      background-color: var(--color-bg);
      border: 2px solid var(--color-border);
      border-radius: 4px;
      color: var(--color-text);
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      width: 100%;
      text-align: left;
      transition: background-color 150ms ease, border-color 150ms ease;
    }

    .expand-collapse-button:hover {
      background-color: var(--color-hover-bg);
    }

    .expand-collapse-button:focus {
      outline: 3px solid var(--color-focus);
      outline-offset: 2px;
      background-color: var(--color-hover-bg);
    }

    .expand-collapse-button:active {
      background-color: var(--color-hover-bg);
    }

    .expand-collapse-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 1.25rem;
      height: 1.25rem;
      flex-shrink: 0;
      color: var(--color-icon);
      transition: transform 200ms ease;
    }

    .expand-collapse-button[aria-expanded="true"] .expand-collapse-icon {
      transform: rotate(180deg);
    }

    .details {
      padding: 1rem;
      border: 1px solid var(--color-border);
      border-top: none;
      background-color: var(--color-bg);
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height 300ms ease, opacity 300ms ease, padding 300ms ease;
    }

    .expand-collapse-button[aria-expanded="true"] + .details {
      max-height: 500px;
      opacity: 1;
      padding: 1rem;
    }

    .details p {
      margin-bottom: 0.75rem;
    }

    .details p:last-child {
      margin-bottom: 0;
    }

    .details a {
      color: var(--color-focus);
      text-decoration: underline;
    }

    .details a:focus {
      outline: 2px solid var(--color-focus);
      outline-offset: 2px;
    }

    .details a:visited {
      color: var(--color-focus-outline);
    }

    footer {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid var(--color-border);
      font-size: 0.875rem;
      color: var(--color-text);
    }

    @media (forced-colors: active) {
      .expand-collapse-button {
        border: 2px solid ButtonBorder;
        background-color: Canvas;
        color: CanvasText;
        forced-color-adjust: none;
      }

      .expand-collapse-button:focus {
        outline: 3px solid Highlight;
        outline-offset: 2px;
      }

      .details {
        border-color: ButtonBorder;
        background-color: Canvas;
        color: CanvasText;
      }

      .expand-collapse-icon {
        color: CanvasText;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .expand-collapse-icon,
      .details {
        transition: none;
      }
    }
  </style>
</head>
<body>
  <header>
    <a href="#maincontent" class="sr-only">Skip to main content</a>
    <h1>Expand/Collapse Widget Examples</h1>
    <p>
      Accessible expand/collapse (disclosure) widgets for revealing and hiding
      content.
    </p>
  </header>

  <main id="maincontent" tabindex="-1">
    <div class="example">
      <h2>Basic Expand/Collapse Widget</h2>
      <button
        class="expand-collapse-button"
        aria-expanded="false"
        aria-controls="content-1"
        id="button-1"
      >
        <svg
          class="expand-collapse-icon"
          aria-hidden="true"
          viewBox="0 0 24 24"
          width="20"
          height="20"
        >
          <path
            fill="currentColor"
            d="M7 10l5 5 5-5z"
          />
        </svg>
        <span>Frequently Asked Questions</span>
      </button>
      <div class="details" id="content-1">
        <p>
          Expand/collapse widgets, also called disclosure widgets, allow users
          to reveal and hide content on demand. This reduces cognitive load and
          helps focus attention on the most relevant information.
        </p>
        <p>
          To use this widget: click the button to toggle the visibility of the
          content below. The button's label and visual indicator will update to
          reflect the current state.
        </p>
      </div>
    </div>

    <div class="example">
      <h2>Multiple Expand/Collapse Widgets</h2>

      <button
        class="expand-collapse-button"
        aria-expanded="false"
        aria-controls="content-2a"
        id="button-2a"
      >
        <svg
          class="expand-collapse-icon"
          aria-hidden="true"
          viewBox="0 0 24 24"
          width="20"
          height="20"
        >
          <path
            fill="currentColor"
            d="M7 10l5 5 5-5z"
          />
        </svg>
        <span>What is accessibility?</span>
      </button>
      <div class="details" id="content-2a">
        <p>
          Web accessibility means ensuring that websites, web applications, and
          digital content are usable by everyone, including people with
          disabilities. This includes people who are blind, deaf, have limited
          mobility, or have cognitive disabilities.
        </p>
      </div>

      <button
        class="expand-collapse-button"
        aria-expanded="false"
        aria-controls="content-2b"
        id="button-2b"
      >
        <svg
          class="expand-collapse-icon"
          aria-hidden="true"
          viewBox="0 0 24 24"
          width="20"
          height="20"
        >
          <path
            fill="currentColor"
            d="M7 10l5 5 5-5z"
          />
        </svg>
        <span>Why is it important?</span>
      </button>
      <div class="details" id="content-2b">
        <p>
          Accessible design benefits everyone. Users may experience temporary
          disabilities (injured arm, bright sunlight), situational barriers
          (noisy environment, small screen), or may simply prefer alternative
          ways of interacting with content.
        </p>
        <p>
          Building accessible digital products is both an ethical imperative and
          a legal requirement in many jurisdictions.
        </p>
      </div>

      <button
        class="expand-collapse-button"
        aria-expanded="false"
        aria-controls="content-2c"
        id="button-2c"
      >
        <svg
          class="expand-collapse-icon"
          aria-hidden="true"
          viewBox="0 0 24 24"
          width="20"
          height="20"
        >
          <path
            fill="currentColor"
            d="M7 10l5 5 5-5z"
          />
        </svg>
        <span>How do I test for accessibility?</span>
      </button>
      <div class="details" id="content-2c">
        <p>
          Test accessibility by:
        </p>
        <ul style="margin-left: 1.5rem; margin-bottom: 0.75rem;">
          <li>Using keyboard navigation only (no mouse)</li>
          <li>Testing with screen readers (NVDA, JAWS, VoiceOver)</li>
          <li>Checking color contrast ratios</li>
          <li>Validating HTML and ARIA usage</li>
          <li>Testing at different zoom levels</li>
          <li>Testing on a variety of devices and browsers</li>
        </ul>
      </div>
    </div>

    <div class="example">
      <h2>Widget Implementation Details</h2>
      <button
        class="expand-collapse-button"
        aria-expanded="false"
        aria-controls="content-3"
        id="button-3"
      >
        <svg
          class="expand-collapse-icon"
          aria-hidden="true"
          viewBox="0 0 24 24"
          width="20"
          height="20"
        >
          <path
            fill="currentColor"
            d="M7 10l5 5 5-5z"
          />
        </svg>
        <span>Accessibility Features</span>
      </button>
      <div class="details" id="content-3">
        <p>
          This widget includes the following accessibility features:
        </p>
        <ul style="margin-left: 1.5rem; margin-bottom: 0.75rem;">
          <li>
            <strong>Semantic HTML:</strong> Uses native button elements instead
            of custom widgets.
          </li>
          <li>
            <strong>ARIA attributes:</strong> Uses aria-expanded to indicate
            state and aria-controls to associate button with content.
          </li>
          <li>
            <strong>Keyboard support:</strong> Fully operable with keyboard
            (Enter/Space to toggle).
          </li>
          <li>
            <strong>Focus management:</strong> Clear focus indicators meet 3:1
            contrast ratio.
          </li>
          <li>
            <strong>Visual feedback:</strong> Rotating icon and smooth
            transitions indicate state changes.
          </li>
          <li>
            <strong>Reduced motion:</strong> Respects prefers-reduced-motion
            preference.
          </li>
          <li>
            <strong>High contrast:</strong> Adapts to forced-colors mode using
            system colors.
          </li>
        </ul>
      </div>
    </div>
  </main>

  <footer>
    <p>
      These expand/collapse widgets follow WCAG 2.2 Level AA guidelines and
      best practices for inclusive design.
    </p>
  </footer>

  <script>
    // Handle expand/collapse button clicks
    document.querySelectorAll('.expand-collapse-button').forEach((button) => {
      button.addEventListener('click', function () {
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !isExpanded);
      });

      // Keyboard support (Enter and Space already work natively for buttons)
      // Adding for clarity, but browsers handle this automatically
      button.addEventListener('keydown', function (event) {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          this.click();
        }
      });
    });
  </script>
</body>
</html>