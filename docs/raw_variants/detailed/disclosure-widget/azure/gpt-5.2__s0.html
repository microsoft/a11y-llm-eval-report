<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expand/collapse widget examples - Accessibility patterns - Demo</title>
  <style>
    :root{
      color-scheme: light dark;

      --color-bg: #ffffff;
      --color-surface: #ffffff;
      --color-text: #111827;
      --color-muted-text: #374151;
      --color-border: #9ca3af;
      --color-link: #1d4ed8;
      --color-link-visited: #6d28d9;
      --color-focus: #0b5fff;
      --color-danger: #b91c1c;
      --radius: 12px;

      --space-1: 0.5rem;
      --space-2: 0.75rem;
      --space-3: 1rem;
      --space-4: 1.25rem;
      --space-5: 1.5rem;

      --shadow: 0 1px 2px rgba(0,0,0,0.08), 0 6px 16px rgba(0,0,0,0.08);
    }

    @media (prefers-color-scheme: dark) {
      :root{
        --color-bg: #0b1220;
        --color-surface: #0f172a;
        --color-text: #f9fafb;
        --color-muted-text: #e5e7eb;
        --color-border: #9ca3af;
        --color-link: #93c5fd;
        --color-link-visited: #d8b4fe;
        --color-focus: #93c5fd;
        --color-danger: #fecaca;

        --shadow: 0 1px 2px rgba(0,0,0,0.35), 0 10px 28px rgba(0,0,0,0.35);
      }
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.5;
      background: var(--color-bg);
      color: var(--color-text);
    }

    a{ color: var(--color-link); }
    a:visited{ color: var(--color-link-visited); }
    a:hover{ text-decoration-thickness: 0.14em; }
    a:focus-visible{
      outline: 3px solid var(--color-focus);
      outline-offset: 2px;
      border-radius: 6px;
    }

    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }

    header{
      padding: var(--space-4) var(--space-3);
      border-bottom: 1px solid var(--color-border);
      background: var(--color-surface);
    }

    .site-title{
      margin: 0;
      font-size: 1.125rem;
      font-weight: 700;
    }

    nav{
      padding: var(--space-2) var(--space-3);
      border-bottom: 1px solid var(--color-border);
      background: var(--color-surface);
    }

    nav ul{
      margin: 0;
      padding: 0;
      list-style: none;
      display: flex;
      gap: var(--space-3);
      flex-wrap: wrap;
    }

    main{
      padding: var(--space-4) var(--space-3);
      max-width: 72rem;
      margin: 0 auto;
    }

    h1{
      font-size: 1.75rem;
      line-height: 1.2;
      margin: 0 0 var(--space-2) 0;
    }

    p { margin: 0 0 var(--space-3) 0; color: var(--color-muted-text); }
    .lede { max-width: 60ch; }

    .grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-4);
      margin-top: var(--space-4);
    }

    @media (min-width: 50rem){
      .grid{
        grid-template-columns: 1fr 1fr;
        align-items: start;
      }
    }

    .example{
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius);
      padding: var(--space-4);
      box-shadow: var(--shadow);
      min-width: 0;
    }

    .example h2{
      margin: 0 0 var(--space-2) 0;
      font-size: 1.125rem;
      line-height: 1.3;
    }

    .example p{
      margin-bottom: var(--space-3);
    }

    /* Buttons */
    .btn{
      appearance: none;
      border: 2px solid var(--color-border);
      background: var(--color-surface);
      color: var(--color-text);
      padding: 0.6rem 0.85rem;
      border-radius: 0.75rem;
      font: inherit;
      font-weight: 650;
      width: 100%;
      text-align: left;
      display: inline-flex;
      align-items: center;
      justify-content: space-between;
      gap: var(--space-2);
      min-height: 44px;
    }
    .btn:hover{
      border-color: var(--color-text);
    }
    .btn:focus-visible{
      outline: 3px solid var(--color-focus);
      outline-offset: 2px;
    }

    .btn .label{
      min-width: 0;
      overflow-wrap: anywhere;
    }

    .chev{
      width: 1.1rem;
      height: 1.1rem;
      flex: 0 0 auto;
      color: currentColor;
    }
    .chev path{ fill: currentColor; }

    .btn[aria-expanded="true"] .chev{
      transform: rotate(180deg);
    }

    .details{
      margin-top: var(--space-3);
      padding: var(--space-3);
      border: 2px solid var(--color-border);
      border-radius: 0.75rem;
      background: var(--color-surface);
      min-width: 0;
    }

    .details > :last-child{ margin-bottom: 0; }
    .details ul{ margin: 0; padding-left: 1.25rem; }
    .details li{ margin: 0.25rem 0; color: var(--color-muted-text); overflow-wrap: anywhere; }

    .help{
      font-size: 0.95rem;
      color: var(--color-muted-text);
      margin-top: var(--space-2);
    }

    footer{
      padding: var(--space-4) var(--space-3);
      border-top: 1px solid var(--color-border);
      background: var(--color-surface);
      color: var(--color-muted-text);
    }

    @media (forced-colors: active){
      :root{
        --shadow: none;
      }
      .example, header, nav, footer{
        border: 1px solid CanvasText;
        background: Canvas;
      }
      .btn{
        border: 2px solid ButtonText;
        background: ButtonFace;
        color: ButtonText;
      }
      .details{
        border: 2px solid CanvasText;
        background: Canvas;
      }
      .btn:focus-visible, a:focus-visible{
        outline: 3px solid Highlight;
      }
    }
  </style>
</head>
<body>
  <header>
    <a href="#maincontent" class="sr-only">Skip to main content</a>
    <p class="site-title">Accessibility patterns demo</p>
  </header>

  <nav aria-label="Primary">
    <ul>
      <li><a href="#examples">Examples</a></li>
      <li><a href="#notes">Notes</a></li>
    </ul>
  </nav>

  <main id="maincontent" tabindex="-1">
    <h1>Expand/collapse widget (disclosure) examples</h1>
    <p class="lede">These examples use buttons to toggle related content regions. Each widget is wrapped in a <code>div</code> with class <code>example</code>, and each controlled content container uses the <code>details</code> class.</p>

    <section id="examples" aria-labelledby="examples-heading" class="grid">
      <h2 id="examples-heading" class="sr-only">Examples</h2>

      <div class="example">
        <h2>Example 1: “More details” panel</h2>
        <p>Use the button to show or hide supporting information.</p>

        <button type="button" class="btn" id="toggle-1" aria-expanded="false" aria-controls="panel-1">
          <span class="label">Show more details</span>
          <svg class="chev" viewBox="0 0 20 20" aria-hidden="true" focusable="false">
            <path d="M5.3 7.3a1 1 0 0 1 1.4 0L10 10.6l3.3-3.3a1 1 0 1 1 1.4 1.4l-4 4a1 1 0 0 1-1.4 0l-4-4a1 1 0 0 1 0-1.4z"></path>
          </svg>
        </button>

        <div class="details" id="panel-1" hidden>
          <p>This is the expandable content. It stays out of the tab order while hidden.</p>
          <ul>
            <li>Keyboard: Tab to the button, press Enter or Space to toggle.</li>
            <li>Assistive tech: the button exposes the expanded/collapsed state.</li>
          </ul>
        </div>

        <p class="help" id="help-1">Tip: The button label updates to reflect the current action.</p>
      </div>

      <div class="example">
        <h2>Example 2: “Shipping and returns” panel</h2>
        <p>Disclosure content can include links and other interactive controls.</p>

        <button type="button" class="btn" id="toggle-2" aria-expanded="false" aria-controls="panel-2">
          <span class="label">Show shipping and returns</span>
          <svg class="chev" viewBox="0 0 20 20" aria-hidden="true" focusable="false">
            <path d="M5.3 7.3a1 1 0 0 1 1.4 0L10 10.6l3.3-3.3a1 1 0 1 1 1.4 1.4l-4 4a1 1 0 0 1-1.4 0l-4-4a1 1 0 0 1 0-1.4z"></path>
          </svg>
        </button>

        <div class="details" id="panel-2" hidden>
          <p><strong>Shipping:</strong> Orders typically ship within 2 business days.</p>
          <p><strong>Returns:</strong> You can request a return within 30 days.</p>
          <p><a href="#notes">Read notes about this demo</a></p>
        </div>

        <p class="help">Link targets stay reachable when the panel is expanded.</p>
      </div>
    </section>

    <section id="notes" aria-labelledby="notes-heading" style="margin-top: 2rem;">
      <h2 id="notes-heading">Notes</h2>
      <p class="lede">These widgets use a <code>&lt;button&gt;</code> with <code>aria-expanded</code> and <code>aria-controls</code>. The controlled content uses the <code>hidden</code> attribute when collapsed, so it is not visible and not focusable.</p>
    </section>
  </main>

  <footer>
    <p>Demo page for an expand/collapse (disclosure) widget.</p>
  </footer>

  <script>
    (function () {
      const pairs = [
        { buttonId: 'toggle-1', panelId: 'panel-1', showText: 'Show more details', hideText: 'Hide more details' },
        { buttonId: 'toggle-2', panelId: 'panel-2', showText: 'Show shipping and returns', hideText: 'Hide shipping and returns' }
      ];

      function setExpanded(btn, panel, expanded, showText, hideText) {
        btn.setAttribute('aria-expanded', String(expanded));
        panel.hidden = !expanded;

        const label = btn.querySelector('.label');
        if (label) label.textContent = expanded ? hideText : showText;
      }

      pairs.forEach(({ buttonId, panelId, showText, hideText }) => {
        const btn = document.getElementById(buttonId);
        const panel = document.getElementById(panelId);
        if (!btn || !panel) return;

        setExpanded(btn, panel, false, showText, hideText);

        btn.addEventListener('click', () => {
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          setExpanded(btn, panel, !expanded, showText, hideText);
        });

        btn.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') {
            const expanded = btn.getAttribute('aria-expanded') === 'true';
            if (expanded) {
              e.preventDefault();
              setExpanded(btn, panel, false, showText, hideText);
              btn.focus();
            }
          }
        });
      });
    })();
  </script>
</body>
</html>