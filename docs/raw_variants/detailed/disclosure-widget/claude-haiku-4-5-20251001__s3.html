<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expand/Collapse Widget - Accessibility Demo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --color-bg: #ffffff;
      --color-text: #1a1a1a;
      --color-border: #cccccc;
      --color-focus: #0066cc;
      --color-focus-bg: #e6f2ff;
      --color-muted-text: #666666;
      --color-hover-bg: #f5f5f5;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      background-color: var(--color-bg);
      color: var(--color-text);
      line-height: 1.6;
      padding: 2rem 1rem;
    }

    header {
      margin-bottom: 2rem;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .intro {
      color: var(--color-muted-text);
      font-size: 1rem;
      margin-bottom: 2rem;
    }

    main {
      max-width: 800px;
      margin: 0 auto;
    }

    .example {
      margin-bottom: 2rem;
      border: 1px solid var(--color-border);
      border-radius: 4px;
      padding: 1rem;
      background-color: var(--color-bg);
    }

    .example h2 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      color: var(--color-text);
    }

    .example-description {
      color: var(--color-muted-text);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    /* Expand/Collapse Button Styles */
    .expand-button {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background-color: var(--color-bg);
      border: 1px solid var(--color-border);
      border-radius: 4px;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      color: var(--color-text);
      cursor: pointer;
      font-weight: 500;
      transition: background-color 0.2s ease;
    }

    .expand-button:hover {
      background-color: var(--color-hover-bg);
    }

    .expand-button:focus {
      outline: 2px solid var(--color-focus);
      outline-offset: 2px;
      background-color: var(--color-focus-bg);
    }

    .expand-button:active {
      background-color: var(--color-hover-bg);
    }

    .expand-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 1.25rem;
      height: 1.25rem;
      transition: transform 0.2s ease;
      flex-shrink: 0;
    }

    .expand-button[aria-expanded="true"] .expand-icon {
      transform: rotate(180deg);
    }

    /* Details Container Styles */
    .details {
      margin-top: 1rem;
      padding: 1rem;
      background-color: var(--color-hover-bg);
      border-left: 4px solid var(--color-focus);
      border-radius: 4px;
      display: none;
    }

    .details.visible {
      display: block;
    }

    .details p {
      margin-bottom: 0.75rem;
    }

    .details p:last-child {
      margin-bottom: 0;
    }

    .details ul {
      margin-left: 1.5rem;
      margin-bottom: 0.75rem;
    }

    .details li {
      margin-bottom: 0.5rem;
    }

    footer {
      margin-top: 3rem;
      padding-top: 2rem;
      border-top: 1px solid var(--color-border);
      color: var(--color-muted-text);
      font-size: 0.9rem;
      text-align: center;
    }

    @media (forced-colors: active) {
      .expand-button {
        border: 2px solid ButtonBorder;
        background-color: ButtonFace;
        color: ButtonText;
      }

      .expand-button:focus {
        outline: 2px solid Highlight;
        outline-offset: 2px;
      }

      .details {
        border-left-color: Highlight;
        background-color: Canvas;
      }
    }

    @media (max-width: 640px) {
      body {
        padding: 1rem;
      }

      h1 {
        font-size: 1.5rem;
      }

      .example {
        padding: 0.75rem;
      }

      .expand-button {
        width: 100%;
        justify-content: flex-start;
      }
    }
  </style>
</head>
<body>
  <header>
    <a href="#maincontent" class="sr-only">Skip to main content</a>
    <h1>Expand/Collapse Widget Demo</h1>
    <p class="intro">Accessible expand/collapse widgets with keyboard support and ARIA attributes.</p>
  </header>

  <main id="maincontent" tabindex="-1">
    <!-- Example 1: Basic Expand/Collapse -->
    <div class="example">
      <h2>Example 1: Basic Expand/Collapse</h2>
      <p class="example-description">Click the button to expand or collapse the content below.</p>
      <button class="expand-button" aria-expanded="false" aria-controls="details-1">
        <span class="expand-icon">▼</span>
        <span>Show More Information</span>
      </button>
      <div class="details" id="details-1">
        <p>This is the expanded content. It contains additional information that is hidden by default and revealed when the user clicks the expand button.</p>
        <p>The expand/collapse widget uses semantic HTML and ARIA attributes to ensure accessibility for all users, including those using assistive technologies.</p>
      </div>
    </div>

    <!-- Example 2: Multiple Sections -->
    <div class="example">
      <h2>Example 2: Multiple Expandable Sections</h2>
      <p class="example-description">Each section can be expanded or collapsed independently.</p>

      <button class="expand-button" aria-expanded="false" aria-controls="details-2a">
        <span class="expand-icon">▼</span>
        <span>Features</span>
      </button>
      <div class="details" id="details-2a">
        <ul>
          <li>Keyboard accessible (Enter and Space to toggle)</li>
          <li>ARIA attributes for screen readers</li>
          <li>Smooth transitions and visual feedback</li>
          <li>Responsive design for all screen sizes</li>
        </ul>
      </div>

      <button class="expand-button" aria-expanded="false" aria-controls="details-2b" style="margin-top: 1rem;">
        <span class="expand-icon">▼</span>
        <span>Keyboard Shortcuts</span>
      </button>
      <div class="details" id="details-2b">
        <ul>
          <li><strong>Enter or Space:</strong> Toggle expand/collapse state</li>
          <li><strong>Tab:</strong> Move focus to the next interactive element</li>
          <li><strong>Shift + Tab:</strong> Move focus to the previous interactive element</li>
        </ul>
      </div>

      <button class="expand-button" aria-expanded="false" aria-controls="details-2c" style="margin-top: 1rem;">
        <span class="expand-icon">▼</span>
        <span>Browser Support</span>
      </button>
      <div class="details" id="details-2c">
        <p>This widget is built with vanilla JavaScript and works in all modern browsers including:</p>
        <ul>
          <li>Chrome/Edge (latest)</li>
          <li>Firefox (latest)</li>
          <li>Safari (latest)</li>
          <li>Mobile browsers (iOS Safari, Chrome Mobile)</li>
        </ul>
      </div>
    </div>

    <!-- Example 3: Pre-expanded Section -->
    <div class="example">
      <h2>Example 3: Pre-expanded Section</h2>
      <p class="example-description">This section starts in an expanded state.</p>
      <button class="expand-button" aria-expanded="true" aria-controls="details-3">
        <span class="expand-icon">▼</span>
        <span>Hide Details</span>
      </button>
      <div class="details visible" id="details-3">
        <p>This content is visible by default. The expand button shows the current state with the <code>aria-expanded</code> attribute, which is set to <code>true</code> initially.</p>
        <p>Users can click the button to collapse this section if they wish to hide the content.</p>
      </div>
    </div>
  </main>

  <footer>
    <p>This demo showcases accessible expand/collapse widgets built with semantic HTML, ARIA attributes, and keyboard support.</p>
  </footer>

  <style>
    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const buttons = document.querySelectorAll('.expand-button');

      buttons.forEach(button => {
        button.addEventListener('click', function() {
          toggleExpand(this);
        });

        button.addEventListener('keydown', function(event) {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            toggleExpand(this);
          }
        });
      });

      function toggleExpand(button) {
        const isExpanded = button.getAttribute('aria-expanded') === 'true';
        const detailsId = button.getAttribute('aria-controls');
        const detailsElement = document.getElementById(detailsId);

        button.setAttribute('aria-expanded', !isExpanded);
        detailsElement.classList.toggle('visible');

        // Update button text for clarity
        const textSpan = button.querySelector('span:last-child');
        if (!isExpanded) {
          textSpan.textContent = textSpan.textContent.replace('Show', 'Hide').replace('Details', 'Details');
        } else {
          textSpan.textContent = textSpan.textContent.replace('Hide', 'Show').replace('Details', 'Details');
        }
      }
    });
  </script>
</body>
</html>