<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root {
      --color-bg: #ffffff;
      --color-text: #1a1a1a;
      --color-muted-text: #6b7280;
      --color-border: #d1d5db;
      --color-focus: #3b82f6;
      --color-heading: #111827;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: var(--color-text);
      background-color: var(--color-bg);
      margin: 0;
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
    }

    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }

    header {
      text-align: center;
      margin-bottom: 3rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--color-border);
    }

    h1 {
      color: var(--color-heading);
      margin: 0 0 0.5rem 0;
      font-size: 2rem;
    }

    main {
      display: flex;
      flex-direction: column;
      gap: 3rem;
    }

    .example {
      border: 1px solid var(--color-border);
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .example h2 {
      background-color: #f9fafb;
      color: var(--color-heading);
      margin: 0;
      padding: 1rem 1.5rem;
      font-size: 1.25rem;
      border-bottom: 1px solid var(--color-border);
    }

    .accordion {
      border: none;
    }

    .accordion-item {
      border-bottom: 1px solid var(--color-border);
    }

    .accordion-item:last-child {
      border-bottom: none;
    }

    .accordion-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 1.5rem;
      background-color: #f9fafb;
      cursor: pointer;
      width: 100%;
      text-align: left;
      border: none;
      font: inherit;
      color: inherit;
      font-size: 1rem;
      font-weight: 500;
      transition: background-color 0.2s ease;
    }

    .accordion-header:hover {
      background-color: #f3f4f6;
    }

    .accordion-header:focus {
      outline: 2px solid transparent;
      box-shadow: 0 0 0 3px var(--color-focus);
      border-radius: 4px;
    }

    .accordion-header[aria-expanded="true"] {
      background-color: #e5e7eb;
    }

    .accordion-title {
      margin: 0;
      flex: 1;
    }

    .accordion-icon {
      width: 20px;
      height: 20px;
      fill: currentColor;
      transition: transform 0.2s ease;
      margin-left: 0.75rem;
    }

    .accordion-header[aria-expanded="true"] .accordion-icon {
      transform: rotate(180deg);
    }

    .details {
      padding: 0;
      margin: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
      background-color: var(--color-bg);
    }

    .details[aria-hidden="false"] {
      max-height: 500px; /* Adjust based on content */
      padding: 1.5rem;
    }

    .details-content {
      margin: 0;
    }

    .details-content p {
      margin: 0 0 1rem 0;
      color: var(--color-text);
    }

    .details-content ul {
      margin: 0 0 1rem 1.5rem;
      padding: 0;
      color: var(--color-text);
    }

    .details-content li {
      margin-bottom: 0.5rem;
    }

    .demo-content {
      background-color: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 6px;
      padding: 1rem;
      margin: 1rem 0;
    }

    .demo-content h3 {
      color: var(--color-heading);
      margin: 0 0 0.75rem 0;
      font-size: 1.125rem;
    }

    @media (forced-colors: active) {
      .accordion-header {
        border: 1px solid ButtonBorder;
        background-color: ButtonFace;
        color: ButtonText;
      }

      .accordion-header:hover,
      .accordion-header[aria-expanded="true"] {
        background-color: Highlight;
        color: HighlightText;
      }

      .accordion-header:focus {
        border-color: ButtonBorder;
        box-shadow: 0 0 0 2px ButtonText;
      }

      .details {
        background-color: Canvas;
        color: CanvasText;
      }

      .demo-content {
        background-color: Canvas;
        color: CanvasText;
        border-color: CanvasText;
      }
    }

    @media (max-width: 320px) {
      body {
        padding: 1rem;
      }

      .example h2 {
        padding: 0.75rem 1rem;
        font-size: 1.125rem;
      }

      .accordion-header {
        padding: 0.75rem 1rem;
      }

      .details[aria-hidden="false"] {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <a href="#maincontent" class="sr-only">Skip to main content</a>
    <h1>Expand/Collapse Widget Examples</h1>
  </header>

  <main id="maincontent" tabindex="-1">
    <div class="example">
      <h2>Basic Accordion</h2>
      <div class="accordion">
        <div class="accordion-item">
          <button 
            class="accordion-header" 
            id="faq1" 
            aria-expanded="false" 
            aria-controls="panel1"
            type="button"
          >
            <span class="accordion-title">What is an accordion widget?</span>
            <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div 
            class="details" 
            id="panel1" 
            role="region" 
            aria-labelledby="faq1"
            aria-hidden="true"
            tabindex="-1"
          >
            <div class="details-content">
              <p>An accordion widget is an interactive component that organizes content into collapsible sections. Users can expand one or more sections to reveal related information while keeping the interface clean and organized.</p>
              <div class="demo-content">
                <h3>Key Features:</h3>
                <ul>
                  <li>Keyboard accessible with arrow keys and Enter/Space</li>
                  <li>Screen reader friendly with proper ARIA attributes</li>
                  <li>Smooth animations for better user experience</li>
                  <li>Works in high contrast mode</li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <button 
            class="accordion-header" 
            id="faq2" 
            aria-expanded="false" 
            aria-controls="panel2"
            type="button"
          >
            <span class="accordion-title">How does keyboard navigation work?</span>
            <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div 
            class="details" 
            id="panel2" 
            role="region" 
            aria-labelledby="faq2"
            aria-hidden="true"
            tabindex="-1"
          >
            <div class="details-content">
              <p>Users can navigate the accordion using standard keyboard controls:</p>
              <ul>
                <li><strong>Tab:</strong> Move between accordion headers and other interactive elements</li>
                <li><strong>Enter/Space:</strong> Expand or collapse the focused section</li>
                <li><strong>Escape:</strong> Close the currently expanded section</li>
                <li><strong>Arrow keys:</strong> Navigate between accordion headers (optional enhancement)</li>
              </ul>
              <p>The focus indicator is always visible and follows WCAG contrast requirements.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="example">
      <h2>Single Panel Expansion</h2>
      <p class="demo-content">This example demonstrates a single-panel accordion where only one section can be open at a time. This pattern is useful for FAQs or when content sections are mutually exclusive.</p>
      
      <div class="accordion">
        <div class="accordion-item">
          <button 
            class="accordion-header" 
            id="single1" 
            aria-expanded="true" 
            aria-controls="panel-single1"
            type="button"
          >
            <span class="accordion-title">Installation Requirements</span>
            <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div 
            class="details" 
            id="panel-single1" 
            role="region" 
            aria-labelledby="single1"
            aria-hidden="false"
            tabindex="-1"
          >
            <div class="details-content">
              <h3>System Requirements</h3>
              <ul>
                <li>Modern web browser (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)</li>
                <li>JavaScript enabled</li>
                <li>Minimum 1024×768 screen resolution</li>
                <li>Stable internet connection for initial load</li>
              </ul>
              <p>Installation typically takes less than 5 minutes and requires no special permissions beyond standard web access.</p>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <button 
            class="accordion-header" 
            id="single2" 
            aria-expanded="false" 
            aria-controls="panel-single2"
            type="button"
          >
            <span class="accordion-title">Configuration Options</span>
            <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div 
            class="details" 
            id="panel-single2" 
            role="region" 
            aria-labelledby="single2"
            aria-hidden="true"
            tabindex="-1"
          >
            <div class="details-content">
              <p>The configuration panel allows users to customize various aspects of the application:</p>
              <ul>
                <li><strong>Theme:</strong> Light, dark, or system preference</li>
                <li><strong>Language:</strong> Support for 12+ languages</li>
                <li><strong>Notifications:</strong> Email, in-app, and push notifications</li>
                <li><strong>Accessibility:</strong> High contrast mode and screen reader optimizations</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <button 
            class="accordion-header" 
            id="single3" 
            aria-expanded="false" 
            aria-controls="panel-single3"
            type="button"
          >
            <span class="accordion-title">Troubleshooting</span>
            <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div 
            class="details" 
            id="panel-single3" 
            role="region" 
            aria-labelledby="single3"
            aria-hidden="true"
            tabindex="-1"
          >
            <div class="details-content">
              <h3>Common Issues</h3>
              <p>If you encounter problems, try these solutions:</p>
              <ul>
                <li><strong>Slow loading:</strong> Clear browser cache and cookies</li>
                <li><strong>Display issues:</strong> Ensure JavaScript is enabled and try refreshing</li>
                <li><strong>Accessibility problems:</strong> Check browser zoom level (recommended: 100%)</li>
                <li><strong>Connection errors:</strong> Verify internet connection and firewall settings</li>
              </ul>
              <p>For persistent issues, contact support at <a href="mailto:support@example.com">support@example.com</a>.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="example">
      <h2>Multiple Expansion with Form Content</h2>
      <p class="demo-content">This example shows how accordion widgets work with form elements, maintaining proper labeling and focus management for accessibility.</p>
      
      <div class="accordion">
        <div class="accordion-item">
          <button 
            class="accordion-header" 
            id="form1" 
            aria-expanded="false" 
            aria-controls="panel-form1"
            type="button"
          >
            <span class="accordion-title">Personal Information</span>
            <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div 
            class="details" 
            id="panel-form1" 
            role="region" 
            aria-labelledby="form1"
            aria-hidden="true"
            tabindex="-1"
          >
            <div class="details-content">
              <form>
                <div style="margin-bottom: 1rem;">
                  <label for="firstName">First Name <span aria-hidden="true">*</span></label>
                  <input 
                    type="text" 
                    id="firstName" 
                    name="firstName" 
                    required 
                    aria-required="true"
                    style="width: 100%; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: 4px; margin-top: 0.25rem;"
                  >
                </div>
                
                <div style="margin-bottom: 1rem;">
                  <label for="lastName">Last Name <span aria-hidden="true">*</span></label>
                  <input 
                    type="text" 
                    id="lastName" 
                    name="lastName" 
                    required 
                    aria-required="true"
                    style="width: 100%; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: 4px; margin-top: 0.25rem;"
                  >
                </div>
                
                <div style="margin-bottom: 1rem;">
                  <label for="email">Email Address <span aria-hidden="true">*</span></label>
                  <input 
                    type="email" 
                    id="email" 
                    name="email" 
                    required 
                    aria-required="true"
                    style="width: 100%; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: 4px; margin-top: 0.25rem;"
                  >
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <button 
            class="accordion-header" 
            id="form2" 
            aria-expanded="false" 
            aria-controls="panel-form2"
            type="button"
          >
            <span class="accordion-title">Preferences</span>
            <svg class="accordion-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 10l5 5 5-5z"/>
            </svg>
          </button>
          <div 
            class="details" 
            id="panel-form2" 
            role="region" 
            aria-labelledby="form2"
            aria-hidden="true"
            tabindex="-1"
          >
            <div class="details-content">
              <form>
                <div style="margin-bottom: 1rem;">
                  <label>
                    <input type="checkbox" name="newsletter" id="newsletter">
                    Receive newsletter updates
                  </label>
                </div>
                
                <div style="margin-bottom: 1rem;">
                  <label for="language">Preferred Language</label>
                  <select 
                    id="language" 
                    name="language" 
                    style="width: 100%; padding: 0.5rem; border: 1px solid var(--color-border); border-radius: 4px; margin-top: 0.25rem;"
                  >
                    <option value="en">English</option>
                    <option value="es">Español</option>
                    <option value="fr">Français</option>
                    <option value="de">Deutsch</option>
                  </select>
                </div>
                
                <fieldset style="border: 1px solid var(--color-border); padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
                  <legend style="padding: 0 0.5rem;">Notification Preferences</legend>
                  <div style="margin-bottom: 0.5rem;">
                    <label>
                      <input type="radio" name="notifications" value="email" id="email-notif">
                      Email notifications
                    </label>
                  </div>
                  <div style="margin-bottom: 0.5rem;">
                    <label>
                      <input type="radio" name="notifications" value="in-app" id="in-app-notif">
                      In-app notifications
                    </label>
                  </div>
                  <div>
                    <label>
                      <input type="radio" name="notifications" value="none" id="no-notif">
                      No notifications
                    </label>
                  </div>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Basic accordion functionality
    document.querySelectorAll('.accordion-header').forEach(button => {
      button.addEventListener('click', () => {
        const expanded = button.getAttribute('aria-expanded') === 'true';
        const panel = document.getElementById(button.getAttribute('aria-controls'));
        
        // Toggle current panel
        button.setAttribute('aria-expanded', !expanded);
        panel.setAttribute('aria-hidden', expanded);
        
        // Handle single expansion mode for specific accordions
        const isSingleMode = button.closest('.example').querySelector('h2').textContent.includes('Single');
        if (isSingleMode && !expanded) {
          // Close other panels in single mode
          const accordion = button.closest('.accordion');
          accordion.querySelectorAll('.accordion-header').forEach(otherButton => {
            if (otherButton !== button) {
              const otherPanel = document.getElementById(otherButton.getAttribute('aria-controls'));
              otherButton.setAttribute('aria-expanded', 'false');
              otherPanel.setAttribute('aria-hidden', 'true');
            }
          });
        }
        
        // Focus management
        if (!expanded) {
          // When expanding, focus moves to the content
          panel.focus();
        }
      });

      // Keyboard support
      button.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          button.click();
        } else if (e.key === 'Escape') {
          const expanded = button.getAttribute('aria-expanded') === 'true';
          if (expanded) {
            button.click();
            button.focus();
          }
        }
      });
    });

    // Arrow key navigation between accordion headers (optional enhancement)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
        const activeElement = document.activeElement;
        if (activeElement.classList.contains('accordion-header')) {
          const accordion = activeElement.closest('.accordion');
          const headers = Array.from(accordion.querySelectorAll('.accordion-header'));
          const currentIndex = headers.indexOf(activeElement);
          
          let nextIndex;
          if (e.key === 'ArrowDown') {
            nextIndex = (currentIndex + 1) % headers.length;
          } else {
            nextIndex = (currentIndex - 1 + headers.length) % headers.length;
          }
          
          headers[nextIndex].focus();
          e.preventDefault();
        }
      }
    });

    // Form validation example for the form accordion
    document.querySelectorAll('input[required]').forEach(input => {
      input.addEventListener('invalid', (e) => {
        e.target.setAttribute('aria-invalid', 'true');
        // Focus would be managed by the accordion interaction
      });
      
      input.addEventListener('input', (e) => {
        if (e.target.validity.valid) {
          e.target.removeAttribute('aria-invalid');
        }
      });
    });
  </script>
</body>
</html>