<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget - Accessibility Examples</title>
    <style>
        /* Base Styles */
        * {
            box-sizing: border-box;
        }
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background-color: #ffffff;
            margin: 0;
            padding: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Skip Link */
        .sr-only:not(:focus):not(:active) {
            clip: rect(0 0 0 0);
            clip-path: inset(50%);
            height: 1px;
            overflow: hidden;
            position: absolute;
            white-space: nowrap;
            width: 1px;
        }

        /* Page Structure */
        header {
            border-bottom: 1px solid #d0d0d0;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }
        main {
            padding: 1rem 0;
        }
        footer {
            margin-top: 3rem;
            padding-top: 1rem;
            border-top: 1px solid #d0d0d0;
            font-size: 0.9rem;
            color: #666;
        }

        /* Headings */
        h1 {
            font-size: 2.5rem;
            margin-top: 0;
            color: #005a9c;
        }
        h2 {
            font-size: 1.8rem;
            margin-top: 2.5rem;
            color: #333;
        }
        h3 {
            font-size: 1.3rem;
            margin-top: 1.5rem;
            color: #555;
        }

        /* Example Container */
        .example {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2.5rem;
            overflow-wrap: anywhere;
        }
        .example > *:first-child {
            margin-top: 0;
        }
        .example > *:last-child {
            margin-bottom: 0;
        }

        /* Expand/Collapse Widget */
        .expand-collapse {
            margin: 1rem 0;
        }
        .expand-collapse__trigger {
            background-color: #005a9c;
            color: #ffffff;
            border: 2px solid transparent;
            border-radius: 4px;
            padding: 0.75rem 1.25rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            transition: background-color 0.2s ease;
            min-width: 0;
        }
        .expand-collapse__trigger:hover {
            background-color: #00467a;
        }
        .expand-collapse__trigger:focus {
            outline: 3px solid #ffbf47;
            outline-offset: 2px;
            background-color: #00467a;
        }
        .expand-collapse__trigger:active {
            background-color: #00335c;
        }
        .expand-collapse__trigger[aria-expanded="true"] .expand-collapse__icon {
            transform: rotate(180deg);
        }
        .expand-collapse__icon {
            transition: transform 0.3s ease;
            width: 1.25em;
            height: 1.25em;
            fill: currentColor;
        }
        .expand-collapse__content {
            margin-top: 1rem;
            padding: 1.5rem;
            background-color: #ffffff;
            border: 1px solid #ced4da;
            border-radius: 4px;
            overflow: hidden;
        }
        .expand-collapse__content[hidden] {
            display: none;
        }

        /* Details Container */
        .details {
            background-color: #ffffff;
            border-left: 4px solid #005a9c;
            padding: 1rem 1.5rem;
            margin: 1rem 0;
        }

        /* Forced Colors Support */
        @media (forced-colors: active) {
            .expand-collapse__trigger {
                border: 2px solid ButtonBorder;
                background-color: ButtonFace;
                color: ButtonText;
            }
            .expand-collapse__trigger:focus {
                outline: 2px solid Highlight;
                outline-offset: 1px;
            }
            .expand-collapse__content {
                border: 1px solid ButtonBorder;
            }
            .details {
                border-left: 4px solid ButtonBorder;
            }
        }

        /* Reflow / Responsive */
        @media (max-width: 320px) {
            body {
                padding: 10px;
            }
            .example {
                padding: 1rem;
            }
            .expand-collapse__trigger {
                width: 100%;
                justify-content: space-between;
            }
            .expand-collapse__content,
            .details {
                padding: 1rem;
            }
        }

        /* Color Tokens (Example) */
        :root {
            --color-bg: #ffffff;
            --color-text: #1a1a1a;
            --color-muted-text: #666;
            --color-link: #005a9c;
            --color-border: #dee2e6;
            --color-focus: #ffbf47;
            --color-primary: #005a9c;
            --color-primary-dark: #00467a;
            --color-primary-darker: #00335c;
        }
    </style>
</head>
<body>
    <a href="#maincontent" class="sr-only">Skip to main content</a>
    <header>
        <h1>Accessible Expand/Collapse Widget</h1>
        <p>Demonstrating a custom widget that meets WCAG 2.2 Level AA requirements.</p>
    </header>
    <nav aria-label="Main">
        <ul>
            <li><a href="#example1">Basic Example</a></li>
            <li><a href="#example2">Example with Details</a></li>
        </ul>
    </nav>
    <main id="maincontent" tabindex="-1">
        <section id="example1" class="example">
            <h2>Basic Expand/Collapse</h2>
            <p>This widget uses a button to control the visibility of a content section. The button's <code>aria-expanded</code> attribute and an icon indicate the state.</p>

            <div class="expand-collapse">
                <button type="button" class="expand-collapse__trigger" aria-expanded="false" aria-controls="content1">
                    Shipping Information
                    <svg class="expand-collapse__icon" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
                <div id="content1" class="expand-collapse__content" hidden>
                    <p>Standard shipping takes 5–7 business days. Express shipping (2–3 business days) is available at checkout for an additional fee. We ship to all 50 U.S. states. International shipping options and rates vary by destination.</p>
                    <p>You will receive a tracking number via email once your order has been processed and shipped.</p>
                </div>
            </div>
        </section>

        <section id="example2" class="example">
            <h2>Expand/Collapse with Controlled Content Area</h2>
            <p>This example shows the widget controlling a separate container with the <code>details</code> class, which might contain more structured information.</p>

            <div class="expand-collapse">
                <button type="button" class="expand-collapse__trigger" aria-expanded="false" aria-controls="content2">
                    Privacy Policy Summary
                    <svg class="expand-collapse__icon" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
                    </svg>
                </button>
                <div id="content2" class="details" hidden>
                    <h3>Our Commitment to Your Privacy</h3>
                    <p>We collect only the information necessary to process your orders and improve your experience.</p>
                    <ul>
                        <li><strong>Data Collection:</strong> Name, contact details, shipping address, and payment information.</li>
                        <li><strong>Data Usage:</strong> To fulfill orders, communicate updates, and personalize your experience (with your consent).</li>
                        <li><strong>Data Sharing:</strong> We do not sell your data. Information is shared only with essential service providers (e.g., shipping carriers, payment processors).</li>
                        <li><strong>Your Rights:</strong> You may access, correct, or request deletion of your personal data by contacting us.</li>
                    </ul>
                    <p>For the full policy, please visit our <a href="#">Privacy Policy page</a>.</p>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>This page is an accessibility demonstration. Manual review and testing with tools like <a href="https://accessibilityinsights.io/" target="_blank" rel="noopener">Accessibility Insights</a> is recommended.</p>
    </footer>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const triggers = document.querySelectorAll('.expand-collapse__trigger');

            triggers.forEach(trigger => {
                const contentId = trigger.getAttribute('aria-controls');
                const content = document.getElementById(contentId);

                if (!content) return;

                // Set initial state
                const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
                content.hidden = !isExpanded;

                trigger.addEventListener('click', function() {
                    const expanded = this.getAttribute('aria-expanded') === 'true';
                    this.setAttribute('aria-expanded', !expanded);
                    content.hidden = expanded;

                    // Optional: Focus management for screen readers
                    if (!expanded) {
                        // When expanding, move focus to the first focusable element inside the content?
                        // Or leave focus on the button. Here we leave it on the button for simplicity.
                        // this.focus();
                    }
                });

                // Support closing with Escape key (optional good practice)
                content.addEventListener('keydown', function(e) {
                    if (e.key === 'Escape' && !content.hidden) {
                        trigger.setAttribute('aria-expanded', 'false');
                        content.hidden = true;
                        trigger.focus();
                    }
                });
            });
        });
    </script>
</body>
</html>