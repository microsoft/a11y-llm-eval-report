<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root {
      --color-bg: #ffffff;
      --color-text: #1a1a1a;
      --color-muted-text: #6b7280;
      --color-border: #d1d5db;
      --color-focus: #3b82f6;
      --color-heading: #111827;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: var(--color-text);
      background-color: var(--color-bg);
      margin: 0;
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
    }

    .sr-only:not(:focus):not(:active) {
      clip: rect(0 0 0 0);
      clip-path: inset(50%);
      height: 1px;
      overflow: hidden;
      position: absolute;
      white-space: nowrap;
      width: 1px;
    }

    h1 {
      color: var(--color-heading);
      font-size: 2rem;
      margin-bottom: 2rem;
    }

    .example {
      margin-bottom: 3rem;
      border: 1px solid var(--color-border);
      border-radius: 8px;
      overflow: hidden;
    }

    .example h2 {
      background-color: #f9fafb;
      color: var(--color-heading);
      font-size: 1.25rem;
      margin: 0;
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--color-border);
    }

    .expandable {
      position: relative;
    }

    .expand-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      padding: 1rem 1.5rem;
      background-color: var(--color-bg);
      border: none;
      font-size: 1rem;
      font-weight: 500;
      color: var(--color-text);
      cursor: pointer;
      text-align: left;
      transition: background-color 0.2s ease;
    }

    .expand-toggle:hover {
      background-color: #f3f4f6;
    }

    .expand-toggle:focus {
      outline: 2px solid transparent;
      box-shadow: 0 0 0 3px var(--color-focus);
      border-radius: 4px;
    }

    .toggle-icon {
      width: 20px;
      height: 20px;
      fill: currentColor;
      transition: transform 0.2s ease;
      flex-shrink: 0;
    }

    .expand-toggle[aria-expanded="true"] .toggle-icon {
      transform: rotate(180deg);
    }

    .details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
      background-color: #fafbfc;
      border-top: 1px solid var(--color-border);
    }

    .details[aria-hidden="false"] {
      max-height: 500px; /* Adjust based on content */
      padding: 1rem 1.5rem;
    }

    .details p {
      margin: 0 0 1rem 0;
      color: var(--color-text);
    }

    .details ul {
      margin: 0 0 1rem 1.5rem;
      color: var(--color-text);
    }

    .details li {
      margin-bottom: 0.5rem;
    }

    .metadata {
      font-size: 0.875rem;
      color: var(--color-muted-text);
      padding: 0 1.5rem 1rem 1.5rem;
      border-top: 1px solid var(--color-border);
    }

    /* High contrast support */
    @media (forced-colors: active) {
      .expand-toggle {
        border: 1px solid ButtonBorder;
        forced-color-adjust: auto;
      }
      
      .expand-toggle:focus {
        border-color: ButtonText;
        background-color: ButtonFace;
      }
      
      .details {
        border-color: ButtonBorder;
        background-color: Canvas;
      }
      
      .toggle-icon {
        fill: CanvasText;
      }
    }

    /* Responsive adjustments */
    @media (max-width: 320px) {
      body {
        padding: 1rem;
      }
      
      .expand-toggle {
        padding: 0.75rem 1rem;
      }
      
      .details[aria-hidden="false"] {
        padding: 0.75rem 1rem;
      }
    }
  </style>
</head>
<body>
  <a href="#maincontent" class="sr-only">Skip to main content</a>
  
  <header>
    <h1>Expand/Collapse Widget Examples</h1>
  </header>

  <main id="maincontent" tabindex="-1">
    <div class="example">
      <h2>FAQ: What is responsive design?</h2>
      
      <div class="expandable">
        <button 
          class="expand-toggle" 
          id="faq-toggle-1"
          aria-expanded="false"
          aria-controls="faq-content-1"
          type="button"
        >
          <span>Learn more about responsive design</span>
          <svg class="toggle-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </button>
        
        <div 
          class="details" 
          id="faq-content-1"
          role="region"
          aria-labelledby="faq-toggle-1"
          aria-hidden="true"
          tabindex="-1"
        >
          <p>Responsive web design is an approach to web design that makes elements render well across a wide range of devices and window or screen sizes. It uses fluid grids, flexible images, and CSS media queries to create a user experience that adapts to different devices.</p>
          
          <p>Key principles include:</p>
          <ul>
            <li>Fluid grids that adapt to different screen sizes</li>
            <li>Flexible images that scale appropriately</li>
            <li>CSS media queries for device-specific styling</li>
            <li>Mobile-first approach for better performance</li>
          </ul>
        </div>
      </div>
      
      <div class="metadata">
        <p>Updated: December 15, 2023 | 2 min read</p>
      </div>
    </div>

    <div class="example">
      <h2>Settings Panel</h2>
      
      <div class="expandable">
        <button 
          class="expand-toggle" 
          id="settings-toggle-1"
          aria-expanded="false"
          aria-controls="settings-content-1"
          type="button"
        >
          <span>Display preferences</span>
          <svg class="toggle-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </button>
        
        <div 
          class="details" 
          id="settings-content-1"
          role="region"
          aria-labelledby="settings-toggle-1"
          aria-hidden="true"
          tabindex="-1"
        >
          <p>Customize your display settings:</p>
          
          <ul>
            <li><strong>Theme:</strong> Choose between light, dark, or system default</li>
            <li><strong>Font size:</strong> Adjust text size for better readability</li>
            <li><strong>Contrast:</strong> High contrast mode for accessibility</li>
            <li><strong>Animations:</strong> Reduce motion for smoother experience</li>
          </ul>
          
          <p>These settings will apply immediately and persist across sessions.</p>
        </div>
      </div>
      
      <div class="expandable">
        <button 
          class="expand-toggle" 
          id="settings-toggle-2"
          aria-expanded="true"
          aria-controls="settings-content-2"
          type="button"
        >
          <span>Notification settings</span>
          <svg class="toggle-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </button>
        
        <div 
          class="details" 
          id="settings-content-2"
          role="region"
          aria-labelledby="settings-toggle-2"
          aria-hidden="false"
          tabindex="-1"
        >
          <p>Manage your notification preferences:</p>
          
          <ul>
            <li><strong>Email notifications:</strong> Receive updates via email</li>
            <li><strong>Push notifications:</strong> Get instant alerts on your device</li>
            <li><strong>In-app alerts:</strong> See notifications within the application</li>
            <li><strong>Sound alerts:</strong> Enable audio notifications for important events</li>
          </ul>
          
          <p>You can customize which events trigger notifications for each category.</p>
        </div>
      </div>
      
      <div class="metadata">
        <p>Settings saved automatically</p>
      </div>
    </div>

    <div class="example">
      <h2>Product Features</h2>
      
      <div class="expandable">
        <button 
          class="expand-toggle" 
          id="features-toggle-1"
          aria-expanded="false"
          aria-controls="features-content-1"
          type="button"
        >
          <span>Core functionality</span>
          <svg class="toggle-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </button>
        
        <div 
          class="details" 
          id="features-content-1"
          role="region"
          aria-labelledby="features-toggle-1"
          aria-hidden="true"
          tabindex="-1"
        >
          <p>Our platform provides essential tools for modern teams:</p>
          
          <ul>
            <li>Real-time collaboration with team members</li>
            <li>Version control and history tracking</li>
            <li>Cross-platform support (web, mobile, desktop)</li>
            <li>Secure data encryption and access controls</li>
            <li>Regular updates and security patches</li>
          </ul>
        </div>
      </div>
      
      <div class="expandable">
        <button 
          class="expand-toggle" 
          id="features-toggle-2"
          aria-expanded="false"
          aria-controls="features-content-2"
          type="button"
        >
          <span>Integration capabilities</span>
          <svg class="toggle-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
        </button>
        
        <div 
          class="details" 
          id="features-content-2"
          role="region"
          aria-labelledby="features-toggle-2"
          aria-hidden="true"
          tabindex="-1"
        >
          <p>Seamlessly connect with your favorite tools:</p>
          
          <ul>
            <li>Project management: Jira, Asana, Trello</li>
            <li>Communication: Slack, Microsoft Teams, Zoom</li>
            <li>Development: GitHub, GitLab, Bitbucket</li>
            <li>Analytics: Google Analytics, Mixpanel, Amplitude</li>
            <li>Cloud storage: Google Drive, Dropbox, OneDrive</li>
          </ul>
          
          <p>Our API enables custom integrations for advanced workflows.</p>
        </div>
      </div>
      
      <div class="metadata">
        <p>Feature availability may vary by subscription plan</p>
      </div>
    </div>
  </main>

  <script>
    // Function to toggle expand/collapse state
    function initExpandable(toggleId, contentId) {
      const toggle = document.getElementById(toggleId);
      const content = document.getElementById(contentId);
      
      if (!toggle || !content) return;
      
      toggle.addEventListener('click', function(event) {
        event.preventDefault();
        
        const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
        const newExpandedState = !isExpanded;
        
        // Update ARIA attributes
        toggle.setAttribute('aria-expanded', newExpandedState);
        content.setAttribute('aria-hidden', !newExpandedState);
        
        // Focus management: when collapsing, keep focus on button
        // When expanding, focus moves to content for screen readers
        if (newExpandedState) {
          // Small delay to allow transition, then focus content
          setTimeout(() => {
            content.focus();
          }, 100);
        }
      });
      
      // Keyboard support: Enter and Space should toggle
      toggle.addEventListener('keydown', function(event) {
        if (event.key === 'Enter' || event.key === ' ') {
          event.preventDefault();
          toggle.click();
        }
      });
      
      // Escape key closes expanded content
      content.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && !content.getAttribute('aria-hidden')) {
          toggle.setAttribute('aria-expanded', 'false');
          content.setAttribute('aria-hidden', 'true');
          toggle.focus(); // Return focus to toggle
        }
      });
    }
    
    // Initialize all expandable widgets
    document.addEventListener('DOMContentLoaded', function() {
      // FAQ example
      initExpandable('faq-toggle-1', 'faq-content-1');
      
      // Settings examples
      initExpandable('settings-toggle-1', 'settings-content-1');
      initExpandable('settings-toggle-2', 'settings-content-2');
      
      // Features examples
      initExpandable('features-toggle-1', 'features-content-1');
      initExpandable('features-toggle-2', 'features-content-2');
    });
  </script>
</body>
</html>