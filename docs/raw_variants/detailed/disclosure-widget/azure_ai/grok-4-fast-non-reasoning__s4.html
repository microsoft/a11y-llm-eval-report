<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expand/Collapse Widget Examples</title>
  <style>
    :root {
      --color-bg: #ffffff;
      --color-text: #1a1a1a;
      --color-muted-text: #6b7280;
      --color-border: #d1d5db;
      --color-focus: #3b82f6;
      --color-heading: #111827;
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      line-height: 1.6;
      color: var(--color-text);
      background-color: var(--color-bg);
      margin: 0;
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
    }

    .example {
      margin-bottom: 3rem;
      border: 1px solid var(--color-border);
      border-radius: 8px;
      overflow: hidden;
    }

    .example h2 {
      margin: 0;
      padding: 1rem 1.5rem;
      background-color: #f9fafb;
      color: var(--color-heading);
      font-size: 1.25rem;
      border-bottom: 1px solid var(--color-border);
    }

    .expandable {
      position: relative;
    }

    .expandable-header {
      display: flex;
      align-items: center;
      padding: 1rem 1.5rem;
      background-color: #f9fafb;
      border-bottom: 1px solid var(--color-border);
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      outline: none;
    }

    .expandable-header:hover {
      background-color: #f3f4f6;
    }

    .expandable-header:focus {
      outline: 2px solid var(--color-focus);
      outline-offset: -2px;
      background-color: #f3f4f6;
    }

    .expandable-header[aria-expanded="true"] .icon {
      transform: rotate(180deg);
    }

    .icon {
      width: 1rem;
      height: 1rem;
      margin-left: 0.75rem;
      transition: transform 0.2s ease;
      fill: currentColor;
      flex-shrink: 0;
    }

    .details {
      padding: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease, padding 0.3s ease;
      background-color: var(--color-bg);
    }

    .details[aria-hidden="false"] {
      max-height: 1000px; /* Arbitrary large value for smooth animation */
      padding: 1.5rem;
      border-bottom: 1px solid var(--color-border);
    }

    .details[aria-hidden="false"]:last-child {
      border-bottom: none;
    }

    .content {
      margin: 0;
      color: var(--color-text);
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* High contrast support */
    @media (forced-colors: active) {
      .expandable-header {
        border: 1px solid ButtonBorder;
        background-color: ButtonFace;
        color: ButtonText;
      }

      .expandable-header:hover,
      .expandable-header:focus {
        background-color: Highlight;
        color: HighlightText;
      }

      .details[aria-hidden="false"] {
        background-color: Canvas;
        color: CanvasText;
        border-color: CanvasText;
      }

      .icon {
        fill: CanvasText;
      }
    }

    /* Focus visible for high contrast */
    @media (prefers-reduced-motion: no-preference) {
      .icon {
        transition: transform 0.2s ease;
      }

      .details {
        transition: max-height 0.3s ease, padding 0.3s ease;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .icon,
      .details {
        transition: none;
      }
    }

    /* Skip link */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 6px;
      background: var(--color-focus);
      color: white;
      padding: 8px;
      font-size: 14px;
      text-decoration: none;
      z-index: 100;
    }

    .skip-link:focus {
      top: 6px;
    }
  </style>
</head>
<body>
  <a href="#maincontent" class="skip-link">Skip to main content</a>

  <header>
    <h1>Expand/Collapse Widget Examples</h1>
  </header>

  <main id="maincontent" tabindex="-1">
    <div class="example">
      <h2>FAQ Item: What is accessibility?</h2>
      <div class="expandable" role="region" aria-labelledby="faq1">
        <button 
          class="expandable-header" 
          id="faq1"
          aria-expanded="false"
          aria-controls="content1"
          type="button"
        >
          <span>What is web accessibility?</span>
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
          <span class="sr-only">Expand</span>
        </button>
        <div class="details" id="content1" aria-hidden="true" role="region">
          <div class="content">
            <p>Web accessibility means that websites, tools, and technologies are designed and developed so that people with disabilities can use them fully. This includes people who are blind, have low vision, are deaf or hard of hearing, have cognitive or learning disabilities, or have other physical disabilities.</p>
          </div>
        </div>
      </div>
    </div>

    <div class="example">
      <h2>Product Features</h2>
      <div class="expandable" role="region" aria-labelledby="features1">
        <button 
          class="expandable-header" 
          id="features1"
          aria-expanded="true"
          aria-controls="content2"
          type="button"
        >
          <span>Security Features</span>
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
          <span class="sr-only">Collapse</span>
        </button>
        <div class="details" id="content2" aria-hidden="false" role="region">
          <div class="content">
            <ul>
              <li>End-to-end encryption for all communications</li>
              <li>Two-factor authentication support</li>
              <li>Regular security audits and updates</li>
              <li>Compliance with GDPR and other privacy regulations</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="example">
      <h2>Settings Panel</h2>
      <div class="expandable" role="region" aria-labelledby="settings1">
        <button 
          class="expandable-header" 
          id="settings1"
          aria-expanded="false"
          aria-controls="content3"
          type="button"
        >
          <span>Notification Preferences</span>
          <svg class="icon" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path d="M7 10l5 5 5-5z"/>
          </svg>
          <span class="sr-only">Expand</span>
        </button>
        <div class="details" id="content3" aria-hidden="true" role="region">
          <div class="content">
            <p>Manage your notification settings to control what updates and alerts you receive from our platform.</p>
            <ul>
              <li><label><input type="checkbox" checked> Email notifications</label></li>
              <li><label><input type="checkbox"> Push notifications</label></li>
              <li><label><input type="checkbox"> SMS alerts</label></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Initialize all expandable widgets
    document.addEventListener('DOMContentLoaded', function() {
      const expandableHeaders = document.querySelectorAll('.expandable-header');
      
      expandableHeaders.forEach(header => {
        header.addEventListener('click', toggleExpandable);
        header.addEventListener('keydown', handleKeydown);
      });

      // Set initial states based on aria-expanded
      updateExpandableStates();
    });

    function toggleExpandable(event) {
      event.preventDefault();
      const header = event.currentTarget;
      const isExpanded = header.getAttribute('aria-expanded') === 'true';
      const contentId = header.getAttribute('aria-controls');
      const content = document.getElementById(contentId);
      const iconSpan = header.querySelector('.sr-only');
      
      if (content) {
        if (isExpanded) {
          header.setAttribute('aria-expanded', 'false');
          content.setAttribute('aria-hidden', 'true');
          if (iconSpan) iconSpan.textContent = 'Expand';
        } else {
          header.setAttribute('aria-expanded', 'true');
          content.setAttribute('aria-hidden', 'false');
          if (iconSpan) iconSpan.textContent = 'Collapse';
        }
      }
    }

    function handleKeydown(event) {
      const header = event.currentTarget;
      
      switch (event.key) {
        case 'Enter':
        case ' ':
          event.preventDefault();
          toggleExpandable(event);
          break;
        case 'Escape':
          // Close if expanded
          if (header.getAttribute('aria-expanded') === 'true') {
            toggleExpandable(event);
          }
          break;
        default:
          break;
      }
    }

    function updateExpandableStates() {
      const expandableHeaders = document.querySelectorAll('.expandable-header');
      
      expandableHeaders.forEach(header => {
        const isExpanded = header.getAttribute('aria-expanded') === 'true';
        const contentId = header.getAttribute('aria-controls');
        const content = document.getElementById(contentId);
        const iconSpan = header.querySelector('.sr-only');
        
        if (content) {
          content.setAttribute('aria-hidden', (!isExpanded).toString());
          if (iconSpan) {
            iconSpan.textContent = isExpanded ? 'Collapse' : 'Expand';
          }
        }
      });
    }
  </script>
</body>
</html>