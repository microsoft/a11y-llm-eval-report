<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expand/Collapse Widget - Demonstration</title>
<style>
:root {
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-muted-text: #595959;
  --color-border: #cccccc;
  --color-focus: #0066cc;
  --color-button-bg: #f5f5f5;
  --color-button-hover: #e8e8e8;
  --color-button-active: #d9d9d9;
}

* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  line-height: 1.6;
  margin: 0;
  padding: 20px;
  background-color: var(--color-bg);
  color: var(--color-text);
  max-width: 800px;
  margin: 0 auto;
}

.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

h1 {
  font-size: 2rem;
  margin-bottom: 1.5rem;
}

h2 {
  font-size: 1.5rem;
  margin-top: 2rem;
  margin-bottom: 1rem;
}

.example {
  margin-bottom: 3rem;
  padding: 1.5rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.expand-button {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  width: 100%;
  padding: 0.75rem 1rem;
  background-color: var(--color-button-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  font-size: 1rem;
  font-weight: 500;
  color: var(--color-text);
  cursor: pointer;
  text-align: left;
  transition: background-color 0.2s;
}

.expand-button:hover {
  background-color: var(--color-button-hover);
}

.expand-button:active {
  background-color: var(--color-button-active);
}

.expand-button:focus {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.1);
}

@media (forced-colors: active) {
  .expand-button:focus {
    outline: 2px solid ButtonBorder;
  }
}

.expand-icon {
  width: 1rem;
  height: 1rem;
  transition: transform 0.2s;
  flex-shrink: 0;
}

.expand-icon svg {
  width: 100%;
  height: 100%;
  fill: currentColor;
  stroke: currentColor;
}

.expand-button[aria-expanded="true"] .expand-icon {
  transform: rotate(90deg);
}

.details {
  margin-top: 1rem;
  padding: 1rem;
  background-color: var(--color-bg);
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.details[hidden] {
  display: none;
}

.details p:first-child {
  margin-top: 0;
}

.details p:last-child {
  margin-bottom: 0;
}

@media (max-width: 320px) {
  body {
    padding: 10px;
  }
  
  .example {
    padding: 1rem;
  }
  
  .expand-button {
    padding: 0.5rem 0.75rem;
    font-size: 0.9375rem;
  }
}
</style>
</head>
<body>
<a href="#maincontent" class="sr-only">Skip to main content</a>

<header>
  <h1>Expand/Collapse Widget Examples</h1>
</header>

<main id="maincontent" tabindex="-1">
  <section>
    <h2>Basic Expand/Collapse</h2>
    
    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="details1">
        <span class="expand-icon" aria-hidden="true">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 4l4 4-4 4" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span>What is an expand/collapse widget?</span>
      </button>
      <div id="details1" class="details" hidden>
        <p>An expand/collapse widget (also known as a disclosure widget) is an interactive component that allows users to show or hide content on demand. It consists of a button that controls the visibility of associated content.</p>
        <p>This pattern is useful for progressive disclosure, helping users focus on relevant information without overwhelming them with too much content at once.</p>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="details2">
        <span class="expand-icon" aria-hidden="true">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 4l4 4-4 4" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span>How does keyboard navigation work?</span>
      </button>
      <div id="details2" class="details" hidden>
        <p>Keyboard navigation for expand/collapse widgets is straightforward:</p>
        <ul>
          <li><strong>Tab:</strong> Move focus to the button</li>
          <li><strong>Enter or Space:</strong> Toggle the expanded/collapsed state</li>
          <li><strong>Tab (when expanded):</strong> Move focus into the revealed content if it contains focusable elements</li>
        </ul>
        <p>The button uses <code>aria-expanded</code> to communicate its state to assistive technologies.</p>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="details3">
        <span class="expand-icon" aria-hidden="true">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 4l4 4-4 4" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span>What are the accessibility requirements?</span>
      </button>
      <div id="details3" class="details" hidden>
        <p>Key accessibility requirements for expand/collapse widgets include:</p>
        <ul>
          <li>Use a <code>&lt;button&gt;</code> element for the control</li>
          <li>Include <code>aria-expanded</code> to indicate state (true/false)</li>
          <li>Use <code>aria-controls</code> to associate the button with the content region</li>
          <li>Ensure the button has a visible, descriptive label</li>
          <li>Hide collapsed content with the <code>hidden</code> attribute</li>
          <li>Provide clear visual indication of the expanded/collapsed state</li>
          <li>Ensure sufficient color contrast for all states</li>
          <li>Make the focus indicator clearly visible</li>
        </ul>
      </div>
    </div>

    <div class="example">
      <button type="button" class="expand-button" aria-expanded="false" aria-controls="details4">
        <span class="expand-icon" aria-hidden="true">
          <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
            <path d="M6 4l4 4-4 4" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span>When should I use this pattern?</span>
      </button>
      <div id="details4" class="details" hidden>
        <p>The expand/collapse pattern is appropriate when:</p>
        <ul>
          <li>You have supplementary information that not all users will need</li>
          <li>You want to reduce visual clutter on a page</li>
          <li>You're creating FAQ sections or help documentation</li>
          <li>You need to present optional details or advanced settings</li>
          <li>You want to improve page scannability by hiding secondary content</li>
        </ul>
        <p>Avoid using this pattern for critical information that all users need to see, or when the majority of users will need to expand all sections.</p>
      </div>
    </div>
  </section>
</main>

<script>
(function() {
  const buttons = document.querySelectorAll('.expand-button');
  
  buttons.forEach(button => {
    button.addEventListener('click', function() {
      const expanded = this.getAttribute('aria-expanded') === 'true';
      const controlsId = this.getAttribute('aria-controls');
      const details = document.getElementById(controlsId);
      
      if (expanded) {
        this.setAttribute('aria-expanded', 'false');
        details.hidden = true;
      } else {
        this.setAttribute('aria-expanded', 'true');
        details.hidden = false;
      }
    });
  });
})();
</script>
</body>
</html>