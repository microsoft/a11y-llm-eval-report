<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expand/Collapse Widget - Demonstration</title>
<style>
:root {
  --color-bg: #ffffff;
  --color-text: #1a1a1a;
  --color-muted-text: #666666;
  --color-border: #cccccc;
  --color-focus: #0066cc;
  --color-link: #0066cc;
  --color-button-bg: #f5f5f5;
  --color-button-hover: #e8e8e8;
  --color-button-active: #d9d9d9;
}

* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  line-height: 1.6;
  color: var(--color-text);
  background: var(--color-bg);
  margin: 0;
  padding: 20px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

header {
  margin-bottom: 2rem;
}

h1 {
  margin: 0 0 0.5rem 0;
  font-size: 2rem;
}

main {
  outline: none;
}

.example {
  margin-bottom: 3rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 1.5rem;
  background: var(--color-bg);
}

.example h2 {
  margin-top: 0;
  margin-bottom: 1rem;
  font-size: 1.25rem;
}

.expand-button {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 0.75rem 1rem;
  font-size: 1rem;
  font-weight: 600;
  text-align: left;
  color: var(--color-text);
  background: var(--color-button-bg);
  border: 2px solid var(--color-border);
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.expand-button:hover {
  background: var(--color-button-hover);
}

.expand-button:active {
  background: var(--color-button-active);
}

.expand-button:focus {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(0, 102, 204, 0.1);
}

@media (forced-colors: active) {
  .expand-button:focus {
    outline: 2px solid ButtonText;
  }
}

.expand-icon {
  display: inline-block;
  width: 0;
  height: 0;
  border-left: 6px solid transparent;
  border-right: 6px solid transparent;
  border-top: 8px solid currentColor;
  margin-right: 0.75rem;
  transition: transform 0.2s;
}

.expand-button[aria-expanded="false"] .expand-icon {
  transform: rotate(-90deg);
}

.details {
  margin-top: 1rem;
  padding: 1rem;
  border: 1px solid var(--color-border);
  border-radius: 4px;
  background: var(--color-bg);
}

.details[hidden] {
  display: none;
}

.details p:first-child {
  margin-top: 0;
}

.details p:last-child {
  margin-bottom: 0;
}

.details ul {
  margin: 0.5rem 0;
  padding-left: 1.5rem;
}

.details li {
  margin-bottom: 0.5rem;
}

@media (max-width: 320px) {
  body {
    padding: 10px;
  }

  .example {
    padding: 1rem;
  }

  .expand-button {
    padding: 0.5rem 0.75rem;
    font-size: 0.9375rem;
  }

  .details {
    padding: 0.75rem;
  }
}
</style>
</head>
<body>
<header>
  <a href="#maincontent" class="sr-only">Skip to main content</a>
  <h1>Expand/Collapse Widget Examples</h1>
  <p>Demonstrating accessible expand/collapse patterns using <code>aria-expanded</code> and proper focus management.</p>
</header>

<main id="maincontent" tabindex="-1">
  <div class="example">
    <h2>Basic Expand/Collapse</h2>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="content1">
      <span class="expand-icon" aria-hidden="true"></span>
      What is an accessible expand/collapse widget?
    </button>
    <div id="content1" class="details" hidden>
      <p>An accessible expand/collapse widget is an interactive component that allows users to show or hide content on demand. It uses proper semantic HTML and ARIA attributes to ensure all users, including those using assistive technologies, can understand and operate the control.</p>
      <p>Key accessibility features include:</p>
      <ul>
        <li>A button element for the trigger control</li>
        <li>The <code>aria-expanded</code> attribute to indicate state</li>
        <li>The <code>aria-controls</code> attribute to associate the button with the controlled content</li>
        <li>Keyboard operability with visible focus indicators</li>
        <li>Clear visual indication of the expanded/collapsed state</li>
      </ul>
    </div>
  </div>

  <div class="example">
    <h2>FAQ Example</h2>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="content2">
      <span class="expand-icon" aria-hidden="true"></span>
      How do I use keyboard navigation with this widget?
    </button>
    <div id="content2" class="details" hidden>
      <p>Keyboard navigation is simple and follows standard patterns:</p>
      <ul>
        <li><strong>Tab:</strong> Move focus to the expand/collapse button</li>
        <li><strong>Enter or Space:</strong> Toggle the content visibility</li>
        <li><strong>Shift + Tab:</strong> Move focus backward</li>
      </ul>
      <p>The focus indicator (blue outline) clearly shows which element has keyboard focus. This ensures users navigating without a mouse can easily see where they are on the page.</p>
    </div>
  </div>

  <div class="example">
    <h2>Additional Information</h2>
    <button type="button" class="expand-button" aria-expanded="false" aria-controls="content3">
      <span class="expand-icon" aria-hidden="true"></span>
      Why not use the native details/summary elements?
    </button>
    <div id="content3" class="details" hidden>
      <p>The native HTML <code>&lt;details&gt;</code> and <code>&lt;summary&gt;</code> elements provide built-in expand/collapse functionality and are generally recommended when appropriate. However, there are some valid reasons to create a custom implementation:</p>
      <ul>
        <li><strong>Styling flexibility:</strong> Custom implementations offer more control over appearance and animations</li>
        <li><strong>Behavior customization:</strong> You may need specific interaction patterns not supported by the native elements</li>
        <li><strong>Browser compatibility:</strong> While well-supported now, older browsers may have issues</li>
        <li><strong>Integration requirements:</strong> Your design system or framework may require a specific pattern</li>
      </ul>
      <p>When building custom widgets, it's critical to implement proper accessibility features to match or exceed the native elements' functionality. This includes semantic HTML, ARIA attributes, keyboard support, and focus management.</p>
    </div>
  </div>

  <div class="example">
    <h2>Pre-Expanded Content</h2>
    <button type="button" class="expand-button" aria-expanded="true" aria-controls="content4">
      <span class="expand-icon" aria-hidden="true"></span>
      This section starts expanded
    </button>
    <div id="content4" class="details">
      <p>This expand/collapse widget demonstrates content that is visible by default. The button has <code>aria-expanded="true"</code> set initially, and the content does not have the <code>hidden</code> attribute.</p>
      <p>Starting with expanded content can be useful when:</p>
      <ul>
        <li>The information is critical and should be immediately visible</li>
        <li>User research shows most visitors need this content</li>
        <li>You want to draw attention to important updates or announcements</li>
      </ul>
      <p>Users can still collapse this section if they wish to hide the content.</p>
    </div>
  </div>
</main>

<script>
(function() {
  'use strict';

  function initExpandCollapse() {
    const buttons = document.querySelectorAll('.expand-button');
    
    buttons.forEach(function(button) {
      button.addEventListener('click', function() {
        const expanded = button.getAttribute('aria-expanded') === 'true';
        const contentId = button.getAttribute('aria-controls');
        const content = document.getElementById(contentId);
        
        if (!content) return;
        
        button.setAttribute('aria-expanded', !expanded);
        
        if (expanded) {
          content.hidden = true;
        } else {
          content.hidden = false;
        }
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initExpandCollapse);
  } else {
    initExpandCollapse();
  }
})();
</script>
</body>
</html>