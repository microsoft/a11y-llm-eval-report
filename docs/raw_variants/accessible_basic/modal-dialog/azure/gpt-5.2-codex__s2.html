<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Modal Dialog Example</title>
<style>
  body { font-family: Arial, sans-serif; line-height: 1.5; margin: 0; padding: 2rem; }
  .trigger { padding: 0.75rem 1rem; font-size: 1rem; }
  .overlay {
    position: fixed; inset: 0; background: rgba(0,0,0,0.6);
    display: none; align-items: center; justify-content: center;
  }
  .overlay[hidden] { display: none; }
  .dialog {
    background: #fff; max-width: 32rem; width: 90%;
    padding: 1.5rem; border-radius: 0.5rem; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
  }
  .dialog header { margin-bottom: 1rem; }
  .dialog footer { margin-top: 1rem; display: flex; gap: 0.5rem; justify-content: flex-end; }
  .close { padding: 0.5rem 0.75rem; }
  .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
</style>
</head>
<body>
<main>
  <h1>Modal Dialog Example</h1>
  <p>This is a simple example of an accessible modal dialog.</p>
  <button class="trigger" id="openModal">Open dialog</button>
</main>

<div class="overlay" id="modalOverlay" hidden>
  <div class="dialog" role="dialog" aria-modal="true" aria-labelledby="dialogTitle" aria-describedby="dialogDesc">
    <header>
      <h2 id="dialogTitle">Confirm action</h2>
    </header>
    <p id="dialogDesc">Are you sure you want to proceed with this action?</p>
    <footer>
      <button class="close" id="cancelBtn">Cancel</button>
      <button class="close" id="confirmBtn">Confirm</button>
    </footer>
  </div>
</div>

<script>
  const openBtn = document.getElementById('openModal');
  const overlay = document.getElementById('modalOverlay');
  const dialog = overlay.querySelector('.dialog');
  const cancelBtn = document.getElementById('cancelBtn');
  const confirmBtn = document.getElementById('confirmBtn');
  const focusableSelectors = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
  let lastFocused = null;

  function openModal() {
    lastFocused = document.activeElement;
    overlay.hidden = false;
    overlay.style.display = 'flex';
    const focusable = dialog.querySelectorAll(focusableSelectors);
    (focusable[0] || dialog).focus();
    document.addEventListener('keydown', trapFocus);
  }

  function closeModal() {
    overlay.hidden = true;
    overlay.style.display = 'none';
    document.removeEventListener('keydown', trapFocus);
    if (lastFocused) lastFocused.focus();
  }

  function trapFocus(e) {
    if (e.key === 'Escape') {
      e.preventDefault();
      closeModal();
      return;
    }
    if (e.key !== 'Tab') return;
    const focusable = Array.from(dialog.querySelectorAll(focusableSelectors));
    const first = focusable[0];
    const last = focusable[focusable.length - 1];
    if (e.shiftKey && document.activeElement === first) {
      e.preventDefault();
      last.focus();
    } else if (!e.shiftKey && document.activeElement === last) {
      e.preventDefault();
      first.focus();
    }
  }

  openBtn.addEventListener('click', openModal);
  cancelBtn.addEventListener('click', closeModal);
  confirmBtn.addEventListener('click', closeModal);
  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) closeModal();
  });
</script>
</body>
</html>