<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Dialog Example</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #f0f2f5;
            color: #1a1a1a;
        }

        .trigger {
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
            background-color: #0055d4;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .trigger:hover {
            background-color: #003fa3;
        }

        .trigger:focus-visible {
            outline: 3px solid #0055d4;
            outline-offset: 2px;
        }

        .modal-backdrop {
            display: none;
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-backdrop.open {
            display: flex;
        }

        .modal-dialog {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 0;
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px 0 24px;
        }

        .modal-header h2 {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1a1a1a;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border: none;
            background: #f0f2f5;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s ease;
            flex-shrink: 0;
        }

        .modal-close:hover {
            background-color: #dcdfe3;
        }

        .modal-close:focus-visible {
            outline: 3px solid #0055d4;
            outline-offset: 2px;
        }

        .modal-close svg {
            width: 18px;
            height: 18px;
            color: #555;
        }

        .modal-body {
            padding: 16px 24px;
        }

        .modal-body p {
            line-height: 1.6;
            color: #444;
            font-size: 0.95rem;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 16px 24px 24px 24px;
        }

        .btn-secondary {
            padding: 10px 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
            background-color: #e8eaed;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .btn-secondary:hover {
            background-color: #d3d5d8;
        }

        .btn-secondary:focus-visible {
            outline: 3px solid #0055d4;
            outline-offset: 2px;
        }

        .btn-primary {
            padding: 10px 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #fff;
            background-color: #0055d4;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .btn-primary:hover {
            background-color: #003fa3;
        }

        .btn-primary:focus-visible {
            outline: 3px solid #0055d4;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <button class="trigger" type="button" aria-haspopup="dialog">Open Modal</button>

    <div class="modal-backdrop" id="modal-backdrop">
        <div class="modal-dialog" role="dialog" aria-modal="true" aria-labelledby="modal-title" id="modal">
            <div class="modal-header">
                <h2 id="modal-title">Modal Title</h2>
                <button class="modal-close" type="button" aria-label="Close modal">
                    <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p>This is an accessible modal dialog component. It traps focus within the modal while open, can be closed with the Escape key, and returns focus to the trigger button when dismissed.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" type="button" id="modal-cancel">Cancel</button>
                <button class="btn-primary" type="button" id="modal-confirm">Confirm</button>
            </div>
        </div>
    </div>

    <script>
        const triggerBtn = document.querySelector('.trigger');
        const backdrop = document.getElementById('modal-backdrop');
        const modal = document.getElementById('modal');
        const closeBtn = document.querySelector('.modal-close');
        const cancelBtn = document.getElementById('modal-cancel');
        const confirmBtn = document.getElementById('modal-confirm');

        function getFocusableElements() {
            const elements = modal.querySelectorAll(
                'a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])'
            );
            return Array.from(elements);
        }

        function openModal() {
            backdrop.classList.add('open');
            document.body.style.overflow = 'hidden';
            const focusable = getFocusableElements();
            if (focusable.length > 0) {
                focusable[0].focus();
            }
        }

        function closeModal() {
            backdrop.classList.remove('open');
            document.body.style.overflow = '';
            triggerBtn.focus();
        }

        triggerBtn.addEventListener('click', openModal);
        closeBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        confirmBtn.addEventListener('click', closeModal);

        backdrop.addEventListener('click', function (e) {
            if (e.target === backdrop) {
                closeModal();
            }
        });

        document.addEventListener('keydown', function (e) {
            if (!backdrop.classList.contains('open')) return;

            if (e.key === 'Escape') {
                closeModal();
                return;
            }

            if (e.key === 'Tab') {
                const focusable = getFocusableElements();
                if (focusable.length === 0) {
                    e.preventDefault();
                    return;
                }

                const firstFocusable = focusable[0];
                const lastFocusable = focusable[focusable.length - 1];

                if (e.shiftKey) {
                    if (document.activeElement === firstFocusable) {
                        e.preventDefault();
                        lastFocusable.focus();
                    }
                } else {
                    if (document.activeElement === lastFocusable) {
                        e.preventDefault();
                        firstFocusable.focus();
                    }
                }
            }
        });
    </script>
</body>
</html>