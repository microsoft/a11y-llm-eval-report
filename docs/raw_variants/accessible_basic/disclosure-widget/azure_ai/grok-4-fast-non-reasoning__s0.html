<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.5;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .example {
            margin-bottom: 30px;
            border: 1px solid #ddd;
            border-radius: 4px;
            overflow: hidden;
        }
        .example h2 {
            margin: 0;
            padding: 15px;
            background-color: #f5f5f5;
            font-size: 1.2em;
        }
        .trigger {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: #007cba;
            color: white;
            border: none;
            cursor: pointer;
            text-align: left;
            font-size: 1em;
            font-weight: bold;
        }
        .trigger:hover,
        .trigger:focus {
            background-color: #005a87;
            outline: 2px solid #005a87;
        }
        .trigger[aria-expanded="true"] {
            background-color: #005a87;
        }
        .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            background-color: #fff;
        }
        .details[aria-hidden="false"] {
            max-height: 500px; /* Adjust based on content */
            padding: 15px;
        }
        .content {
            margin: 0;
        }
        /* Keyboard navigation support */
        .trigger:focus-visible {
            outline: 3px solid #ffd700;
            outline-offset: -3px;
        }
        /* Screen reader only text */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>
    <p>This page demonstrates accessible expand/collapse widgets using semantic HTML, ARIA attributes, and JavaScript for dynamic behavior. Each widget is keyboard accessible and follows WCAG 2.2 AA guidelines.</p>

    <div class="example">
        <h2>Example 1: Simple FAQ Item</h2>
        <button class="trigger" id="trigger1" aria-expanded="false" aria-controls="content1" aria-describedby="status1">
            What is an expand/collapse widget?
            <span class="sr-only" id="status1" aria-live="polite">Collapsed</span>
        </button>
        <div class="details" id="content1" role="region" aria-labelledby="trigger1" aria-hidden="true">
            <div class="content">
                <p>An expand/collapse widget allows users to show or hide content interactively. This pattern is commonly used for FAQs, accordions, and collapsible sections. It improves accessibility by providing clear visual and keyboard cues, and ensuring screen readers announce state changes properly.</p>
            </div>
        </div>
    </div>

    <div class="example">
        <h2>Example 2: Product Features</h2>
        <button class="trigger" id="trigger2" aria-expanded="false" aria-controls="content2" aria-describedby="status2">
            Key Features of Our Product
            <span class="sr-only" id="status2" aria-live="polite">Collapsed</span>
        </button>
        <div class="details" id="content2" role="region" aria-labelledby="trigger2" aria-hidden="true">
            <div class="content">
                <ul>
                    <li><strong>Accessibility First:</strong> Built with WCAG 2.2 AA compliance in mind, including full keyboard navigation and ARIA live regions for state announcements.</li>
                    <li><strong>Smooth Animations:</strong> CSS transitions provide visual feedback without compromising performance.</li>
                    <li><strong>Responsive Design:</strong> Works seamlessly across all device sizes and screen readers.</li>
                    <li><strong>Customizable:</strong> Easy to style and extend with your own branding and functionality.</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="example">
        <h2>Example 3: Support Information</h2>
        <button class="trigger" id="trigger3" aria-expanded="true" aria-controls="content3" aria-describedby="status3">
            How to Get Support
            <span class="sr-only" id="status3" aria-live="polite">Expanded</span>
        </button>
        <div class="details" id="content3" role="region" aria-labelledby="trigger3" aria-hidden="false">
            <div class="content">
                <p>If you need assistance, our support team is available 24/7. You can reach us via:</p>
                <ul>
                    <li>Email: support@example.com</li>
                    <li>Phone: 1-800-123-4567</li>
                    <li>Live Chat: Available on our website during business hours</li>
                </ul>
                <p>Response times are typically within 2 hours for email inquiries.</p>
            </div>
        </div>
    </div>

    <script>
        // Function to toggle expand/collapse state
        function toggleDetails(trigger, details, status) {
            const isExpanded = trigger.getAttribute('aria-expanded') === 'true';
            const newExpandedState = !isExpanded;

            // Update ARIA attributes
            trigger.setAttribute('aria-expanded', newExpandedState);
            details.setAttribute('aria-hidden', !newExpandedState);
            status.textContent = newExpandedState ? 'Expanded' : 'Collapsed';

            // Toggle class for CSS animation
            if (newExpandedState) {
                details.classList.remove('collapsed');
                details.classList.add('expanded');
            } else {
                details.classList.remove('expanded');
                details.classList.add('collapsed');
            }
        }

        // Initialize all widgets
        document.addEventListener('DOMContentLoaded', function() {
            // Example 1
            const trigger1 = document.getElementById('trigger1');
            const details1 = document.getElementById('content1');
            const status1 = document.getElementById('status1');
            
            trigger1.addEventListener('click', function() {
                toggleDetails(trigger1, details1, status1);
            });
            trigger1.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleDetails(trigger1, details1, status1);
                }
            });

            // Example 2
            const trigger2 = document.getElementById('trigger2');
            const details2 = document.getElementById('content2');
            const status2 = document.getElementById('status2');
            
            trigger2.addEventListener('click', function() {
                toggleDetails(trigger2, details2, status2);
            });
            trigger2.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleDetails(trigger2, details2, status2);
                }
            });

            // Example 3 (starts expanded)
            const trigger3 = document.getElementById('trigger3');
            const details3 = document.getElementById('content3');
            const status3 = document.getElementById('status3');
            
            // Set initial CSS state for expanded example
            details3.classList.add('expanded');
            details3.classList.remove('collapsed');
            
            trigger3.addEventListener('click', function() {
                toggleDetails(trigger3, details3, status3);
            });
            trigger3.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleDetails(trigger3, details3, status3);
                }
            });

            // Add collapsed class to all details initially (except example 3)
            [details1, details2].forEach(detail => {
                detail.classList.add('collapsed');
            });
        });
    </script>
</body>
</html>