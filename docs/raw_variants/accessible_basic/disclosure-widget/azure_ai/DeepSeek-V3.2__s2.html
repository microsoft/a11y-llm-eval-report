<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand/Collapse Widget Demo</title>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 2rem;
        }
        .example {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .example h2 {
            margin-top: 0;
            color: #34495e;
            font-size: 1.5rem;
        }
        .widget {
            margin: 1rem 0;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            text-align: left;
        }
        button:hover, button:focus {
            background-color: #2980b9;
            outline: 2px solid #2980b9;
            outline-offset: 2px;
        }
        button:focus-visible {
            outline: 2px solid #2980b9;
            outline-offset: 2px;
        }
        button .icon {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        button[aria-expanded="true"] .icon {
            transform: rotate(180deg);
        }
        .details {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-top: none;
            border-radius: 0 0 4px 4px;
            padding: 1.5rem;
            margin-top: 0;
            overflow: hidden;
        }
        .details[hidden] {
            display: none;
        }
        .details p {
            margin: 0 0 1rem 0;
        }
        .details p:last-child {
            margin-bottom: 0;
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <h1>Expand/Collapse Widget Demo</h1>

    <div class="example">
        <h2>Example 1: Basic Widget</h2>
        <div class="widget">
            <button type="button" aria-expanded="false" aria-controls="details1" id="button1">
                <span>What is an expand/collapse widget?</span>
                <span class="icon" aria-hidden="true">▼</span>
            </button>
            <div class="details" id="details1" hidden>
                <p>An expand/collapse widget (also known as an accordion or disclosure widget) is a user interface component that allows users to show or hide additional content. It is commonly used to manage space on a page and present information in a structured, digestible way.</p>
                <p>This implementation uses semantic HTML and ARIA attributes to ensure accessibility for keyboard and screen reader users.</p>
            </div>
        </div>
    </div>

    <div class="example">
        <h2>Example 2: Technical Details</h2>
        <div class="widget">
            <button type="button" aria-expanded="false" aria-controls="details2" id="button2">
                <span>Accessibility Features</span>
                <span class="icon" aria-hidden="true">▼</span>
            </button>
            <div class="details" id="details2" hidden>
                <p>This widget includes the following accessibility features:</p>
                <ul>
                    <li><strong>Keyboard Navigation:</strong> The button is focusable and can be activated using Enter or Space.</li>
                    <li><strong>ARIA Attributes:</strong> Uses <code>aria-expanded</code> to indicate state and <code>aria-controls</code> to associate the button with the content.</li>
                    <li><strong>Focus Management:</strong> Focus remains on the button after toggling content.</li>
                    <li><strong>Screen Reader Support:</strong> The button's accessible name and state are announced.</li>
                    <li><strong>Visual Focus Indicator:</strong> Clear focus outline for keyboard users.</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="example">
        <h2>Example 3: Usage Instructions</h2>
        <div class="widget">
            <button type="button" aria-expanded="false" aria-controls="details3" id="button3">
                <span>How to Use This Widget</span>
                <span class="icon" aria-hidden="true">▼</span>
            </button>
            <div class="details" id="details3" hidden>
                <p>To interact with this widget:</p>
                <ol>
                    <li><strong>Mouse Users:</strong> Click the button to expand or collapse the content.</li>
                    <li><strong>Keyboard Users:</strong> Press <kbd>Tab</kbd> to focus the button, then press <kbd>Enter</kbd> or <kbd>Space</kbd> to toggle.</li>
                    <li><strong>Screen Reader Users:</strong> The button will announce "collapsed" or "expanded" when toggled.</li>
                </ol>
                <p>The content area is properly hidden from assistive technology when collapsed using the <code>hidden</code> attribute.</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('button[aria-controls]');
            
            buttons.forEach(button => {
                const targetId = button.getAttribute('aria-controls');
                const target = document.getElementById(targetId);
                
                if (!target) return;
                
                button.addEventListener('click', function() {
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';
                    button.setAttribute('aria-expanded', !isExpanded);
                    target.hidden = isExpanded;
                });
                
                button.addEventListener('keydown', function(event) {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        button.click();
                    }
                });
            });
        });
    </script>
</body>
</html>