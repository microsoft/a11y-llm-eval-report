<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Expand/Collapse Widget Example</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            color: #333;
        }

        h1 {
            margin-bottom: 1.5rem;
        }

        .example {
            border: 1px solid #ccc;
            border-radius: 6px;
            margin-bottom: 1rem;
            background-color: #fff;
        }

        /* Button styling */
        .disclosure-btn {
            appearance: none;
            background: none;
            border: none;
            width: 100%;
            text-align: left;
            padding: 1rem;
            font-size: 1.125rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #222;
        }

        .disclosure-btn:hover {
            background-color: #f4f4f4;
        }

        .disclosure-btn:focus-visible {
            outline: 3px solid #005a9c;
            outline-offset: -3px;
            background-color: #eef;
        }

        /* Icon rotation */
        .icon {
            width: 1.5rem;
            height: 1.5rem;
            transition: transform 0.2s ease-in-out;
            fill: currentColor;
        }

        .disclosure-btn[aria-expanded="true"] .icon {
            transform: rotate(180deg);
        }

        /* Content container styling */
        .details {
            padding: 0 1rem 1rem 1rem;
            border-top: 1px solid transparent;
        }

        /* Hidden state logic */
        .details[hidden] {
            display: none;
        }

        /* Visible state styling */
        .disclosure-btn[aria-expanded="true"] + .details {
            border-top-color: #eee;
        }
    </style>
</head>
<body>

    <main>
        <h1>Expand/Collapse Widget Examples</h1>
        <p>These examples demonstrate accessible disclosure patterns using semantic HTML buttons and ARIA attributes.</p>

        <!-- Example 1: Basic Text Content -->
        <div class="example">
            <h2>
                <button type="button" class="disclosure-btn" aria-expanded="false" aria-controls="content-1" id="btn-1">
                    <span>What is the refund policy?</span>
                    <svg class="icon" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path>
                    </svg>
                </button>
            </h2>
            <div id="content-1" class="details" role="region" aria-labelledby="btn-1" hidden>
                <p>You can return any item within 30 days of purchase for a full refund. Items must be in their original condition and packaging.</p>
            </div>
        </div>

        <!-- Example 2: Complex Content -->
        <div class="example">
            <h2>
                <button type="button" class="disclosure-btn" aria-expanded="false" aria-controls="content-2" id="btn-2">
                    <span>Shipping Options</span>
                    <svg class="icon" aria-hidden="true" viewBox="0 0 24 24" focusable="false">
                        <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"></path>
                    </svg>
                </button>
            </h2>
            <div id="content-2" class="details" role="region" aria-labelledby="btn-2" hidden>
                <p>We offer the following shipping methods:</p>
                <ul>
                    <li>Standard (5-7 business days): Free</li>
                    <li>Expedited (2-3 business days): $15.00</li>
                    <li>Overnight (1 business day): $35.00</li>
                </ul>
                <p><a href="#">Learn more about international shipping</a>.</p>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const buttons = document.querySelectorAll('.disclosure-btn');

            buttons.forEach(button => {
                button.addEventListener('click', () => {
                    // Get the value of aria-expanded (string "true" or "false")
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';
                    
                    // Toggle the state
                    button.setAttribute('aria-expanded', !isExpanded);
                    
                    // Find the controlled content via aria-controls
                    const contentId = button.getAttribute('aria-controls');
                    const content = document.getElementById(contentId);
                    
                    if (content) {
                        // Toggle the hidden attribute based on the new state
                        // If it was expanded (true), we are closing it, so hidden = true
                        // If it was collapsed (false), we are opening it, so hidden = false
                        content.hidden = isExpanded;
                    }
                });
            });
        });
    </script>
</body>
</html>