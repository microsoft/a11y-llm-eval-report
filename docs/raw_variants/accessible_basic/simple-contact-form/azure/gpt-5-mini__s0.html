<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Form</title>
  <style>
    :root{
      color-scheme: light;
      --bg:#ffffff;
      --text:#0b0b0b;
      --muted:#4b5563;
      --accent:#0b63d6;
      --error:#b91c1c;
      --focus-outline: 3px solid #ffbf47;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .container{
      max-width:640px;
      margin:2rem auto;
      padding:1.5rem;
    }
    h1{
      font-size:1.5rem;
      margin:0 0 0.5rem 0;
    }
    p.lead{
      margin:0 0 1rem 0;
      color:var(--muted);
      font-size:0.95rem;
    }
    form{
      border-top:4px solid #e6eefc;
      padding-top:1rem;
    }
    .form-field{
      margin-bottom:1rem;
    }
    label{
      display:inline-block;
      font-weight:600;
      margin-bottom:0.25rem;
    }
    .required-indicator{
      color:var(--error);
      margin-left:0.25rem;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"]{
      display:block;
      width:100%;
      box-sizing:border-box;
      padding:0.6rem 0.75rem;
      border:1px solid #cbd5e1;
      border-radius:6px;
      font-size:1rem;
      color:var(--text);
      background:#fff;
      transition:box-shadow 0.12s ease, border-color 0.12s ease;
    }
    input:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(11,99,214,0.12);
    }
    .helper-text{
      display:block;
      margin-top:0.25rem;
      color:var(--muted);
      font-size:0.9rem;
    }
    .error-text{
      display:none;
      margin-top:0.25rem;
      color:var(--error);
      font-size:0.95rem;
    }
    .error-text[aria-hidden="false"]{
      display:block;
    }
    .input-error{
      border-color:var(--error);
      box-shadow:0 0 0 3px rgba(185,28,28,0.08);
    }
    button[type="submit"]{
      background:var(--accent);
      color:white;
      border:0;
      padding:0.7rem 1rem;
      font-size:1rem;
      border-radius:8px;
      cursor:pointer;
    }
    button[type="submit"]:focus{
      outline:var(--focus-outline);
      outline-offset:2px;
    }
    button[type="submit"]:hover,
    button[type="submit"]:active{
      filter:brightness(0.98);
    }
    .sr-only{
      position:absolute;
      left:-10000px;
      top:auto;
      width:1px;
      height:1px;
      overflow:hidden;
    }
    /* Ensure visible focus for links */
    a:focus{ outline:var(--focus-outline); outline-offset:2px; }
    /* Responsive */
    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; }
    }
  </style>
</head>
<body>
  <a class="sr-only" href="#main">Skip to content</a>
  <main id="main" class="container">
    <h1>Contact Us</h1>
    <p class="lead">Please provide your contact details. Fields marked with <span aria-hidden="true">*</span> are required.</p>

    <form id="contactForm" action="#" method="post" novalidate aria-describedby="formInstructions">
      <p id="formInstructions" class="sr-only">All required fields must be completed. Email must be a valid address like name@example.com. Phone is optional; preferred format is +1-555-555-5555.</p>

      <div class="form-field">
        <label for="fullName">Full Name <span class="required-indicator" aria-hidden="true">*</span></label>
        <input
          id="fullName"
          name="fullName"
          type="text"
          required
          aria-required="true"
          aria-describedby=""
          autocomplete="name"
        />
        <span id="fullNameError" class="error-text" role="alert" aria-hidden="true"></span>
      </div>

      <div class="form-field">
        <label for="emailAddress">Email Address <span class="required-indicator" aria-hidden="true">*</span></label>
        <input
          id="emailAddress"
          name="emailAddress"
          type="email"
          required
          aria-required="true"
          aria-describedby="emailHelp emailAddressError"
          autocomplete="email"
          placeholder="name@example.com"
        />
        <small id="emailHelp" class="helper-text">Enter a valid email (e.g., name@example.com).</small>
        <span id="emailAddressError" class="error-text" role="alert" aria-hidden="true"></span>
      </div>

      <div class="form-field">
        <label for="phoneNumber">Phone Number</label>
        <input
          id="phoneNumber"
          name="phoneNumber"
          type="tel"
          aria-describedby="phoneHelp phoneNumberError"
          autocomplete="tel"
          placeholder="+1-555-555-5555"
        />
        <small id="phoneHelp" class="helper-text">Preferred format: +CountryCode-XXX-XXX-XXXX (optional).</small>
        <span id="phoneNumberError" class="error-text" role="alert" aria-hidden="true"></span>
      </div>

      <div class="form-field">
        <button type="submit">Submit</button>
      </div>
    </form>
  </main>

  <script>
    (function () {
      'use strict';

      var form = document.getElementById('contactForm');
      var fullName = document.getElementById('fullName');
      var email = document.getElementById('emailAddress');
      var phone = document.getElementById('phoneNumber');

      var fullNameError = document.getElementById('fullNameError');
      var emailError = document.getElementById('emailAddressError');
      var phoneError = document.getElementById('phoneNumberError');

      // Utility to show an error for a field
      function showError(input, errorElem, message) {
        input.classList.add('input-error');
        input.setAttribute('aria-invalid', 'true');
        errorElem.textContent = message;
        errorElem.setAttribute('aria-hidden', 'false');
        // Ensure error is included in aria-describedby
        var describedBy = (input.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean);
        if (describedBy.indexOf(errorElem.id) === -1) {
          describedBy.push(errorElem.id);
          input.setAttribute('aria-describedby', describedBy.join(' '));
        }
      }

      function clearError(input, errorElem) {
        input.classList.remove('input-error');
        input.removeAttribute('aria-invalid');
        errorElem.textContent = '';
        errorElem.setAttribute('aria-hidden', 'true');
        // Remove error id from aria-describedby but keep helper ids
        var describedBy = (input.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean);
        var idx = describedBy.indexOf(errorElem.id);
        if (idx !== -1) {
          describedBy.splice(idx, 1);
          if (describedBy.length) {
            input.setAttribute('aria-describedby', describedBy.join(' '));
          } else {
            input.removeAttribute('aria-describedby');
          }
        }
      }

      // Validate a single field and return boolean valid
      function validateField(input, errorElem) {
        clearError(input, errorElem);

        if (input.hasAttribute('required') && !input.value.trim()) {
          showError(input, errorElem, (input === fullName ? 'Full name is required.' : 'This field is required.'));
          return false;
        }

        // Additional email format validation: rely on browser validity for email type
        if (input === email && input.value.trim()) {
          if (!input.checkValidity()) {
            showError(input, errorElem, 'Please enter a valid email address (e.g., name@example.com).');
            return false;
          }
        }

        // Phone is optional; do not enforce format. If you want to validate, modify here.
        return true;
      }

      function focusFirstInvalid() {
        var firstInvalid = form.querySelector('[aria-invalid="true"]');
        if (firstInvalid) {
          firstInvalid.focus();
        }
      }

      // Real-time validation: remove error as user types
      [fullName, email, phone].forEach(function (input) {
        input.addEventListener('input', function () {
          var errorElem = document.getElementById(input.id + 'Error');
          if (!errorElem) return;
          // If field currently marked invalid, re-validate live
          if (input.getAttribute('aria-invalid') === 'true') {
            validateField(input, errorElem);
          }
        });

        input.addEventListener('blur', function () {
          var errorElem = document.getElementById(input.id + 'Error');
          if (!errorElem) return;
          validateField(input, errorElem);
        });
      });

      form.addEventListener('submit', function (evt) {
        // Clear all previous errors
        [ [fullName, fullNameError], [email, emailError], [phone, phoneError] ].forEach(function(pair){
          clearError(pair[0], pair[1]);
        });

        var valid = true;
        // Validate required fields and email
        if (!validateField(fullName, fullNameError)) valid = false;
        if (!validateField(email, emailError)) valid = false;
        // Phone optional; we won't mark invalid here

        if (!valid) {
          evt.preventDefault();
          // Move keyboard focus to the first invalid field for assistive tech / keyboard users
          focusFirstInvalid();
        } else {
          // Allow submission. For demo, prevent actual navigation and show a success message.
          evt.preventDefault();
          // Clear any existing errors visually and announce success
          [fullName, email, phone].forEach(function (input) {
            var ee = document.getElementById(input.id + 'Error');
            if (ee) clearError(input, ee);
          });
          // Create a small, accessible confirmation
          var confirmation = document.createElement('div');
          confirmation.setAttribute('role', 'status');
          confirmation.setAttribute('aria-live', 'polite');
          confirmation.style.marginTop = '1rem';
          confirmation.style.padding = '0.75rem';
          confirmation.style.background = '#e6fff5';
          confirmation.style.border = '1px solid #b7f0d6';
          confirmation.style.color = '#064e2a';
          confirmation.style.borderRadius = '6px';
          confirmation.textContent = 'Thank you â€” your information has been submitted.';
          // Insert after the form and move focus to it
          form.parentNode.insertBefore(confirmation, form.nextSibling);
          confirmation.tabIndex = -1;
          confirmation.focus();
        }
      });

      // Ensure keyboard support for skip link
      var skipLink = document.querySelector('.sr-only[href="#main"]');
      if (skipLink) {
        skipLink.addEventListener('click', function (e) {
          var main = document.getElementById('main');
          if (main) {
            main.setAttribute('tabindex', '-1');
            main.focus();
            main.addEventListener('blur', function () {
              main.removeAttribute('tabindex');
            }, { once: true });
          }
        });
      }
    })();
  </script>
</body>
</html>