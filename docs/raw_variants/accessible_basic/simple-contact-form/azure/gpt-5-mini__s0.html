<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Form</title>
  <style>
    :root{
      --bg:#ffffff;
      --fg:#0b0b0b;
      --muted:#6b6b6b;
      --accent:#0a66c2;
      --error:#b00020;
      --focus-outline: 3px solid rgba(10,102,194,0.25);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--fg);
      line-height:1.4;
    }
    .container{
      max-width:700px;
      margin:2rem auto;
      padding:1.5rem;
    }
    header h1{
      margin:0 0 0.25rem 0;
      font-size:1.5rem;
    }
    header p{
      margin:0 0 1rem 0;
      color:var(--muted);
      font-size:0.95rem;
    }
    form{
      margin-top:1rem;
      display:grid;
      gap:1rem;
    }
    .form-field{
      display:flex;
      flex-direction:column;
      gap:0.25rem;
    }
    label{
      font-weight:600;
      font-size:0.95rem;
    }
    .required-indicator{
      color:var(--error);
      margin-left:0.25rem;
      font-weight:700;
    }
    .visually-hidden{
      position:absolute !important;
      height:1px; width:1px;
      overflow:hidden;
      clip:rect(1px,1px,1px,1px);
      white-space:nowrap;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"]{
      padding:0.6rem 0.7rem;
      font-size:1rem;
      border:1px solid #cfcfcf;
      border-radius:6px;
      background: white;
      color:var(--fg);
      outline:none;
      transition:box-shadow .12s, border-color .12s;
    }
    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="tel"]:focus{
      box-shadow: var(--focus-outline);
      border-color:var(--accent);
    }
    small.helper{
      color:var(--muted);
      font-size:0.9rem;
    }
    small.error{
      color:var(--error);
      font-size:0.9rem;
    }
    .error input{
      border-color:var(--error);
      box-shadow:0 0 0 3px rgba(176,0,32,0.07);
    }
    .actions{
      display:flex;
      gap:0.5rem;
      align-items:center;
    }
    button[type="submit"]{
      background:var(--accent);
      color:white;
      border:none;
      padding:0.6rem 0.9rem;
      border-radius:6px;
      font-size:1rem;
      cursor:pointer;
    }
    button[type="submit"]:focus{
      outline:var(--focus-outline);
    }
    .status{
      margin-top:0.5rem;
      font-size:0.95rem;
      color:green;
    }
    /* High contrast focus for keyboard users who rely on outlines */
    :focus{
      outline-offset:2px;
    }
    /* Ensure visible focus for links and buttons as well */
    a:focus, button:focus{
      outline:var(--focus-outline);
    }
    /* Responsive */
    @media (max-width:480px){
      .container{ padding:1rem; margin:1rem; }
      header h1{ font-size:1.25rem; }
    }
  </style>
</head>
<body>
  <a class="visually-hidden" href="#main">Skip to content</a>

  <div class="container">
    <header>
      <h1>Contact Us</h1>
      <p>Fill out the form below and we'll get back to you shortly.</p>
    </header>

    <main id="main">
      <form id="contact-form" novalidate aria-describedby="form-instructions">
        <p id="form-instructions" class="visually-hidden">All fields marked with an asterisk are required.</p>

        <div class="form-field" id="field-fullname">
          <label for="full-name">
            Full Name
            <span class="required-indicator" aria-hidden="true">*</span>
            <span class="visually-hidden">required</span>
          </label>
          <input
            type="text"
            id="full-name"
            name="full-name"
            autocomplete="name"
            required
            aria-required="true"
            aria-describedby="fullname-helper"
          />
          <small id="fullname-helper" class="helper">Enter your first and last name.</small>
        </div>

        <div class="form-field" id="field-email">
          <label for="email-address">
            Email Address
            <span class="required-indicator" aria-hidden="true">*</span>
            <span class="visually-hidden">required</span>
          </label>
          <input
            type="email"
            id="email-address"
            name="email-address"
            autocomplete="email"
            required
            aria-required="true"
            aria-describedby="email-helper"
            inputmode="email"
            placeholder="name@example.com"
          />
          <small id="email-helper" class="helper">Expected format: name@example.com</small>
        </div>

        <div class="form-field" id="field-phone">
          <label for="phone-number">
            Phone Number
            <span class="visually-hidden">optional</span>
          </label>
          <input
            type="tel"
            id="phone-number"
            name="phone-number"
            autocomplete="tel"
            aria-describedby="phone-helper"
            inputmode="tel"
            placeholder="+1 555-555-5555"
          />
          <small id="phone-helper" class="helper">Preferred format: +1 555-555-5555 or 555-555-5555</small>
        </div>

        <div class="actions">
          <button type="submit" id="submit-btn">Submit</button>
          <div id="form-status" aria-live="polite" class="status" role="status" aria-atomic="true"></div>
        </div>
      </form>
    </main>
  </div>

  <script>
    (function(){
      const form = document.getElementById('contact-form');
      const status = document.getElementById('form-status');

      // Helper IDs for aria-describedby baseline
      const helperMap = {
        'full-name': 'fullname-helper',
        'email-address': 'email-helper',
        'phone-number': 'phone-helper'
      };

      // Basic email regex (simple validation, not exhaustive)
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      function clearErrors() {
        const errorEls = form.querySelectorAll('.error-message');
        errorEls.forEach(el => el.remove());
        const fields = form.querySelectorAll('.form-field');
        fields.forEach(f => f.classList.remove('error'));
        const inputs = form.querySelectorAll('input');
        inputs.forEach(input => {
          input.removeAttribute('aria-invalid');
          const baseDesc = helperMap[input.id] ? helperMap[input.id] : '';
          if (baseDesc) {
            input.setAttribute('aria-describedby', baseDesc);
          } else {
            input.removeAttribute('aria-describedby');
          }
        });
        status.textContent = '';
      }

      function showError(input, message) {
        const fieldWrapper = document.getElementById('field-' + input.id.replace(/-/g,''));
        // Create error element
        const error = document.createElement('small');
        const errorId = input.id + '-error';
        error.className = 'error error-message';
        error.id = errorId;
        error.textContent = message;
        error.setAttribute('role', 'alert');
        // Append after helper text if present
        const helper = document.getElementById(helperMap[input.id]);
        if (helper && helper.parentNode === fieldWrapper) {
          helper.insertAdjacentElement('afterend', error);
        } else {
          input.insertAdjacentElement('afterend', error);
        }
        // Mark styles and attributes
        fieldWrapper.classList.add('error');
        input.setAttribute('aria-invalid', 'true');
        // Update aria-describedby to include helper and error
        const desc = helper ? helper.id + ' ' + errorId : errorId;
        input.setAttribute('aria-describedby', desc);
      }

      form.addEventListener('submit', function(ev){
        ev.preventDefault();
        clearErrors();

        const fullName = document.getElementById('full-name');
        const email = document.getElementById('email-address');
        const phone = document.getElementById('phone-number');

        let valid = true;
        // Full Name validation
        if (!fullName.value.trim()) {
          showError(fullName, 'Full Name is required.');
          valid = false;
        }

        // Email validation
        const emailVal = email.value.trim();
        if (!emailVal) {
          showError(email, 'Email Address is required.');
          valid = false;
        } else if (!emailRegex.test(emailVal)) {
          showError(email, 'Please enter a valid email address (for example: name@example.com).');
          valid = false;
        }

        // Phone is optional: if provided, do a light check (digits, spaces, plus, hyphens)
        const phoneVal = phone.value.trim();
        if (phoneVal) {
          const phoneRegex = /^[+\d\s\-()]{7,}$/;
          if (!phoneRegex.test(phoneVal)) {
            showError(phone, 'Phone number looks invalid. Use digits, spaces, +, or -.');
            valid = false;
          }
        }

        if (!valid) {
          // Focus the first invalid input
          const firstInvalid = form.querySelector('[aria-invalid="true"]');
          if (firstInvalid) {
            firstInvalid.focus();
          }
          status.textContent = 'Please fix the errors above and resubmit.';
          status.style.color = 'var(--error)';
          return;
        }

        // If valid, simulate submit success (no actual submit to server)
        status.style.color = 'green';
        status.textContent = 'Thank you — your message has been submitted.';
        form.reset();
        // Reset aria-describedby to helpers after clearing inputs
        Object.keys(helperMap).forEach(id => {
          const input = document.getElementById(id);
          if (input && helperMap[id]) {
            input.setAttribute('aria-describedby', helperMap[id]);
            input.removeAttribute('aria-invalid');
          }
        });
        // Move focus to status so screen reader users get immediate feedback
        status.focus?.();
      });

      // Improve keyboard accessibility: ensure status region can be focused when updated
      status.tabIndex = -1;

      // Ensure helper text remains associated if JS is disabled — done via initial aria-describedby attributes in HTML.
    })();
  </script>
</body>
</html>