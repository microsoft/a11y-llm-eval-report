<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Form</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#0b0b0b;
      --muted:#4b5563;
      --accent:#0b63d6;
      --error:#b00020;
      --focus-shadow: 0 0 0 3px rgba(11,99,214,0.2);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color-scheme: light;
    }

    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--text);
      line-height:1.4;
    }

    a.skip-link{
      position: absolute;
      left: -999px;
      top: auto;
      background: #000;
      color: #fff;
      padding: 8px 12px;
      z-index: 100;
    }
    a.skip-link:focus{
      left: 1rem;
      top: 1rem;
    }

    main{
      max-width:640px;
      margin:48px auto;
      padding:20px;
    }

    h1{
      font-size:1.5rem;
      margin:0 0 8px 0;
    }

    p.lead{
      margin:0 0 18px 0;
      color:var(--muted);
    }

    form{
      border:1px solid #e6e9ee;
      padding:18px;
      border-radius:8px;
      background:#fff;
    }

    .form-field{
      margin-bottom:16px;
    }

    label{
      display:block;
      font-weight:600;
      margin-bottom:6px;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"]{
      width:100%;
      font-size:1rem;
      padding:10px 12px;
      border:1px solid #cbd5e1;
      border-radius:6px;
      box-sizing:border-box;
      background: #fff;
      color:var(--text);
    }

    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="tel"]:focus{
      outline: none;
      box-shadow: var(--focus-shadow);
      border-color: var(--accent);
    }

    small.helper{
      display:block;
      margin-top:6px;
      color:var(--muted);
    }

    .error-message{
      margin-top:6px;
      color:var(--error);
      font-weight:600;
      display:none;
    }
    .error-message[aria-hidden="false"]{
      display:block;
    }

    .visually-hidden{
      position:absolute !important;
      height:1px; width:1px;
      overflow:hidden;
      clip:rect(1px, 1px, 1px, 1px);
      white-space:nowrap;
      border:0;
      padding:0;
      margin:-1px;
    }

    .actions{
      margin-top:10px;
      display:flex;
      gap:8px;
      align-items:center;
    }

    button[type="submit"]{
      background:var(--accent);
      color:#fff;
      border:0;
      padding:10px 14px;
      border-radius:6px;
      cursor:pointer;
      font-weight:600;
    }
    button[type="submit"]:focus{
      box-shadow: var(--focus-shadow);
      outline: none;
    }

    .status{
      margin-left:8px;
      color:var(--muted);
    }

    /* Visible required indicator but ensure text for screen readers (label includes required text) */
    .required-asterisk{
      color:var(--error);
      margin-left:4px;
      font-weight:700;
    }

    @media (prefers-reduced-motion: reduce){
      *{transition:none !important;}
    }
  </style>
</head>
<body>
  <a class="skip-link" href="#main">Skip to main content</a>
  <main id="main">
    <h1>Contact Us</h1>
    <p class="lead">Please provide your contact information. Fields marked required must be completed.</p>

    <form id="contactForm" action="#" method="post" novalidate>
      <!-- Full Name -->
      <div class="form-field">
        <label for="full-name">Full Name <span aria-hidden="true" class="required-asterisk">*</span></label>
        <input
          type="text"
          id="full-name"
          name="fullName"
          autocomplete="name"
          required
          aria-required="true"
          aria-describedby="full-name-error"
        />
        <div
          id="full-name-error"
          class="error-message"
          aria-live="polite"
          aria-hidden="true"
        ></div>
      </div>

      <!-- Email Address -->
      <div class="form-field">
        <label for="email">Email Address <span aria-hidden="true" class="required-asterisk">*</span></label>
        <input
          type="email"
          id="email"
          name="email"
          autocomplete="email"
          required
          aria-required="true"
          aria-describedby="email-help email-error"
        />
        <small id="email-help" class="helper">Enter an email like name@example.com. We will use this to contact you.</small>
        <div
          id="email-error"
          class="error-message"
          aria-live="polite"
          aria-hidden="true"
        ></div>
      </div>

      <!-- Phone Number -->
      <div class="form-field">
        <label for="phone">Phone Number <span class="visually-hidden">(optional)</span></label>
        <input
          type="tel"
          id="phone"
          name="phone"
          autocomplete="tel"
          pattern="^\+?[0-9\s\-\(\)]{7,}$"
          title="Preferred formats: +1 555-555-5555 or 555-555-5555"
          aria-describedby="phone-help phone-error"
        />
        <small id="phone-help" class="helper">Optional. Preferred formats: +1 555-555-5555 or 555-555-5555.</small>
        <div
          id="phone-error"
          class="error-message"
          aria-live="polite"
          aria-hidden="true"
        ></div>
      </div>

      <div class="actions">
        <button type="submit">Submit</button>
        <div id="form-status" class="status" role="status" aria-live="polite"></div>
      </div>
    </form>
  </main>

  <script>
    (function () {
      const form = document.getElementById('contactForm');
      const status = document.getElementById('form-status');

      // Map input id to friendly names for messages
      const fields = {
        'full-name': {
          el: document.getElementById('full-name'),
          errorEl: document.getElementById('full-name-error'),
          name: 'Full Name'
        },
        'email': {
          el: document.getElementById('email'),
          errorEl: document.getElementById('email-error'),
          name: 'Email Address'
        },
        'phone': {
          el: document.getElementById('phone'),
          errorEl: document.getElementById('phone-error'),
          name: 'Phone Number'
        }
      };

      function showError(fieldKey, message) {
        const f = fields[fieldKey];
        if (!f) return;
        f.errorEl.textContent = message;
        f.errorEl.setAttribute('aria-hidden', 'false');
        f.el.setAttribute('aria-invalid', 'true');

        // Ensure the input's aria-describedby includes the error id
        const describedBy = (f.el.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean);
        if (!describedBy.includes(f.errorEl.id)) {
          describedBy.push(f.errorEl.id);
          f.el.setAttribute('aria-describedby', describedBy.join(' '));
        }
      }

      function clearError(fieldKey) {
        const f = fields[fieldKey];
        if (!f) return;
        f.errorEl.textContent = '';
        f.errorEl.setAttribute('aria-hidden', 'true');
        f.el.removeAttribute('aria-invalid');

        // Remove error id from aria-describedby but keep helper ids
        const helperIds = (f.el.getAttribute('aria-describedby') || '').split(/\s+/).filter(Boolean);
        const filtered = helperIds.filter(id => id !== f.errorEl.id);
        if (filtered.length) {
          f.el.setAttribute('aria-describedby', filtered.join(' '));
        } else {
          f.el.removeAttribute('aria-describedby');
        }
      }

      function getMessageForValidity(fKey) {
        const f = fields[fKey];
        const input = f.el;
        if (input.validity.valueMissing) {
          return `${f.name} is required.`;
        }
        if (input.validity.typeMismatch) {
          if (input.type === 'email') {
            return 'Please enter a valid email address, for example name@example.com.';
          }
        }
        if (input.validity.patternMismatch) {
          if (input.type === 'tel') {
            return 'Please use the preferred phone format, for example +1 555-555-5555 or 555-555-5555.';
          }
        }
        // Generic fallback
        return 'Please enter a valid value.';
      }

      function validateField(fKey) {
        const f = fields[fKey];
        if (!f) return true;
        // Use HTML5 validity API
        if (!f.el.checkValidity()) {
          showError(fKey, getMessageForValidity(fKey));
          return false;
        } else {
          clearError(fKey);
          return true;
        }
      }

      // Attach input handlers to clear errors when user types
      Object.keys(fields).forEach(key => {
        const f = fields[key];
        f.el.addEventListener('input', () => {
          // Validate live but don't force error display on optional empty fields
          if (f.el.value === '') {
            clearError(key);
            return;
          }
          validateField(key);
        });

        f.el.addEventListener('blur', () => {
          validateField(key);
        });
      });

      form.addEventListener('submit', function (e) {
        status.textContent = '';
        let valid = true;

        // Validate all fields
        Object.keys(fields).forEach(key => {
          const isFieldValid = validateField(key);
          if (!isFieldValid && valid) {
            // focus the first invalid field
            fields[key].el.focus();
            valid = false;
          }
        });

        if (!valid) {
          e.preventDefault();
          status.textContent = 'Please fix the errors above and try again.';
          return;
        }

        // For demonstration: prevent actual submission and show success
        e.preventDefault();
        // Clear any previous errors
        Object.keys(fields).forEach(clearError);

        status.textContent = 'Thank you â€” your information has been received.';
        form.reset();
        // Move focus to status so screen reader announces success
        status.focus && status.focus();
      });

      // Make status region focusable for screen readers to announce changes
      status.tabIndex = -1;
    })();
  </script>
</body>
</html>