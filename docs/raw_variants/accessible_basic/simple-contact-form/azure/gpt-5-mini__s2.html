<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Form</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#0b0b0b;
      --muted:#4b5563;
      --accent:#0b5ed7;
      --error:#b00020;
      --focus: 3px solid #ffd54f;
      --radius:6px;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{
      height:100%;
      margin:0;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .page{
      max-width:720px;
      margin:2.5rem auto;
      padding:1rem;
    }
    header h1{
      font-size:1.5rem;
      margin:0 0 0.25rem 0;
    }
    p.lead{
      margin:0 0 1rem 0;
      color:var(--muted);
    }
    form{
      background:#f7fafc;
      border:1px solid #e6edf3;
      padding:1rem;
      border-radius:var(--radius);
    }
    .form-field{
      margin-bottom:1rem;
    }
    label{
      display:block;
      font-weight:600;
      margin-bottom:0.25rem;
    }
    .required-indicator{
      color:var(--error);
      margin-left:0.25rem;
      font-weight:700;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"]{
      width:100%;
      box-sizing:border-box;
      padding:0.6rem 0.75rem;
      border:1px solid #cbd5e1;
      border-radius:6px;
      font-size:1rem;
      color:var(--text);
      background:#fff;
    }
    input:focus{
      outline: none;
      box-shadow: 0 0 0 4px rgba(11,94,215,0.08);
      border-color:var(--accent);
    }
    .helper-text{
      margin-top:0.25rem;
      color:var(--muted);
      font-size:0.9rem;
    }
    .helper-text code {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", "Courier New", monospace;
      background:#fff;
      padding:0 0.25rem;
      border-radius:4px;
      border:1px solid #e6edf3;
    }
    .error-message{
      margin-top:0.25rem;
      color:var(--error);
      font-size:0.95rem;
    }
    .visually-hidden{
      position:absolute !important;
      height:1px; width:1px;
      overflow:hidden;
      clip:rect(1px,1px,1px,1px);
      white-space:nowrap;
      border:0;
      padding:0;
      margin:-1px;
    }
    .actions{
      display:flex;
      gap:0.5rem;
      align-items:center;
      margin-top:1rem;
    }
    button[type="submit"]{
      background:var(--accent);
      color:#fff;
      border:0;
      padding:0.65rem 0.9rem;
      border-radius:6px;
      font-weight:600;
      cursor:pointer;
    }
    button[type="submit"]:focus{
      box-shadow:var(--focus);
      outline:none;
    }
    button[type="submit"]:hover{
      background:#084bb0;
    }
    .status{
      margin-top:1rem;
      padding:0.75rem 0.9rem;
      border-radius:6px;
      background:#e6ffed;
      border:1px solid #b7f0c6;
      color:#064e2a;
    }
    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; }
    }
  </style>
</head>
<body>
  <a class="visually-hidden" href="#main" id="skip-link">Skip to content</a>
  <main id="main" class="page" lang="en">
    <header>
      <h1>Contact Us</h1>
      <p class="lead">Please provide your contact details. Fields marked with an asterisk are required.</p>
    </header>

    <form id="contact-form" action="#" method="post" novalidate>
      <div class="form-field">
        <label for="full-name">Full Name <span class="required-indicator" aria-hidden="true">*</span></label>
        <input
          type="text"
          id="full-name"
          name="fullName"
          required
          aria-required="true"
          aria-describedby=""
          autocomplete="name"
          />
        <span id="full-name-error" class="error-message" role="alert" aria-live="assertive"></span>
      </div>

      <div class="form-field">
        <label for="email">Email Address <span class="required-indicator" aria-hidden="true">*</span></label>
        <input
          type="email"
          id="email"
          name="email"
          required
          aria-required="true"
          aria-describedby="email-help"
          autocomplete="email"
          />
        <div id="email-help" class="helper-text">Expected format: <code>name@example.com</code></div>
        <span id="email-error" class="error-message" role="alert" aria-live="assertive"></span>
      </div>

      <div class="form-field">
        <label for="phone">Phone Number <span class="visually-hidden">(optional)</span></label>
        <input
          type="tel"
          id="phone"
          name="phone"
          inputmode="tel"
          aria-describedby="phone-help"
          pattern="^[0-9()+\-\s]{7,}$"
          />
        <div id="phone-help" class="helper-text">Preferred format: <code>+1 (555) 555-0123</code> — digits, spaces, parentheses, plus, and dashes are accepted.</div>
        <span id="phone-error" class="error-message" role="alert" aria-live="assertive"></span>
      </div>

      <div class="actions">
        <button type="submit" id="submit-btn">Submit</button>
      </div>

      <div id="form-status" class="status" role="status" aria-live="polite" hidden tabindex="-1"></div>
    </form>
  </main>

  <script>
    (function () {
      const form = document.getElementById('contact-form');
      const fullName = document.getElementById('full-name');
      const email = document.getElementById('email');
      const phone = document.getElementById('phone');

      const fullNameError = document.getElementById('full-name-error');
      const emailError = document.getElementById('email-error');
      const phoneError = document.getElementById('phone-error');

      const emailHelp = document.getElementById('email-help');
      const phoneHelp = document.getElementById('phone-help');

      const statusBox = document.getElementById('form-status');

      // Utility: clear previous error state
      function clearErrors() {
        [fullName, email, phone].forEach(input => {
          input.removeAttribute('aria-invalid');
          // Remove error id from aria-describedby if present and no error text
          const errEl = document.getElementById(input.id + '-error');
          if (errEl && !errEl.textContent.trim()) {
            // rebuild describedby to include helper only if exists
            const helperId = (input === email ? 'email-help' : input === phone ? 'phone-help' : '');
            if (helperId) {
              input.setAttribute('aria-describedby', helperId);
            } else {
              input.removeAttribute('aria-describedby');
            }
          }
        });
        fullNameError.textContent = '';
        emailError.textContent = '';
        phoneError.textContent = '';
        statusBox.hidden = true;
        statusBox.textContent = '';
      }

      // Place error text in element and update aria attributes
      function setFieldError(input, errorEl, message) {
        errorEl.textContent = message;
        input.setAttribute('aria-invalid', 'true');

        // Ensure aria-describedby includes both helper (if present) and error
        const ids = [];
        if (input === email) ids.push('email-help');
        if (input === phone) ids.push('phone-help');
        ids.push(errorEl.id);
        input.setAttribute('aria-describedby', ids.join(' '));
      }

      // Validate a single field and return boolean ok
      function validateFields() {
        clearErrors();
        let valid = true;
        // Full name
        if (!fullName.value.trim()) {
          setFieldError(fullName, fullNameError, 'Full name is required.');
          valid = false;
        }

        // Email
        const emailValue = email.value.trim();
        if (!emailValue) {
          setFieldError(email, emailError, 'Email address is required.');
          valid = false;
        } else {
          // Basic email validity via built-in constraint validation
          if (!email.checkValidity()) {
            setFieldError(email, emailError, 'Please enter a valid email address (for example, name@example.com).');
            valid = false;
          }
        }

        // Phone (optional). If supplied, enforce pattern (pattern allows digits, spaces, parentheses, plus, dashes).
        const phoneValue = phone.value.trim();
        if (phoneValue) {
          if (!phone.checkValidity()) {
            setFieldError(phone, phoneError, 'Phone number format is not recognized. Preferred: +1 (555) 555-0123.');
            valid = false;
          }
        }

        return valid;
      }

      // Manage focus to first invalid field
      function focusFirstInvalid() {
        const firstInvalid = form.querySelector('[aria-invalid="true"]');
        if (firstInvalid) {
          firstInvalid.focus();
        }
      }

      // On submit handle validation and give feedback
      form.addEventListener('submit', function (e) {
        e.preventDefault();

        const ok = validateFields();

        if (!ok) {
          // Move focus to the first invalid field.
          focusFirstInvalid();
          return;
        }

        // Successful submission (emulated)
        statusBox.hidden = false;
        statusBox.textContent = 'Thank you — your contact information was submitted.';
        // Clear inputs for this demo
        form.reset();
        // Reset aria-describedby to include helper descriptions again
        email.setAttribute('aria-describedby', 'email-help');
        phone.setAttribute('aria-describedby', 'phone-help');
        // Remove aria-invalid attributes if any
        [fullName, email, phone].forEach(i => i.removeAttribute('aria-invalid'));

        // Move keyboard focus to status message so screen reader users are informed
        statusBox.focus();
      });

      // Live validation as user types: remove error when corrected
      [fullName, email, phone].forEach(input => {
        input.addEventListener('input', () => {
          const errEl = document.getElementById(input.id + '-error');
          if (!errEl) return;
          // If there is existing error and input becomes valid, clear it
          if (errEl.textContent) {
            // Re-run minimal checks for that field
            let hasError = false;
            if (input === fullName) {
              if (!input.value.trim()) hasError = true;
            } else if (input === email) {
              if (!input.value.trim() || !input.checkValidity()) hasError = true;
            } else if (input === phone) {
              if (input.value.trim() && !input.checkValidity()) hasError = true;
            }
            if (!hasError) {
              errEl.textContent = '';
              input.removeAttribute('aria-invalid');
              // Restore aria-describedby to include helper if present
              if (input === email) input.setAttribute('aria-describedby', 'email-help');
              if (input === phone) input.setAttribute('aria-describedby', 'phone-help');
            }
          }
        });
      });

      // Allow Enter to trigger submit when focus is inside any input (native behavior)
      // No additional handling necessary.

      // Accessibility: move skip link into view when focused
      const skipLink = document.getElementById('skip-link');
      skipLink.addEventListener('focus', function () {
        skipLink.classList.remove('visually-hidden');
      });
      skipLink.addEventListener('blur', function () {
        skipLink.classList.add('visually-hidden');
      });

      // Initialize aria-describedby for inputs that have helper text
      email.setAttribute('aria-describedby', 'email-help');
      phone.setAttribute('aria-describedby', 'phone-help');
    })();
  </script>
</body>
</html>