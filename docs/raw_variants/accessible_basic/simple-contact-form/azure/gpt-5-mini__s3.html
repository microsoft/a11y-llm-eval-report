<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Contact Form</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#0b0b0b;
      --muted:#444;
      --accent:#005f73;
      --error:#b00020;
      --focus-outline: 3px solid #ffd54f;
      --radius:6px;
    }
    html,body{
      height:100%;
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .container{
      max-width:640px;
      margin:2.5rem auto;
      padding:1.25rem;
    }
    header h1{
      font-size:1.5rem;
      margin:0 0 .25rem 0;
    }
    p.lead{
      margin:0 0 1rem 0;
      color:var(--muted);
    }
    form{
      background:#f7f9fa;
      padding:1rem;
      border-radius:var(--radius);
      border:1px solid #e6eef0;
    }
    .form-field{
      margin-bottom:1rem;
      display:flex;
      flex-direction:column;
    }
    label{
      font-weight:600;
      margin-bottom:.35rem;
    }
    .required-indicator{
      color:var(--error);
      margin-left:.25rem;
      font-weight:700;
    }
    input[type="text"],
    input[type="email"],
    input[type="tel"]{
      padding:.6rem .75rem;
      border-radius:6px;
      border:1px solid #cfd8dc;
      background:white;
      font-size:1rem;
      color:var(--text);
      outline:none;
      transition:box-shadow .08s ease, border-color .08s ease;
    }
    input:focus{
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(0,95,115,0.08);
    }
    .helper-text{
      margin-top:.35rem;
      font-size:.875rem;
      color:var(--muted);
    }
    .error-message{
      margin-top:.35rem;
      font-size:.875rem;
      color:var(--error);
      display:none;
    }
    .error-message[aria-hidden="false"]{
      display:block;
    }
    button[type="submit"]{
      background:var(--accent);
      color:white;
      border:0;
      padding:.6rem .9rem;
      border-radius:6px;
      font-size:1rem;
      cursor:pointer;
    }
    button[type="submit"]:focus{
      outline:var(--focus-outline);
      outline-offset:3px;
    }
    .sr-only{
      position:absolute!important;
      height:1px;width:1px;
      overflow:hidden;
      clip:rect(1px,1px,1px,1px);
      white-space:nowrap;
    }
    .success{
      margin-top:1rem;
      padding:.75rem;
      border-radius:6px;
      background:#e6fffb;
      border:1px solid #b7f0e6;
      color:#064e46;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Contact Us</h1>
      <p class="lead">Please provide your contact details and we'll get back to you.</p>
    </header>

    <main>
      <form id="contact-form" novalidate>
        <div class="form-field">
          <label for="full-name">Full Name
            <span class="required-indicator" aria-hidden="true">*</span>
          </label>
          <input
            id="full-name"
            name="full-name"
            type="text"
            required
            aria-required="true"
            aria-describedby="full-name-help"
            autocomplete="name"
          />
          <small id="full-name-help" class="helper-text">Enter your first and last name.</small>
          <small id="full-name-error" class="error-message" role="alert" aria-hidden="true"></small>
        </div>

        <div class="form-field">
          <label for="email-address">Email Address
            <span class="required-indicator" aria-hidden="true">*</span>
          </label>
          <input
            id="email-address"
            name="email-address"
            type="email"
            required
            aria-required="true"
            aria-describedby="email-help"
            autocomplete="email"
          />
          <small id="email-help" class="helper-text">Expected format: name@example.com</small>
          <small id="email-error" class="error-message" role="alert" aria-hidden="true"></small>
        </div>

        <div class="form-field">
          <label for="phone-number">Phone Number
            <span class="sr-only">optional</span>
          </label>
          <input
            id="phone-number"
            name="phone-number"
            type="tel"
            inputmode="tel"
            aria-describedby="phone-help"
            autocomplete="tel"
            placeholder="+1 555-555-5555"
          />
          <small id="phone-help" class="helper-text">Preferred formats: +1 555-555-5555 or (555) 555-5555</small>
          <small id="phone-error" class="error-message" role="alert" aria-hidden="true"></small>
        </div>

        <div>
          <button type="submit" id="submit-button">Submit</button>
        </div>

        <div id="form-feedback" aria-live="polite"></div>
      </form>
    </main>
  </div>

  <script>
    (function(){
      var form = document.getElementById('contact-form');
      var feedback = document.getElementById('form-feedback');

      // Map inputs to their helpers/error elements
      var fields = [
        {
          input: document.getElementById('full-name'),
          helpId: 'full-name-help',
          errorEl: document.getElementById('full-name-error'),
          name: 'Full Name',
          requiredMessage: 'Please enter your full name.'
        },
        {
          input: document.getElementById('email-address'),
          helpId: 'email-help',
          errorEl: document.getElementById('email-error'),
          name: 'Email Address',
          requiredMessage: 'Please enter your email address.',
          typeMismatchMessage: 'Please enter a valid email address (for example: name@example.com).'
        },
        {
          input: document.getElementById('phone-number'),
          helpId: 'phone-help',
          errorEl: document.getElementById('phone-error'),
          name: 'Phone Number'
          // optional, no validation messages by default
        }
      ];

      // Ensure initial aria-describedby references only the helpers
      fields.forEach(function(f){
        var describedBy = f.helpId || '';
        if(describedBy){
          f.input.setAttribute('aria-describedby', describedBy);
        }
      });

      function clearErrors(){
        fields.forEach(function(f){
          f.input.removeAttribute('aria-invalid');
          f.errorEl.textContent = '';
          f.errorEl.setAttribute('aria-hidden','true');
          // restore aria-describedby to only helper
          if(f.helpId){
            f.input.setAttribute('aria-describedby', f.helpId);
          } else {
            f.input.removeAttribute('aria-describedby');
          }
        });
        feedback.textContent = '';
      }

      function showError(f, message){
        f.errorEl.textContent = message;
        f.errorEl.setAttribute('aria-hidden','false');
        f.input.setAttribute('aria-invalid','true');
        // Ensure aria-describedby includes both helper and error
        var described = f.input.getAttribute('aria-describedby') || '';
        var ids = (described + ' ' + f.errorEl.id).trim().split(/\s+/).filter(Boolean);
        f.input.setAttribute('aria-describedby', ids.join(' '));
      }

      form.addEventListener('submit', function(event){
        event.preventDefault();
        clearErrors();

        var firstInvalid = null;
        fields.forEach(function(f){
          var input = f.input;
          // Use built-in validity where appropriate
          if (input.required && !input.value.trim()){
            if(!firstInvalid) firstInvalid = input;
            showError(f, f.requiredMessage || (f.name + ' is required.'));
            return;
          }
          // If email type, check typeMismatch
          if(input.type === 'email' && input.value.trim()){
            // Use browser validity check for typeMismatch
            if(input.validity && input.validity.typeMismatch){
              if(!firstInvalid) firstInvalid = input;
              showError(f, f.typeMismatchMessage || 'Please provide a valid email address.');
              return;
            }
          }
          // For other fields, no custom validation; phone is optional
        });

        if(firstInvalid){
          // Focus the first invalid field for keyboard and screen reader users
          firstInvalid.focus();
          firstInvalid.scrollIntoView({behavior:'smooth', block:'center'});
          // Announce at top feedback (redundant but helpful)
          feedback.textContent = 'There are errors in the form. Please correct the highlighted fields.';
          return;
        }

        // If everything is valid, show a success status
        feedback.innerHTML = '';
        var success = document.createElement('div');
        success.className = 'success';
        success.setAttribute('role','status');
        success.setAttribute('tabindex','-1');
        success.textContent = 'Thank you! Your contact information has been submitted.';
        feedback.appendChild(success);
        // Move focus to the success message so screen readers announce it
        setTimeout(function(){
          success.focus();
        }, 10);

        // For demonstration we do not actually submit to a server.
        // If you intended to submit to a server, remove event.preventDefault() above
        // and let the form submit, or perform an AJAX request here.
      });

      // Improve keyboard users' visibility by ensuring focus styles are present when using keyboard
      (function(){
        var keyboardMode = false;
        window.addEventListener('keydown', function(e){
          if(e.key === 'Tab' || e.keyCode === 9){
            keyboardMode = true;
            document.documentElement.classList.add('kbd');
          }
        });
        window.addEventListener('mousedown', function(){
          keyboardMode = false;
          document.documentElement.classList.remove('kbd');
        });
      })();

    })();
  </script>
</body>
</html>